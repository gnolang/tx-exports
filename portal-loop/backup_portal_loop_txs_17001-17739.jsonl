{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","to_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","amount":"1000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Qg0qeTKOZCtxt3SYcwws9gIgf9EdulRfhcCeYa1mcfCCpynY3Qof2tctuQJ0YwdA73ckJC+5tosyt8Se54xcDA=="}],"memo":""},"metadata":{"timestamp":"1743755182"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KEh1CNIKget+9RJs7jwY0v+su73iInpdjp3/Qxo9FmgxZdreA4z7IOSEvBDCAVlL7xzLgj8NBIckrhgBXg6CAQ=="}],"memo":""},"metadata":{"timestamp":"1743760782"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"","pkg_path":"gno.land/r/demo/wugnot","func":"Transfer","args":["g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","-1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPbLggW1eugeEhTDF3cphB7ILmOsQpaE59va4Kf7hSMP3MTANuiTBVMcTJitdDEFLgWFCKl4JzzLpI69WgLcBw=="}],"memo":""},"metadata":{"timestamp":"1743760847"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761662"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","package":{"name":"boards2","path":"gno.land/r/devx000/gnoland/boards2/v1rc2","files":[{"name":"board.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\ntype BoardID uint64\n\nfunc (id BoardID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id BoardID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\ntype Board struct {\n\tid        BoardID // only set for public boards.\n\tname      string\n\taliases   []string\n\tcreator   std.Address\n\tthreads   avl.Tree // Post.id -\u003e *Post\n\tpostsCtr  uint64   // increments Post.id\n\tcreatedAt time.Time\n\tdeleted   avl.Tree // TODO reserved for fast-delete.\n\tperms     Permissions\n\treadonly  bool\n}\n\nfunc newBoard(id BoardID, name string, creator std.Address, p Permissions) *Board {\n\treturn \u0026Board{\n\t\tid:        id,\n\t\tname:      name,\n\t\tcreator:   creator,\n\t\tthreads:   avl.Tree{},\n\t\tcreatedAt: time.Now(),\n\t\tdeleted:   avl.Tree{},\n\t\tperms:     p,\n\t}\n}\n\nfunc (board *Board) GetID() BoardID {\n\treturn board.id\n}\n\n// GetName returns the name of the board.\nfunc (board *Board) GetName() string {\n\treturn board.name\n}\n\n// GetURL returns the relative URL of the board.\nfunc (board *Board) GetURL() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + url.PathEscape(board.name)\n}\n\n// GetURL returns relative board path relative.\n//\n// Note: returned result is not escaped. Use GetURL to get URL-encoded path.\nfunc (board *Board) GetPath() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + board.name\n}\n\nfunc (board *Board) GetPermissions() Permissions {\n\treturn board.perms\n}\n\n// SetReadonly updates board's read-only status.\nfunc (board *Board) SetReadonly(readonly bool) {\n\tboard.readonly = readonly\n}\n\n// IsReadonly checks if the board is a read-only board.\nfunc (board *Board) IsReadonly() bool {\n\treturn board.readonly\n}\n\nfunc (board *Board) GetThread(threadID PostID) (_ *Post, found bool) {\n\tv, found := board.threads.Get(threadID.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (board *Board) AddThread(creator std.Address, title string, body string) *Post {\n\tpid := board.incGetPostID()\n\tthread := newPost(board, pid, creator, title, body, pid, 0, 0)\n\tboard.threads.Set(pid.Key(), thread)\n\treturn thread\n}\n\n// NOTE: this can be potentially very expensive for threads with many replies.\n// TODO: implement optional fast-delete where thread is simply moved.\nfunc (board *Board) DeleteThread(pid PostID) {\n\t_, removed := board.threads.Remove(pid.Key())\n\tif !removed {\n\t\tpanic(\"thread does not exist with ID \" + pid.String())\n\t}\n}\n\n// Render renders a board into Markdown.\nfunc (board *Board) Render(path, menu string) string {\n\tvar sb strings.Builder\n\n\tsb.WriteString(\"# \" + board.GetName() + \"  \\n\")\n\tsb.WriteString(\"Board created by \" + newUserLink(board.creator) + \" \")\n\tsb.WriteString(\"on \" + board.createdAt.Format(dateFormat))\n\tsb.WriteString(\", #\" + board.id.String())\n\n\tif board.IsReadonly() {\n\t\tsb.WriteString(\"  \\n_**Starting new threads and commenting is disabled**_\")\n\t}\n\n\t// XXX: Menu is rendered by the caller to deal with links and sub-menus\n\t// TODO: We should have the render logic separated from boards so avoid sending menu as argument\n\tif menu != \"\" {\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tsb.WriteString(menu)\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(\"\\n\\n---\\n\")\n\n\tif board.threads.Size() == 0 {\n\t\tsb.WriteString(\"### This board doesn't have any threads\\n\")\n\t\tif !board.IsReadonly() {\n\t\t\turl := board.GetPostFormURL()\n\t\t\tsb.WriteString(\"Do you want to [start a new conversation](\" + url + \") in this board ?\")\n\t\t}\n\t\treturn sb.String()\n\t}\n\n\tp, err := pager.New(path, board.threads.Size(), pager.WithPageSize(pageSizeThreads))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tthread := v.(*Post)\n\t\tif thread.isHidden {\n\t\t\treturn false\n\t\t}\n\n\t\tsb.WriteString(thread.RenderSummary())\n\t\tsb.WriteString(\"\\n\")\n\t\treturn false\n\t}\n\n\tsb.WriteString(\"Sort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tsb.WriteString(newLink(\"newest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tsb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tsb.WriteString(\"\\n---\\n\")\n\t\tsb.WriteString(pager.Picker(p))\n\t}\n\n\treturn sb.String()\n}\n\nfunc (board *Board) incGetPostID() PostID {\n\tboard.postsCtr++\n\treturn PostID(board.postsCtr)\n}\n\nfunc (board *Board) GetURLFromThreadID(threadID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String()\n}\n\nfunc (board *Board) GetURLFromReplyID(threadID, replyID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String() + \"/\" + replyID.String()\n}\n\nfunc (board *Board) GetRenameFormURL() string { // TODO: These type of functions shouldn't be part of Board type\n\treturn txlink.Call(\n\t\t\"RenameBoard\",\n\t\t\"name\", board.name,\n\t\t\"newName\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"FreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t)\n}\n\nfunc (board *Board) GetUnfreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"UnfreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threadID\", \"\",\n\t\t\"replyID\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFlaggingThresholdFormURL() string {\n\treturn txlink.Call(\n\t\t\"SetFlaggingThreshold\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threshold\", \"\",\n\t)\n}\n\nfunc (board *Board) GetInviteMemberFormURL() string {\n\treturn txlink.Call(\n\t\t\"InviteMember\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"user\", \"\",\n\t\t\"role\", \"\",\n\t)\n}\n\nfunc (board *Board) GetPostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateThread\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (board *Board) GetMembersURL() string {\n\treturn board.GetURL() + \"/members\"\n}\n\nfunc createDefaultBoardPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(\n\t\tRoleAdmin,\n\t\tPermissionBoardRename,\n\t\tPermissionBoardFlaggingUpdate,\n\t\tPermissionMemberInvite,\n\t\tPermissionMemberRemove,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadDelete,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionThreadFreeze,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyDelete,\n\t\tPermissionReplyFlag,\n\t\tPermissionReplyFreeze,\n\t\tPermissionRoleChange,\n\t)\n\tperms.AddRole(\n\t\tRoleModerator,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyFlag,\n\t)\n\tperms.AddRole(\n\t\tRoleGuest,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadRepost,\n\t\tPermissionReplyCreate,\n\t)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n"},{"name":"board_readonly.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"time\"\n)\n\n// ReadonlyBoard defines an interface for readonly boards.\ntype ReadonlyBoard interface {\n\t// ID returns the unique identifier of the board.\n\tID() BoardID\n\n\t// Name returns the name of the board.\n\tName() string\n\n\t// Aliases returns a list with previous names assigned to the board.\n\tAliases() []string\n\n\t// Creator returns board's creator address.\n\tCreator() std.Address\n\n\t// LastPostID returns the ID assigned to the last created thread.\n\tLastPostID() uint64\n\n\t// CreatedAt returns the time when board was created.\n\tCreatedAt() time.Time\n\n\t// IsReadonly returns true when board shouldn't allow the creation of threads and comments.\n\tIsReadonly() bool\n\n\t// MembersCount returns the number of invited board members.\n\tMembersCount() int\n\n\t// IterateMembers allows reading the list of invited board members.\n\tIterateMembers(offset, count int, fn UsersIterFn)\n}\n\ntype readonlyBoard struct {\n\tboard *Board\n}\n\nfunc (b readonlyBoard) ID() BoardID {\n\treturn b.board.id\n}\n\nfunc (b readonlyBoard) Name() string {\n\treturn b.board.name\n}\n\nfunc (b readonlyBoard) Aliases() []string {\n\taliases := make([]string, len(b.board.aliases))\n\tfor i, s := range b.board.aliases {\n\t\taliases[i] = s\n\t}\n\treturn aliases\n}\n\nfunc (b readonlyBoard) Creator() std.Address {\n\treturn b.board.creator\n}\n\nfunc (b readonlyBoard) LastPostID() uint64 {\n\treturn b.board.postsCtr\n}\n\nfunc (b readonlyBoard) CreatedAt() time.Time {\n\treturn b.board.createdAt\n}\n\nfunc (b readonlyBoard) IsReadonly() bool {\n\treturn b.board.readonly\n}\n\nfunc (b readonlyBoard) MembersCount() int {\n\treturn b.board.perms.UsersCount()\n}\n\nfunc (b readonlyBoard) IterateMembers(offset, count int, fn UsersIterFn) {\n\tb.board.perms.IterateUsers(offset, count, fn)\n}\n"},{"name":"board_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nfunc TestBoardID_String(t *testing.T) {\n\tinput := BoardID(32)\n\n\tuassert.Equal(t, \"32\", input.String())\n}\n\nfunc TestBoardID_Key(t *testing.T) {\n\tinput := BoardID(128)\n\twant := strings.Repeat(\"0\", 7) + \"128\"\n\tuassert.Equal(t, want, input.Key())\n}\n\nfunc TestBoard_GetID(t *testing.T) {\n\twant := int(92)\n\tb := new(Board)\n\tb.id = BoardID(want)\n\tgot := int(b.GetID())\n\n\tuassert.Equal(t, got, want)\n\tuassert.NotEqual(t, got, want*want)\n}\n\nfunc TestBoard_GetURL(t *testing.T) {\n\tpkgPath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\tname := \"foobar_test_get_url123\"\n\twant := pkgPath + \":\" + name\n\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, name, addr, perms)\n\tgot := board.GetURL()\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\t_, ok := b.GetThread(12345)\n\tuassert.False(t, ok)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\t_, ok = b.GetThread(post.GetPostID())\n\tuassert.True(t, ok)\n}\n\nfunc TestBoard_DeleteThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\tid := post.GetPostID()\n\n\tb.DeleteThread(id)\n\n\t_, ok := b.GetThread(id)\n\tuassert.False(t, ok)\n}\n\nvar boardUrlPrefix = strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\nfunc TestBoard_GetURLFromThreadID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10\"\n\n\tgot := b.GetURLFromThreadID(10)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetURLFromReplyID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10/20\"\n\n\tgot := b.GetURLFromReplyID(10, 20)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetPostFormURL(t *testing.T) {\n\tbid := BoardID(386)\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(bid, \"foo1234\", addr, perms)\n\texpect := txlink.Call(\"CreateThread\", \"boardID\", bid.String(), \"title\", \"\", \"body\", \"\")\n\n\tgot := b.GetPostFormURL()\n\tuassert.Equal(t, expect, got)\n}\n"},{"name":"boards.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\nvar (\n\tgPerms        Permissions\n\tgNotice       string\n\tgHelp         string\n\tgLastBoardID  BoardID\n\tgBoardsByID   avl.Tree // string(id) -\u003e *Board\n\tgBoardsByName avl.Tree // string(name) -\u003e *Board\n\tgLocked       struct {\n\t\trealm        bool\n\t\trealmMembers bool\n\t}\n)\n\nfunc init() {\n\t// TODO: Define and change the default realm owner (or owners)\n\towner := std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\n\t// Initialize default realm permissions\n\tgPerms = createDefaultPermissions(owner)\n\n\t// Import relevant initial state from previous version\n\tinitFromPrevVersion()\n}\n\n// incGetBoardID returns a new board ID.\nfunc incGetBoardID() BoardID {\n\tgLastBoardID++\n\treturn gLastBoardID\n}\n\n// getBoard returns a board for a specific ID.\nfunc getBoard(id BoardID) (_ *Board, found bool) {\n\tv, exists := gBoardsByID.Get(id.Key())\n\tif !exists {\n\t\treturn nil, false\n\t}\n\treturn v.(*Board), true\n}\n\n// mustGetBoardByName returns a board or panics when it's not found.\nfunc mustGetBoardByName(name string) *Board {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tpanic(\"board does not exist with name: \" + name)\n\t}\n\treturn v.(*Board)\n}\n\n// mustGetBoard returns a board or panics when it's not found.\nfunc mustGetBoard(id BoardID) *Board {\n\tboard, found := getBoard(id)\n\tif !found {\n\t\tpanic(\"board does not exist with ID: \" + id.String())\n\t}\n\treturn board\n}\n\n// mustGetThread returns a thread or panics when it's not found.\nfunc mustGetThread(board *Board, threadID PostID) *Post {\n\tthread, found := board.GetThread(threadID)\n\tif !found {\n\t\tpanic(\"thread does not exist with ID: \" + threadID.String())\n\t}\n\treturn thread\n}\n\n// mustGetReply returns a reply or panics when it's not found.\nfunc mustGetReply(thread *Post, replyID PostID) *Post {\n\treply, found := thread.GetReply(replyID)\n\tif !found {\n\t\tpanic(\"reply does not exist with ID: \" + replyID.String())\n\t}\n\treturn reply\n}\n\nfunc mustGetPermissions(bid BoardID) Permissions {\n\tif bid != 0 {\n\t\tboard := mustGetBoard(bid)\n\t\treturn board.perms\n\t}\n\treturn gPerms\n}\n"},{"name":"flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\n// DefaultFlaggingThreshold defines the default number of flags that hides flaggable items.\nconst DefaultFlaggingThreshold = 1\n\nvar gFlaggingThresholds avl.Tree // string(board ID) -\u003e int\n\ntype Flag struct {\n\tUser   std.Address\n\tReason string\n}\n\ntype Flaggable interface {\n\t// AddFlag adds a new flag to an item.\n\t//\n\t// Returns false if item was already flagged by user.\n\tAddFlag(flag Flag) bool\n\n\t// FlagsCount returns number of times item was flagged.\n\tFlagsCount() int\n}\n\n// flagItem adds a flag to a flaggable item (post, thread, etc).\n//\n// Returns whether flag count threshold is reached and item can be hidden.\n//\n// Panics if flag count threshold was already reached.\nfunc flagItem(item Flaggable, flag Flag, threshold int) bool {\n\tif item.FlagsCount() \u003e= threshold {\n\t\tpanic(\"item flag count threshold exceeded: \" + strconv.Itoa(threshold))\n\t}\n\n\tif !item.AddFlag(flag) {\n\t\tpanic(\"item has been already flagged by a current user\")\n\t}\n\n\treturn item.FlagsCount() == threshold\n}\n\nfunc getFlaggingThreshold(bid BoardID) int {\n\tif v, ok := gFlaggingThresholds.Get(bid.String()); ok {\n\t\treturn v.(int)\n\t}\n\treturn DefaultFlaggingThreshold\n}\n"},{"name":"format.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/r/sys/users\"\n)\n\nfunc padLeft(s string, length int) string {\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\" \", length-len(s)) + s\n}\n\nfunc padZero(u64 uint64, length int) string {\n\ts := strconv.Itoa(int(u64))\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\"0\", length-len(s)) + s\n}\n\nfunc indentBody(indent string, body string) string {\n\tvar (\n\t\tres   string\n\t\tlines = strings.Split(body, \"\\n\")\n\t)\n\tfor i, line := range lines {\n\t\tif i \u003e 0 {\n\t\t\tres += \"\\n\"\n\t\t}\n\t\tres += indent + line\n\t}\n\treturn res\n}\n\n// NOTE: length must be greater than 3.\nfunc summaryOf(text string, length int) string {\n\tlines := strings.SplitN(text, \"\\n\", 2)\n\tline := lines[0]\n\tif len(line) \u003e length {\n\t\tline = line[:(length-3)] + \"...\"\n\t} else if len(lines) \u003e 1 {\n\t\t// len(line) \u003c= 80\n\t\tline = line + \"...\"\n\t}\n\treturn line\n}\n\n// newLink returns a Markdown link.\nfunc newLink(label, uri string) string {\n\treturn \"[\" + label + \"](\" + uri + \")\"\n}\n\n// newButtonLink returns a Makdown link with label wrapped in brackets.\nfunc newButtonLink(label, uri string) string {\n\treturn `[\\[` + label + `\\]](` + uri + \")\"\n}\n\n// newUserLink returns a Markdown link for an account to the users\n// realm or the address as string when a user is not registered.\nfunc newUserLink(addr std.Address) string {\n\tuser := users.ResolveAddress(addr)\n\tif user != nil {\n\t\treturn user.RenderLink(\"\")\n\t}\n\treturn addr.String()\n}\n"},{"name":"migrations.gno","body":"package boards2\n\nimport (\n\tv1rc1 \"gno.land/r/devx000/gnoland/boards2/v1rc1\"\n)\n\nfunc initFromPrevVersion() {\n\timportRealmMembers()\n}\n\nfunc importRealmMembers() {\n\tv1rc1.IterateRealmMembers(0, func(member v1rc1.User) bool {\n\t\t// XXX: This wouldn't be required if a boards2 package is created\n\t\troles := make([]Role, len(member.Roles))\n\t\tfor i, r := range member.Roles {\n\t\t\troles[i] = Role(r)\n\t\t}\n\n\t\tgPerms.AddUser(member.Address, roles...)\n\t\treturn false\n\t})\n}\n"},{"name":"permissions.gno","body":"package boards2\n\nimport \"std\"\n\nconst (\n\tPermissionRealmHelp           Permission = \"realm:help\"\n\tPermissionRealmLock                      = \"realm:lock\"\n\tPermissionRealmNotice                    = \"realm:notice\"\n\tPermissionBoardCreate                    = \"board:create\"\n\tPermissionBoardFlaggingUpdate            = \"board:flagging-update\"\n\tPermissionBoardFreeze                    = \"board:freeze\"\n\tPermissionBoardRename                    = \"board:rename\"\n\tPermissionThreadCreate                   = \"thread:create\"\n\tPermissionThreadDelete                   = \"thread:delete\"\n\tPermissionThreadEdit                     = \"thread:edit\"\n\tPermissionThreadFlag                     = \"thread:flag\"\n\tPermissionThreadFreeze                   = \"thread:freeze\"\n\tPermissionThreadRepost                   = \"thread:repost\"\n\tPermissionReplyCreate                    = \"reply:create\"\n\tPermissionReplyDelete                    = \"reply:delete\"\n\tPermissionReplyFlag                      = \"reply:flag\"\n\tPermissionReplyFreeze                    = \"reply:freeze\"\n\tPermissionMemberInvite                   = \"member:invite\"\n\tPermissionMemberRemove                   = \"member:remove\"\n\tPermissionRoleChange                     = \"role:change\"\n\tPermissionPermissionsUpdate              = \"permissions:update\"\n)\n\nconst (\n\tRoleGuest     Role = \"\"\n\tRoleOwner          = \"owner\"\n\tRoleAdmin          = \"admin\"\n\tRoleModerator      = \"moderator\"\n)\n\ntype (\n\t// Permission defines the type for permissions.\n\tPermission string\n\n\t// Role defines the type for user roles.\n\tRole string\n\n\t// Args is a list of generic arguments.\n\tArgs []interface{}\n\n\t// User contains user info.\n\tUser struct {\n\t\tAddress std.Address\n\t\tRoles   []Role\n\t}\n\n\t// UsersIterFn defines a function type to iterate users.\n\tUsersIterFn func(User) bool\n\n\t// Permissions define an interface to for permissioned execution.\n\tPermissions interface {\n\t\t// HasRole checks if a user has a specific role assigned.\n\t\tHasRole(std.Address, Role) bool\n\n\t\t// HasPermission checks if a user has a specific permission.\n\t\tHasPermission(std.Address, Permission) bool\n\n\t\t// WithPermission calls a callback when a user has a specific permission.\n\t\t// It panics on error.\n\t\tWithPermission(std.Address, Permission, Args, func(Args))\n\n\t\t// AddUser adds a new user to the permissioner.\n\t\tAddUser(std.Address, ...Role) error\n\n\t\t// SetUserRoles sets the roles of a user.\n\t\tSetUserRoles(std.Address, ...Role) error\n\n\t\t// RemoveUser removes a user from the permissioner.\n\t\tRemoveUser(std.Address) (removed bool)\n\n\t\t// HasUser checks if a user exists.\n\t\tHasUser(std.Address) bool\n\n\t\t// UsersCount returns the total number of users the permissioner contains.\n\t\tUsersCount() int\n\n\t\t// IterateUsers iterates permissions' users.\n\t\tIterateUsers(start, count int, fn UsersIterFn) bool\n\t}\n)\n"},{"name":"permissions_default.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\t\"gno.land/r/sys/users\"\n)\n\n// DefaultPermissions manages users, roles and permissions.\ntype DefaultPermissions struct {\n\tsuperRole Role\n\tdao       *commondao.CommonDAO\n\tusers     *avl.Tree // string(std.Address) -\u003e []Role\n\troles     *avl.Tree // string(role) -\u003e []Permission\n}\n\n// NewDefaultPermissions creates a new permissions type.\n// This type is a default implementation to handle users, roles and permissions.\nfunc NewDefaultPermissions(dao *commondao.CommonDAO) *DefaultPermissions {\n\tif dao == nil {\n\t\tpanic(\"default permissions require a DAO\")\n\t}\n\n\tdp := \u0026DefaultPermissions{\n\t\tdao:   dao,\n\t\troles: avl.NewTree(),\n\t\tusers: avl.NewTree(),\n\t}\n\n\t// Make sure that DAO users are indexed when DAO has members\n\tdao.Members().IterateByOffset(0, dao.Members().Size(), func(m std.Address) bool {\n\t\tdp.users.Set(m.String(), []Role(nil))\n\t\treturn false\n\t})\n\n\treturn dp\n}\n\n// SetSuperRole assigns a super role.\n// A super role is one that have all permissions.\n// These type of role doesn't need to be mapped to any permission.\nfunc (dp *DefaultPermissions) SetSuperRole(r Role) {\n\tdp.superRole = r\n}\n\n// AddRole add a role with one or more assigned permissions.\nfunc (dp *DefaultPermissions) AddRole(r Role, p Permission, extra ...Permission) {\n\tdp.roles.Set(string(r), append([]Permission{p}, extra...))\n}\n\n// RoleExists checks if a role exists.\nfunc (dp DefaultPermissions) RoleExists(r Role) bool {\n\tif dp.superRole != \"\" \u0026\u0026 r == dp.superRole {\n\t\treturn true\n\t}\n\n\treturn dp.roles.Iterate(\"\", \"\", func(name string, _ interface{}) bool {\n\t\treturn Role(name) == r\n\t})\n}\n\n// GetUserRoles returns the list of roles assigned to a user.\nfunc (dp DefaultPermissions) GetUserRoles(user std.Address) []Role {\n\tv, found := dp.users.Get(user.String())\n\tif !found {\n\t\treturn nil\n\t}\n\treturn v.([]Role)\n}\n\n// HasRole checks if a user has a specific role assigned.\nfunc (dp DefaultPermissions) HasRole(user std.Address, r Role) bool {\n\tfor _, role := range dp.GetUserRoles(user) {\n\t\tif role == r {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n// HasPermission checks if a user has a specific permission.\nfunc (dp DefaultPermissions) HasPermission(user std.Address, perm Permission) bool {\n\tfor _, r := range dp.GetUserRoles(user) {\n\t\tif dp.superRole == r {\n\t\t\treturn true\n\t\t}\n\n\t\tv, found := dp.roles.Get(string(r))\n\t\tif !found {\n\t\t\tcontinue\n\t\t}\n\n\t\tfor _, p := range v.([]Permission) {\n\t\t\tif p == perm {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\treturn false\n}\n\n// AddUser adds a new user to permissions.\nfunc (dp *DefaultPermissions) AddUser(user std.Address, roles ...Role) error {\n\tif dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user already exists\")\n\t}\n\n\tdp.dao.Members().Add(user)\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// SetUserRoles sets the roles of a user.\nfunc (dp *DefaultPermissions) SetUserRoles(user std.Address, roles ...Role) error {\n\tif !dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user not found\")\n\t}\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// RemoveUser removes a user from permissions.\nfunc (dp *DefaultPermissions) RemoveUser(user std.Address) bool {\n\t_, removed := dp.users.Remove(user.String())\n\tdp.dao.Members().Remove(user)\n\treturn removed\n}\n\n// HasUser checks if a user exists.\nfunc (dp DefaultPermissions) HasUser(user std.Address) bool {\n\treturn dp.users.Has(user.String())\n}\n\n// UsersCount returns the total number of users the permissioner contains.\nfunc (dp DefaultPermissions) UsersCount() int {\n\treturn dp.users.Size()\n}\n\n// IterateUsers iterates permissions' users.\nfunc (dp DefaultPermissions) IterateUsers(start, count int, fn UsersIterFn) bool {\n\treturn dp.users.IterateByOffset(start, count, func(k string, v interface{}) bool {\n\t\treturn fn(User{\n\t\t\tAddress: std.Address(k),\n\t\t\tRoles:   v.([]Role),\n\t\t})\n\t})\n}\n\n// WithPermission calls a callback when a user has a specific permission.\n// It panics on error or when a handler panics.\n// Callbacks are by default called when there is no handle registered for the permission.\nfunc (dp *DefaultPermissions) WithPermission(user std.Address, perm Permission, args Args, cb func(Args)) {\n\tif !dp.HasPermission(user, perm) || !dp.dao.Members().Has(user) {\n\t\tpanic(\"unauthorized\")\n\t}\n\n\tswitch perm {\n\tcase PermissionBoardCreate:\n\t\tdp.handleBoardCreate(args, cb)\n\tcase PermissionBoardRename:\n\t\tdp.handleBoardRename(args, cb)\n\tcase PermissionMemberInvite:\n\t\tdp.handleMemberInvite(args, cb)\n\tcase PermissionRoleChange:\n\t\tdp.handleRoleChange(args, cb)\n\tdefault:\n\t\tcb(args)\n\t}\n}\n\nfunc (dp *DefaultPermissions) setUserRoles(user std.Address, roles ...Role) error {\n\tfor _, r := range roles {\n\t\tif !dp.RoleExists(r) {\n\t\t\treturn errors.New(\"invalid role: \" + string(r))\n\t\t}\n\t}\n\n\tdp.users.Set(user.String(), append([]Role(nil), roles...))\n\treturn nil\n}\n\nfunc (DefaultPermissions) handleBoardCreate(args Args, cb func(Args)) {\n\tname, ok := args[0].(string)\n\tif !ok {\n\t\tpanic(\"expected board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(name)\n\tassertBoardNameBelongsToCaller(name)\n\n\tcb(args)\n}\n\nfunc (DefaultPermissions) handleBoardRename(args Args, cb func(Args)) {\n\tnewName, ok := args[2].(string)\n\tif !ok {\n\t\tpanic(\"expected new board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(newName)\n\tassertBoardNameBelongsToCaller(newName)\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleMemberInvite(args Args, cb func(Args)) {\n\t// Make sure that only owners invite other owners\n\trole, ok := args[1].(Role)\n\tif !ok {\n\t\tpanic(\"expected a valid new member role\")\n\t}\n\n\tif role == RoleOwner {\n\t\tif !dp.HasRole(std.PreviousRealm().Address(), RoleOwner) {\n\t\t\tpanic(\"only owners are allowed to invite other owners\")\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleRoleChange(args Args, cb func(Args)) {\n\t// Owners and Admins can change roles.\n\t// Admins should not be able to assign or remove the Owner role from members.\n\tif dp.HasRole(std.PreviousRealm().Address(), RoleAdmin) {\n\t\trole, ok := args[2].(Role)\n\t\tif !ok {\n\t\t\tpanic(\"expected a valid member role\")\n\t\t}\n\n\t\tif role == RoleOwner {\n\t\t\tpanic(\"admins are not allowed to promote members to Owner\")\n\t\t} else {\n\t\t\tmember, ok := args[1].(std.Address)\n\t\t\tif !ok {\n\t\t\t\tpanic(\"expected a valid member address\")\n\t\t\t}\n\n\t\t\tif dp.HasRole(member, RoleOwner) {\n\t\t\t\tpanic(\"admins are not allowed to remove the Owner role\")\n\t\t\t}\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc createDefaultPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(RoleAdmin, PermissionBoardCreate)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n\nfunc assertBoardNameIsNotAddress(s string) {\n\tif std.Address(s).IsValid() {\n\t\tpanic(\"addresses are not allowed as board name\")\n\t}\n}\n\nfunc assertBoardNameBelongsToCaller(name string) {\n\t// When the board name is the name of a registered user\n\t// check that caller is the owner of the name.\n\tuser, _ := users.ResolveName(name)\n\tif user != nil \u0026\u0026 user.Addr() != std.PreviousRealm().Address() {\n\t\tpanic(\"board name is a user name registered to a different user\")\n\t}\n}\n"},{"name":"permissions_default_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/urequire\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n)\n\nvar _ Permissions = (*DefaultPermissions)(nil)\n\nfunc TestDefaultPermissionsWithPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\targs       Args\n\t\tsetup      func() *DefaultPermissions\n\t\terr        string\n\t\tcalled     bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with arguments\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\targs:       Args{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t\t{\n\t\t\tname:       \"is not a DAO member\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\tcalled bool\n\t\t\t\targs   Args\n\t\t\t)\n\n\t\t\tperms := tc.setup()\n\t\t\tcallback := func(a Args) {\n\t\t\t\targs = a\n\t\t\t\tcalled = true\n\t\t\t}\n\n\t\t\ttestCaseFn := func() {\n\t\t\t\tperms.WithPermission(tc.user, tc.permission, tc.args, callback)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.PanicsWithMessage(t, tc.err, testCaseFn, \"panic\")\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NotPanics(t, testCaseFn, \"no panic\")\n\t\t\t}\n\n\t\t\turequire.Equal(t, tc.called, called, \"callback called\")\n\t\t\turequire.Equal(t, len(tc.args), len(args), \"args count\")\n\t\t\tfor i, a := range args {\n\t\t\t\tuassert.Equal(t, tc.args[i].(string), a.(string))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsGetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []string\n\t\tsetup func() *DefaultPermissions\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\", \"foo\", \"bar\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"not a user\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\", \"admin\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\troles := perms.GetUserRoles(tc.user)\n\n\t\t\turequire.Equal(t, len(tc.roles), len(roles), \"user role count\")\n\t\t\tfor i, r := range roles {\n\t\t\t\tuassert.Equal(t, tc.roles[i], string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasRole(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\trole  Role\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"admin\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"ok with multiple roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"foo\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"has no role\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasRole(tc.user, tc.role)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\tsetup      func() *DefaultPermissions\n\t\twant       bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple users\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple roles\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddRole(\"baz\", \"other\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\", \"baz\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasPermission(tc.user, tc.permission)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsAddUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"a\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"duplicated user\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"foo\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: foo\",\n\t\t},\n\t\t{\n\t\t\tname: \"already a DAO member\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(\n\t\t\t\t\tcommondao.New(commondao.WithMember(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")),\n\t\t\t\t)\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.AddUser(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.Error(t, err, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsSetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"c\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"remove roles\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"b\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"x\", \"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: x\",\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"user not found\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.SetUserRoles(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.True(t, err != nil, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsRemoveUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.RemoveUser(tc.user)\n\t\t\tuassert.Equal(t, tc.want, got)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsIterateUsers(t *testing.T) {\n\tusers := []User{\n\t\t{\n\t\t\tAddress: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tRoles:   []Role{\"foo\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\",\n\t\t\tRoles:   []Role{\"foo\", \"bar\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\",\n\t\t\tRoles:   []Role{\"bar\"},\n\t\t},\n\t}\n\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.AddRole(\"foo\", \"perm1\")\n\tperms.AddRole(\"bar\", \"perm2\")\n\tfor _, u := range users {\n\t\tperms.AddUser(u.Address, u.Roles...)\n\t}\n\n\tcases := []struct {\n\t\tname               string\n\t\tstart, count, want int\n\t}{\n\t\t{\n\t\t\tname:  \"exceed users count\",\n\t\t\tcount: 50,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"exact users count\",\n\t\t\tcount: 3,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"two users\",\n\t\t\tstart: 1,\n\t\t\tcount: 2,\n\t\t\twant:  2,\n\t\t},\n\t\t{\n\t\t\tname:  \"one user\",\n\t\t\tstart: 1,\n\t\t\tcount: 1,\n\t\t\twant:  1,\n\t\t},\n\t\t{\n\t\t\tname:  \"no iteration\",\n\t\t\tstart: 50,\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar i int\n\t\t\tperms.IterateUsers(0, len(users), func(u User) bool {\n\t\t\t\turequire.True(t, i \u003c len(users), \"expect iterator to respect number of users\")\n\t\t\t\tuassert.Equal(t, users[i].Address, u.Address)\n\n\t\t\t\turequire.Equal(t, len(users[i].Roles), len(u.Roles), \"expect number of roles to match\")\n\t\t\t\tfor j, r := range u.Roles {\n\t\t\t\t\tuassert.Equal(t, string(users[i].Roles[j]), string(u.Roles[j]))\n\t\t\t\t}\n\n\t\t\t\ti++\n\t\t\t})\n\n\t\t\tuassert.Equal(t, i, len(users), \"expect iterator to iterate all users\")\n\t\t})\n\t}\n}\n"},{"name":"post.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst dateFormat = \"2006-01-02 3:04pm MST\"\n\ntype PostID uint64\n\nfunc (id PostID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id PostID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\n// A Post is a \"thread\" or a \"reply\" depending on context.\n// A thread is a Post of a Board that holds other replies.\ntype Post struct {\n\tboard         *Board\n\tid            PostID\n\tcreator       std.Address\n\ttitle         string // optional\n\tbody          string\n\tisHidden      bool\n\tisReadonly    bool\n\treplies       avl.Tree // Post.id -\u003e *Post\n\trepliesAll    avl.Tree // Post.id -\u003e *Post (all replies, for top-level posts)\n\treposts       avl.Tree // Board.id -\u003e Post.id\n\tflags         []Flag\n\tthreadID      PostID  // original Post.id\n\tparentID      PostID  // parent Post.id (if reply or repost)\n\trepostBoardID BoardID // original Board.id (if repost)\n\trepostsCount  uint64\n\tcreatedAt     time.Time\n\tupdatedAt     time.Time\n}\n\nfunc newPost(board *Board, id PostID, creator std.Address, title, body string, threadID, parentID PostID, repostBoardID BoardID) *Post {\n\treturn \u0026Post{\n\t\tboard:         board,\n\t\tid:            id,\n\t\tcreator:       creator,\n\t\ttitle:         title,\n\t\tbody:          body,\n\t\treplies:       avl.Tree{},\n\t\trepliesAll:    avl.Tree{},\n\t\treposts:       avl.Tree{},\n\t\tthreadID:      threadID,\n\t\tparentID:      parentID,\n\t\trepostBoardID: repostBoardID,\n\t\tcreatedAt:     time.Now(),\n\t}\n}\n\nfunc (post *Post) IsRepost() bool {\n\treturn post.repostBoardID != 0\n}\n\nfunc (post *Post) IsThread() bool {\n\t// repost threads also have parent ID\n\treturn post.parentID == 0 || post.IsRepost()\n}\n\nfunc (post *Post) GetBoard() *Board {\n\treturn post.board\n}\n\nfunc (post *Post) GetPostID() PostID {\n\treturn post.id\n}\n\nfunc (post *Post) GetParentID() PostID {\n\treturn post.parentID\n}\n\nfunc (post *Post) GetRepostBoardID() BoardID {\n\treturn post.repostBoardID\n}\n\nfunc (post *Post) GetCreator() std.Address {\n\treturn post.creator\n}\n\nfunc (post *Post) GetTitle() string {\n\treturn post.title\n}\n\nfunc (post *Post) GetBody() string {\n\treturn post.body\n}\n\nfunc (post *Post) GetCreatedAt() time.Time {\n\treturn post.createdAt\n}\n\nfunc (post *Post) GetUpdatedAt() time.Time {\n\treturn post.updatedAt\n}\n\nfunc (post *Post) AddFlag(flag Flag) bool {\n\t// TODO: sort flags for fast search in case of big thresholds\n\tfor _, v := range post.flags {\n\t\tif v.User == flag.User {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tpost.flags = append(post.flags, flag)\n\treturn true\n}\n\nfunc (post *Post) FlagsCount() int {\n\treturn len(post.flags)\n}\n\nfunc (post *Post) SetVisible(isVisible bool) {\n\tpost.isHidden = !isVisible\n}\n\nfunc (post *Post) IsHidden() bool {\n\treturn post.isHidden\n}\n\nfunc (post *Post) SetReadonly(isReadonly bool) {\n\tpost.isReadonly = isReadonly\n}\n\nfunc (post *Post) IsReadonly() bool {\n\treturn post.isReadonly\n}\n\nfunc (post *Post) AddReply(creator std.Address, body string) *Post {\n\tboard := post.board\n\tpid := board.incGetPostID()\n\tpKey := pid.Key()\n\treply := newPost(board, pid, creator, \"\", body, post.threadID, post.id, 0)\n\t// TODO: Figure out how to remove this redundancy of data \"replies==repliesAll\" in threads\n\tpost.replies.Set(pKey, reply)\n\tif post.threadID == post.id {\n\t\tpost.repliesAll.Set(pKey, reply)\n\t} else {\n\t\tthread, _ := board.GetThread(post.threadID)\n\t\tthread.repliesAll.Set(pKey, reply)\n\t}\n\treturn reply\n}\n\nfunc (post *Post) Update(title string, body string) {\n\tpost.title = title\n\tpost.body = body\n\tpost.updatedAt = time.Now()\n}\n\nfunc (post *Post) HasReplies() bool {\n\treturn post.replies.Size() \u003e 0\n}\n\nfunc (thread *Post) GetReply(pid PostID) (_ *Post, found bool) {\n\tv, found := thread.repliesAll.Get(pid.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (post *Post) AddRepostTo(creator std.Address, repost *Post, dst *Board) {\n\tif !post.IsThread() {\n\t\tpanic(\"cannot repost non-thread post\")\n\t}\n\n\tpost.repostsCount++\n\tdst.threads.Set(repost.id.Key(), repost)\n\tpost.reposts.Set(dst.id.Key(), repost.id)\n}\n\nfunc (post *Post) DeleteReply(replyID PostID) error {\n\tif !post.IsThread() {\n\t\t// TODO: Allow removing replies from parent replies too\n\t\tpanic(\"cannot delete reply from a non-thread post\")\n\t}\n\n\tif post.id == replyID {\n\t\treturn errors.New(\"expected an ID of an inner reply\")\n\t}\n\n\tkey := replyID.Key()\n\tv, removed := post.repliesAll.Remove(key)\n\tif !removed {\n\t\treturn errors.New(\"reply not found in thread\")\n\t}\n\n\t// TODO: Shouldn't reply be hidden instead of deleted? Maybe replace reply by a deleted message.\n\treply := v.(*Post)\n\tif reply.parentID != post.id {\n\t\tparent, _ := post.GetReply(reply.parentID)\n\t\tparent.replies.Remove(key)\n\t} else {\n\t\tpost.replies.Remove(key)\n\t}\n\treturn nil\n}\n\nfunc (post *Post) GetSummary() string {\n\treturn summaryOf(post.body, 80)\n}\n\nfunc (post *Post) GetURL() string {\n\tif post.IsThread() {\n\t\treturn post.board.GetURLFromThreadID(post.id)\n\t}\n\treturn post.board.GetURLFromReplyID(post.threadID, post.id)\n}\n\nfunc (post *Post) GetReplyFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"CreateReply\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"replyID\", \"0\",\n\t\t\t\"body\", \"\",\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"CreateReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (post *Post) GetRepostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateRepost\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t\t\"destinationBoardID\", \"\",\n\t)\n}\n\nfunc (post *Post) GetDeleteFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"DeleteThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"DeleteReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t)\n}\n\nfunc (post *Post) GetEditFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"EditThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"title\", post.GetTitle(),\n\t\t\t\"body\", post.GetBody(),\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"EditReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", post.GetBody(),\n\t)\n}\n\nfunc (post *Post) GetFlagFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"FlagThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"reason\", \"\",\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"FlagReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"reason\", \"\",\n\t)\n}\n\nfunc (post *Post) RenderSummary() string {\n\tvar (\n\t\tb       strings.Builder\n\t\tpostURL = post.GetURL()\n\t\ttitle   = post.title\n\t)\n\n\tb.WriteString(\"**≡ \" + newLink(summaryOf(title, 80), postURL) + \"**  \\n\")\n\tb.WriteString(\"Created by \" + newUserLink(post.creator) + \" on \" + post.createdAt.Format(dateFormat))\n\tb.WriteString(\"  \\n**\")\n\tb.WriteString(strconv.Itoa(post.repliesAll.Size()) + \" replies • \")\n\tb.WriteString(strconv.Itoa(post.reposts.Size()) + \" reposts**\\n\")\n\treturn b.String()\n}\n\nfunc (post *Post) renderSourcePost(indent string) (string, *Post) {\n\tif !post.IsRepost() {\n\t\treturn \"\", nil\n\t}\n\n\tindent += \"\u003e \"\n\n\t// TODO: figure out a way to decouple posts from a global storage.\n\tboard, ok := getBoard(post.repostBoardID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source board has been deleted*\\n\\n\"), nil\n\t}\n\n\tsrcPost, ok := board.GetThread(post.parentID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source post has been deleted*\\n\\n\"), nil\n\t}\n\n\tif srcPost.isHidden {\n\t\treturn indentBody(indent, \"*⚠ Source post has been flagged as inappropriate*\\n\\n\"), nil\n\t}\n\n\treturn indentBody(indent, srcPost.GetSummary()) + \"\\n\\n\", srcPost\n}\n\n// renderPostContent renders post text content (including repost body).\n// Function will dump a predefined message instead of a body if post is hidden.\nfunc (post *Post) renderPostContent(sb *strings.Builder, indent string, levels int) {\n\tif post.isHidden {\n\t\t// Flagged comment should be hidden, but replies still visible (see: #3480)\n\t\t// Flagged threads will be hidden by render function caller.\n\t\tsb.WriteString(indentBody(indent, \"_⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n\t\tsb.WriteString(\"\\n\")\n\t\treturn\n\t}\n\n\tsrcContent, srcPost := post.renderSourcePost(indent)\n\tif post.IsRepost() \u0026\u0026 srcPost != nil {\n\t\tsb.WriteString(\"  \\nThis thread is a repost of [another thread](\" + srcPost.GetURL() + \"): \\n\")\n\t}\n\n\tsb.WriteString(srcContent)\n\n\tif post.IsRepost() \u0026\u0026 srcPost == nil \u0026\u0026 len(post.body) \u003e 0 {\n\t\t// Add a newline to separate source deleted message from repost body content\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(indentBody(indent, post.body))\n\tsb.WriteString(\"\\n\")\n\n\tif post.IsThread() {\n\t\t// Split content and controls for threads.\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\t// Buttons \u0026 counters\n\tsb.WriteString(indent)\n\tif !post.IsThread() {\n\t\tsb.WriteString(\"  \\n\")\n\t\tsb.WriteString(indent)\n\t}\n\n\tsb.WriteString(\"Created by \")\n\tsb.WriteString(newUserLink(post.creator))\n\tsb.WriteString(\" on \")\n\tsb.WriteString(post.createdAt.Format(dateFormat))\n\n\t// Add a reply view link to each top level reply\n\tif !post.IsThread() {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(newLink(\"#\"+post.id.String(), post.GetURL()))\n\t}\n\n\tif post.repostsCount \u003e 0 {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(strconv.FormatUint(post.repostsCount, 10))\n\t\tsb.WriteString(\" repost(s)\")\n\t}\n\n\tsb.WriteString(\"  \\n\")\n\tsb.WriteString(newLink(\"Flag\", post.GetFlagFormURL()))\n\n\tif post.IsThread() {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Repost\", post.GetRepostFormURL()))\n\t}\n\n\tisReadonly := post.IsReadonly() || post.GetBoard().IsReadonly()\n\tif !isReadonly {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Reply\", post.GetReplyFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Edit\", post.GetEditFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Delete\", post.GetDeleteFormURL()))\n\t}\n\n\tif levels == 0 {\n\t\tsb.WriteString(\" • \")\n\t\tif post.IsThread() {\n\t\t\tsb.WriteString(newLink(\"Show all Replies\", post.board.GetURLFromThreadID(post.GetPostID())))\n\t\t} else {\n\t\t\tsb.WriteString(newLink(\"View Thread\", post.board.GetURLFromThreadID(post.threadID)))\n\t\t}\n\t}\n\n\tsb.WriteString(\" \\n\")\n}\n\nfunc (post *Post) Render(path string, indent string, levels int) string {\n\tif post == nil {\n\t\treturn \"nil post\"\n\t}\n\n\t// TODO: pass a builder as arg into Render.\n\tvar sb strings.Builder\n\n\t// Thread reposts might not have a title, if so get title from source thread\n\ttitle := post.title\n\tif post.IsRepost() \u0026\u0026 title == \"\" {\n\t\tif board, ok := getBoard(post.repostBoardID); ok {\n\t\t\tif src, ok := board.GetThread(post.parentID); ok {\n\t\t\t\ttitle = src.GetTitle()\n\t\t\t}\n\t\t}\n\t}\n\n\tsb.WriteString(indent)\n\tif title != \"\" { // Replies don't have a title\n\t\tsb.WriteString(\"## \" + title + \"\\n\")\n\t}\n\tsb.WriteString(indent + \"\\n\")\n\n\tpost.renderPostContent(\u0026sb, indent, levels)\n\n\tif post.replies.Size() == 0 {\n\t\treturn sb.String()\n\t}\n\n\t// XXX: This triggers for reply views\n\tif levels == 0 {\n\t\tsb.WriteString(indent + \"\\n\")\n\t\tsb.WriteString(indent)\n\t\tsb.WriteString(\"\\n\")\n\t\treturn sb.String()\n\t}\n\n\tif path != \"\" {\n\t\tsb.WriteString(post.renderTopLevelReplies(path, indent, levels-1))\n\t} else {\n\t\tsb.WriteString(post.renderSubReplies(indent, levels-1))\n\t}\n\treturn sb.String()\n}\n\nfunc (post *Post) renderTopLevelReplies(path, indent string, levels int) string {\n\tp, err := pager.New(path, post.replies.Size(), pager.WithPageSize(pageSizeReplies))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\trender := func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t}\n\n\tb.WriteString(\"\\n\\n---\\nSort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tb.WriteString(newLink(\"newest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tb.WriteString(\"\\n---\\n\")\n\t\tb.WriteString(pager.Picker(p))\n\t}\n\n\treturn b.String()\n}\n\nfunc (post *Post) renderSubReplies(indent string, levels int) string {\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\tpost.replies.Iterate(\"\", \"\", func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t})\n\n\treturn b.String()\n}\n\nfunc (post *Post) RenderInner() string {\n\tif post.IsThread() {\n\t\tpanic(\"unexpected thread\")\n\t}\n\n\tvar (\n\t\ts         string\n\t\tthreadID  = post.threadID\n\t\tthread, _ = post.board.GetThread(threadID) // TODO: This seems redundant (post == thread)\n\t)\n\n\t// Fully render parent if it's not a repost.\n\tif !post.IsRepost() {\n\t\tvar (\n\t\t\tparent   *Post\n\t\t\tparentID = post.parentID\n\t\t)\n\n\t\tif thread.id == parentID {\n\t\t\tparent = thread\n\t\t} else {\n\t\t\tparent, _ = thread.GetReply(parentID)\n\t\t}\n\n\t\ts += parent.Render(\"\", \"\", 0) + \"\\n\"\n\t}\n\n\ts += post.Render(\"\", \"\u003e \", 5)\n\treturn s\n}\n"},{"name":"post_test.gno","body":"package boards2\n\nimport (\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/ufmt\"\n)\n\nfunc TestPostUpdate(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, \"test123\", addr, perms)\n\tcreator := testutils.TestAddress(\"creator\")\n\tpost := newPost(board, 1, creator, \"Title\", \"Body\", 1, 0, 0)\n\ttitle := \"New Title\"\n\tbody := \"New body\"\n\n\tpost.Update(title, body)\n\n\tuassert.Equal(t, title, post.GetTitle())\n\tuassert.Equal(t, body, post.GetBody())\n\tuassert.False(t, post.GetUpdatedAt().IsZero())\n}\n\nfunc TestPostAddFlag(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tpost := createTestThread(t)\n\n\tflag := Flag{\n\t\tUser:   addr,\n\t\tReason: \"foobar\",\n\t}\n\tuassert.True(t, post.AddFlag(flag))\n\tuassert.False(t, post.AddFlag(flag), \"should reject flag from duplicate user\")\n\tuassert.Equal(t, post.FlagsCount(), 1)\n}\n\nfunc TestPostSetVisible(t *testing.T) {\n\tpost := createTestThread(t)\n\tuassert.False(t, post.IsHidden(), \"post should be visible by default\")\n\n\tpost.SetVisible(false)\n\tuassert.True(t, post.IsHidden(), \"post should be hidden\")\n\n\tpost.SetVisible(true)\n\tuassert.False(t, post.IsHidden(), \"post should be visible\")\n}\n\nfunc TestPostAddRepostTo(t *testing.T) {\n\t// TODO: Improve this unit test\n\taddr := testutils.TestAddress(\"creatorDstBoard\")\n\tperms := createDefaultBoardPermissions(addr)\n\tcases := []struct {\n\t\tname, title, body string\n\t\tdstBoard          *Board\n\t\tthread            *Post\n\t\tsetup             func() *Post\n\t\terr               string\n\t}{\n\t\t{\n\t\t\tname:     \"repost thread\",\n\t\t\ttitle:    \"Repost Title\",\n\t\t\tbody:     \"Repost body\",\n\t\t\tdstBoard: newBoard(42, \"dst123\", addr, perms),\n\t\t\tsetup:    func() *Post { return createTestThread(t) },\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid repost from reply\",\n\t\t\tsetup: func() *Post { return createTestReply(t) },\n\t\t\terr:   \"cannot repost non-thread post\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\trepost  *Post\n\t\t\t\tcreator = testutils.TestAddress(\"repostCreator\")\n\t\t\t\tthread  = tc.setup()\n\t\t\t)\n\n\t\t\tcreateRepost := func() {\n\t\t\t\tvar repostId PostID\n\t\t\t\tif tc.dstBoard != nil {\n\t\t\t\t\trepostId = tc.dstBoard.incGetPostID()\n\t\t\t\t}\n\n\t\t\t\trepost = newPost(tc.dstBoard, repostId, creator, tc.title, tc.body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\t\t\t\tthread.AddRepostTo(creator, repost, tc.dstBoard)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.PanicsWithMessage(t, tc.err, createRepost)\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tuassert.NotPanics(t, createRepost)\n\t\t\t}\n\n\t\t\tr, found := tc.dstBoard.GetThread(repost.GetPostID())\n\t\t\tuassert.True(t, found)\n\t\t\tuassert.True(t, repost == r)\n\t\t\tuassert.Equal(t, tc.title, repost.GetTitle())\n\t\t\tuassert.Equal(t, tc.body, repost.GetBody())\n\t\t\tuassert.Equal(t, uint(thread.GetBoard().GetID()), uint(repost.GetRepostBoardID()))\n\t\t})\n\t}\n}\n\nfunc TestNewThread(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\ttitle := \"Test Title\"\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=0\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\teditURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=EditThread\u0026boardID=%d\u0026body=%s\u0026threadID=%d\u0026title=%s\",\n\t\tuint(boardID),\n\t\tbody,\n\t\tuint(threadID),\n\t\tstrings.ReplaceAll(title, \" \", \"+\"),\n\t)\n\trepostURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateRepost\u0026boardID=%d\u0026body=\u0026destinationBoardID=\u0026threadID=%d\u0026title=\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteThread\u0026boardID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tflagURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=FlagThread\u0026boardID=%d\u0026reason=\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\n\tthread := newPost(board, threadID, creator, title, body, threadID, 0, 0)\n\n\tuassert.True(t, thread.IsThread())\n\tuassert.Equal(t, uint(threadID), uint(thread.GetPostID()))\n\tuassert.False(t, thread.GetCreatedAt().IsZero())\n\tuassert.True(t, thread.GetUpdatedAt().IsZero())\n\tuassert.Equal(t, title, thread.GetTitle())\n\tuassert.Equal(t, body[:77]+\"...\", thread.GetSummary())\n\tuassert.False(t, thread.HasReplies())\n\tuassert.Equal(t, url, thread.GetURL())\n\tuassert.Equal(t, replyURL, thread.GetReplyFormURL())\n\tuassert.Equal(t, editURL, thread.GetEditFormURL())\n\tuassert.Equal(t, repostURL, thread.GetRepostFormURL())\n\tuassert.Equal(t, deleteURL, thread.GetDeleteFormURL())\n\tuassert.Equal(t, flagURL, thread.GetFlagFormURL())\n}\n\nfunc TestThreadAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tthreadID := uint(thread.GetPostID())\n\tbody := \"A reply\"\n\n\treply := thread.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, threadID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.True(t, thread.HasReplies())\n}\n\nfunc TestThreadGetReply(t *testing.T) {\n\tcases := []struct {\n\t\tname   string\n\t\tthread *Post\n\t\tsetup  func(thread *Post) (replyID PostID)\n\t\tfound  bool\n\t}{\n\t\t{\n\t\t\tname:   \"found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup: func(thread *Post) PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:   \"not found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup:  func(*Post) PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup(tc.thread)\n\n\t\t\treply, found := tc.thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestThreadDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"ok nested\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.AddReply(testutils.TestAddress(\"replier2\"), \"\").GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid\",\n\t\t\tsetup: func() PostID { return thread.GetPostID() },\n\t\t\terr:   \"expected an ID of an inner reply\",\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t\terr:   \"reply not found in thread\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\terr := thread.DeleteReply(replyID)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.ErrorContains(t, err, tc.err)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tuassert.NoError(t, err)\n\t\t\t_, found := thread.GetReply(replyID)\n\t\t\tuassert.False(t, found)\n\t\t})\n\t}\n}\n\nfunc TestThreadRenderSummary(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRenderInner(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestNewReply(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tparentID := PostID(1)\n\treplyID := PostID(2)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t\tuint(replyID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteReply\u0026boardID=%d\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\n\treply := newPost(board, replyID, creator, \"\", body, threadID, parentID, 0)\n\n\tuassert.False(t, reply.IsThread())\n\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\tuassert.False(t, reply.GetCreatedAt().IsZero())\n\tuassert.True(t, reply.GetUpdatedAt().IsZero())\n\tuassert.False(t, reply.HasReplies())\n\tuassert.Equal(t, body[:77]+\"...\", reply.GetSummary())\n\tuassert.Equal(t, url, reply.GetURL())\n\tuassert.Equal(t, replyURL, reply.GetReplyFormURL())\n\tuassert.Equal(t, deleteURL, reply.GetDeleteFormURL())\n}\n\nfunc TestReplyAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tparentReplyID := uint(parentReply.GetPostID())\n\tbody := \"A child reply\"\n\n\treply := parentReply.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, parentReplyID, uint(reply.GetParentID()))\n\tuassert.Equal(t, parentReplyID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.False(t, reply.HasReplies())\n\tuassert.True(t, parentReply.HasReplies())\n}\n\nfunc TestReplyGetReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\tfound bool\n\t}{\n\t\t{\n\t\t\tname: \"found\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := parentReply.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\treply, found := thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestReplyDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\treply := parentReply.AddReply(testutils.TestAddress(\"replier2\"), \"\")\n\n\t// NOTE: Deleting a reply from a parent reply should eventually be suported\n\tuassert.PanicsWithMessage(t, \"cannot delete reply from a non-thread post\", func() {\n\t\tparentReply.DeleteReply(reply.GetPostID())\n\t})\n}\n\nfunc TestReplyRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc createTestThread(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(1, \"test_board_123\", creator, perms)\n\treturn board.AddThread(creator, \"Title\", \"Body\")\n}\n\nfunc createTestReply(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\treturn thread.AddReply(creator, \"Test message\")\n}\n"},{"name":"public.gno","body":"package boards2\n\nimport (\n\t\"regexp\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n)\n\nconst (\n\t// MaxBoardNameLength defines the maximum length allowed for board names.\n\tMaxBoardNameLength = 50\n\n\t// MaxThreadTitleLength defines the maximum length allowed for thread titles.\n\tMaxThreadTitleLength = 100\n\n\t// MaxReplyLength defines the maximum length allowed for replies.\n\tMaxReplyLength = 300\n)\n\nvar (\n\treBoardName = regexp.MustCompile(`(?i)^[a-z]+[a-z0-9_\\-]{2,50}$`)\n\n\t// Minimalistic Markdown line prefix checks that if allowed would\n\t// break the current UI when submitting a reply. It denies replies\n\t// with headings, blockquotes or horizontal lines.\n\treDeniedReplyLinePrefixes = regexp.MustCompile(`(?m)^\\s*(#|---|\u003e)+`)\n)\n\n// SetHelp sets or updates boards realm help content.\nfunc SetHelp(content string) {\n\tcontent = strings.TrimSpace(content)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{content}\n\tgPerms.WithPermission(caller, PermissionRealmHelp, args, func(Args) {\n\t\tgHelp = content\n\t})\n}\n\n// SetPermissions sets a permissions implementation for boards2 realm or a board.\nfunc SetPermissions(bid BoardID, p Permissions) {\n\tassertRealmIsNotLocked()\n\n\tif p == nil {\n\t\tpanic(\"permissions is required\")\n\t}\n\n\tif bid != 0 {\n\t\tassertBoardExists(bid)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid}\n\tgPerms.WithPermission(caller, PermissionPermissionsUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\t// When board ID is zero it means that realm permissions are being updated\n\t\tif bid == 0 {\n\t\t\tgPerms = p\n\n\t\t\tstd.Emit(\n\t\t\t\t\"RealmPermissionsUpdated\",\n\t\t\t\t\"caller\", caller.String(),\n\t\t\t)\n\t\t\treturn\n\t\t}\n\n\t\t// Otherwise update the permissions of a single board\n\t\tboard := mustGetBoard(bid)\n\t\tboard.perms = p\n\n\t\tstd.Emit(\n\t\t\t\"BoardPermissionsUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t)\n\t})\n}\n\n// SetRealmNotice sets a notice to be displayed globally by the realm.\n// An empty message removes the realm notice.\nfunc SetRealmNotice(message string) {\n\tmessage = strings.TrimSpace(message)\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmNotice, nil, func(Args) {\n\t\tgNotice = message\n\n\t\tstd.Emit(\n\t\t\t\"RealmNoticeChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"message\", message,\n\t\t)\n\t})\n}\n\n// GetBoardIDFromName searches a board by name and returns it's ID.\nfunc GetBoardIDFromName(name string) (_ BoardID, found bool) {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\treturn 0, false\n\t}\n\treturn v.(*Board).id, true\n}\n\n// CreateBoard creates a new board.\nfunc CreateBoard(name string) BoardID {\n\tassertRealmIsNotLocked()\n\n\tname = strings.TrimSpace(name)\n\tassertIsValidBoardName(name)\n\tassertBoardNameNotExists(name)\n\n\tcaller := std.PreviousRealm().Address()\n\tid := incGetBoardID()\n\targs := Args{name, id}\n\tgPerms.WithPermission(caller, PermissionBoardCreate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(name)\n\n\t\tperms := createDefaultBoardPermissions(caller)\n\t\tboard := newBoard(id, name, caller, perms)\n\t\tgBoardsByID.Set(id.Key(), board)\n\t\tgBoardsByName.Set(name, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardCreated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", id.String(),\n\t\t\t\"name\", name,\n\t\t)\n\t})\n\treturn id\n}\n\n// RenameBoard changes the name of an existing board.\n//\n// A history of previous board names is kept when boards are renamed.\n// Because of that boards are also accesible using previous name(s).\nfunc RenameBoard(name, newName string) {\n\tassertRealmIsNotLocked()\n\n\tnewName = strings.TrimSpace(newName)\n\tassertIsValidBoardName(newName)\n\tassertBoardNameNotExists(newName)\n\n\tboard := mustGetBoardByName(name)\n\tassertBoardIsNotFrozen(board)\n\n\tbid := board.GetID()\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid, name, newName}\n\tboard.perms.WithPermission(caller, PermissionBoardRename, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(newName)\n\n\t\tboard := mustGetBoard(bid)\n\t\tboard.aliases = append(board.aliases, board.name)\n\t\tboard.name = newName\n\n\t\t// Index board for the new name keeping previous indexes for older names\n\t\tgBoardsByName.Set(newName, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardRenamed\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t\t\"name\", name,\n\t\t\t\"newName\", newName,\n\t\t)\n\t})\n}\n\n// CreateThread creates a new thread within a board.\nfunc CreateThread(boardID BoardID, title, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tbody = strings.TrimSpace(body)\n\tassertBodyIsNotEmpty(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadCreate)\n\n\tthread := board.AddThread(caller, title, body)\n\n\tstd.Emit(\n\t\t\"ThreadCreated\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", thread.GetPostID().String(),\n\t\t\"title\", title,\n\t)\n\n\treturn thread.id\n}\n\n// CreateReply creates a new comment or reply within a thread.\n//\n// The value of `replyID` is only required when creating a reply of another reply.\nfunc CreateReply(boardID BoardID, threadID, replyID PostID, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyCreate)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\tvar reply *Post\n\tif replyID == 0 {\n\t\t// When the parent reply is the thread just add reply to thread\n\t\treply = thread.AddReply(caller, body)\n\t} else {\n\t\t// Try to get parent reply and add a new child reply\n\t\tparent := mustGetReply(thread, replyID)\n\t\tif parent.IsHidden() || parent.IsReadonly() {\n\t\t\tpanic(\"replying to a hidden or frozen reply is not allowed\")\n\t\t}\n\n\t\treply = parent.AddReply(caller, body)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyCreate\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", reply.GetPostID().String(),\n\t)\n\n\treturn reply.id\n}\n\n// CreateRepost reposts a thread into another board.\nfunc CreateRepost(boardID BoardID, threadID PostID, title, body string, destinationBoardID BoardID) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tcaller := std.PreviousRealm().Address()\n\tdst := mustGetBoard(destinationBoardID)\n\tassertBoardIsNotFrozen(dst)\n\tassertHasBoardPermission(dst, caller, PermissionThreadRepost)\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\tif thread.IsRepost() {\n\t\tpanic(\"reposting a thread that is a repost is not allowed\")\n\t}\n\n\trepostId := dst.incGetPostID()\n\tbody = strings.TrimSpace(body)\n\trepost := newPost(dst, repostId, caller, title, body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\tthread.AddRepostTo(caller, repost, dst)\n\n\tstd.Emit(\n\t\t\"Repost\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"destinationBoardID\", destinationBoardID.String(),\n\t\t\"title\", title,\n\t)\n\n\treturn repostId\n}\n\n// DeleteThread deletes a thread from a board.\n//\n// Threads can be deleted by the users who created them or otherwise by users with special permissions.\nfunc DeleteThread(boardID BoardID, threadID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteThread filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\n\t\tif caller != thread.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionThreadDelete)\n\t\t}\n\t}\n\n\t// Hard delete thread and all its replies\n\tboard.DeleteThread(threadID)\n\n\tstd.Emit(\n\t\t\"ThreadDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t)\n}\n\n// DeleteReply deletes a reply from a thread.\n//\n// Replies can be deleted by the users who created them or otherwise by users with special permissions.\n// Soft deletion is used when the deleted reply contains sub replies, in which case the reply content\n// is replaced by a text informing that reply has been deleted to avoid deleting sub-replies.\nfunc DeleteReply(boardID BoardID, threadID, replyID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteReply filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\treply := mustGetReply(thread, replyID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\t\tassertReplyIsVisible(reply)\n\t\tassertReplyIsNotFrozen(reply)\n\n\t\tif caller != reply.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionReplyDelete)\n\t\t}\n\t}\n\n\t// Soft delete reply by changing its body when it contains\n\t// sub-replies, otherwise hard delete it.\n\tif reply.HasReplies() {\n\t\treply.Update(reply.GetTitle(), \"This reply has been deleted\")\n\t} else {\n\t\tthread.DeleteReply(replyID)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t)\n}\n\n// EditThread updates the title and body of thread.\n//\n// Threads can be updated by the users who created them or otherwise by users with special permissions.\nfunc EditThread(boardID BoardID, threadID PostID, title, body string) {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\tbody = strings.TrimSpace(body)\n\tif !thread.IsRepost() {\n\t\tassertBodyIsNotEmpty(body)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != thread.GetCreator() {\n\t\tassertHasBoardPermission(board, caller, PermissionThreadEdit)\n\t}\n\n\tthread.Update(title, body)\n\n\tstd.Emit(\n\t\t\"ThreadEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"title\", title,\n\t)\n}\n\n// EditReply updates the body of comment or reply.\n//\n// Replies can be updated only by the users who created them.\nfunc EditReply(boardID BoardID, threadID, replyID PostID, body string) {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\tassertReplyIsNotFrozen(reply)\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != reply.GetCreator() {\n\t\tpanic(\"only the reply creator is allowed to edit it\")\n\t}\n\n\treply.Update(\"\", body)\n\n\tstd.Emit(\n\t\t\"ReplyEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"body\", body,\n\t)\n}\n\n// InviteMember adds a member to the realm or to a boards.\n//\n// A role can optionally be specified to be assigned to the new member.\n// Board ID is only required when inviting a member to a board.\nfunc InviteMember(boardID BoardID, user std.Address, role Role) {\n\tassertUserAddressIsValid(user)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{user, role}\n\tperms.WithPermission(caller, PermissionMemberInvite, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.AddUser(user, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberInvited\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", user.String(),\n\t\t\t\"role\", string(role),\n\t\t)\n\t})\n}\n\n// RemoveMember removes a member from the realm or a boards.\n//\n// Board ID is only required when removing a member from board.\nfunc RemoveMember(boardID BoardID, member std.Address) {\n\tassertMembersUpdateIsEnabled(boardID)\n\tassertMemberAddressIsValid(member)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\tperms.WithPermission(caller, PermissionMemberRemove, Args{member}, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif !perms.RemoveUser(member) {\n\t\t\tpanic(\"member not found\")\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberRemoved\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t)\n\t})\n}\n\n// IsMember checks if an user is a member of the realm or a board.\n//\n// Board ID is only required when checking if a user is a member of a board.\nfunc IsMember(boardID BoardID, user std.Address) bool {\n\tassertUserAddressIsValid(user)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasUser(user)\n}\n\n// HasMemberRole checks if a realm or board member has a specific role assigned.\n//\n// Board ID is only required when checking a member of a board.\nfunc HasMemberRole(boardID BoardID, member std.Address, role Role) bool {\n\tassertMemberAddressIsValid(member)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasRole(member, role)\n}\n\n// ChangeMemberRole changes the role of a realm or board member.\n//\n// Board ID is only required when changing the role for a member of a board.\nfunc ChangeMemberRole(boardID BoardID, member std.Address, role Role) {\n\tassertMemberAddressIsValid(member)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, member, role}\n\tperms.WithPermission(caller, PermissionRoleChange, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.SetUserRoles(member, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"RoleChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t\t\"newRole\", string(role),\n\t\t)\n\t})\n}\n\n// IterateRealmMembers iterates realm members.\n// The iteration is done only for realm members, board members are not iterated.\nfunc IterateRealmMembers(offset int, fn UsersIterFn) (halted bool) {\n\tcount := gPerms.UsersCount() - offset\n\treturn gPerms.IterateUsers(offset, count, fn)\n}\n\n// IterateBoards iterates realm boards.\nfunc IterateBoards(offset int, fn func(ReadonlyBoard) bool) (halted bool) {\n\tcount := gBoardsByID.Size() - offset\n\treturn gBoardsByID.IterateByOffset(offset, count, func(_ string, v any) bool {\n\t\tboard, _ := v.(*Board)\n\t\treturn fn(readonlyBoard{board})\n\t})\n}\n\nfunc assertMemberAddressIsValid(member std.Address) {\n\tif !member.IsValid() {\n\t\tpanic(\"invalid member address\")\n\t}\n}\n\nfunc assertUserAddressIsValid(user std.Address) {\n\tif !user.IsValid() {\n\t\tpanic(\"invalid user address\")\n\t}\n}\n\nfunc assertHasBoardPermission(b *Board, user std.Address, p Permission) {\n\tif !b.perms.HasPermission(user, p) {\n\t\tpanic(\"unauthorized\")\n\t}\n}\n\nfunc assertBoardExists(id BoardID) {\n\tif _, found := getBoard(id); !found {\n\t\tpanic(\"board not found: \" + id.String())\n\t}\n}\n\nfunc assertBoardIsNotFrozen(b *Board) {\n\tif b.IsReadonly() {\n\t\tpanic(\"board is frozen\")\n\t}\n}\n\nfunc assertIsValidBoardName(name string) {\n\tsize := len(name)\n\tif size == 0 {\n\t\tpanic(\"board name is empty\")\n\t}\n\n\tif size \u003e MaxBoardNameLength {\n\t\tn := strconv.Itoa(MaxBoardNameLength)\n\t\tpanic(\"board name is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif !reBoardName.MatchString(name) {\n\t\tpanic(\"board name contains invalid characters\")\n\t}\n}\n\nfunc assertThreadIsNotFrozen(t *Post) {\n\tif t.IsReadonly() {\n\t\tpanic(\"thread is frozen\")\n\t}\n}\n\nfunc assertReplyIsNotFrozen(r *Post) {\n\tif r.IsReadonly() {\n\t\tpanic(\"reply is frozen\")\n\t}\n}\n\nfunc assertNameIsNotEmpty(name string) {\n\tif name == \"\" {\n\t\tpanic(\"name is empty\")\n\t}\n}\n\nfunc assertTitleIsValid(title string) {\n\tif title == \"\" {\n\t\tpanic(\"title is empty\")\n\t}\n\n\tif len(title) \u003e MaxThreadTitleLength {\n\t\tn := strconv.Itoa(MaxThreadTitleLength)\n\t\tpanic(\"thread title is too long, maximum allowed is \" + n + \" characters\")\n\t}\n}\n\nfunc assertBodyIsNotEmpty(body string) {\n\tif body == \"\" {\n\t\tpanic(\"body is empty\")\n\t}\n}\n\nfunc assertBoardNameNotExists(name string) {\n\tif gBoardsByName.Has(name) {\n\t\tpanic(\"board already exists\")\n\t}\n}\n\nfunc assertThreadExists(b *Board, threadID PostID) {\n\tif _, found := b.GetThread(threadID); !found {\n\t\tpanic(\"thread not found: \" + threadID.String())\n\t}\n}\n\nfunc assertReplyExists(thread *Post, replyID PostID) {\n\tif _, found := thread.GetReply(replyID); !found {\n\t\tpanic(\"reply not found: \" + replyID.String())\n\t}\n}\n\nfunc assertThreadIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"thread is hidden\")\n\t}\n}\n\nfunc assertReplyIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"reply is hidden\")\n\t}\n}\n\nfunc assertReplyBodyIsValid(body string) {\n\tassertBodyIsNotEmpty(body)\n\n\tif len(body) \u003e MaxReplyLength {\n\t\tn := strconv.Itoa(MaxReplyLength)\n\t\tpanic(\"reply is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif reDeniedReplyLinePrefixes.MatchString(body) {\n\t\tpanic(\"using Markdown headings, blockquotes or horizontal lines is not allowed in replies\")\n\t}\n}\n\nfunc assertMembersUpdateIsEnabled(boardID BoardID) {\n\tif boardID != 0 {\n\t\tassertRealmIsNotLocked()\n\t} else {\n\t\tassertRealmMembersAreNotLocked()\n\t}\n}\n"},{"name":"public_flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// SetFlaggingThreshold sets the number of flags required to hide a thread or comment.\n//\n// Threshold is only applicable within the board where it's setted.\nfunc SetFlaggingThreshold(boardID BoardID, threshold int) {\n\tif threshold \u003c 1 {\n\t\tpanic(\"invalid flagging threshold\")\n\t}\n\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, threshold}\n\tboard.perms.WithPermission(caller, PermissionBoardFlaggingUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\n\t\tgFlaggingThresholds.Set(boardID.String(), threshold)\n\t\tstd.Emit(\n\t\t\t\"FlaggingThresholdUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"threshold\", strconv.Itoa(threshold),\n\t\t)\n\t})\n}\n\n// GetFlaggingThreshold returns the number of flags required to hide a thread or comment within a board.\nfunc GetFlaggingThreshold(boardID BoardID) int {\n\tassertBoardExists(boardID)\n\treturn getFlaggingThreshold(boardID)\n}\n\n// FlagThread adds a new flag to a thread.\n//\n// Flagging requires special permissions and hides the thread when\n// the number of flags reaches a pre-defined flagging threshold.\nfunc FlagThread(boardID BoardID, threadID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionThreadFlag)\n\t}\n\n\tt, ok := board.GetThread(threadID)\n\tif !ok {\n\t\tpanic(\"post doesn't exist\")\n\t}\n\tassertThreadIsNotFrozen(t)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(t, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\tt.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ThreadFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n\n// FlagReply adds a new flag to a comment or reply.\n//\n// Flagging requires special permissions and hides the comment or reply\n// when the number of flags reaches a pre-defined flagging threshold.\nfunc FlagReply(boardID BoardID, threadID, replyID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionReplyFlag)\n\t}\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsNotFrozen(thread)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(reply, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\treply.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n"},{"name":"public_freeze.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// FreezeBoard freezes a board so no more threads and comments can be created or modified.\nfunc FreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, true)\n}\n\n// UnfreezeBoard removes frozen status from a board.\nfunc UnfreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, false)\n}\n\n// IsBoardFrozen checks if a board has been frozen.\nfunc IsBoardFrozen(boardID BoardID) bool {\n\tboard := mustGetBoard(boardID)\n\treturn board.IsReadonly()\n}\n\n// FreezeThread freezes a thread so thread cannot be replied, modified or deleted.\n//\n// Fails if board is frozen.\nfunc FreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, true)\n}\n\n// UnfreezeThread removes frozen status from a thread.\n//\n// Fails if board is frozen.\nfunc UnfreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, false)\n}\n\n// IsThreadFrozen checks if a thread has been frozen.\n//\n// Returns true if board is frozen.\nfunc IsThreadFrozen(boardID BoardID, threadID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treturn board.IsReadonly() || thread.IsReadonly()\n}\n\n// UnfreezeReply removes frozen status from a reply.\n//\n// Fails when parent thread or board are frozen.\nfunc UnfreezeReply(boardID BoardID, threadID, replyID PostID) {\n\t// XXX: Is there a use case for also freezing replies?\n\tsetReplyReadonly(boardID, threadID, replyID, false)\n}\n\n// FreezeReply freezes a thread reply so it cannot be modified or deleted.\n//\n// Fails when parent thread or board are frozen.\nfunc FreezeReply(boardID BoardID, threadID, replyID PostID) {\n\tsetReplyReadonly(boardID, threadID, replyID, true)\n}\n\n// IsReplyFrozen checks if a thread reply has been frozen.\n//\n// Returns true when board or a parent thread is frozen.\nfunc IsReplyFrozen(boardID BoardID, threadID, replyID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\treturn board.IsReadonly() || thread.IsReadonly() || reply.IsReadonly()\n}\n\nfunc setReplyReadonly(boardID BoardID, threadID, replyID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\tif isReadonly {\n\t\tassertReplyIsNotFrozen(reply)\n\t}\n\n\treply.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ReplyFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setThreadReadonly(boardID BoardID, threadID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tif isReadonly {\n\t\tassertThreadIsNotFrozen(thread)\n\t}\n\n\tthread.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ThreadFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setBoardReadonly(boardID BoardID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tif isReadonly {\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionBoardFreeze)\n\n\tboard.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"BoardFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n"},{"name":"public_lock.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// LockRealm locks the realm making it readonly.\n//\n// WARNING: Realm can't be unlocked once locked.\n//\n// Realm can also be locked without locking realm members.\n// Realm members can be locked when locking the realm or afterwards.\n// This is relevant for two reasons, one so members can be modified after lock.\n// The other is for realm owners, which can delete threads and comments after lock.\nfunc LockRealm(lockRealmMembers bool) {\n\tassertRealmMembersAreNotLocked()\n\n\t// If realm members are not being locked assert that realm is no locked.\n\t// Members can be locked after locking the realm, in a second `LockRealm` call.\n\tif !lockRealmMembers {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmLock, nil, func(Args) {\n\t\tgLocked.realm = true\n\t\tgLocked.realmMembers = lockRealmMembers\n\n\t\tstd.Emit(\n\t\t\t\"RealmLocked\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"lockRealmMembers\", strconv.FormatBool(lockRealmMembers),\n\t\t)\n\t})\n}\n\n// IsRealmLocked checks if boards realm has been locked.\nfunc IsRealmLocked() bool {\n\treturn gLocked.realm\n}\n\n// AreRealmMembersLocked checks if realm members has been locked.\nfunc AreRealmMembersLocked() bool {\n\treturn gLocked.realmMembers\n}\n\nfunc assertRealmIsNotLocked() { // TODO: Add filtests for locked realm case to all public functions\n\tif gLocked.realm {\n\t\tpanic(\"realm is locked\")\n\t}\n}\n\nfunc assertRealmMembersAreNotLocked() { // TODO: Add filtests for locked members case to all public member functions\n\tif gLocked.realmMembers {\n\t\tpanic(\"realm and members are locked\")\n\t}\n}\n"},{"name":"render.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/p/demo/mux\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst (\n\tpageSizeBoards  = 6\n\tpageSizeThreads = 6\n\tpageSizeReplies = 10\n)\n\nconst menuManageBoard = \"manageBoard\"\n\nfunc Render(path string) string {\n\trouter := mux.NewRouter()\n\trouter.HandleFunc(\"\", renderBoardsList)\n\trouter.HandleFunc(\"help\", renderHelp)\n\trouter.HandleFunc(\"admin-users\", renderMembers)\n\trouter.HandleFunc(\"{board}\", renderBoard)\n\trouter.HandleFunc(\"{board}/members\", renderMembers)\n\trouter.HandleFunc(\"{board}/{thread}\", renderThread)\n\trouter.HandleFunc(\"{board}/{thread}/{reply}\", renderReply)\n\n\trouter.NotFoundHandler = func(res *mux.ResponseWriter, _ *mux.Request) {\n\t\tres.Write(\"Path not found\")\n\t}\n\n\treturn router.Render(path)\n}\n\nfunc renderHelp(res *mux.ResponseWriter, _ *mux.Request) {\n\tres.Write(\"# Boards Help\\n\")\n\tif gHelp != \"\" {\n\t\tres.Write(gHelp)\n\t} else {\n\t\tres.Write(\"### Help content has not been uploaded\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(newLink(\"upload boards help\", txlink.Call(\"SetHelp\", \"content\", \"\")))\n\t\tres.Write(\" ?\")\n\t}\n}\n\nfunc renderBoardsList(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tres.Write(\"# Boards\\n\\n\")\n\trenderBoardListMenu(res, req)\n\tres.Write(\"\\n\\n---\\n\")\n\n\tif gBoardsByID.Size() == 0 {\n\t\tlink := txlink.Call(\"CreateBoard\", \"name\", \"\")\n\t\tres.Write(\"### Currently there are no boards\\n\")\n\t\tres.Write(\"Be the first to \")\n\t\tres.Write(newLink(\"create a new board\", link))\n\t\tres.Write(\" !\")\n\n\t\treturn\n\t}\n\n\tp, err := pager.New(req.RawPath, gBoardsByID.Size(), pager.WithPageSize(pageSizeBoards))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tboard := v.(*Board)\n\n\t\tres.Write(\"**\" + newLink(board.GetName(), board.GetURL()) + \"**  \\n\")\n\t\tres.Write(\"Created by \" + newUserLink(board.creator) + \" \")\n\t\tres.Write(\"on \" + board.createdAt.Format(dateFormat))\n\t\tres.Write(\", #\" + board.id.String() + \"  \\n\")\n\t\tres.Write(\"**\" + strconv.Itoa(board.threads.Size()) + \" threads\")\n\t\tif board.IsReadonly() {\n\t\t\tres.Write(\", read-only\")\n\t\t}\n\n\t\tres.Write(\"**\\n\\n\")\n\t\treturn false\n\t}\n\n\tres.Write(\"Sort by: \")\n\tr := realmpath.Parse(req.RawPath)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tres.Write(newLink(\"newest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tres.Write(newLink(\"oldest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n---\\n\")\n\t\tres.Write(pager.Picker(p))\n\t}\n}\n\nfunc renderBoardListMenu(res *mux.ResponseWriter, req *mux.Request) {\n\tpath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\n\tres.Write(newLink(\"Create Board\", txlink.Call(\"CreateBoard\", \"name\", \"\")))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"List Admin Users\", path+\":admin-users\"))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"Help\", path+\":help\"))\n\tres.Write(\"\\n\\n\")\n}\n\nfunc renderBoard(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tlink := newLink(\"create a new board\", txlink.Call(\"CreateBoard\", \"name\", name))\n\t\tres.Write(\"### The board you are looking for does not exist\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(link)\n\t\tres.Write(\" ?\")\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tmenu := renderBoardMenu(board, req)\n\n\tres.Write(board.Render(req.RawPath, menu))\n}\n\nfunc renderBoardMenu(board *Board, req *mux.Request) string {\n\tvar (\n\t\tb               strings.Builder\n\t\tboardMembersURL = board.GetPath() + \"/members\"\n\t)\n\n\tif board.IsReadonly() {\n\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\tb.WriteString(\" • \")\n\t\tb.WriteString(newLink(\"Unfreeze Board\", board.GetUnfreezeFormURL()))\n\t\tb.WriteString(\"\\n\")\n\t} else {\n\t\tb.WriteString(newLink(\"Create Thread\", board.GetPostFormURL()))\n\t\tb.WriteString(\" • \")\n\n\t\tmenu := getCurrentMenu(req.RawPath)\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"**Manage Board**\")\n\t\t} else {\n\t\t\tb.WriteString(newLink(\"Manage Board\", menuURL(menuManageBoard)))\n\t\t}\n\n\t\tb.WriteString(\"  \\n\")\n\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"↳\")\n\t\t\tb.WriteString(newLink(\"Invite Member\", board.GetInviteMemberFormURL()))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"Freeze Board\", board.GetFreezeFormURL()))\n\t\t\tb.WriteString(\"\\n\\n\")\n\t\t}\n\t}\n\n\treturn b.String()\n}\n\nfunc renderThread(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + rawID)\n\t} else if thread.IsHidden() {\n\t\tres.Write(\"Thread with ID: \" + rawID + \" has been flagged as inappropriate\")\n\t} else {\n\t\tres.Write(thread.Render(req.RawPath, \"\", 5))\n\t}\n}\n\nfunc renderReply(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\trawID = req.GetVar(\"reply\")\n\trID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid reply ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + req.GetVar(\"thread\"))\n\t\treturn\n\t}\n\n\treply, found := thread.GetReply(PostID(rID))\n\tif !found {\n\t\tres.Write(\"Reply does not exist with ID: \" + rawID)\n\t\treturn\n\t}\n\n\t// Call render even for hidden replies to display children.\n\t// Original comment content will be hidden under the hood.\n\t// See: #3480\n\tres.Write(reply.RenderInner())\n}\n\nfunc renderMembers(res *mux.ResponseWriter, req *mux.Request) {\n\tboardID := BoardID(0)\n\tperms := gPerms\n\tname := req.GetVar(\"board\")\n\tif name != \"\" {\n\t\tv, found := gBoardsByName.Get(name)\n\t\tif !found {\n\t\t\tres.Write(\"### Board not found\")\n\t\t\treturn\n\t\t}\n\n\t\tboard := v.(*Board)\n\t\tboardID = board.GetID()\n\t\tperms = board.perms\n\n\t\tres.Write(\"# \" + board.GetName() + \" Members\\n\")\n\t\tres.Write(\"### These are the board members\\n\\n\")\n\t} else {\n\t\tres.Write(\"# Admin Users\\n\")\n\t\tres.Write(\"### These are the admin users of the realm\\n\\n\")\n\t}\n\n\t// Create a pager with a small page size to reduce\n\t// the number of username lookups per page.\n\tp, err := pager.New(req.RawPath, perms.UsersCount(), pager.WithPageSize(5))\n\tif err != nil {\n\t\tres.Write(err.Error())\n\t\treturn\n\t}\n\n\tres.Write(\"| Member | Role | Actions |\\n| --- | --- | --- |\\n\")\n\tperms.IterateUsers(p.Offset(), p.PageSize(), func(u User) bool {\n\t\tres.Write(\"| \")\n\t\tres.Write(newUserLink(u.Address))\n\t\tres.Write(\" | \")\n\t\tres.Write(rolesToString(u.Roles))\n\t\tres.Write(\" | \")\n\t\tres.Write(newLink(\"remove\", txlink.Call(\n\t\t\t\"RemoveMember\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t)))\n\t\tres.Write(\" • \")\n\t\tres.Write(newLink(\"change role\", txlink.Call(\n\t\t\t\"ChangeMemberRole\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t\t\"role\", \"\",\n\t\t)))\n\t\tres.Write(\" |\\n\")\n\t\treturn false\n\t})\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n\\n\" + pager.Picker(p))\n\t}\n}\n\nfunc renderNotice(res *mux.ResponseWriter) {\n\tif gNotice == \"\" {\n\t\treturn\n\t}\n\n\tres.Write(\"\u003e \")\n\tres.Write(gNotice)\n\tres.Write(\"\\n\\n\")\n}\n\nfunc rolesToString(roles []Role) string {\n\tif len(roles) == 0 {\n\t\treturn \"\"\n\t}\n\n\tnames := make([]string, len(roles))\n\tfor i, r := range roles {\n\t\tnames[i] = string(r)\n\t}\n\treturn strings.Join(names, \", \")\n}\n\nfunc menuURL(name string) string {\n\t// TODO: Menu URL works because no other GET arguments are being used\n\treturn \"?menu=\" + name\n}\n\nfunc getCurrentMenu(rawURL string) string {\n\t_, rawQuery, found := strings.Cut(rawURL, \"?\")\n\tif !found {\n\t\treturn \"\"\n\t}\n\n\tquery, _ := url.ParseQuery(rawQuery)\n\treturn query.Get(\"menu\")\n}\n"},{"name":"z_0_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(\"test123\")\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_0_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tboardName = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(boardName)\n}\n\nfunc main() {\n\tboards2.CreateBoard(boardName)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_0_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_0_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"gnoland\")\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_0_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar name = strings.Repeat(\"X\", boards2.MaxBoardNameLength+1)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(name)\n}\n\n// Error:\n// board name is too long, maximum allowed is 50 characters\n"},{"name":"z_0_h_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname   = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\tboards2.InviteMember(0, member, boards2.RoleOwner) // Operate on realm DAO members instead of individual boards\n\ttesting.SetOriginCaller(member)\n\tusers.Register(name)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(name)\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"test123\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread as a moderator\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagThread(404, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_10_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Make the next call as an uninvited user\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, 404, \"\")\n}\n\n// Error:\n// post doesn't exist\n"},{"name":"z_10_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_10_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to flag threads\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with a specific flagging threshold\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread and flag it as a moderator\n\ttesting.SetOriginCaller(moderator)\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item has been already flagged by a current user\n"},{"name":"z_10_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a thread so the realm owner can flag and hide it with a single flag\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\t// Also freeze board to make sure that realm owner can still flag the thread\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_11_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_11_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditThread(404, 1, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_11_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_11_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to edit threads\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid   boards2.BoardID\n\tpid   boards2.PostID\n\ttitle = strings.Repeat(\"X\", boards2.MaxThreadTitleLength+1)\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, \"bar\")\n}\n\n// Error:\n// thread title is too long, maximum allowed is 100 characters\n"},{"name":"z_12_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Create a reply and a sub reply\n\tparentRID := boards2.CreateReply(bid, tid, 0, \"Parent\")\n\trid = boards2.CreateReply(bid, tid, parentRID, \"Child\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditReply(404, 1, 0, \"body\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_12_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, 404, 0, \"body\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_12_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, 404, \"body\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_12_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"new body\")\n}\n\n// Error:\n// only the reply creator is allowed to edit it\n"},{"name":"z_12_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Flag the reply so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"body\")\n}\n\n// Error:\n// reply is hidden\n"},{"name":"z_12_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_13_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagReply(404, 1, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_13_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, 404, 1, \"\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_13_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, 404, \"\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_13_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_13_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_13_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to flag replies\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a reply so the realm owner can flag and hide it with a single flag\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\t// Also freeze board to make sure that realm owner can still flag the reply\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n}\n\n// Output:\n// true\n"},{"name":"z_14_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_14_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteReply(404, 1, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_14_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, 404, 1)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_14_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, 404)\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_14_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent\")\n\tboards2.CreateReply(bid, tid, rid, \"Child reply\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Render content must contain the releted message instead of reply's body\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e This reply has been deleted\\n\"))\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e Child reply\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_14_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Call using a user that has not permission to delete replies\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_14_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to delete replies\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_15_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\tboards2.FlagThread(srcBID, srcTID, \"idk\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread is flagged\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_15_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID = 1024\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread doesn't exist\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread does not exist with ID: 1024\n"},{"name":"z_15_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_15_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/ufmt\"\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"original title\", \"original text\")\n}\n\nfunc main() {\n\t// Success case\n\ttID := boards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n\tp := ufmt.Sprintf(\"dst-board/%s\", tID)\n\tout := boards2.Render(p)\n\n\tprintln(strings.Contains(out, \"original text\"))\n\tprintln(strings.Contains(out, \"repost title\"))\n\tprintln(strings.Contains(out, \"repost text\"))\n}\n\n// Output:\n// true\n// true\n// true\n"},{"name":"z_15_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Create a board with a thread\n\torigBID := boards2.CreateBoard(\"origin-board\")\n\torigTID := boards2.CreateThread(origBID, \"title\", \"text\")\n\n\t// Create a second board and repost a thread using an empty title\n\tsrcBID = boards2.CreateBoard(\"source-board\")\n\tsrcTID = boards2.CreateRepost(origBID, origTID, \"original title\", \"original text\", srcBID)\n\n\t// Create a third board to try reposting the repost\n\tdstBID = boards2.CreateBoard(\"destination-board\")\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n}\n\n// Error:\n// reposting a thread that is a repost is not allowed\n"},{"name":"z_16_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 4)\n\n\t// Ensure that flagging threshold changed\n\tprintln(boards2.GetFlaggingThreshold(bid))\n}\n\n// Output:\n// 4\n"},{"name":"z_16_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nconst bid boards2.BoardID = 404\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_16_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(1, 0)\n}\n\n// Error:\n// invalid flagging threshold\n"},{"name":"z_17_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsBoardFrozen(bid))\n}\n\n// Output:\n// true\n"},{"name":"z_17_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_18_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_18_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\tuser = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid  = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_18_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tperms boards2.Permissions\n\tbid   boards2.BoardID\n)\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foobar\")\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new board permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_19_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\t// Attempt to freeze a thread on frozen board\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_19_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a frozen thread\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_19_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n}\n\n// Output:\n// true\n"},{"name":"z_1_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, boards2.RoleOwner)\n}\n\n// Error:\n// only owners are allowed to invite other owners\n"},{"name":"z_1_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n\trole  = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, user, boards2.Role(\"foobar\")) // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// invalid role: foobar\n"},{"name":"z_1_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole  = boards2.RoleOwner\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\") // Operate on board DAO members\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(0, user, role)) // Operate on realm DAO\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_1_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, user, role)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n}\n\n// Error:\n// user already exists\n"},{"name":"z_1_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_20_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a reply on frozen thread\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_20_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\nfunc main() {\n\t// Attempt to freeze already frozen reply\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_20_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// reply frozen\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.FreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// thread frozen\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// board frozen\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n}\n\n// Output:\n// false\n// true\n// false\n// true\n// false\n// true\n// false\n"},{"name":"z_20_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// unfrozen thread - should work\n\tr2 := boards2.CreateReply(bid, tid, rid, \"child 1\")\n\n\t// frozen thread - can't reply\n\tboards2.FreezeReply(bid, tid, rid)\n\tboards2.CreateReply(bid, tid, r2, \"child 2\")\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_21_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_21_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Set an initial message so it can be cleared\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n\tprintln(strings.HasPrefix(content, \"# Boards\"))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_21_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to set realm notice\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"Foo\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// false\n"},{"name":"z_22_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// realm is locked\n"},{"name":"z_22_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to lock the realm\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_22_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(true)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(true)\n}\n\n// Error:\n// realm and members are locked\n"},{"name":"z_22_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Lock the realm without locking realm members\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_23_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateRealmMembers(0, func(u boards2.User) bool {\n\t\tprintln(u.Address, string(u.Roles[0]))\n\t\treturn false\n\t})\n}\n\n// Output:\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_24_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid := boards2.CreateBoard(\"test123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleAdmin)\n\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateBoards(0, func(b boards2.ReadonlyBoard) bool {\n\t\tprintln(b.ID().String())\n\t\tprintln(b.Name())\n\n\t\tb.IterateMembers(0, b.MembersCount(), func(u boards2.User) bool {\n\t\t\tprintln(u.Address, string(u.Roles[0]))\n\t\t\treturn false\n\t\t})\n\t})\n}\n\n// Output:\n// 1\n// test123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj admin\n// 2\n// foo123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_2_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Test comment\"\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\trid := boards2.CreateReply(bid, tid, 0, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid == 2)\n\n\t// Render content must contain the reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateReply(404, 1, 0, \"comment\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_2_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, 404, 0, \"comment\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_2_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 404, \"comment\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_2_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Hide thread by flagging it so reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide thread by flagging it so reply of a reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"thread\", \"thread\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide reply by flagging it so sub reply can't be submitted\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_2_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_2_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"First comment\")\n}\n\nfunc main() {\n\trid2 := boards2.CreateReply(bid, tid, rid, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid2 == 3)\n\n\t// Render content must contain the sub-reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_k_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent comment\")\n\n\t// Flag parent post so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"Sub comment\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_l_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// cannot reply to a frozen thread\n\tboards2.CreateReply(bid, tid, 0, \"foobar\")\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_2_m_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, strings.Repeat(\"x\", boards2.MaxReplyLength+1))\n}\n\n// Error:\n// reply is too long, maximum allowed is 300 characters\n"},{"name":"z_2_n_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\u003e Markdown blockquote\")\n}\n\n// Error:\n// using Markdown headings, blockquotes or horizontal lines is not allowed in replies\n"},{"name":"z_3_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname    = \"foo123\"\n\tnewName = \"bar123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by the default board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_3_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, name)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_3_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RenameBoard(\"unexisting\", \"foo\")\n}\n\n// Error:\n// board does not exist with name: unexisting\n"},{"name":"z_3_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_3_f_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by another board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_g_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"short\")\n}\n\n// Error:\n// the minimum allowed board name length is 6 characters\n"},{"name":"z_3_i_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"barbaz\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_4_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleOwner\n\tbid     = boards2.BoardID(0) // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, member, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\towner2 = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin  = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, owner2, boards2.RoleOwner)\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, owner2, boards2.RoleAdmin)\n}\n\n// Error:\n// admins are not allowed to remove the Owner role\n"},{"name":"z_4_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\tboards2.InviteMember(bid, admin2, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin2, boards2.RoleOwner)\n}\n\n// Error:\n// admins are not allowed to promote members to Owner\n"},{"name":"z_4_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid     = boards2.BoardID(0)                                      // Operate on realm DAO members instead of individual boards\n\tnewRole = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole) // Owner can promote other members to Owner\n\n\t// Ensure that new role has been changed to owner\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin, boards2.Role(\"foo\"))\n}\n\n// Error:\n// invalid role: foo\n"},{"name":"z_4_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, \"invalid address\", boards2.RoleModerator)\n}\n\n// Error:\n// invalid member address\n"},{"name":"z_4_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, user, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.RemoveMember(bid, user)\n\n\t// Check that user is not a member\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n"},{"name":"z_5_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// member not found\n"},{"name":"z_6_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole   = boards2.RoleGuest\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, member, role)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, member, role))\n\tprintln(boards2.HasMemberRole(bid, member, \"invalid\"))\n\tprintln(boards2.IsMember(bid, member))\n}\n\n// Output:\n// true\n// false\n// true\n"},{"name":"z_6_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleGuest\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, user, role))\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n// false\n"},{"name":"z_7_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"test123\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tbid2, found := boards2.GetBoardIDFromName(name)\n\tprintln(found)\n\tprintln(bid2 == bid)\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_7_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid, found := boards2.GetBoardIDFromName(\"foobar\")\n\tprintln(found)\n\tprintln(bid == 0)\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_8_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\ttid := boards2.CreateThread(bid, title, body)\n\n\t// Ensure that returned ID is right\n\tprintln(tid == 1)\n\n\t// Thread should not be frozen by default\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// false\n// true\n// true\n"},{"name":"z_8_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateThread(404, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_8_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_8_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_8_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_9_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, title, body)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"},{"name":"z_9_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteThread(404, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_9_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, 404)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_9_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Call using a user that has not permission to delete threads\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_9_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to delete threads\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"}]},"deposit":""}],"fee":{"gas_wanted":"90000000","gas_fee":"900000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bgq2mHaqO+ClZqcBvMmMWga7izsxHfWWkLvVdUj/SREIux9mkLcHZopajDlzRU4k8U9+p/SzvdPV1ClD8QJjDQ=="}],"memo":""},"metadata":{"timestamp":"1743761702"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"RemoveMember","args":["0","g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zFD00e0aO8S4XCcGKK+hYFll9syWCwDLU552HISFFY136K4KdR7O3SYzcay0KJio6THBkoPzfjlp0pdrrSZaCw=="}],"memo":""},"metadata":{"timestamp":"1743761807"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["EmptyWithManyMembers"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"vNXG8vCPc5ta7xG0/BQCSnUVa38VwrZOtdy8pUPKITzPoiAuOf+ocKYSZ8eNNkh7IIeqjFYADPgOZeV4HvxhCw=="}],"memo":""},"metadata":{"timestamp":"1743761888"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ue4B6yp55w8jKpN2/TFsJrGhwsL0FQfrbFY59a0iYKLeVICAB5gIrsCf98/6Ct1/V6fU2vLJh0vpPekTtwc1Bw=="}],"memo":""},"metadata":{"timestamp":"1743761893"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1e5hud66rs7ye4zgeqmqvwfhurs2mnf408hdqcl","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"a6sqt1qst2TFlGCZoP5DLlOrC+145dUBL9Reb5duDYRGb8aWsRu1nlRurPbtCcig+kp7Nk1MyuMdUBL/lK7yCA=="}],"memo":""},"metadata":{"timestamp":"1743761898"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5","admin"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"AnS6SJIzlb3Z5lwMYoeR2KWH8TcOpbi/jH7Vsh9CIEn3KVSckMxDTaYk90fsCYHP2cPMbZfGQwENXQb+9a9bBg=="}],"memo":""},"metadata":{"timestamp":"1743761903"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g12chzmwxw8sezcxe9h2csp0tck76r4ptwdlyyqk","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lLmNQCvV7+oOKZucSXT90nYlTACWN6YEbkZKfccChBh/wUjeqLGS0YyszPxk7YOsj0K2/OGsrYOC0gukKjlMCw=="}],"memo":""},"metadata":{"timestamp":"1743761908"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1ym6zxff3xq7wfldcs3uyu7x7z40gstggcx8zdj","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zgzCQlf7PydhnCAGvd8Qx5PotGs1oRONk3nN95k2LIuFEEAVoHxGj+2PtMBQ1f91iTnBsJ1uKUuOJQ0OCsjTAA=="}],"memo":""},"metadata":{"timestamp":"1743761913"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["TheNumber42"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GJWNOcDkPKGY7PLPSuk2sMiLeBHeDfVKTSCR5ONQGp6pqI9iwCxj1H3cD+bfkCk1+p/UpfubXzU9Ya3q859gBw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["2","What's your take on it\\?","Seen in many places, unknown to many"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hA+wCreZUeme6OpRmNOJjo4Xwsz0he5X8mQ4g4MKVkeGqUwlIsG005FxDN/7RssNNFWH8EzGP4MGIozCwEA7AA=="}],"memo":""},"metadata":{"timestamp":"1743761923"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","What do you mean\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EIVelUPSStgGjqWLsj+NdD0fSHeZvm8Z7RnQvDQSpFuv7mHOGKV52jDZxWwH4lOHL2/e0vJKin2fWyXPF1ClCA=="}],"memo":""},"metadata":{"timestamp":"1743761928"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","よんじゅうに\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"rQ64TW3VyqAx0miELawdw5gR6g2lpNemxzXYq/kxToUNU8GYoXn4qWMO6otVdF+nsvQvkJfBBMHg9uIvDALSCw=="}],"memo":""},"metadata":{"timestamp":"1743761933"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","2","Cuarenta y dos\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y7zCrmgadsgAQCV6OiINH1LJmQ78gDYUTZ+ny0F1fNCL9nQPvbFTOwr7SX2kuaPe8iKbztZCe6N/1B//EEtpAw=="}],"memo":""},"metadata":{"timestamp":"1743761938"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ThreadsExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lH+1XZ2fVmGI2PXKfYUxKBFXKw3db+JjwAjECmsH4VXo+ppDtf79dEux0SdRltNdbx4zEW9O/3WENwu3hg5SBA=="}],"memo":""},"metadata":{"timestamp":"1743761943"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Seventh","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6NX0nRYSSn12bZ78/dmmYxWXM4IK9yQjLAomZn7edZ8Ri5BAtqZOSwvXbhZ0BFcUTgosLAgyrX30LteqkNnxBQ=="}],"memo":""},"metadata":{"timestamp":"1743761948"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Sixth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"sIPoU9jO89zc4y1GAYITh3PU9zJVGY3ugfSMsoBBxc93lOXDLAFUE+2AMQa/7Kwfyo1af4FXXFfygYCCICYSAg=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fifth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KdKslB6f6JkEB3boj5CZ1cIAOdAdF3bJ6cX6dsrT4XBK3u41XzmAK96gilAtVcVpCqNpnLul6wbbL+0exHd4AA=="}],"memo":""},"metadata":{"timestamp":"1743761958"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fourth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"D1fMGgWqqsxK7vF0ojPp36NpP6eU+1LsEUdbC2NL/xjhlsZfgU7Vu2XmXjFhFM9B2VGCwUBnEaMVufr3rW1HCQ=="}],"memo":""},"metadata":{"timestamp":"1743761963"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Third","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4uy78ABsfnWCUqmuzoU8ZUdJ7jpJrZa7J/cv/kvFT3peJhE2Rv7VrkTYcaZHKKjzWG14JmND4ZaaJnNr907Ag=="}],"memo":""},"metadata":{"timestamp":"1743761968"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Second","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"5dDdgrVSfFfD9kYaBD369pxn1g7l6jDOaNANwcuxGwhUaT9j5pcroAqHHTu5UJf4sekSNb/nSNEp37ucimaCCQ=="}],"memo":""},"metadata":{"timestamp":"1743761973"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","First with many Replies","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"OmSespthAIe99nCg3NNVqwdogdID85sViEarnls5JCXhygv/lzl79T4CFQIa42T13gOLMkPX9fm7OwT8mU1RAQ=="}],"memo":""},"metadata":{"timestamp":"1743761978"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZDniAUL1tJpPm4oBs4ExDExl8MJMedEzUBdezq600CaJEYvBznvd3vueZ5siRp7tHdaV0DgNmcXzZ+OxpqcQCg=="}],"memo":""},"metadata":{"timestamp":"1743761983"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","8","Sub First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F8ifXbTQbXb5RSL61RUb9S0tBzok3uo8RTDhh0501znHUYKYILNSitQg9Ak6XmwcV0UQcgO9zzLx316DBB7YBg=="}],"memo":""},"metadata":{"timestamp":"1743761988"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Second"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CkwjnV+bUGNb/AghoAxE8xc8/BZwAp5Qdhy4xkfZrtUpxGDRt1ji9DaM2ZzUQnDBQeXiev5RiZyA7I4gwva7Dw=="}],"memo":""},"metadata":{"timestamp":"1743761993"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Third"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3sNgEYAAHfXxWFQdYzafqv5vsFDEBMdCE3RRaKyQEQxpX92yNavn05wq7EtOeiIymOD1B7LWBUCDIGMxO27iBw=="}],"memo":""},"metadata":{"timestamp":"1743761998"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fourth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yVMsA1dVS5o2dpm1EoxH55Ybm8sBwbmeCFhyboRoWjp9qnZhLXLvzu73jo0nZa8xJialU0upoHcWrr76K5rPBw=="}],"memo":""},"metadata":{"timestamp":"1743762003"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fifth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UEHh1VeBqkL3lCultuOyGU0LDvVTlrhg6wTJqAn+5gF2QUKWZi3Gn4CBbkoY0byq1OCDXr6R/K+SP3aB8QObAw=="}],"memo":""},"metadata":{"timestamp":"1743762008"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Sixth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3kby94L/InKntqzU+T3NRDno58jFcx87O0/FldOxJDlcT56+WaKthft6n+Wp0Jl1lz8Xv3LmgwGWQ3Pc52+oBg=="}],"memo":""},"metadata":{"timestamp":"1743762013"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Seventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"L/zuxl0k3DoZFKNs/kGgaEh1ROr/YafHDEmXlJw9aD/jH2Mbm/PhvU3La/o0PchdGC0A42xuwZ+SeMQIyUVdCA=="}],"memo":""},"metadata":{"timestamp":"1743762018"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eigth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VpVi4ICdRdDP3sT2HJNj5Vl5gFKZxgy+58rqpnkR8l1QBLPZDjP+hklXzsmhDouMdI+ssFCTU4mD1/W7sGUQAw=="}],"memo":""},"metadata":{"timestamp":"1743762023"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Ninth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u/zQSKIjPHAPocj4hEnEw441VWRByccTtenD12X8cBnYxBDHNV87PR+JBWUjNXN7GLZfPcjK5igMD2l5IqhwDA=="}],"memo":""},"metadata":{"timestamp":"1743762028"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Tenth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tnUlmhe3JjOtRxnpCDbYcpaeF3rNa8N0F5EYwJU8ba8zDX9St1hiBp66tScfyYbTeLE2aTRmUa8E+zh730++BA=="}],"memo":""},"metadata":{"timestamp":"1743762033"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eleventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"q43M1mc9mbW7TJWgTyT1L37ePTd7N1hkAWbUUfMztPKCblhBrECCKrzMwiE5iL+afNgiWGZcCpFc5KwtwPSyCQ=="}],"memo":""},"metadata":{"timestamp":"1743762039"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ReadOnlyExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"STdbtDRKw327m8lDyp9W1Fnr2A3iC2uws1pBNHuL9xya2JE6IYbU0Fe12FThHOLWK80Yp+L43bgVNOSOamrWAg=="}],"memo":""},"metadata":{"timestamp":"1743762044"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["4","Example Thread","This thread shouldn't be writable"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaJ2B8/gC/qRQxVQVYF4TUIkqDZiwqa1sqfTP+eIV8Q7gkx1sTOSqcWqvg5mOWw6wBTH9LhUi9lSXVYAUw7eCA=="}],"memo":""},"metadata":{"timestamp":"1743762049"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"FreezeBoard","args":["4"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SmNrbgokoxiJTXtSIymwGMBphqmB1J06gs/jdVJ1XKUuRO3CMmaJ5ytxvmVvwBlAja4QqA1T7bcgto5T8tv/Cg=="}],"memo":""},"metadata":{"timestamp":"1743762054"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["RepostExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jPxomuyfqs6yS9mJ1zXaTs9FWXwgPHaVJcH6/ADQ67I3vPXMxoKqJstfrbxMrvuuqtUPxU+pTgv3Im2lBV+qCA=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateRepost","args":["2","1","Custom repost title","Custom repost body","5"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VLCyyn5BwJZr8c7LJIX/9fiycuO7cfuq8Ulq6uCa7ZTmaUvPe7Mb2K54gI+4hDxEC+TBNLCTAr4W0YDi7uuaCQ=="}],"memo":""},"metadata":{"timestamp":"1743762064"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HUsxXJsbLLE7eqalnFbxs6QLrCECri8DfkKxQ7I0jDcoAuqpdwFv0TO1Y0WqpYAp1otB2t+BUQoG9VXhmYk3Dw=="}],"memo":""},"metadata":{"timestamp":"1743762325"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XQlmGs92NlV8UrVFWCivs35isbsW6JNzJB0nmE3vvHZCqpozufS9D9wGALa3Hu0Q9Kpd3d5x2WZ+q2iTmnOxAA=="}],"memo":""},"metadata":{"timestamp":"1743762441"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ua3nwMeerrzI17poTLZrtcvFkUSI0DU94fhwdpAZ0sj3oX+Zdy58QCBr99lqnJK884I7Qv3lORzBynXG5jbwDQ=="}],"memo":""},"metadata":{"timestamp":"1743762466"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743762511"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762858"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1aykqe5ddemku5mwd3elmwtpj8jgss47xrqpag4","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"chG844+xbriyl9WGrlc6xkHm736dDMmfgMfPREBqaiPEII5TfCVIbQ8q6DSR7LSm2+Hja93gLN28dYpl/In2Dw=="}],"memo":""},"metadata":{"timestamp":"1743767985"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1dtuj65mgja87gh0c45pd3rt4cah0kkw9lzld4y","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HKCPLxCVbpHst0ip432MlUIpiFmurceZOAjNZOCjq3aXAfsNREbyej3mLe240/+w4d7OeGD4LFB/ninsfphACA=="}],"memo":""},"metadata":{"timestamp":"1743768151"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743769312"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["test-manfred"]}],"fee":{"gas_wanted":"50000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"4xO97j7lj2RX9s6xjyqRDNGa8qs6kEShqhOJIObF+nH9iKCbmHagUmAJgVbgdauLbAzMMLlx6e05HgwXESc3Cw=="}],"memo":""},"metadata":{"timestamp":"1743774399"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["6","testing testing","👋"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1ZtT0NfPPwkk8JYdIJD/IEwmoveEfqV53nerV1Jt4K4AKhIHKr//2rMglFermH9UI7JPWIhf8sADVOONCPvCA=="}],"memo":""},"metadata":{"timestamp":"1743774450"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"9104212","gas_fee":"4742446ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"o+0plDtw6ntbQncO7v5Y1GqAV5NE21j8bDyIcKkKMqGO5qYPrutx4yl5WPJAoGz5pg8Howi/Aq/wJzxWHPXjCw=="}],"memo":""},"metadata":{"timestamp":"1743775038"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743775997"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776002"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776017"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"UpdateStatus","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"abVD8zghTuhurQtvCizQ+m2Lh72r0t0AJHh2dt3e+kSQOqjFfZtJ0xO5eNlHm8Kj7nRvTjeVoqmzWdYE3b/sAg=="}],"memo":""},"metadata":{"timestamp":"1743776022"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743776083"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g14n0zsnsk054uxwvnwmmqyrq6e87ynk5vq98qqp","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Kf5rmwnMs/nfl+VXJtQqrhsUFZqTQqybk5ADrsI5O2Lt9DVf+QqRP9vswBSC/WpPkgGMPeFBgQaLHpOi5awWDQ=="}],"memo":""},"metadata":{"timestamp":"1743587748"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1dzzx5qwcmawqnhhd76ehkteas5v2dg42hqnd7g","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"pfIacFtVu0UK1MgJVmS1uGL6BRTXTkc9SQ7qHy+Zh1xZcEhs0CJv+ZTv/D7TuHrgoXBTNOi7qLKgo0K36uvBDA=="}],"memo":""},"metadata":{"timestamp":"1743587759"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587924"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587939"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743587980"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743588120"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743588221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591981"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591991"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZAHmHJr6/jLN+AjWJQsb+t0vv3lF+WAfpd8525qOiqmXO1DeZ/rV+bzzh7fkaAAmTi9F/5Z00T8EF7sku2YBDA=="}],"memo":""},"metadata":{"timestamp":"1743597359"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2231690ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lBXZ55L/zJcSu0Nz3CtVpRumcACjpEVubgsLPiCKApSeOjEnmuuVkxH2mnh1ZMWt1nDVkbT4Zk0FBO8ythcADQ=="}],"memo":""},"metadata":{"timestamp":"1743597379"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887428","gas_fee":"165039ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CfKWRWGdsPCxkfaq3HED6HeeaMrLAQl4JfoKLXBzORDoqSui9g0pwgOvbMLAJQh1WsURlVQUKCT9bBxJIKGxDg=="}],"memo":""},"metadata":{"timestamp":"1743597384"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"3059175","gas_fee":"6374ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"U/Lh/vqW/msAgD5fgvDz5Eq1UBCZXknYYLXoKUKT0er1CEFGSZjihcKI4TZK16Rt0vcFnL2kR85a6+HsO3TJDg=="}],"memo":""},"metadata":{"timestamp":"1743597409"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Z3rGTeiuwQxAO1383d2XyzJ3ny+R6lVsMCH3AfNnQfHodVZUZlD1UyLA6hk/LqmMgMGhwQNMeroewPj6tNwhAQ=="}],"memo":""},"metadata":{"timestamp":"1743606306"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"miFYsl850KdWfaYVeUCHFUBQHWw0FUfKp/gh/tCTiIOIBm2jg+ki3YtWZkjq2jUCoHeN+nHx1smTN8xuOU6XCw=="}],"memo":""},"metadata":{"timestamp":"1743606668"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"9hNkFMu/xsQqvduZoi/8CZDiTtl9CFrjecn8LbIg1aVMvstwEYqA9O7HKQ8blamgzV7Seyv8tzdu9fYGjU2GDA=="}],"memo":""},"metadata":{"timestamp":"1743607723"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NRLFNdnKicUZR6tFldf8s4dn3L2xnF+TrH/JoJbAteD2zrHtiLjHL4faTopSaABlpgVAOkVGUOMILwokq+lkDA=="}],"memo":""},"metadata":{"timestamp":"1743608020"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3bt2TuGnvIPEFRLQmvr9fTNpmw9vddoc7JciKsGoLiP2LEGkuvxB+2sS/3zz6pbvptI6VIC0j3F3TxZiG2dpDw=="}],"memo":""},"metadata":{"timestamp":"1743608226"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n","admin"]}],"fee":{"gas_wanted":"8066534","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h9m9JF3DGXSQEpWHgk633+sSZvuQhVXiyQqXxihNqnWwwdPIUcG9EhGYZRRulcUDjNx9IuzALdpEzFeneOmhCA=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743608291"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"8967781","gas_fee":"18683ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KDUHz1HMhnSVLUZj4hLoxE7FlKqopgGbZMTXpkHV8jjul6TDBgdrfq5AyNFX3fH2sKjVTYGiFtEP3/cuV+m9Cw=="}],"memo":""},"metadata":{"timestamp":"1743608301"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743610126"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"DeleteTodo","args":["0"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ypbOAcxpAUGaUQt6F6KB3OhqJN2cRoD3dF8bkqySqRsVfhrXQJ3O/B9P2ex0jeKkezVoeRIpw2aN+2dwUa2hDQ=="}],"memo":""},"metadata":{"timestamp":"1743611628"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g14gvmle0a5hln0ct7wv857gucr7lmeust35736r","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kePfJ+g+ai4gbewkzMdmETesCmNI4i5ecAxwYpC4S6roDM3odtc8gDYipZqX7r5p37NP5p57MkhcMgODCZhdBA=="}],"memo":""},"metadata":{"timestamp":"1743662226"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4xzI4KB87lg/4EAWdmOPjO/R7VMfE8qE3jHysIvQuOlVylig2lajrqO+Bds39v5UqglfUvVS+mpWQ1KWUIEDA=="}],"memo":""},"metadata":{"timestamp":"1743663236"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"5000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Mq9IBbwNUb1YPvhyQIQhuw/eoxE2a4ue17kTC9Io08f9+CxgmjeHFuxfvteS1xsGsTe8qVVQemJHt10w+GSjDA=="}],"memo":""},"metadata":{"timestamp":"1743663533"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"10000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"MukwMPbas5Oz+wAk+oIfksfQx8DykYMmhaYaOnMynhvtwxNBlYTo4sAAkz1cVPLHYTu5czK6iBDFekbaOjVYDQ=="}],"memo":""},"metadata":{"timestamp":"1743663709"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hZQyD4QXJWRDvfK1fwSMGbJqGAQ6QI6jtPCuOM8yXoguotR561mxeGB6mEztRI0XE0SVsuw3qpzs9Rda9KaACA=="}],"memo":""},"metadata":{"timestamp":"1743666971"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2233340ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"d6iaXDqBE5lH4dYLNIfcEyb9dpHEYoBD1vD7B5sQQJ8c9/7e/ujH30RV7QZTn843pIWTplZj2OQ+GoScxXPPAg=="}],"memo":""},"metadata":{"timestamp":"1743666986"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","send":"1000000ugnot","pkg_path":"gno.land/r/gnoland/users/v1","func":"Register","args":["keyboard_worrier"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"WZ+i8zhkmdovnOGvtVlX0eK04aS2h1730ztiMLbsw0pAHohEIq1jkYrf8CeIcJFTlGRApmQkvRSytq7bVa7RAQ=="}],"memo":""},"metadata":{"timestamp":"1743672162"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743674585"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743675500"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676274"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676415"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676425"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676440"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676450"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676465"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","send":"","pkg_path":"gno.land/r/demo/userbook","func":"SignUp","args":null}],"fee":{"gas_wanted":"3000000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"b6gylbXUNmIJc8+UTKOqtssB3dtRA+9q46TN/WGgpL9pSCAwqVjCVO3BsUCYN4wyi4SFchw0fiUbUbuqOL9wCQ=="}],"memo":""},"metadata":{"timestamp":"1743676600"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"RemoveMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n"]}],"fee":{"gas_wanted":"7891622","gas_fee":"16441ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kFvFubneBzNxFJJsqdcFot4DI76vFnUL61hImedWMOYPT4oNpTPvu35RTbjH/CIjQ2ZbG21nvKR1cq72TNGIAg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677621"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","admin"]}],"fee":{"gas_wanted":"8066714","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TAAONmyVenhy51nV9BGWz5k4HFfNuFr8r7bwnbaBrHkB7w0knuA3L+8qMhD1h7Kp8KeIKKUnE8QMZayYtJMvCg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677721"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887404","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Arj8N87k6sLPuCZEV/uB92axfgpJeojYTh0C6QsSgUHJOeP/v7Sdn25cY045uI+5IiKFqiWhyZBCglJqwGLbAQ=="}],"memo":""},"metadata":{"timestamp":"1743677742"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["hello !"]}],"fee":{"gas_wanted":"887311","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"/GZGejcRk3HCoQIHSbhiOKnS5Dpjycv0Ke9W4W6vbVlF79A6YoudY/KBavSKEUmNR0Y7lyGxlCa+etTe7UT5Dg=="}],"memo":""},"metadata":{"timestamp":"1743677757"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"k8yjgyUuV0ZGtPIzDRM6VHiQExeKiRwy93C0tBfYn3kVZHvpIesoCGGWGvWF0zfoUXDJtZxUpC5QKiazh+i3AQ=="}],"memo":""},"metadata":{"timestamp":"1743680159"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"ChangeMemberRole","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6Ofd6RIF+1UULOLk50dyYYUlkPK5IZ/4Mlp/qHzeIGZrXrxck0lJ/saC99ZP/3+ughHkahxyx6eHU6nZG9lfAg=="}],"memo":""},"metadata":{"timestamp":"1743680391"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1721880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"FT0UHoGLEjePQfFtU1tyQ9qe7FxvdzTar5j1Xl00ZPozmei/qvvLGl8YhYi0V8sSJVouI8borYvb3dpqIQC/Ag=="}],"memo":""},"metadata":{"timestamp":"1743682979"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1d2hvkqhqckhzpaum09c002fesdw89qrcg9zqws","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"eSFCEK9IO/P5jxlfnbp35xVVYo36+CiOFJz/JQABTf9r/+da5JOSdgUemoC7R1EvJE9HCeJ2XWmbu0j5K31yDw=="}],"memo":""},"metadata":{"timestamp":"1743683221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1lrsrj4auaffjk538w3x2c9gzyth2m0n39zcg6d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"V7WYKzC8VemKyowufMneyzt0CQ6PR2RtCEEMnG4Jwx9CNVCNP6e54vE00yweRc5P2LU0+m9ZMOFUbblPQsY+DA=="}],"memo":""},"metadata":{"timestamp":"1743704885"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateReply","args":["2","1","1","Hey hey hey"]}],"fee":{"gas_wanted":"60000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bY/5T4aU3MOrBezBKCFXUR2RgMmPxpHFwi/xI6ga1b2u3JRxeYQx1+bOZtqknyFa8Feenu3GclmRnfknOQDyBQ=="}],"memo":""},"metadata":{"timestamp":"1743711043"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateBoard","args":["aeddi"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UlcPNzTB9SRYFhru5eBzZkqx1z6pk/iuEkbLCBEyI4QQKT75/GIsoVmR3Q0OWv9BEqzn6iep89664ieAb17KCg=="}],"memo":""},"metadata":{"timestamp":"1743711163"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g16znvp6wxupkkds8mmmtxhvmdly08xpa4rqagp3","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"BfNTMw8/jbCjUAxbYJSqAx71LTglT2ZB7rErSOurWZwbtFbHT2pMkbyYJym6agX/S13Ms+8RYPySznleZZy2Cg=="}],"memo":""},"metadata":{"timestamp":"1743712058"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateThread","args":["3","This is a test","Hello World"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1xJIqIyGXcSfsRczg0T/hKdr+hED2UDE0oCA/7YyQcna9Y2LtGmivjxAqiR+/E3Qa876okANEwvPjafqiLTAg=="}],"memo":""},"metadata":{"timestamp":"1743712737"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1648310ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"E3EBw9aZXdSZwrwQN9i2bQjTGgpMeFRhJS9EjaEJENZdnjkmkWXiM/8jQi026/ELjf6nV7oC77ciysIt3+FyAg=="}],"memo":""},"metadata":{"timestamp":"1743715914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EUy4N/WGhGY7IyvxkWJSpvvMm5UKPWmtuZYPwSE8JUQJ5/H3n6b8Xyljv6d+4xfO02mpmsqg57L3LY6PEcFiCw=="}],"memo":""},"metadata":{"timestamp":"1743738197"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XC5tB4Ww+jD/lgfSzvcKBmYg8nP697HYElMuyCwuArt2lo1NczPDAAHwjny191b1xy/8Pz2uae+iI9xGPXrOBQ=="}],"memo":""},"metadata":{"timestamp":"1743738288"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"DeletePost","args":["1","2","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SEMazbhceoUeLcw20UvlJqjlsT+oSRAOqdiA0bIeCwIex6a47RH45NT4qB644ulQ6YiRv9kD7sOS3sf8OKiUCA=="}],"memo":""},"metadata":{"timestamp":"1743738333"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3xdY2zUEaSvL2+NoPTHTD3X2FZ1Ehg/xPBZRRJi2Ylm6LU/F+HmMG0YhLVkvR5lEea0en2+Kn8UhdIgdPjlkAA=="}],"memo":""},"metadata":{"timestamp":"1743738469"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GCtUiktIhSyqpETUMRR/0Ty6v80QbmeROULnTsW72XKvSQZF1enMC90gtSn0F3kidponqgEAnTkrWoBvjTJVBg=="}],"memo":""},"metadata":{"timestamp":"1743738680"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TH4yuyDvuq6andRzdObtjw6Dzpaw7zqjNyoCw1FC07ipn9ZVUWcFIcPLM1eRU44RQqFtWQ7LhlDymM5LiS/9Aw=="}],"memo":""},"metadata":{"timestamp":"1743739027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"9000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"x7EtVQUYGVRT3Uo09arsuKUCOFQPhvg5718Vg6o3A74KWzqlUdT07sAADvGOCJxV22MBwe8ZLIMlEHx++NdJCw=="}],"memo":""},"metadata":{"timestamp":"1743739047"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ABOlkSDcCQJVf7mjnItLyRQyJjbSYLRXagmMz8poqvkjX1oTi2NGpNH6zu7466kPlFHmESXvy6di9sNfLhKjAg=="}],"memo":""},"metadata":{"timestamp":"1743739590"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["2","2"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kYuW3zW5gf3ruKjUwHJirEXeQYRcwyp6DSm9Ev+un2MNqF98LUiq51jNEBMKTLSpa3tA14JycfVXGm9WWlc/DA=="}],"memo":""},"metadata":{"timestamp":"1743739625"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1p5pa2sp4elcja2u8wn36zv3plsyp8xrqgz0usf","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y3k24ayy98evfOxRipkejsxyO6e4KpGvp3g18WK/I5dpHl6S3+X1YBqS4nsYvlUgd2pS1jKXNKyal6nfZE3fCw=="}],"memo":""},"metadata":{"timestamp":"1743750714"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fh2rWd2kWcbkBtMD/lkvdQTyb+qJmm41PqTxvrGs1/DHXFzxUy/ObzI9yR3WTafkheAaT3Hk+QcWh7C8eZJJCg=="}],"memo":""},"metadata":{"timestamp":"1743750895"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["aeddi-testing"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fosRIYGMBTklap54MeOskYvZ0qhOYfv4NiUXCPQtsncG2mKLibB8uR0YgN6VNPb1B/QkbY0CYjkvSK8rjYpUCA=="}],"memo":""},"metadata":{"timestamp":"1743751141"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","to_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","amount":"1000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Qg0qeTKOZCtxt3SYcwws9gIgf9EdulRfhcCeYa1mcfCCpynY3Qof2tctuQJ0YwdA73ckJC+5tosyt8Se54xcDA=="}],"memo":""},"metadata":{"timestamp":"1743755182"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KEh1CNIKget+9RJs7jwY0v+su73iInpdjp3/Qxo9FmgxZdreA4z7IOSEvBDCAVlL7xzLgj8NBIckrhgBXg6CAQ=="}],"memo":""},"metadata":{"timestamp":"1743760782"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"","pkg_path":"gno.land/r/demo/wugnot","func":"Transfer","args":["g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","-1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPbLggW1eugeEhTDF3cphB7ILmOsQpaE59va4Kf7hSMP3MTANuiTBVMcTJitdDEFLgWFCKl4JzzLpI69WgLcBw=="}],"memo":""},"metadata":{"timestamp":"1743760847"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761662"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","package":{"name":"boards2","path":"gno.land/r/devx000/gnoland/boards2/v1rc2","files":[{"name":"board.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\ntype BoardID uint64\n\nfunc (id BoardID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id BoardID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\ntype Board struct {\n\tid        BoardID // only set for public boards.\n\tname      string\n\taliases   []string\n\tcreator   std.Address\n\tthreads   avl.Tree // Post.id -\u003e *Post\n\tpostsCtr  uint64   // increments Post.id\n\tcreatedAt time.Time\n\tdeleted   avl.Tree // TODO reserved for fast-delete.\n\tperms     Permissions\n\treadonly  bool\n}\n\nfunc newBoard(id BoardID, name string, creator std.Address, p Permissions) *Board {\n\treturn \u0026Board{\n\t\tid:        id,\n\t\tname:      name,\n\t\tcreator:   creator,\n\t\tthreads:   avl.Tree{},\n\t\tcreatedAt: time.Now(),\n\t\tdeleted:   avl.Tree{},\n\t\tperms:     p,\n\t}\n}\n\nfunc (board *Board) GetID() BoardID {\n\treturn board.id\n}\n\n// GetName returns the name of the board.\nfunc (board *Board) GetName() string {\n\treturn board.name\n}\n\n// GetURL returns the relative URL of the board.\nfunc (board *Board) GetURL() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + url.PathEscape(board.name)\n}\n\n// GetURL returns relative board path relative.\n//\n// Note: returned result is not escaped. Use GetURL to get URL-encoded path.\nfunc (board *Board) GetPath() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + board.name\n}\n\nfunc (board *Board) GetPermissions() Permissions {\n\treturn board.perms\n}\n\n// SetReadonly updates board's read-only status.\nfunc (board *Board) SetReadonly(readonly bool) {\n\tboard.readonly = readonly\n}\n\n// IsReadonly checks if the board is a read-only board.\nfunc (board *Board) IsReadonly() bool {\n\treturn board.readonly\n}\n\nfunc (board *Board) GetThread(threadID PostID) (_ *Post, found bool) {\n\tv, found := board.threads.Get(threadID.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (board *Board) AddThread(creator std.Address, title string, body string) *Post {\n\tpid := board.incGetPostID()\n\tthread := newPost(board, pid, creator, title, body, pid, 0, 0)\n\tboard.threads.Set(pid.Key(), thread)\n\treturn thread\n}\n\n// NOTE: this can be potentially very expensive for threads with many replies.\n// TODO: implement optional fast-delete where thread is simply moved.\nfunc (board *Board) DeleteThread(pid PostID) {\n\t_, removed := board.threads.Remove(pid.Key())\n\tif !removed {\n\t\tpanic(\"thread does not exist with ID \" + pid.String())\n\t}\n}\n\n// Render renders a board into Markdown.\nfunc (board *Board) Render(path, menu string) string {\n\tvar sb strings.Builder\n\n\tsb.WriteString(\"# \" + board.GetName() + \"  \\n\")\n\tsb.WriteString(\"Board created by \" + newUserLink(board.creator) + \" \")\n\tsb.WriteString(\"on \" + board.createdAt.Format(dateFormat))\n\tsb.WriteString(\", #\" + board.id.String())\n\n\tif board.IsReadonly() {\n\t\tsb.WriteString(\"  \\n_**Starting new threads and commenting is disabled**_\")\n\t}\n\n\t// XXX: Menu is rendered by the caller to deal with links and sub-menus\n\t// TODO: We should have the render logic separated from boards so avoid sending menu as argument\n\tif menu != \"\" {\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tsb.WriteString(menu)\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(\"\\n\\n---\\n\")\n\n\tif board.threads.Size() == 0 {\n\t\tsb.WriteString(\"### This board doesn't have any threads\\n\")\n\t\tif !board.IsReadonly() {\n\t\t\turl := board.GetPostFormURL()\n\t\t\tsb.WriteString(\"Do you want to [start a new conversation](\" + url + \") in this board ?\")\n\t\t}\n\t\treturn sb.String()\n\t}\n\n\tp, err := pager.New(path, board.threads.Size(), pager.WithPageSize(pageSizeThreads))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tthread := v.(*Post)\n\t\tif thread.isHidden {\n\t\t\treturn false\n\t\t}\n\n\t\tsb.WriteString(thread.RenderSummary())\n\t\tsb.WriteString(\"\\n\")\n\t\treturn false\n\t}\n\n\tsb.WriteString(\"Sort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tsb.WriteString(newLink(\"newest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tsb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tsb.WriteString(\"\\n---\\n\")\n\t\tsb.WriteString(pager.Picker(p))\n\t}\n\n\treturn sb.String()\n}\n\nfunc (board *Board) incGetPostID() PostID {\n\tboard.postsCtr++\n\treturn PostID(board.postsCtr)\n}\n\nfunc (board *Board) GetURLFromThreadID(threadID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String()\n}\n\nfunc (board *Board) GetURLFromReplyID(threadID, replyID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String() + \"/\" + replyID.String()\n}\n\nfunc (board *Board) GetRenameFormURL() string { // TODO: These type of functions shouldn't be part of Board type\n\treturn txlink.Call(\n\t\t\"RenameBoard\",\n\t\t\"name\", board.name,\n\t\t\"newName\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"FreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t)\n}\n\nfunc (board *Board) GetUnfreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"UnfreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threadID\", \"\",\n\t\t\"replyID\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFlaggingThresholdFormURL() string {\n\treturn txlink.Call(\n\t\t\"SetFlaggingThreshold\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threshold\", \"\",\n\t)\n}\n\nfunc (board *Board) GetInviteMemberFormURL() string {\n\treturn txlink.Call(\n\t\t\"InviteMember\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"user\", \"\",\n\t\t\"role\", \"\",\n\t)\n}\n\nfunc (board *Board) GetPostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateThread\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (board *Board) GetMembersURL() string {\n\treturn board.GetURL() + \"/members\"\n}\n\nfunc createDefaultBoardPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(\n\t\tRoleAdmin,\n\t\tPermissionBoardRename,\n\t\tPermissionBoardFlaggingUpdate,\n\t\tPermissionMemberInvite,\n\t\tPermissionMemberRemove,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadDelete,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionThreadFreeze,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyDelete,\n\t\tPermissionReplyFlag,\n\t\tPermissionReplyFreeze,\n\t\tPermissionRoleChange,\n\t)\n\tperms.AddRole(\n\t\tRoleModerator,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyFlag,\n\t)\n\tperms.AddRole(\n\t\tRoleGuest,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadRepost,\n\t\tPermissionReplyCreate,\n\t)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n"},{"name":"board_readonly.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"time\"\n)\n\n// ReadonlyBoard defines an interface for readonly boards.\ntype ReadonlyBoard interface {\n\t// ID returns the unique identifier of the board.\n\tID() BoardID\n\n\t// Name returns the name of the board.\n\tName() string\n\n\t// Aliases returns a list with previous names assigned to the board.\n\tAliases() []string\n\n\t// Creator returns board's creator address.\n\tCreator() std.Address\n\n\t// LastPostID returns the ID assigned to the last created thread.\n\tLastPostID() uint64\n\n\t// CreatedAt returns the time when board was created.\n\tCreatedAt() time.Time\n\n\t// IsReadonly returns true when board shouldn't allow the creation of threads and comments.\n\tIsReadonly() bool\n\n\t// MembersCount returns the number of invited board members.\n\tMembersCount() int\n\n\t// IterateMembers allows reading the list of invited board members.\n\tIterateMembers(offset, count int, fn UsersIterFn)\n}\n\ntype readonlyBoard struct {\n\tboard *Board\n}\n\nfunc (b readonlyBoard) ID() BoardID {\n\treturn b.board.id\n}\n\nfunc (b readonlyBoard) Name() string {\n\treturn b.board.name\n}\n\nfunc (b readonlyBoard) Aliases() []string {\n\taliases := make([]string, len(b.board.aliases))\n\tfor i, s := range b.board.aliases {\n\t\taliases[i] = s\n\t}\n\treturn aliases\n}\n\nfunc (b readonlyBoard) Creator() std.Address {\n\treturn b.board.creator\n}\n\nfunc (b readonlyBoard) LastPostID() uint64 {\n\treturn b.board.postsCtr\n}\n\nfunc (b readonlyBoard) CreatedAt() time.Time {\n\treturn b.board.createdAt\n}\n\nfunc (b readonlyBoard) IsReadonly() bool {\n\treturn b.board.readonly\n}\n\nfunc (b readonlyBoard) MembersCount() int {\n\treturn b.board.perms.UsersCount()\n}\n\nfunc (b readonlyBoard) IterateMembers(offset, count int, fn UsersIterFn) {\n\tb.board.perms.IterateUsers(offset, count, fn)\n}\n"},{"name":"board_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nfunc TestBoardID_String(t *testing.T) {\n\tinput := BoardID(32)\n\n\tuassert.Equal(t, \"32\", input.String())\n}\n\nfunc TestBoardID_Key(t *testing.T) {\n\tinput := BoardID(128)\n\twant := strings.Repeat(\"0\", 7) + \"128\"\n\tuassert.Equal(t, want, input.Key())\n}\n\nfunc TestBoard_GetID(t *testing.T) {\n\twant := int(92)\n\tb := new(Board)\n\tb.id = BoardID(want)\n\tgot := int(b.GetID())\n\n\tuassert.Equal(t, got, want)\n\tuassert.NotEqual(t, got, want*want)\n}\n\nfunc TestBoard_GetURL(t *testing.T) {\n\tpkgPath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\tname := \"foobar_test_get_url123\"\n\twant := pkgPath + \":\" + name\n\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, name, addr, perms)\n\tgot := board.GetURL()\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\t_, ok := b.GetThread(12345)\n\tuassert.False(t, ok)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\t_, ok = b.GetThread(post.GetPostID())\n\tuassert.True(t, ok)\n}\n\nfunc TestBoard_DeleteThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\tid := post.GetPostID()\n\n\tb.DeleteThread(id)\n\n\t_, ok := b.GetThread(id)\n\tuassert.False(t, ok)\n}\n\nvar boardUrlPrefix = strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\nfunc TestBoard_GetURLFromThreadID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10\"\n\n\tgot := b.GetURLFromThreadID(10)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetURLFromReplyID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10/20\"\n\n\tgot := b.GetURLFromReplyID(10, 20)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetPostFormURL(t *testing.T) {\n\tbid := BoardID(386)\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(bid, \"foo1234\", addr, perms)\n\texpect := txlink.Call(\"CreateThread\", \"boardID\", bid.String(), \"title\", \"\", \"body\", \"\")\n\n\tgot := b.GetPostFormURL()\n\tuassert.Equal(t, expect, got)\n}\n"},{"name":"boards.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\nvar (\n\tgPerms        Permissions\n\tgNotice       string\n\tgHelp         string\n\tgLastBoardID  BoardID\n\tgBoardsByID   avl.Tree // string(id) -\u003e *Board\n\tgBoardsByName avl.Tree // string(name) -\u003e *Board\n\tgLocked       struct {\n\t\trealm        bool\n\t\trealmMembers bool\n\t}\n)\n\nfunc init() {\n\t// TODO: Define and change the default realm owner (or owners)\n\towner := std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\n\t// Initialize default realm permissions\n\tgPerms = createDefaultPermissions(owner)\n\n\t// Import relevant initial state from previous version\n\tinitFromPrevVersion()\n}\n\n// incGetBoardID returns a new board ID.\nfunc incGetBoardID() BoardID {\n\tgLastBoardID++\n\treturn gLastBoardID\n}\n\n// getBoard returns a board for a specific ID.\nfunc getBoard(id BoardID) (_ *Board, found bool) {\n\tv, exists := gBoardsByID.Get(id.Key())\n\tif !exists {\n\t\treturn nil, false\n\t}\n\treturn v.(*Board), true\n}\n\n// mustGetBoardByName returns a board or panics when it's not found.\nfunc mustGetBoardByName(name string) *Board {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tpanic(\"board does not exist with name: \" + name)\n\t}\n\treturn v.(*Board)\n}\n\n// mustGetBoard returns a board or panics when it's not found.\nfunc mustGetBoard(id BoardID) *Board {\n\tboard, found := getBoard(id)\n\tif !found {\n\t\tpanic(\"board does not exist with ID: \" + id.String())\n\t}\n\treturn board\n}\n\n// mustGetThread returns a thread or panics when it's not found.\nfunc mustGetThread(board *Board, threadID PostID) *Post {\n\tthread, found := board.GetThread(threadID)\n\tif !found {\n\t\tpanic(\"thread does not exist with ID: \" + threadID.String())\n\t}\n\treturn thread\n}\n\n// mustGetReply returns a reply or panics when it's not found.\nfunc mustGetReply(thread *Post, replyID PostID) *Post {\n\treply, found := thread.GetReply(replyID)\n\tif !found {\n\t\tpanic(\"reply does not exist with ID: \" + replyID.String())\n\t}\n\treturn reply\n}\n\nfunc mustGetPermissions(bid BoardID) Permissions {\n\tif bid != 0 {\n\t\tboard := mustGetBoard(bid)\n\t\treturn board.perms\n\t}\n\treturn gPerms\n}\n"},{"name":"flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\n// DefaultFlaggingThreshold defines the default number of flags that hides flaggable items.\nconst DefaultFlaggingThreshold = 1\n\nvar gFlaggingThresholds avl.Tree // string(board ID) -\u003e int\n\ntype Flag struct {\n\tUser   std.Address\n\tReason string\n}\n\ntype Flaggable interface {\n\t// AddFlag adds a new flag to an item.\n\t//\n\t// Returns false if item was already flagged by user.\n\tAddFlag(flag Flag) bool\n\n\t// FlagsCount returns number of times item was flagged.\n\tFlagsCount() int\n}\n\n// flagItem adds a flag to a flaggable item (post, thread, etc).\n//\n// Returns whether flag count threshold is reached and item can be hidden.\n//\n// Panics if flag count threshold was already reached.\nfunc flagItem(item Flaggable, flag Flag, threshold int) bool {\n\tif item.FlagsCount() \u003e= threshold {\n\t\tpanic(\"item flag count threshold exceeded: \" + strconv.Itoa(threshold))\n\t}\n\n\tif !item.AddFlag(flag) {\n\t\tpanic(\"item has been already flagged by a current user\")\n\t}\n\n\treturn item.FlagsCount() == threshold\n}\n\nfunc getFlaggingThreshold(bid BoardID) int {\n\tif v, ok := gFlaggingThresholds.Get(bid.String()); ok {\n\t\treturn v.(int)\n\t}\n\treturn DefaultFlaggingThreshold\n}\n"},{"name":"format.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/r/sys/users\"\n)\n\nfunc padLeft(s string, length int) string {\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\" \", length-len(s)) + s\n}\n\nfunc padZero(u64 uint64, length int) string {\n\ts := strconv.Itoa(int(u64))\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\"0\", length-len(s)) + s\n}\n\nfunc indentBody(indent string, body string) string {\n\tvar (\n\t\tres   string\n\t\tlines = strings.Split(body, \"\\n\")\n\t)\n\tfor i, line := range lines {\n\t\tif i \u003e 0 {\n\t\t\tres += \"\\n\"\n\t\t}\n\t\tres += indent + line\n\t}\n\treturn res\n}\n\n// NOTE: length must be greater than 3.\nfunc summaryOf(text string, length int) string {\n\tlines := strings.SplitN(text, \"\\n\", 2)\n\tline := lines[0]\n\tif len(line) \u003e length {\n\t\tline = line[:(length-3)] + \"...\"\n\t} else if len(lines) \u003e 1 {\n\t\t// len(line) \u003c= 80\n\t\tline = line + \"...\"\n\t}\n\treturn line\n}\n\n// newLink returns a Markdown link.\nfunc newLink(label, uri string) string {\n\treturn \"[\" + label + \"](\" + uri + \")\"\n}\n\n// newButtonLink returns a Makdown link with label wrapped in brackets.\nfunc newButtonLink(label, uri string) string {\n\treturn `[\\[` + label + `\\]](` + uri + \")\"\n}\n\n// newUserLink returns a Markdown link for an account to the users\n// realm or the address as string when a user is not registered.\nfunc newUserLink(addr std.Address) string {\n\tuser := users.ResolveAddress(addr)\n\tif user != nil {\n\t\treturn user.RenderLink(\"\")\n\t}\n\treturn addr.String()\n}\n"},{"name":"migrations.gno","body":"package boards2\n\nimport (\n\tv1rc1 \"gno.land/r/devx000/gnoland/boards2/v1rc1\"\n)\n\nfunc initFromPrevVersion() {\n\timportRealmMembers()\n}\n\nfunc importRealmMembers() {\n\tv1rc1.IterateRealmMembers(0, func(member v1rc1.User) bool {\n\t\t// XXX: This wouldn't be required if a boards2 package is created\n\t\troles := make([]Role, len(member.Roles))\n\t\tfor i, r := range member.Roles {\n\t\t\troles[i] = Role(r)\n\t\t}\n\n\t\tgPerms.AddUser(member.Address, roles...)\n\t\treturn false\n\t})\n}\n"},{"name":"permissions.gno","body":"package boards2\n\nimport \"std\"\n\nconst (\n\tPermissionRealmHelp           Permission = \"realm:help\"\n\tPermissionRealmLock                      = \"realm:lock\"\n\tPermissionRealmNotice                    = \"realm:notice\"\n\tPermissionBoardCreate                    = \"board:create\"\n\tPermissionBoardFlaggingUpdate            = \"board:flagging-update\"\n\tPermissionBoardFreeze                    = \"board:freeze\"\n\tPermissionBoardRename                    = \"board:rename\"\n\tPermissionThreadCreate                   = \"thread:create\"\n\tPermissionThreadDelete                   = \"thread:delete\"\n\tPermissionThreadEdit                     = \"thread:edit\"\n\tPermissionThreadFlag                     = \"thread:flag\"\n\tPermissionThreadFreeze                   = \"thread:freeze\"\n\tPermissionThreadRepost                   = \"thread:repost\"\n\tPermissionReplyCreate                    = \"reply:create\"\n\tPermissionReplyDelete                    = \"reply:delete\"\n\tPermissionReplyFlag                      = \"reply:flag\"\n\tPermissionReplyFreeze                    = \"reply:freeze\"\n\tPermissionMemberInvite                   = \"member:invite\"\n\tPermissionMemberRemove                   = \"member:remove\"\n\tPermissionRoleChange                     = \"role:change\"\n\tPermissionPermissionsUpdate              = \"permissions:update\"\n)\n\nconst (\n\tRoleGuest     Role = \"\"\n\tRoleOwner          = \"owner\"\n\tRoleAdmin          = \"admin\"\n\tRoleModerator      = \"moderator\"\n)\n\ntype (\n\t// Permission defines the type for permissions.\n\tPermission string\n\n\t// Role defines the type for user roles.\n\tRole string\n\n\t// Args is a list of generic arguments.\n\tArgs []interface{}\n\n\t// User contains user info.\n\tUser struct {\n\t\tAddress std.Address\n\t\tRoles   []Role\n\t}\n\n\t// UsersIterFn defines a function type to iterate users.\n\tUsersIterFn func(User) bool\n\n\t// Permissions define an interface to for permissioned execution.\n\tPermissions interface {\n\t\t// HasRole checks if a user has a specific role assigned.\n\t\tHasRole(std.Address, Role) bool\n\n\t\t// HasPermission checks if a user has a specific permission.\n\t\tHasPermission(std.Address, Permission) bool\n\n\t\t// WithPermission calls a callback when a user has a specific permission.\n\t\t// It panics on error.\n\t\tWithPermission(std.Address, Permission, Args, func(Args))\n\n\t\t// AddUser adds a new user to the permissioner.\n\t\tAddUser(std.Address, ...Role) error\n\n\t\t// SetUserRoles sets the roles of a user.\n\t\tSetUserRoles(std.Address, ...Role) error\n\n\t\t// RemoveUser removes a user from the permissioner.\n\t\tRemoveUser(std.Address) (removed bool)\n\n\t\t// HasUser checks if a user exists.\n\t\tHasUser(std.Address) bool\n\n\t\t// UsersCount returns the total number of users the permissioner contains.\n\t\tUsersCount() int\n\n\t\t// IterateUsers iterates permissions' users.\n\t\tIterateUsers(start, count int, fn UsersIterFn) bool\n\t}\n)\n"},{"name":"permissions_default.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\t\"gno.land/r/sys/users\"\n)\n\n// DefaultPermissions manages users, roles and permissions.\ntype DefaultPermissions struct {\n\tsuperRole Role\n\tdao       *commondao.CommonDAO\n\tusers     *avl.Tree // string(std.Address) -\u003e []Role\n\troles     *avl.Tree // string(role) -\u003e []Permission\n}\n\n// NewDefaultPermissions creates a new permissions type.\n// This type is a default implementation to handle users, roles and permissions.\nfunc NewDefaultPermissions(dao *commondao.CommonDAO) *DefaultPermissions {\n\tif dao == nil {\n\t\tpanic(\"default permissions require a DAO\")\n\t}\n\n\tdp := \u0026DefaultPermissions{\n\t\tdao:   dao,\n\t\troles: avl.NewTree(),\n\t\tusers: avl.NewTree(),\n\t}\n\n\t// Make sure that DAO users are indexed when DAO has members\n\tdao.Members().IterateByOffset(0, dao.Members().Size(), func(m std.Address) bool {\n\t\tdp.users.Set(m.String(), []Role(nil))\n\t\treturn false\n\t})\n\n\treturn dp\n}\n\n// SetSuperRole assigns a super role.\n// A super role is one that have all permissions.\n// These type of role doesn't need to be mapped to any permission.\nfunc (dp *DefaultPermissions) SetSuperRole(r Role) {\n\tdp.superRole = r\n}\n\n// AddRole add a role with one or more assigned permissions.\nfunc (dp *DefaultPermissions) AddRole(r Role, p Permission, extra ...Permission) {\n\tdp.roles.Set(string(r), append([]Permission{p}, extra...))\n}\n\n// RoleExists checks if a role exists.\nfunc (dp DefaultPermissions) RoleExists(r Role) bool {\n\tif dp.superRole != \"\" \u0026\u0026 r == dp.superRole {\n\t\treturn true\n\t}\n\n\treturn dp.roles.Iterate(\"\", \"\", func(name string, _ interface{}) bool {\n\t\treturn Role(name) == r\n\t})\n}\n\n// GetUserRoles returns the list of roles assigned to a user.\nfunc (dp DefaultPermissions) GetUserRoles(user std.Address) []Role {\n\tv, found := dp.users.Get(user.String())\n\tif !found {\n\t\treturn nil\n\t}\n\treturn v.([]Role)\n}\n\n// HasRole checks if a user has a specific role assigned.\nfunc (dp DefaultPermissions) HasRole(user std.Address, r Role) bool {\n\tfor _, role := range dp.GetUserRoles(user) {\n\t\tif role == r {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n// HasPermission checks if a user has a specific permission.\nfunc (dp DefaultPermissions) HasPermission(user std.Address, perm Permission) bool {\n\tfor _, r := range dp.GetUserRoles(user) {\n\t\tif dp.superRole == r {\n\t\t\treturn true\n\t\t}\n\n\t\tv, found := dp.roles.Get(string(r))\n\t\tif !found {\n\t\t\tcontinue\n\t\t}\n\n\t\tfor _, p := range v.([]Permission) {\n\t\t\tif p == perm {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\treturn false\n}\n\n// AddUser adds a new user to permissions.\nfunc (dp *DefaultPermissions) AddUser(user std.Address, roles ...Role) error {\n\tif dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user already exists\")\n\t}\n\n\tdp.dao.Members().Add(user)\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// SetUserRoles sets the roles of a user.\nfunc (dp *DefaultPermissions) SetUserRoles(user std.Address, roles ...Role) error {\n\tif !dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user not found\")\n\t}\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// RemoveUser removes a user from permissions.\nfunc (dp *DefaultPermissions) RemoveUser(user std.Address) bool {\n\t_, removed := dp.users.Remove(user.String())\n\tdp.dao.Members().Remove(user)\n\treturn removed\n}\n\n// HasUser checks if a user exists.\nfunc (dp DefaultPermissions) HasUser(user std.Address) bool {\n\treturn dp.users.Has(user.String())\n}\n\n// UsersCount returns the total number of users the permissioner contains.\nfunc (dp DefaultPermissions) UsersCount() int {\n\treturn dp.users.Size()\n}\n\n// IterateUsers iterates permissions' users.\nfunc (dp DefaultPermissions) IterateUsers(start, count int, fn UsersIterFn) bool {\n\treturn dp.users.IterateByOffset(start, count, func(k string, v interface{}) bool {\n\t\treturn fn(User{\n\t\t\tAddress: std.Address(k),\n\t\t\tRoles:   v.([]Role),\n\t\t})\n\t})\n}\n\n// WithPermission calls a callback when a user has a specific permission.\n// It panics on error or when a handler panics.\n// Callbacks are by default called when there is no handle registered for the permission.\nfunc (dp *DefaultPermissions) WithPermission(user std.Address, perm Permission, args Args, cb func(Args)) {\n\tif !dp.HasPermission(user, perm) || !dp.dao.Members().Has(user) {\n\t\tpanic(\"unauthorized\")\n\t}\n\n\tswitch perm {\n\tcase PermissionBoardCreate:\n\t\tdp.handleBoardCreate(args, cb)\n\tcase PermissionBoardRename:\n\t\tdp.handleBoardRename(args, cb)\n\tcase PermissionMemberInvite:\n\t\tdp.handleMemberInvite(args, cb)\n\tcase PermissionRoleChange:\n\t\tdp.handleRoleChange(args, cb)\n\tdefault:\n\t\tcb(args)\n\t}\n}\n\nfunc (dp *DefaultPermissions) setUserRoles(user std.Address, roles ...Role) error {\n\tfor _, r := range roles {\n\t\tif !dp.RoleExists(r) {\n\t\t\treturn errors.New(\"invalid role: \" + string(r))\n\t\t}\n\t}\n\n\tdp.users.Set(user.String(), append([]Role(nil), roles...))\n\treturn nil\n}\n\nfunc (DefaultPermissions) handleBoardCreate(args Args, cb func(Args)) {\n\tname, ok := args[0].(string)\n\tif !ok {\n\t\tpanic(\"expected board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(name)\n\tassertBoardNameBelongsToCaller(name)\n\n\tcb(args)\n}\n\nfunc (DefaultPermissions) handleBoardRename(args Args, cb func(Args)) {\n\tnewName, ok := args[2].(string)\n\tif !ok {\n\t\tpanic(\"expected new board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(newName)\n\tassertBoardNameBelongsToCaller(newName)\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleMemberInvite(args Args, cb func(Args)) {\n\t// Make sure that only owners invite other owners\n\trole, ok := args[1].(Role)\n\tif !ok {\n\t\tpanic(\"expected a valid new member role\")\n\t}\n\n\tif role == RoleOwner {\n\t\tif !dp.HasRole(std.PreviousRealm().Address(), RoleOwner) {\n\t\t\tpanic(\"only owners are allowed to invite other owners\")\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleRoleChange(args Args, cb func(Args)) {\n\t// Owners and Admins can change roles.\n\t// Admins should not be able to assign or remove the Owner role from members.\n\tif dp.HasRole(std.PreviousRealm().Address(), RoleAdmin) {\n\t\trole, ok := args[2].(Role)\n\t\tif !ok {\n\t\t\tpanic(\"expected a valid member role\")\n\t\t}\n\n\t\tif role == RoleOwner {\n\t\t\tpanic(\"admins are not allowed to promote members to Owner\")\n\t\t} else {\n\t\t\tmember, ok := args[1].(std.Address)\n\t\t\tif !ok {\n\t\t\t\tpanic(\"expected a valid member address\")\n\t\t\t}\n\n\t\t\tif dp.HasRole(member, RoleOwner) {\n\t\t\t\tpanic(\"admins are not allowed to remove the Owner role\")\n\t\t\t}\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc createDefaultPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(RoleAdmin, PermissionBoardCreate)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n\nfunc assertBoardNameIsNotAddress(s string) {\n\tif std.Address(s).IsValid() {\n\t\tpanic(\"addresses are not allowed as board name\")\n\t}\n}\n\nfunc assertBoardNameBelongsToCaller(name string) {\n\t// When the board name is the name of a registered user\n\t// check that caller is the owner of the name.\n\tuser, _ := users.ResolveName(name)\n\tif user != nil \u0026\u0026 user.Addr() != std.PreviousRealm().Address() {\n\t\tpanic(\"board name is a user name registered to a different user\")\n\t}\n}\n"},{"name":"permissions_default_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/urequire\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n)\n\nvar _ Permissions = (*DefaultPermissions)(nil)\n\nfunc TestDefaultPermissionsWithPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\targs       Args\n\t\tsetup      func() *DefaultPermissions\n\t\terr        string\n\t\tcalled     bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with arguments\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\targs:       Args{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t\t{\n\t\t\tname:       \"is not a DAO member\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\tcalled bool\n\t\t\t\targs   Args\n\t\t\t)\n\n\t\t\tperms := tc.setup()\n\t\t\tcallback := func(a Args) {\n\t\t\t\targs = a\n\t\t\t\tcalled = true\n\t\t\t}\n\n\t\t\ttestCaseFn := func() {\n\t\t\t\tperms.WithPermission(tc.user, tc.permission, tc.args, callback)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.PanicsWithMessage(t, tc.err, testCaseFn, \"panic\")\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NotPanics(t, testCaseFn, \"no panic\")\n\t\t\t}\n\n\t\t\turequire.Equal(t, tc.called, called, \"callback called\")\n\t\t\turequire.Equal(t, len(tc.args), len(args), \"args count\")\n\t\t\tfor i, a := range args {\n\t\t\t\tuassert.Equal(t, tc.args[i].(string), a.(string))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsGetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []string\n\t\tsetup func() *DefaultPermissions\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\", \"foo\", \"bar\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"not a user\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\", \"admin\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\troles := perms.GetUserRoles(tc.user)\n\n\t\t\turequire.Equal(t, len(tc.roles), len(roles), \"user role count\")\n\t\t\tfor i, r := range roles {\n\t\t\t\tuassert.Equal(t, tc.roles[i], string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasRole(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\trole  Role\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"admin\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"ok with multiple roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"foo\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"has no role\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasRole(tc.user, tc.role)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\tsetup      func() *DefaultPermissions\n\t\twant       bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple users\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple roles\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddRole(\"baz\", \"other\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\", \"baz\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasPermission(tc.user, tc.permission)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsAddUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"a\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"duplicated user\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"foo\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: foo\",\n\t\t},\n\t\t{\n\t\t\tname: \"already a DAO member\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(\n\t\t\t\t\tcommondao.New(commondao.WithMember(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")),\n\t\t\t\t)\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.AddUser(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.Error(t, err, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsSetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"c\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"remove roles\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"b\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"x\", \"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: x\",\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"user not found\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.SetUserRoles(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.True(t, err != nil, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsRemoveUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.RemoveUser(tc.user)\n\t\t\tuassert.Equal(t, tc.want, got)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsIterateUsers(t *testing.T) {\n\tusers := []User{\n\t\t{\n\t\t\tAddress: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tRoles:   []Role{\"foo\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\",\n\t\t\tRoles:   []Role{\"foo\", \"bar\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\",\n\t\t\tRoles:   []Role{\"bar\"},\n\t\t},\n\t}\n\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.AddRole(\"foo\", \"perm1\")\n\tperms.AddRole(\"bar\", \"perm2\")\n\tfor _, u := range users {\n\t\tperms.AddUser(u.Address, u.Roles...)\n\t}\n\n\tcases := []struct {\n\t\tname               string\n\t\tstart, count, want int\n\t}{\n\t\t{\n\t\t\tname:  \"exceed users count\",\n\t\t\tcount: 50,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"exact users count\",\n\t\t\tcount: 3,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"two users\",\n\t\t\tstart: 1,\n\t\t\tcount: 2,\n\t\t\twant:  2,\n\t\t},\n\t\t{\n\t\t\tname:  \"one user\",\n\t\t\tstart: 1,\n\t\t\tcount: 1,\n\t\t\twant:  1,\n\t\t},\n\t\t{\n\t\t\tname:  \"no iteration\",\n\t\t\tstart: 50,\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar i int\n\t\t\tperms.IterateUsers(0, len(users), func(u User) bool {\n\t\t\t\turequire.True(t, i \u003c len(users), \"expect iterator to respect number of users\")\n\t\t\t\tuassert.Equal(t, users[i].Address, u.Address)\n\n\t\t\t\turequire.Equal(t, len(users[i].Roles), len(u.Roles), \"expect number of roles to match\")\n\t\t\t\tfor j, r := range u.Roles {\n\t\t\t\t\tuassert.Equal(t, string(users[i].Roles[j]), string(u.Roles[j]))\n\t\t\t\t}\n\n\t\t\t\ti++\n\t\t\t})\n\n\t\t\tuassert.Equal(t, i, len(users), \"expect iterator to iterate all users\")\n\t\t})\n\t}\n}\n"},{"name":"post.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst dateFormat = \"2006-01-02 3:04pm MST\"\n\ntype PostID uint64\n\nfunc (id PostID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id PostID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\n// A Post is a \"thread\" or a \"reply\" depending on context.\n// A thread is a Post of a Board that holds other replies.\ntype Post struct {\n\tboard         *Board\n\tid            PostID\n\tcreator       std.Address\n\ttitle         string // optional\n\tbody          string\n\tisHidden      bool\n\tisReadonly    bool\n\treplies       avl.Tree // Post.id -\u003e *Post\n\trepliesAll    avl.Tree // Post.id -\u003e *Post (all replies, for top-level posts)\n\treposts       avl.Tree // Board.id -\u003e Post.id\n\tflags         []Flag\n\tthreadID      PostID  // original Post.id\n\tparentID      PostID  // parent Post.id (if reply or repost)\n\trepostBoardID BoardID // original Board.id (if repost)\n\trepostsCount  uint64\n\tcreatedAt     time.Time\n\tupdatedAt     time.Time\n}\n\nfunc newPost(board *Board, id PostID, creator std.Address, title, body string, threadID, parentID PostID, repostBoardID BoardID) *Post {\n\treturn \u0026Post{\n\t\tboard:         board,\n\t\tid:            id,\n\t\tcreator:       creator,\n\t\ttitle:         title,\n\t\tbody:          body,\n\t\treplies:       avl.Tree{},\n\t\trepliesAll:    avl.Tree{},\n\t\treposts:       avl.Tree{},\n\t\tthreadID:      threadID,\n\t\tparentID:      parentID,\n\t\trepostBoardID: repostBoardID,\n\t\tcreatedAt:     time.Now(),\n\t}\n}\n\nfunc (post *Post) IsRepost() bool {\n\treturn post.repostBoardID != 0\n}\n\nfunc (post *Post) IsThread() bool {\n\t// repost threads also have parent ID\n\treturn post.parentID == 0 || post.IsRepost()\n}\n\nfunc (post *Post) GetBoard() *Board {\n\treturn post.board\n}\n\nfunc (post *Post) GetPostID() PostID {\n\treturn post.id\n}\n\nfunc (post *Post) GetParentID() PostID {\n\treturn post.parentID\n}\n\nfunc (post *Post) GetRepostBoardID() BoardID {\n\treturn post.repostBoardID\n}\n\nfunc (post *Post) GetCreator() std.Address {\n\treturn post.creator\n}\n\nfunc (post *Post) GetTitle() string {\n\treturn post.title\n}\n\nfunc (post *Post) GetBody() string {\n\treturn post.body\n}\n\nfunc (post *Post) GetCreatedAt() time.Time {\n\treturn post.createdAt\n}\n\nfunc (post *Post) GetUpdatedAt() time.Time {\n\treturn post.updatedAt\n}\n\nfunc (post *Post) AddFlag(flag Flag) bool {\n\t// TODO: sort flags for fast search in case of big thresholds\n\tfor _, v := range post.flags {\n\t\tif v.User == flag.User {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tpost.flags = append(post.flags, flag)\n\treturn true\n}\n\nfunc (post *Post) FlagsCount() int {\n\treturn len(post.flags)\n}\n\nfunc (post *Post) SetVisible(isVisible bool) {\n\tpost.isHidden = !isVisible\n}\n\nfunc (post *Post) IsHidden() bool {\n\treturn post.isHidden\n}\n\nfunc (post *Post) SetReadonly(isReadonly bool) {\n\tpost.isReadonly = isReadonly\n}\n\nfunc (post *Post) IsReadonly() bool {\n\treturn post.isReadonly\n}\n\nfunc (post *Post) AddReply(creator std.Address, body string) *Post {\n\tboard := post.board\n\tpid := board.incGetPostID()\n\tpKey := pid.Key()\n\treply := newPost(board, pid, creator, \"\", body, post.threadID, post.id, 0)\n\t// TODO: Figure out how to remove this redundancy of data \"replies==repliesAll\" in threads\n\tpost.replies.Set(pKey, reply)\n\tif post.threadID == post.id {\n\t\tpost.repliesAll.Set(pKey, reply)\n\t} else {\n\t\tthread, _ := board.GetThread(post.threadID)\n\t\tthread.repliesAll.Set(pKey, reply)\n\t}\n\treturn reply\n}\n\nfunc (post *Post) Update(title string, body string) {\n\tpost.title = title\n\tpost.body = body\n\tpost.updatedAt = time.Now()\n}\n\nfunc (post *Post) HasReplies() bool {\n\treturn post.replies.Size() \u003e 0\n}\n\nfunc (thread *Post) GetReply(pid PostID) (_ *Post, found bool) {\n\tv, found := thread.repliesAll.Get(pid.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (post *Post) AddRepostTo(creator std.Address, repost *Post, dst *Board) {\n\tif !post.IsThread() {\n\t\tpanic(\"cannot repost non-thread post\")\n\t}\n\n\tpost.repostsCount++\n\tdst.threads.Set(repost.id.Key(), repost)\n\tpost.reposts.Set(dst.id.Key(), repost.id)\n}\n\nfunc (post *Post) DeleteReply(replyID PostID) error {\n\tif !post.IsThread() {\n\t\t// TODO: Allow removing replies from parent replies too\n\t\tpanic(\"cannot delete reply from a non-thread post\")\n\t}\n\n\tif post.id == replyID {\n\t\treturn errors.New(\"expected an ID of an inner reply\")\n\t}\n\n\tkey := replyID.Key()\n\tv, removed := post.repliesAll.Remove(key)\n\tif !removed {\n\t\treturn errors.New(\"reply not found in thread\")\n\t}\n\n\t// TODO: Shouldn't reply be hidden instead of deleted? Maybe replace reply by a deleted message.\n\treply := v.(*Post)\n\tif reply.parentID != post.id {\n\t\tparent, _ := post.GetReply(reply.parentID)\n\t\tparent.replies.Remove(key)\n\t} else {\n\t\tpost.replies.Remove(key)\n\t}\n\treturn nil\n}\n\nfunc (post *Post) GetSummary() string {\n\treturn summaryOf(post.body, 80)\n}\n\nfunc (post *Post) GetURL() string {\n\tif post.IsThread() {\n\t\treturn post.board.GetURLFromThreadID(post.id)\n\t}\n\treturn post.board.GetURLFromReplyID(post.threadID, post.id)\n}\n\nfunc (post *Post) GetReplyFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"CreateReply\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"replyID\", \"0\",\n\t\t\t\"body\", \"\",\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"CreateReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (post *Post) GetRepostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateRepost\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t\t\"destinationBoardID\", \"\",\n\t)\n}\n\nfunc (post *Post) GetDeleteFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"DeleteThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"DeleteReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t)\n}\n\nfunc (post *Post) GetEditFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"EditThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"title\", post.GetTitle(),\n\t\t\t\"body\", post.GetBody(),\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"EditReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", post.GetBody(),\n\t)\n}\n\nfunc (post *Post) GetFlagFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"FlagThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"reason\", \"\",\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"FlagReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"reason\", \"\",\n\t)\n}\n\nfunc (post *Post) RenderSummary() string {\n\tvar (\n\t\tb       strings.Builder\n\t\tpostURL = post.GetURL()\n\t\ttitle   = post.title\n\t)\n\n\tb.WriteString(\"**≡ \" + newLink(summaryOf(title, 80), postURL) + \"**  \\n\")\n\tb.WriteString(\"Created by \" + newUserLink(post.creator) + \" on \" + post.createdAt.Format(dateFormat))\n\tb.WriteString(\"  \\n**\")\n\tb.WriteString(strconv.Itoa(post.repliesAll.Size()) + \" replies • \")\n\tb.WriteString(strconv.Itoa(post.reposts.Size()) + \" reposts**\\n\")\n\treturn b.String()\n}\n\nfunc (post *Post) renderSourcePost(indent string) (string, *Post) {\n\tif !post.IsRepost() {\n\t\treturn \"\", nil\n\t}\n\n\tindent += \"\u003e \"\n\n\t// TODO: figure out a way to decouple posts from a global storage.\n\tboard, ok := getBoard(post.repostBoardID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source board has been deleted*\\n\\n\"), nil\n\t}\n\n\tsrcPost, ok := board.GetThread(post.parentID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source post has been deleted*\\n\\n\"), nil\n\t}\n\n\tif srcPost.isHidden {\n\t\treturn indentBody(indent, \"*⚠ Source post has been flagged as inappropriate*\\n\\n\"), nil\n\t}\n\n\treturn indentBody(indent, srcPost.GetSummary()) + \"\\n\\n\", srcPost\n}\n\n// renderPostContent renders post text content (including repost body).\n// Function will dump a predefined message instead of a body if post is hidden.\nfunc (post *Post) renderPostContent(sb *strings.Builder, indent string, levels int) {\n\tif post.isHidden {\n\t\t// Flagged comment should be hidden, but replies still visible (see: #3480)\n\t\t// Flagged threads will be hidden by render function caller.\n\t\tsb.WriteString(indentBody(indent, \"_⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n\t\tsb.WriteString(\"\\n\")\n\t\treturn\n\t}\n\n\tsrcContent, srcPost := post.renderSourcePost(indent)\n\tif post.IsRepost() \u0026\u0026 srcPost != nil {\n\t\tsb.WriteString(\"  \\nThis thread is a repost of [another thread](\" + srcPost.GetURL() + \"): \\n\")\n\t}\n\n\tsb.WriteString(srcContent)\n\n\tif post.IsRepost() \u0026\u0026 srcPost == nil \u0026\u0026 len(post.body) \u003e 0 {\n\t\t// Add a newline to separate source deleted message from repost body content\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(indentBody(indent, post.body))\n\tsb.WriteString(\"\\n\")\n\n\tif post.IsThread() {\n\t\t// Split content and controls for threads.\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\t// Buttons \u0026 counters\n\tsb.WriteString(indent)\n\tif !post.IsThread() {\n\t\tsb.WriteString(\"  \\n\")\n\t\tsb.WriteString(indent)\n\t}\n\n\tsb.WriteString(\"Created by \")\n\tsb.WriteString(newUserLink(post.creator))\n\tsb.WriteString(\" on \")\n\tsb.WriteString(post.createdAt.Format(dateFormat))\n\n\t// Add a reply view link to each top level reply\n\tif !post.IsThread() {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(newLink(\"#\"+post.id.String(), post.GetURL()))\n\t}\n\n\tif post.repostsCount \u003e 0 {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(strconv.FormatUint(post.repostsCount, 10))\n\t\tsb.WriteString(\" repost(s)\")\n\t}\n\n\tsb.WriteString(\"  \\n\")\n\tsb.WriteString(newLink(\"Flag\", post.GetFlagFormURL()))\n\n\tif post.IsThread() {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Repost\", post.GetRepostFormURL()))\n\t}\n\n\tisReadonly := post.IsReadonly() || post.GetBoard().IsReadonly()\n\tif !isReadonly {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Reply\", post.GetReplyFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Edit\", post.GetEditFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Delete\", post.GetDeleteFormURL()))\n\t}\n\n\tif levels == 0 {\n\t\tsb.WriteString(\" • \")\n\t\tif post.IsThread() {\n\t\t\tsb.WriteString(newLink(\"Show all Replies\", post.board.GetURLFromThreadID(post.GetPostID())))\n\t\t} else {\n\t\t\tsb.WriteString(newLink(\"View Thread\", post.board.GetURLFromThreadID(post.threadID)))\n\t\t}\n\t}\n\n\tsb.WriteString(\" \\n\")\n}\n\nfunc (post *Post) Render(path string, indent string, levels int) string {\n\tif post == nil {\n\t\treturn \"nil post\"\n\t}\n\n\t// TODO: pass a builder as arg into Render.\n\tvar sb strings.Builder\n\n\t// Thread reposts might not have a title, if so get title from source thread\n\ttitle := post.title\n\tif post.IsRepost() \u0026\u0026 title == \"\" {\n\t\tif board, ok := getBoard(post.repostBoardID); ok {\n\t\t\tif src, ok := board.GetThread(post.parentID); ok {\n\t\t\t\ttitle = src.GetTitle()\n\t\t\t}\n\t\t}\n\t}\n\n\tsb.WriteString(indent)\n\tif title != \"\" { // Replies don't have a title\n\t\tsb.WriteString(\"## \" + title + \"\\n\")\n\t}\n\tsb.WriteString(indent + \"\\n\")\n\n\tpost.renderPostContent(\u0026sb, indent, levels)\n\n\tif post.replies.Size() == 0 {\n\t\treturn sb.String()\n\t}\n\n\t// XXX: This triggers for reply views\n\tif levels == 0 {\n\t\tsb.WriteString(indent + \"\\n\")\n\t\tsb.WriteString(indent)\n\t\tsb.WriteString(\"\\n\")\n\t\treturn sb.String()\n\t}\n\n\tif path != \"\" {\n\t\tsb.WriteString(post.renderTopLevelReplies(path, indent, levels-1))\n\t} else {\n\t\tsb.WriteString(post.renderSubReplies(indent, levels-1))\n\t}\n\treturn sb.String()\n}\n\nfunc (post *Post) renderTopLevelReplies(path, indent string, levels int) string {\n\tp, err := pager.New(path, post.replies.Size(), pager.WithPageSize(pageSizeReplies))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\trender := func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t}\n\n\tb.WriteString(\"\\n\\n---\\nSort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tb.WriteString(newLink(\"newest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tb.WriteString(\"\\n---\\n\")\n\t\tb.WriteString(pager.Picker(p))\n\t}\n\n\treturn b.String()\n}\n\nfunc (post *Post) renderSubReplies(indent string, levels int) string {\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\tpost.replies.Iterate(\"\", \"\", func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t})\n\n\treturn b.String()\n}\n\nfunc (post *Post) RenderInner() string {\n\tif post.IsThread() {\n\t\tpanic(\"unexpected thread\")\n\t}\n\n\tvar (\n\t\ts         string\n\t\tthreadID  = post.threadID\n\t\tthread, _ = post.board.GetThread(threadID) // TODO: This seems redundant (post == thread)\n\t)\n\n\t// Fully render parent if it's not a repost.\n\tif !post.IsRepost() {\n\t\tvar (\n\t\t\tparent   *Post\n\t\t\tparentID = post.parentID\n\t\t)\n\n\t\tif thread.id == parentID {\n\t\t\tparent = thread\n\t\t} else {\n\t\t\tparent, _ = thread.GetReply(parentID)\n\t\t}\n\n\t\ts += parent.Render(\"\", \"\", 0) + \"\\n\"\n\t}\n\n\ts += post.Render(\"\", \"\u003e \", 5)\n\treturn s\n}\n"},{"name":"post_test.gno","body":"package boards2\n\nimport (\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/ufmt\"\n)\n\nfunc TestPostUpdate(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, \"test123\", addr, perms)\n\tcreator := testutils.TestAddress(\"creator\")\n\tpost := newPost(board, 1, creator, \"Title\", \"Body\", 1, 0, 0)\n\ttitle := \"New Title\"\n\tbody := \"New body\"\n\n\tpost.Update(title, body)\n\n\tuassert.Equal(t, title, post.GetTitle())\n\tuassert.Equal(t, body, post.GetBody())\n\tuassert.False(t, post.GetUpdatedAt().IsZero())\n}\n\nfunc TestPostAddFlag(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tpost := createTestThread(t)\n\n\tflag := Flag{\n\t\tUser:   addr,\n\t\tReason: \"foobar\",\n\t}\n\tuassert.True(t, post.AddFlag(flag))\n\tuassert.False(t, post.AddFlag(flag), \"should reject flag from duplicate user\")\n\tuassert.Equal(t, post.FlagsCount(), 1)\n}\n\nfunc TestPostSetVisible(t *testing.T) {\n\tpost := createTestThread(t)\n\tuassert.False(t, post.IsHidden(), \"post should be visible by default\")\n\n\tpost.SetVisible(false)\n\tuassert.True(t, post.IsHidden(), \"post should be hidden\")\n\n\tpost.SetVisible(true)\n\tuassert.False(t, post.IsHidden(), \"post should be visible\")\n}\n\nfunc TestPostAddRepostTo(t *testing.T) {\n\t// TODO: Improve this unit test\n\taddr := testutils.TestAddress(\"creatorDstBoard\")\n\tperms := createDefaultBoardPermissions(addr)\n\tcases := []struct {\n\t\tname, title, body string\n\t\tdstBoard          *Board\n\t\tthread            *Post\n\t\tsetup             func() *Post\n\t\terr               string\n\t}{\n\t\t{\n\t\t\tname:     \"repost thread\",\n\t\t\ttitle:    \"Repost Title\",\n\t\t\tbody:     \"Repost body\",\n\t\t\tdstBoard: newBoard(42, \"dst123\", addr, perms),\n\t\t\tsetup:    func() *Post { return createTestThread(t) },\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid repost from reply\",\n\t\t\tsetup: func() *Post { return createTestReply(t) },\n\t\t\terr:   \"cannot repost non-thread post\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\trepost  *Post\n\t\t\t\tcreator = testutils.TestAddress(\"repostCreator\")\n\t\t\t\tthread  = tc.setup()\n\t\t\t)\n\n\t\t\tcreateRepost := func() {\n\t\t\t\tvar repostId PostID\n\t\t\t\tif tc.dstBoard != nil {\n\t\t\t\t\trepostId = tc.dstBoard.incGetPostID()\n\t\t\t\t}\n\n\t\t\t\trepost = newPost(tc.dstBoard, repostId, creator, tc.title, tc.body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\t\t\t\tthread.AddRepostTo(creator, repost, tc.dstBoard)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.PanicsWithMessage(t, tc.err, createRepost)\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tuassert.NotPanics(t, createRepost)\n\t\t\t}\n\n\t\t\tr, found := tc.dstBoard.GetThread(repost.GetPostID())\n\t\t\tuassert.True(t, found)\n\t\t\tuassert.True(t, repost == r)\n\t\t\tuassert.Equal(t, tc.title, repost.GetTitle())\n\t\t\tuassert.Equal(t, tc.body, repost.GetBody())\n\t\t\tuassert.Equal(t, uint(thread.GetBoard().GetID()), uint(repost.GetRepostBoardID()))\n\t\t})\n\t}\n}\n\nfunc TestNewThread(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\ttitle := \"Test Title\"\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=0\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\teditURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=EditThread\u0026boardID=%d\u0026body=%s\u0026threadID=%d\u0026title=%s\",\n\t\tuint(boardID),\n\t\tbody,\n\t\tuint(threadID),\n\t\tstrings.ReplaceAll(title, \" \", \"+\"),\n\t)\n\trepostURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateRepost\u0026boardID=%d\u0026body=\u0026destinationBoardID=\u0026threadID=%d\u0026title=\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteThread\u0026boardID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tflagURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=FlagThread\u0026boardID=%d\u0026reason=\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\n\tthread := newPost(board, threadID, creator, title, body, threadID, 0, 0)\n\n\tuassert.True(t, thread.IsThread())\n\tuassert.Equal(t, uint(threadID), uint(thread.GetPostID()))\n\tuassert.False(t, thread.GetCreatedAt().IsZero())\n\tuassert.True(t, thread.GetUpdatedAt().IsZero())\n\tuassert.Equal(t, title, thread.GetTitle())\n\tuassert.Equal(t, body[:77]+\"...\", thread.GetSummary())\n\tuassert.False(t, thread.HasReplies())\n\tuassert.Equal(t, url, thread.GetURL())\n\tuassert.Equal(t, replyURL, thread.GetReplyFormURL())\n\tuassert.Equal(t, editURL, thread.GetEditFormURL())\n\tuassert.Equal(t, repostURL, thread.GetRepostFormURL())\n\tuassert.Equal(t, deleteURL, thread.GetDeleteFormURL())\n\tuassert.Equal(t, flagURL, thread.GetFlagFormURL())\n}\n\nfunc TestThreadAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tthreadID := uint(thread.GetPostID())\n\tbody := \"A reply\"\n\n\treply := thread.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, threadID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.True(t, thread.HasReplies())\n}\n\nfunc TestThreadGetReply(t *testing.T) {\n\tcases := []struct {\n\t\tname   string\n\t\tthread *Post\n\t\tsetup  func(thread *Post) (replyID PostID)\n\t\tfound  bool\n\t}{\n\t\t{\n\t\t\tname:   \"found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup: func(thread *Post) PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:   \"not found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup:  func(*Post) PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup(tc.thread)\n\n\t\t\treply, found := tc.thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestThreadDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"ok nested\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.AddReply(testutils.TestAddress(\"replier2\"), \"\").GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid\",\n\t\t\tsetup: func() PostID { return thread.GetPostID() },\n\t\t\terr:   \"expected an ID of an inner reply\",\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t\terr:   \"reply not found in thread\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\terr := thread.DeleteReply(replyID)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.ErrorContains(t, err, tc.err)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tuassert.NoError(t, err)\n\t\t\t_, found := thread.GetReply(replyID)\n\t\t\tuassert.False(t, found)\n\t\t})\n\t}\n}\n\nfunc TestThreadRenderSummary(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRenderInner(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestNewReply(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tparentID := PostID(1)\n\treplyID := PostID(2)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t\tuint(replyID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteReply\u0026boardID=%d\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\n\treply := newPost(board, replyID, creator, \"\", body, threadID, parentID, 0)\n\n\tuassert.False(t, reply.IsThread())\n\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\tuassert.False(t, reply.GetCreatedAt().IsZero())\n\tuassert.True(t, reply.GetUpdatedAt().IsZero())\n\tuassert.False(t, reply.HasReplies())\n\tuassert.Equal(t, body[:77]+\"...\", reply.GetSummary())\n\tuassert.Equal(t, url, reply.GetURL())\n\tuassert.Equal(t, replyURL, reply.GetReplyFormURL())\n\tuassert.Equal(t, deleteURL, reply.GetDeleteFormURL())\n}\n\nfunc TestReplyAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tparentReplyID := uint(parentReply.GetPostID())\n\tbody := \"A child reply\"\n\n\treply := parentReply.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, parentReplyID, uint(reply.GetParentID()))\n\tuassert.Equal(t, parentReplyID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.False(t, reply.HasReplies())\n\tuassert.True(t, parentReply.HasReplies())\n}\n\nfunc TestReplyGetReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\tfound bool\n\t}{\n\t\t{\n\t\t\tname: \"found\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := parentReply.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\treply, found := thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestReplyDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\treply := parentReply.AddReply(testutils.TestAddress(\"replier2\"), \"\")\n\n\t// NOTE: Deleting a reply from a parent reply should eventually be suported\n\tuassert.PanicsWithMessage(t, \"cannot delete reply from a non-thread post\", func() {\n\t\tparentReply.DeleteReply(reply.GetPostID())\n\t})\n}\n\nfunc TestReplyRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc createTestThread(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(1, \"test_board_123\", creator, perms)\n\treturn board.AddThread(creator, \"Title\", \"Body\")\n}\n\nfunc createTestReply(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\treturn thread.AddReply(creator, \"Test message\")\n}\n"},{"name":"public.gno","body":"package boards2\n\nimport (\n\t\"regexp\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n)\n\nconst (\n\t// MaxBoardNameLength defines the maximum length allowed for board names.\n\tMaxBoardNameLength = 50\n\n\t// MaxThreadTitleLength defines the maximum length allowed for thread titles.\n\tMaxThreadTitleLength = 100\n\n\t// MaxReplyLength defines the maximum length allowed for replies.\n\tMaxReplyLength = 300\n)\n\nvar (\n\treBoardName = regexp.MustCompile(`(?i)^[a-z]+[a-z0-9_\\-]{2,50}$`)\n\n\t// Minimalistic Markdown line prefix checks that if allowed would\n\t// break the current UI when submitting a reply. It denies replies\n\t// with headings, blockquotes or horizontal lines.\n\treDeniedReplyLinePrefixes = regexp.MustCompile(`(?m)^\\s*(#|---|\u003e)+`)\n)\n\n// SetHelp sets or updates boards realm help content.\nfunc SetHelp(content string) {\n\tcontent = strings.TrimSpace(content)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{content}\n\tgPerms.WithPermission(caller, PermissionRealmHelp, args, func(Args) {\n\t\tgHelp = content\n\t})\n}\n\n// SetPermissions sets a permissions implementation for boards2 realm or a board.\nfunc SetPermissions(bid BoardID, p Permissions) {\n\tassertRealmIsNotLocked()\n\n\tif p == nil {\n\t\tpanic(\"permissions is required\")\n\t}\n\n\tif bid != 0 {\n\t\tassertBoardExists(bid)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid}\n\tgPerms.WithPermission(caller, PermissionPermissionsUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\t// When board ID is zero it means that realm permissions are being updated\n\t\tif bid == 0 {\n\t\t\tgPerms = p\n\n\t\t\tstd.Emit(\n\t\t\t\t\"RealmPermissionsUpdated\",\n\t\t\t\t\"caller\", caller.String(),\n\t\t\t)\n\t\t\treturn\n\t\t}\n\n\t\t// Otherwise update the permissions of a single board\n\t\tboard := mustGetBoard(bid)\n\t\tboard.perms = p\n\n\t\tstd.Emit(\n\t\t\t\"BoardPermissionsUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t)\n\t})\n}\n\n// SetRealmNotice sets a notice to be displayed globally by the realm.\n// An empty message removes the realm notice.\nfunc SetRealmNotice(message string) {\n\tmessage = strings.TrimSpace(message)\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmNotice, nil, func(Args) {\n\t\tgNotice = message\n\n\t\tstd.Emit(\n\t\t\t\"RealmNoticeChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"message\", message,\n\t\t)\n\t})\n}\n\n// GetBoardIDFromName searches a board by name and returns it's ID.\nfunc GetBoardIDFromName(name string) (_ BoardID, found bool) {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\treturn 0, false\n\t}\n\treturn v.(*Board).id, true\n}\n\n// CreateBoard creates a new board.\nfunc CreateBoard(name string) BoardID {\n\tassertRealmIsNotLocked()\n\n\tname = strings.TrimSpace(name)\n\tassertIsValidBoardName(name)\n\tassertBoardNameNotExists(name)\n\n\tcaller := std.PreviousRealm().Address()\n\tid := incGetBoardID()\n\targs := Args{name, id}\n\tgPerms.WithPermission(caller, PermissionBoardCreate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(name)\n\n\t\tperms := createDefaultBoardPermissions(caller)\n\t\tboard := newBoard(id, name, caller, perms)\n\t\tgBoardsByID.Set(id.Key(), board)\n\t\tgBoardsByName.Set(name, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardCreated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", id.String(),\n\t\t\t\"name\", name,\n\t\t)\n\t})\n\treturn id\n}\n\n// RenameBoard changes the name of an existing board.\n//\n// A history of previous board names is kept when boards are renamed.\n// Because of that boards are also accesible using previous name(s).\nfunc RenameBoard(name, newName string) {\n\tassertRealmIsNotLocked()\n\n\tnewName = strings.TrimSpace(newName)\n\tassertIsValidBoardName(newName)\n\tassertBoardNameNotExists(newName)\n\n\tboard := mustGetBoardByName(name)\n\tassertBoardIsNotFrozen(board)\n\n\tbid := board.GetID()\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid, name, newName}\n\tboard.perms.WithPermission(caller, PermissionBoardRename, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(newName)\n\n\t\tboard := mustGetBoard(bid)\n\t\tboard.aliases = append(board.aliases, board.name)\n\t\tboard.name = newName\n\n\t\t// Index board for the new name keeping previous indexes for older names\n\t\tgBoardsByName.Set(newName, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardRenamed\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t\t\"name\", name,\n\t\t\t\"newName\", newName,\n\t\t)\n\t})\n}\n\n// CreateThread creates a new thread within a board.\nfunc CreateThread(boardID BoardID, title, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tbody = strings.TrimSpace(body)\n\tassertBodyIsNotEmpty(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadCreate)\n\n\tthread := board.AddThread(caller, title, body)\n\n\tstd.Emit(\n\t\t\"ThreadCreated\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", thread.GetPostID().String(),\n\t\t\"title\", title,\n\t)\n\n\treturn thread.id\n}\n\n// CreateReply creates a new comment or reply within a thread.\n//\n// The value of `replyID` is only required when creating a reply of another reply.\nfunc CreateReply(boardID BoardID, threadID, replyID PostID, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyCreate)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\tvar reply *Post\n\tif replyID == 0 {\n\t\t// When the parent reply is the thread just add reply to thread\n\t\treply = thread.AddReply(caller, body)\n\t} else {\n\t\t// Try to get parent reply and add a new child reply\n\t\tparent := mustGetReply(thread, replyID)\n\t\tif parent.IsHidden() || parent.IsReadonly() {\n\t\t\tpanic(\"replying to a hidden or frozen reply is not allowed\")\n\t\t}\n\n\t\treply = parent.AddReply(caller, body)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyCreate\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", reply.GetPostID().String(),\n\t)\n\n\treturn reply.id\n}\n\n// CreateRepost reposts a thread into another board.\nfunc CreateRepost(boardID BoardID, threadID PostID, title, body string, destinationBoardID BoardID) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tcaller := std.PreviousRealm().Address()\n\tdst := mustGetBoard(destinationBoardID)\n\tassertBoardIsNotFrozen(dst)\n\tassertHasBoardPermission(dst, caller, PermissionThreadRepost)\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\tif thread.IsRepost() {\n\t\tpanic(\"reposting a thread that is a repost is not allowed\")\n\t}\n\n\trepostId := dst.incGetPostID()\n\tbody = strings.TrimSpace(body)\n\trepost := newPost(dst, repostId, caller, title, body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\tthread.AddRepostTo(caller, repost, dst)\n\n\tstd.Emit(\n\t\t\"Repost\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"destinationBoardID\", destinationBoardID.String(),\n\t\t\"title\", title,\n\t)\n\n\treturn repostId\n}\n\n// DeleteThread deletes a thread from a board.\n//\n// Threads can be deleted by the users who created them or otherwise by users with special permissions.\nfunc DeleteThread(boardID BoardID, threadID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteThread filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\n\t\tif caller != thread.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionThreadDelete)\n\t\t}\n\t}\n\n\t// Hard delete thread and all its replies\n\tboard.DeleteThread(threadID)\n\n\tstd.Emit(\n\t\t\"ThreadDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t)\n}\n\n// DeleteReply deletes a reply from a thread.\n//\n// Replies can be deleted by the users who created them or otherwise by users with special permissions.\n// Soft deletion is used when the deleted reply contains sub replies, in which case the reply content\n// is replaced by a text informing that reply has been deleted to avoid deleting sub-replies.\nfunc DeleteReply(boardID BoardID, threadID, replyID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteReply filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\treply := mustGetReply(thread, replyID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\t\tassertReplyIsVisible(reply)\n\t\tassertReplyIsNotFrozen(reply)\n\n\t\tif caller != reply.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionReplyDelete)\n\t\t}\n\t}\n\n\t// Soft delete reply by changing its body when it contains\n\t// sub-replies, otherwise hard delete it.\n\tif reply.HasReplies() {\n\t\treply.Update(reply.GetTitle(), \"This reply has been deleted\")\n\t} else {\n\t\tthread.DeleteReply(replyID)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t)\n}\n\n// EditThread updates the title and body of thread.\n//\n// Threads can be updated by the users who created them or otherwise by users with special permissions.\nfunc EditThread(boardID BoardID, threadID PostID, title, body string) {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\tbody = strings.TrimSpace(body)\n\tif !thread.IsRepost() {\n\t\tassertBodyIsNotEmpty(body)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != thread.GetCreator() {\n\t\tassertHasBoardPermission(board, caller, PermissionThreadEdit)\n\t}\n\n\tthread.Update(title, body)\n\n\tstd.Emit(\n\t\t\"ThreadEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"title\", title,\n\t)\n}\n\n// EditReply updates the body of comment or reply.\n//\n// Replies can be updated only by the users who created them.\nfunc EditReply(boardID BoardID, threadID, replyID PostID, body string) {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\tassertReplyIsNotFrozen(reply)\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != reply.GetCreator() {\n\t\tpanic(\"only the reply creator is allowed to edit it\")\n\t}\n\n\treply.Update(\"\", body)\n\n\tstd.Emit(\n\t\t\"ReplyEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"body\", body,\n\t)\n}\n\n// InviteMember adds a member to the realm or to a boards.\n//\n// A role can optionally be specified to be assigned to the new member.\n// Board ID is only required when inviting a member to a board.\nfunc InviteMember(boardID BoardID, user std.Address, role Role) {\n\tassertUserAddressIsValid(user)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{user, role}\n\tperms.WithPermission(caller, PermissionMemberInvite, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.AddUser(user, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberInvited\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", user.String(),\n\t\t\t\"role\", string(role),\n\t\t)\n\t})\n}\n\n// RemoveMember removes a member from the realm or a boards.\n//\n// Board ID is only required when removing a member from board.\nfunc RemoveMember(boardID BoardID, member std.Address) {\n\tassertMembersUpdateIsEnabled(boardID)\n\tassertMemberAddressIsValid(member)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\tperms.WithPermission(caller, PermissionMemberRemove, Args{member}, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif !perms.RemoveUser(member) {\n\t\t\tpanic(\"member not found\")\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberRemoved\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t)\n\t})\n}\n\n// IsMember checks if an user is a member of the realm or a board.\n//\n// Board ID is only required when checking if a user is a member of a board.\nfunc IsMember(boardID BoardID, user std.Address) bool {\n\tassertUserAddressIsValid(user)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasUser(user)\n}\n\n// HasMemberRole checks if a realm or board member has a specific role assigned.\n//\n// Board ID is only required when checking a member of a board.\nfunc HasMemberRole(boardID BoardID, member std.Address, role Role) bool {\n\tassertMemberAddressIsValid(member)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasRole(member, role)\n}\n\n// ChangeMemberRole changes the role of a realm or board member.\n//\n// Board ID is only required when changing the role for a member of a board.\nfunc ChangeMemberRole(boardID BoardID, member std.Address, role Role) {\n\tassertMemberAddressIsValid(member)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, member, role}\n\tperms.WithPermission(caller, PermissionRoleChange, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.SetUserRoles(member, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"RoleChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t\t\"newRole\", string(role),\n\t\t)\n\t})\n}\n\n// IterateRealmMembers iterates realm members.\n// The iteration is done only for realm members, board members are not iterated.\nfunc IterateRealmMembers(offset int, fn UsersIterFn) (halted bool) {\n\tcount := gPerms.UsersCount() - offset\n\treturn gPerms.IterateUsers(offset, count, fn)\n}\n\n// IterateBoards iterates realm boards.\nfunc IterateBoards(offset int, fn func(ReadonlyBoard) bool) (halted bool) {\n\tcount := gBoardsByID.Size() - offset\n\treturn gBoardsByID.IterateByOffset(offset, count, func(_ string, v any) bool {\n\t\tboard, _ := v.(*Board)\n\t\treturn fn(readonlyBoard{board})\n\t})\n}\n\nfunc assertMemberAddressIsValid(member std.Address) {\n\tif !member.IsValid() {\n\t\tpanic(\"invalid member address\")\n\t}\n}\n\nfunc assertUserAddressIsValid(user std.Address) {\n\tif !user.IsValid() {\n\t\tpanic(\"invalid user address\")\n\t}\n}\n\nfunc assertHasBoardPermission(b *Board, user std.Address, p Permission) {\n\tif !b.perms.HasPermission(user, p) {\n\t\tpanic(\"unauthorized\")\n\t}\n}\n\nfunc assertBoardExists(id BoardID) {\n\tif _, found := getBoard(id); !found {\n\t\tpanic(\"board not found: \" + id.String())\n\t}\n}\n\nfunc assertBoardIsNotFrozen(b *Board) {\n\tif b.IsReadonly() {\n\t\tpanic(\"board is frozen\")\n\t}\n}\n\nfunc assertIsValidBoardName(name string) {\n\tsize := len(name)\n\tif size == 0 {\n\t\tpanic(\"board name is empty\")\n\t}\n\n\tif size \u003e MaxBoardNameLength {\n\t\tn := strconv.Itoa(MaxBoardNameLength)\n\t\tpanic(\"board name is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif !reBoardName.MatchString(name) {\n\t\tpanic(\"board name contains invalid characters\")\n\t}\n}\n\nfunc assertThreadIsNotFrozen(t *Post) {\n\tif t.IsReadonly() {\n\t\tpanic(\"thread is frozen\")\n\t}\n}\n\nfunc assertReplyIsNotFrozen(r *Post) {\n\tif r.IsReadonly() {\n\t\tpanic(\"reply is frozen\")\n\t}\n}\n\nfunc assertNameIsNotEmpty(name string) {\n\tif name == \"\" {\n\t\tpanic(\"name is empty\")\n\t}\n}\n\nfunc assertTitleIsValid(title string) {\n\tif title == \"\" {\n\t\tpanic(\"title is empty\")\n\t}\n\n\tif len(title) \u003e MaxThreadTitleLength {\n\t\tn := strconv.Itoa(MaxThreadTitleLength)\n\t\tpanic(\"thread title is too long, maximum allowed is \" + n + \" characters\")\n\t}\n}\n\nfunc assertBodyIsNotEmpty(body string) {\n\tif body == \"\" {\n\t\tpanic(\"body is empty\")\n\t}\n}\n\nfunc assertBoardNameNotExists(name string) {\n\tif gBoardsByName.Has(name) {\n\t\tpanic(\"board already exists\")\n\t}\n}\n\nfunc assertThreadExists(b *Board, threadID PostID) {\n\tif _, found := b.GetThread(threadID); !found {\n\t\tpanic(\"thread not found: \" + threadID.String())\n\t}\n}\n\nfunc assertReplyExists(thread *Post, replyID PostID) {\n\tif _, found := thread.GetReply(replyID); !found {\n\t\tpanic(\"reply not found: \" + replyID.String())\n\t}\n}\n\nfunc assertThreadIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"thread is hidden\")\n\t}\n}\n\nfunc assertReplyIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"reply is hidden\")\n\t}\n}\n\nfunc assertReplyBodyIsValid(body string) {\n\tassertBodyIsNotEmpty(body)\n\n\tif len(body) \u003e MaxReplyLength {\n\t\tn := strconv.Itoa(MaxReplyLength)\n\t\tpanic(\"reply is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif reDeniedReplyLinePrefixes.MatchString(body) {\n\t\tpanic(\"using Markdown headings, blockquotes or horizontal lines is not allowed in replies\")\n\t}\n}\n\nfunc assertMembersUpdateIsEnabled(boardID BoardID) {\n\tif boardID != 0 {\n\t\tassertRealmIsNotLocked()\n\t} else {\n\t\tassertRealmMembersAreNotLocked()\n\t}\n}\n"},{"name":"public_flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// SetFlaggingThreshold sets the number of flags required to hide a thread or comment.\n//\n// Threshold is only applicable within the board where it's setted.\nfunc SetFlaggingThreshold(boardID BoardID, threshold int) {\n\tif threshold \u003c 1 {\n\t\tpanic(\"invalid flagging threshold\")\n\t}\n\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, threshold}\n\tboard.perms.WithPermission(caller, PermissionBoardFlaggingUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\n\t\tgFlaggingThresholds.Set(boardID.String(), threshold)\n\t\tstd.Emit(\n\t\t\t\"FlaggingThresholdUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"threshold\", strconv.Itoa(threshold),\n\t\t)\n\t})\n}\n\n// GetFlaggingThreshold returns the number of flags required to hide a thread or comment within a board.\nfunc GetFlaggingThreshold(boardID BoardID) int {\n\tassertBoardExists(boardID)\n\treturn getFlaggingThreshold(boardID)\n}\n\n// FlagThread adds a new flag to a thread.\n//\n// Flagging requires special permissions and hides the thread when\n// the number of flags reaches a pre-defined flagging threshold.\nfunc FlagThread(boardID BoardID, threadID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionThreadFlag)\n\t}\n\n\tt, ok := board.GetThread(threadID)\n\tif !ok {\n\t\tpanic(\"post doesn't exist\")\n\t}\n\tassertThreadIsNotFrozen(t)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(t, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\tt.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ThreadFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n\n// FlagReply adds a new flag to a comment or reply.\n//\n// Flagging requires special permissions and hides the comment or reply\n// when the number of flags reaches a pre-defined flagging threshold.\nfunc FlagReply(boardID BoardID, threadID, replyID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionReplyFlag)\n\t}\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsNotFrozen(thread)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(reply, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\treply.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n"},{"name":"public_freeze.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// FreezeBoard freezes a board so no more threads and comments can be created or modified.\nfunc FreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, true)\n}\n\n// UnfreezeBoard removes frozen status from a board.\nfunc UnfreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, false)\n}\n\n// IsBoardFrozen checks if a board has been frozen.\nfunc IsBoardFrozen(boardID BoardID) bool {\n\tboard := mustGetBoard(boardID)\n\treturn board.IsReadonly()\n}\n\n// FreezeThread freezes a thread so thread cannot be replied, modified or deleted.\n//\n// Fails if board is frozen.\nfunc FreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, true)\n}\n\n// UnfreezeThread removes frozen status from a thread.\n//\n// Fails if board is frozen.\nfunc UnfreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, false)\n}\n\n// IsThreadFrozen checks if a thread has been frozen.\n//\n// Returns true if board is frozen.\nfunc IsThreadFrozen(boardID BoardID, threadID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treturn board.IsReadonly() || thread.IsReadonly()\n}\n\n// UnfreezeReply removes frozen status from a reply.\n//\n// Fails when parent thread or board are frozen.\nfunc UnfreezeReply(boardID BoardID, threadID, replyID PostID) {\n\t// XXX: Is there a use case for also freezing replies?\n\tsetReplyReadonly(boardID, threadID, replyID, false)\n}\n\n// FreezeReply freezes a thread reply so it cannot be modified or deleted.\n//\n// Fails when parent thread or board are frozen.\nfunc FreezeReply(boardID BoardID, threadID, replyID PostID) {\n\tsetReplyReadonly(boardID, threadID, replyID, true)\n}\n\n// IsReplyFrozen checks if a thread reply has been frozen.\n//\n// Returns true when board or a parent thread is frozen.\nfunc IsReplyFrozen(boardID BoardID, threadID, replyID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\treturn board.IsReadonly() || thread.IsReadonly() || reply.IsReadonly()\n}\n\nfunc setReplyReadonly(boardID BoardID, threadID, replyID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\tif isReadonly {\n\t\tassertReplyIsNotFrozen(reply)\n\t}\n\n\treply.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ReplyFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setThreadReadonly(boardID BoardID, threadID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tif isReadonly {\n\t\tassertThreadIsNotFrozen(thread)\n\t}\n\n\tthread.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ThreadFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setBoardReadonly(boardID BoardID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tif isReadonly {\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionBoardFreeze)\n\n\tboard.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"BoardFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n"},{"name":"public_lock.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// LockRealm locks the realm making it readonly.\n//\n// WARNING: Realm can't be unlocked once locked.\n//\n// Realm can also be locked without locking realm members.\n// Realm members can be locked when locking the realm or afterwards.\n// This is relevant for two reasons, one so members can be modified after lock.\n// The other is for realm owners, which can delete threads and comments after lock.\nfunc LockRealm(lockRealmMembers bool) {\n\tassertRealmMembersAreNotLocked()\n\n\t// If realm members are not being locked assert that realm is no locked.\n\t// Members can be locked after locking the realm, in a second `LockRealm` call.\n\tif !lockRealmMembers {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmLock, nil, func(Args) {\n\t\tgLocked.realm = true\n\t\tgLocked.realmMembers = lockRealmMembers\n\n\t\tstd.Emit(\n\t\t\t\"RealmLocked\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"lockRealmMembers\", strconv.FormatBool(lockRealmMembers),\n\t\t)\n\t})\n}\n\n// IsRealmLocked checks if boards realm has been locked.\nfunc IsRealmLocked() bool {\n\treturn gLocked.realm\n}\n\n// AreRealmMembersLocked checks if realm members has been locked.\nfunc AreRealmMembersLocked() bool {\n\treturn gLocked.realmMembers\n}\n\nfunc assertRealmIsNotLocked() { // TODO: Add filtests for locked realm case to all public functions\n\tif gLocked.realm {\n\t\tpanic(\"realm is locked\")\n\t}\n}\n\nfunc assertRealmMembersAreNotLocked() { // TODO: Add filtests for locked members case to all public member functions\n\tif gLocked.realmMembers {\n\t\tpanic(\"realm and members are locked\")\n\t}\n}\n"},{"name":"render.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/p/demo/mux\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst (\n\tpageSizeBoards  = 6\n\tpageSizeThreads = 6\n\tpageSizeReplies = 10\n)\n\nconst menuManageBoard = \"manageBoard\"\n\nfunc Render(path string) string {\n\trouter := mux.NewRouter()\n\trouter.HandleFunc(\"\", renderBoardsList)\n\trouter.HandleFunc(\"help\", renderHelp)\n\trouter.HandleFunc(\"admin-users\", renderMembers)\n\trouter.HandleFunc(\"{board}\", renderBoard)\n\trouter.HandleFunc(\"{board}/members\", renderMembers)\n\trouter.HandleFunc(\"{board}/{thread}\", renderThread)\n\trouter.HandleFunc(\"{board}/{thread}/{reply}\", renderReply)\n\n\trouter.NotFoundHandler = func(res *mux.ResponseWriter, _ *mux.Request) {\n\t\tres.Write(\"Path not found\")\n\t}\n\n\treturn router.Render(path)\n}\n\nfunc renderHelp(res *mux.ResponseWriter, _ *mux.Request) {\n\tres.Write(\"# Boards Help\\n\")\n\tif gHelp != \"\" {\n\t\tres.Write(gHelp)\n\t} else {\n\t\tres.Write(\"### Help content has not been uploaded\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(newLink(\"upload boards help\", txlink.Call(\"SetHelp\", \"content\", \"\")))\n\t\tres.Write(\" ?\")\n\t}\n}\n\nfunc renderBoardsList(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tres.Write(\"# Boards\\n\\n\")\n\trenderBoardListMenu(res, req)\n\tres.Write(\"\\n\\n---\\n\")\n\n\tif gBoardsByID.Size() == 0 {\n\t\tlink := txlink.Call(\"CreateBoard\", \"name\", \"\")\n\t\tres.Write(\"### Currently there are no boards\\n\")\n\t\tres.Write(\"Be the first to \")\n\t\tres.Write(newLink(\"create a new board\", link))\n\t\tres.Write(\" !\")\n\n\t\treturn\n\t}\n\n\tp, err := pager.New(req.RawPath, gBoardsByID.Size(), pager.WithPageSize(pageSizeBoards))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tboard := v.(*Board)\n\n\t\tres.Write(\"**\" + newLink(board.GetName(), board.GetURL()) + \"**  \\n\")\n\t\tres.Write(\"Created by \" + newUserLink(board.creator) + \" \")\n\t\tres.Write(\"on \" + board.createdAt.Format(dateFormat))\n\t\tres.Write(\", #\" + board.id.String() + \"  \\n\")\n\t\tres.Write(\"**\" + strconv.Itoa(board.threads.Size()) + \" threads\")\n\t\tif board.IsReadonly() {\n\t\t\tres.Write(\", read-only\")\n\t\t}\n\n\t\tres.Write(\"**\\n\\n\")\n\t\treturn false\n\t}\n\n\tres.Write(\"Sort by: \")\n\tr := realmpath.Parse(req.RawPath)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tres.Write(newLink(\"newest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tres.Write(newLink(\"oldest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n---\\n\")\n\t\tres.Write(pager.Picker(p))\n\t}\n}\n\nfunc renderBoardListMenu(res *mux.ResponseWriter, req *mux.Request) {\n\tpath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\n\tres.Write(newLink(\"Create Board\", txlink.Call(\"CreateBoard\", \"name\", \"\")))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"List Admin Users\", path+\":admin-users\"))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"Help\", path+\":help\"))\n\tres.Write(\"\\n\\n\")\n}\n\nfunc renderBoard(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tlink := newLink(\"create a new board\", txlink.Call(\"CreateBoard\", \"name\", name))\n\t\tres.Write(\"### The board you are looking for does not exist\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(link)\n\t\tres.Write(\" ?\")\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tmenu := renderBoardMenu(board, req)\n\n\tres.Write(board.Render(req.RawPath, menu))\n}\n\nfunc renderBoardMenu(board *Board, req *mux.Request) string {\n\tvar (\n\t\tb               strings.Builder\n\t\tboardMembersURL = board.GetPath() + \"/members\"\n\t)\n\n\tif board.IsReadonly() {\n\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\tb.WriteString(\" • \")\n\t\tb.WriteString(newLink(\"Unfreeze Board\", board.GetUnfreezeFormURL()))\n\t\tb.WriteString(\"\\n\")\n\t} else {\n\t\tb.WriteString(newLink(\"Create Thread\", board.GetPostFormURL()))\n\t\tb.WriteString(\" • \")\n\n\t\tmenu := getCurrentMenu(req.RawPath)\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"**Manage Board**\")\n\t\t} else {\n\t\t\tb.WriteString(newLink(\"Manage Board\", menuURL(menuManageBoard)))\n\t\t}\n\n\t\tb.WriteString(\"  \\n\")\n\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"↳\")\n\t\t\tb.WriteString(newLink(\"Invite Member\", board.GetInviteMemberFormURL()))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"Freeze Board\", board.GetFreezeFormURL()))\n\t\t\tb.WriteString(\"\\n\\n\")\n\t\t}\n\t}\n\n\treturn b.String()\n}\n\nfunc renderThread(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + rawID)\n\t} else if thread.IsHidden() {\n\t\tres.Write(\"Thread with ID: \" + rawID + \" has been flagged as inappropriate\")\n\t} else {\n\t\tres.Write(thread.Render(req.RawPath, \"\", 5))\n\t}\n}\n\nfunc renderReply(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\trawID = req.GetVar(\"reply\")\n\trID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid reply ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + req.GetVar(\"thread\"))\n\t\treturn\n\t}\n\n\treply, found := thread.GetReply(PostID(rID))\n\tif !found {\n\t\tres.Write(\"Reply does not exist with ID: \" + rawID)\n\t\treturn\n\t}\n\n\t// Call render even for hidden replies to display children.\n\t// Original comment content will be hidden under the hood.\n\t// See: #3480\n\tres.Write(reply.RenderInner())\n}\n\nfunc renderMembers(res *mux.ResponseWriter, req *mux.Request) {\n\tboardID := BoardID(0)\n\tperms := gPerms\n\tname := req.GetVar(\"board\")\n\tif name != \"\" {\n\t\tv, found := gBoardsByName.Get(name)\n\t\tif !found {\n\t\t\tres.Write(\"### Board not found\")\n\t\t\treturn\n\t\t}\n\n\t\tboard := v.(*Board)\n\t\tboardID = board.GetID()\n\t\tperms = board.perms\n\n\t\tres.Write(\"# \" + board.GetName() + \" Members\\n\")\n\t\tres.Write(\"### These are the board members\\n\\n\")\n\t} else {\n\t\tres.Write(\"# Admin Users\\n\")\n\t\tres.Write(\"### These are the admin users of the realm\\n\\n\")\n\t}\n\n\t// Create a pager with a small page size to reduce\n\t// the number of username lookups per page.\n\tp, err := pager.New(req.RawPath, perms.UsersCount(), pager.WithPageSize(5))\n\tif err != nil {\n\t\tres.Write(err.Error())\n\t\treturn\n\t}\n\n\tres.Write(\"| Member | Role | Actions |\\n| --- | --- | --- |\\n\")\n\tperms.IterateUsers(p.Offset(), p.PageSize(), func(u User) bool {\n\t\tres.Write(\"| \")\n\t\tres.Write(newUserLink(u.Address))\n\t\tres.Write(\" | \")\n\t\tres.Write(rolesToString(u.Roles))\n\t\tres.Write(\" | \")\n\t\tres.Write(newLink(\"remove\", txlink.Call(\n\t\t\t\"RemoveMember\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t)))\n\t\tres.Write(\" • \")\n\t\tres.Write(newLink(\"change role\", txlink.Call(\n\t\t\t\"ChangeMemberRole\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t\t\"role\", \"\",\n\t\t)))\n\t\tres.Write(\" |\\n\")\n\t\treturn false\n\t})\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n\\n\" + pager.Picker(p))\n\t}\n}\n\nfunc renderNotice(res *mux.ResponseWriter) {\n\tif gNotice == \"\" {\n\t\treturn\n\t}\n\n\tres.Write(\"\u003e \")\n\tres.Write(gNotice)\n\tres.Write(\"\\n\\n\")\n}\n\nfunc rolesToString(roles []Role) string {\n\tif len(roles) == 0 {\n\t\treturn \"\"\n\t}\n\n\tnames := make([]string, len(roles))\n\tfor i, r := range roles {\n\t\tnames[i] = string(r)\n\t}\n\treturn strings.Join(names, \", \")\n}\n\nfunc menuURL(name string) string {\n\t// TODO: Menu URL works because no other GET arguments are being used\n\treturn \"?menu=\" + name\n}\n\nfunc getCurrentMenu(rawURL string) string {\n\t_, rawQuery, found := strings.Cut(rawURL, \"?\")\n\tif !found {\n\t\treturn \"\"\n\t}\n\n\tquery, _ := url.ParseQuery(rawQuery)\n\treturn query.Get(\"menu\")\n}\n"},{"name":"z_0_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(\"test123\")\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_0_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tboardName = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(boardName)\n}\n\nfunc main() {\n\tboards2.CreateBoard(boardName)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_0_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_0_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"gnoland\")\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_0_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar name = strings.Repeat(\"X\", boards2.MaxBoardNameLength+1)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(name)\n}\n\n// Error:\n// board name is too long, maximum allowed is 50 characters\n"},{"name":"z_0_h_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname   = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\tboards2.InviteMember(0, member, boards2.RoleOwner) // Operate on realm DAO members instead of individual boards\n\ttesting.SetOriginCaller(member)\n\tusers.Register(name)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(name)\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"test123\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread as a moderator\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagThread(404, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_10_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Make the next call as an uninvited user\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, 404, \"\")\n}\n\n// Error:\n// post doesn't exist\n"},{"name":"z_10_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_10_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to flag threads\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with a specific flagging threshold\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread and flag it as a moderator\n\ttesting.SetOriginCaller(moderator)\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item has been already flagged by a current user\n"},{"name":"z_10_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a thread so the realm owner can flag and hide it with a single flag\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\t// Also freeze board to make sure that realm owner can still flag the thread\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_11_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_11_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditThread(404, 1, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_11_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_11_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to edit threads\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid   boards2.BoardID\n\tpid   boards2.PostID\n\ttitle = strings.Repeat(\"X\", boards2.MaxThreadTitleLength+1)\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, \"bar\")\n}\n\n// Error:\n// thread title is too long, maximum allowed is 100 characters\n"},{"name":"z_12_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Create a reply and a sub reply\n\tparentRID := boards2.CreateReply(bid, tid, 0, \"Parent\")\n\trid = boards2.CreateReply(bid, tid, parentRID, \"Child\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditReply(404, 1, 0, \"body\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_12_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, 404, 0, \"body\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_12_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, 404, \"body\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_12_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"new body\")\n}\n\n// Error:\n// only the reply creator is allowed to edit it\n"},{"name":"z_12_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Flag the reply so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"body\")\n}\n\n// Error:\n// reply is hidden\n"},{"name":"z_12_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_13_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagReply(404, 1, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_13_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, 404, 1, \"\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_13_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, 404, \"\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_13_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_13_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_13_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to flag replies\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a reply so the realm owner can flag and hide it with a single flag\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\t// Also freeze board to make sure that realm owner can still flag the reply\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n}\n\n// Output:\n// true\n"},{"name":"z_14_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_14_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteReply(404, 1, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_14_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, 404, 1)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_14_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, 404)\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_14_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent\")\n\tboards2.CreateReply(bid, tid, rid, \"Child reply\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Render content must contain the releted message instead of reply's body\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e This reply has been deleted\\n\"))\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e Child reply\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_14_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Call using a user that has not permission to delete replies\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_14_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to delete replies\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_15_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\tboards2.FlagThread(srcBID, srcTID, \"idk\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread is flagged\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_15_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID = 1024\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread doesn't exist\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread does not exist with ID: 1024\n"},{"name":"z_15_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_15_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/ufmt\"\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"original title\", \"original text\")\n}\n\nfunc main() {\n\t// Success case\n\ttID := boards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n\tp := ufmt.Sprintf(\"dst-board/%s\", tID)\n\tout := boards2.Render(p)\n\n\tprintln(strings.Contains(out, \"original text\"))\n\tprintln(strings.Contains(out, \"repost title\"))\n\tprintln(strings.Contains(out, \"repost text\"))\n}\n\n// Output:\n// true\n// true\n// true\n"},{"name":"z_15_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Create a board with a thread\n\torigBID := boards2.CreateBoard(\"origin-board\")\n\torigTID := boards2.CreateThread(origBID, \"title\", \"text\")\n\n\t// Create a second board and repost a thread using an empty title\n\tsrcBID = boards2.CreateBoard(\"source-board\")\n\tsrcTID = boards2.CreateRepost(origBID, origTID, \"original title\", \"original text\", srcBID)\n\n\t// Create a third board to try reposting the repost\n\tdstBID = boards2.CreateBoard(\"destination-board\")\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n}\n\n// Error:\n// reposting a thread that is a repost is not allowed\n"},{"name":"z_16_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 4)\n\n\t// Ensure that flagging threshold changed\n\tprintln(boards2.GetFlaggingThreshold(bid))\n}\n\n// Output:\n// 4\n"},{"name":"z_16_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nconst bid boards2.BoardID = 404\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_16_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(1, 0)\n}\n\n// Error:\n// invalid flagging threshold\n"},{"name":"z_17_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsBoardFrozen(bid))\n}\n\n// Output:\n// true\n"},{"name":"z_17_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_18_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_18_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\tuser = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid  = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_18_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tperms boards2.Permissions\n\tbid   boards2.BoardID\n)\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foobar\")\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new board permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_19_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\t// Attempt to freeze a thread on frozen board\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_19_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a frozen thread\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_19_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n}\n\n// Output:\n// true\n"},{"name":"z_1_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, boards2.RoleOwner)\n}\n\n// Error:\n// only owners are allowed to invite other owners\n"},{"name":"z_1_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n\trole  = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, user, boards2.Role(\"foobar\")) // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// invalid role: foobar\n"},{"name":"z_1_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole  = boards2.RoleOwner\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\") // Operate on board DAO members\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(0, user, role)) // Operate on realm DAO\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_1_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, user, role)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n}\n\n// Error:\n// user already exists\n"},{"name":"z_1_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_20_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a reply on frozen thread\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_20_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\nfunc main() {\n\t// Attempt to freeze already frozen reply\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_20_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// reply frozen\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.FreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// thread frozen\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// board frozen\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n}\n\n// Output:\n// false\n// true\n// false\n// true\n// false\n// true\n// false\n"},{"name":"z_20_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// unfrozen thread - should work\n\tr2 := boards2.CreateReply(bid, tid, rid, \"child 1\")\n\n\t// frozen thread - can't reply\n\tboards2.FreezeReply(bid, tid, rid)\n\tboards2.CreateReply(bid, tid, r2, \"child 2\")\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_21_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_21_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Set an initial message so it can be cleared\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n\tprintln(strings.HasPrefix(content, \"# Boards\"))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_21_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to set realm notice\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"Foo\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// false\n"},{"name":"z_22_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// realm is locked\n"},{"name":"z_22_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to lock the realm\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_22_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(true)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(true)\n}\n\n// Error:\n// realm and members are locked\n"},{"name":"z_22_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Lock the realm without locking realm members\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_23_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateRealmMembers(0, func(u boards2.User) bool {\n\t\tprintln(u.Address, string(u.Roles[0]))\n\t\treturn false\n\t})\n}\n\n// Output:\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_24_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid := boards2.CreateBoard(\"test123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleAdmin)\n\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateBoards(0, func(b boards2.ReadonlyBoard) bool {\n\t\tprintln(b.ID().String())\n\t\tprintln(b.Name())\n\n\t\tb.IterateMembers(0, b.MembersCount(), func(u boards2.User) bool {\n\t\t\tprintln(u.Address, string(u.Roles[0]))\n\t\t\treturn false\n\t\t})\n\t})\n}\n\n// Output:\n// 1\n// test123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj admin\n// 2\n// foo123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_2_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Test comment\"\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\trid := boards2.CreateReply(bid, tid, 0, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid == 2)\n\n\t// Render content must contain the reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateReply(404, 1, 0, \"comment\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_2_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, 404, 0, \"comment\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_2_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 404, \"comment\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_2_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Hide thread by flagging it so reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide thread by flagging it so reply of a reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"thread\", \"thread\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide reply by flagging it so sub reply can't be submitted\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_2_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_2_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"First comment\")\n}\n\nfunc main() {\n\trid2 := boards2.CreateReply(bid, tid, rid, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid2 == 3)\n\n\t// Render content must contain the sub-reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_k_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent comment\")\n\n\t// Flag parent post so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"Sub comment\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_l_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// cannot reply to a frozen thread\n\tboards2.CreateReply(bid, tid, 0, \"foobar\")\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_2_m_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, strings.Repeat(\"x\", boards2.MaxReplyLength+1))\n}\n\n// Error:\n// reply is too long, maximum allowed is 300 characters\n"},{"name":"z_2_n_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\u003e Markdown blockquote\")\n}\n\n// Error:\n// using Markdown headings, blockquotes or horizontal lines is not allowed in replies\n"},{"name":"z_3_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname    = \"foo123\"\n\tnewName = \"bar123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by the default board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_3_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, name)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_3_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RenameBoard(\"unexisting\", \"foo\")\n}\n\n// Error:\n// board does not exist with name: unexisting\n"},{"name":"z_3_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_3_f_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by another board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_g_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"short\")\n}\n\n// Error:\n// the minimum allowed board name length is 6 characters\n"},{"name":"z_3_i_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"barbaz\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_4_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleOwner\n\tbid     = boards2.BoardID(0) // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, member, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\towner2 = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin  = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, owner2, boards2.RoleOwner)\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, owner2, boards2.RoleAdmin)\n}\n\n// Error:\n// admins are not allowed to remove the Owner role\n"},{"name":"z_4_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\tboards2.InviteMember(bid, admin2, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin2, boards2.RoleOwner)\n}\n\n// Error:\n// admins are not allowed to promote members to Owner\n"},{"name":"z_4_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid     = boards2.BoardID(0)                                      // Operate on realm DAO members instead of individual boards\n\tnewRole = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole) // Owner can promote other members to Owner\n\n\t// Ensure that new role has been changed to owner\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin, boards2.Role(\"foo\"))\n}\n\n// Error:\n// invalid role: foo\n"},{"name":"z_4_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, \"invalid address\", boards2.RoleModerator)\n}\n\n// Error:\n// invalid member address\n"},{"name":"z_4_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, user, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.RemoveMember(bid, user)\n\n\t// Check that user is not a member\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n"},{"name":"z_5_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// member not found\n"},{"name":"z_6_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole   = boards2.RoleGuest\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, member, role)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, member, role))\n\tprintln(boards2.HasMemberRole(bid, member, \"invalid\"))\n\tprintln(boards2.IsMember(bid, member))\n}\n\n// Output:\n// true\n// false\n// true\n"},{"name":"z_6_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleGuest\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, user, role))\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n// false\n"},{"name":"z_7_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"test123\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tbid2, found := boards2.GetBoardIDFromName(name)\n\tprintln(found)\n\tprintln(bid2 == bid)\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_7_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid, found := boards2.GetBoardIDFromName(\"foobar\")\n\tprintln(found)\n\tprintln(bid == 0)\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_8_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\ttid := boards2.CreateThread(bid, title, body)\n\n\t// Ensure that returned ID is right\n\tprintln(tid == 1)\n\n\t// Thread should not be frozen by default\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// false\n// true\n// true\n"},{"name":"z_8_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateThread(404, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_8_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_8_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_8_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_9_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, title, body)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"},{"name":"z_9_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteThread(404, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_9_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, 404)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_9_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Call using a user that has not permission to delete threads\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_9_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to delete threads\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"}]},"deposit":""}],"fee":{"gas_wanted":"90000000","gas_fee":"900000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bgq2mHaqO+ClZqcBvMmMWga7izsxHfWWkLvVdUj/SREIux9mkLcHZopajDlzRU4k8U9+p/SzvdPV1ClD8QJjDQ=="}],"memo":""},"metadata":{"timestamp":"1743761702"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"RemoveMember","args":["0","g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zFD00e0aO8S4XCcGKK+hYFll9syWCwDLU552HISFFY136K4KdR7O3SYzcay0KJio6THBkoPzfjlp0pdrrSZaCw=="}],"memo":""},"metadata":{"timestamp":"1743761807"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["EmptyWithManyMembers"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"vNXG8vCPc5ta7xG0/BQCSnUVa38VwrZOtdy8pUPKITzPoiAuOf+ocKYSZ8eNNkh7IIeqjFYADPgOZeV4HvxhCw=="}],"memo":""},"metadata":{"timestamp":"1743761888"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ue4B6yp55w8jKpN2/TFsJrGhwsL0FQfrbFY59a0iYKLeVICAB5gIrsCf98/6Ct1/V6fU2vLJh0vpPekTtwc1Bw=="}],"memo":""},"metadata":{"timestamp":"1743761893"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1e5hud66rs7ye4zgeqmqvwfhurs2mnf408hdqcl","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"a6sqt1qst2TFlGCZoP5DLlOrC+145dUBL9Reb5duDYRGb8aWsRu1nlRurPbtCcig+kp7Nk1MyuMdUBL/lK7yCA=="}],"memo":""},"metadata":{"timestamp":"1743761898"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5","admin"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"AnS6SJIzlb3Z5lwMYoeR2KWH8TcOpbi/jH7Vsh9CIEn3KVSckMxDTaYk90fsCYHP2cPMbZfGQwENXQb+9a9bBg=="}],"memo":""},"metadata":{"timestamp":"1743761903"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g12chzmwxw8sezcxe9h2csp0tck76r4ptwdlyyqk","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lLmNQCvV7+oOKZucSXT90nYlTACWN6YEbkZKfccChBh/wUjeqLGS0YyszPxk7YOsj0K2/OGsrYOC0gukKjlMCw=="}],"memo":""},"metadata":{"timestamp":"1743761908"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1ym6zxff3xq7wfldcs3uyu7x7z40gstggcx8zdj","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zgzCQlf7PydhnCAGvd8Qx5PotGs1oRONk3nN95k2LIuFEEAVoHxGj+2PtMBQ1f91iTnBsJ1uKUuOJQ0OCsjTAA=="}],"memo":""},"metadata":{"timestamp":"1743761913"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["TheNumber42"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GJWNOcDkPKGY7PLPSuk2sMiLeBHeDfVKTSCR5ONQGp6pqI9iwCxj1H3cD+bfkCk1+p/UpfubXzU9Ya3q859gBw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["2","What's your take on it\\?","Seen in many places, unknown to many"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hA+wCreZUeme6OpRmNOJjo4Xwsz0he5X8mQ4g4MKVkeGqUwlIsG005FxDN/7RssNNFWH8EzGP4MGIozCwEA7AA=="}],"memo":""},"metadata":{"timestamp":"1743761923"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","What do you mean\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EIVelUPSStgGjqWLsj+NdD0fSHeZvm8Z7RnQvDQSpFuv7mHOGKV52jDZxWwH4lOHL2/e0vJKin2fWyXPF1ClCA=="}],"memo":""},"metadata":{"timestamp":"1743761928"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","よんじゅうに\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"rQ64TW3VyqAx0miELawdw5gR6g2lpNemxzXYq/kxToUNU8GYoXn4qWMO6otVdF+nsvQvkJfBBMHg9uIvDALSCw=="}],"memo":""},"metadata":{"timestamp":"1743761933"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","2","Cuarenta y dos\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y7zCrmgadsgAQCV6OiINH1LJmQ78gDYUTZ+ny0F1fNCL9nQPvbFTOwr7SX2kuaPe8iKbztZCe6N/1B//EEtpAw=="}],"memo":""},"metadata":{"timestamp":"1743761938"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ThreadsExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lH+1XZ2fVmGI2PXKfYUxKBFXKw3db+JjwAjECmsH4VXo+ppDtf79dEux0SdRltNdbx4zEW9O/3WENwu3hg5SBA=="}],"memo":""},"metadata":{"timestamp":"1743761943"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Seventh","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6NX0nRYSSn12bZ78/dmmYxWXM4IK9yQjLAomZn7edZ8Ri5BAtqZOSwvXbhZ0BFcUTgosLAgyrX30LteqkNnxBQ=="}],"memo":""},"metadata":{"timestamp":"1743761948"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Sixth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"sIPoU9jO89zc4y1GAYITh3PU9zJVGY3ugfSMsoBBxc93lOXDLAFUE+2AMQa/7Kwfyo1af4FXXFfygYCCICYSAg=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fifth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KdKslB6f6JkEB3boj5CZ1cIAOdAdF3bJ6cX6dsrT4XBK3u41XzmAK96gilAtVcVpCqNpnLul6wbbL+0exHd4AA=="}],"memo":""},"metadata":{"timestamp":"1743761958"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fourth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"D1fMGgWqqsxK7vF0ojPp36NpP6eU+1LsEUdbC2NL/xjhlsZfgU7Vu2XmXjFhFM9B2VGCwUBnEaMVufr3rW1HCQ=="}],"memo":""},"metadata":{"timestamp":"1743761963"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Third","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4uy78ABsfnWCUqmuzoU8ZUdJ7jpJrZa7J/cv/kvFT3peJhE2Rv7VrkTYcaZHKKjzWG14JmND4ZaaJnNr907Ag=="}],"memo":""},"metadata":{"timestamp":"1743761968"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Second","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"5dDdgrVSfFfD9kYaBD369pxn1g7l6jDOaNANwcuxGwhUaT9j5pcroAqHHTu5UJf4sekSNb/nSNEp37ucimaCCQ=="}],"memo":""},"metadata":{"timestamp":"1743761973"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","First with many Replies","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"OmSespthAIe99nCg3NNVqwdogdID85sViEarnls5JCXhygv/lzl79T4CFQIa42T13gOLMkPX9fm7OwT8mU1RAQ=="}],"memo":""},"metadata":{"timestamp":"1743761978"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZDniAUL1tJpPm4oBs4ExDExl8MJMedEzUBdezq600CaJEYvBznvd3vueZ5siRp7tHdaV0DgNmcXzZ+OxpqcQCg=="}],"memo":""},"metadata":{"timestamp":"1743761983"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","8","Sub First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F8ifXbTQbXb5RSL61RUb9S0tBzok3uo8RTDhh0501znHUYKYILNSitQg9Ak6XmwcV0UQcgO9zzLx316DBB7YBg=="}],"memo":""},"metadata":{"timestamp":"1743761988"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Second"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CkwjnV+bUGNb/AghoAxE8xc8/BZwAp5Qdhy4xkfZrtUpxGDRt1ji9DaM2ZzUQnDBQeXiev5RiZyA7I4gwva7Dw=="}],"memo":""},"metadata":{"timestamp":"1743761993"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Third"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3sNgEYAAHfXxWFQdYzafqv5vsFDEBMdCE3RRaKyQEQxpX92yNavn05wq7EtOeiIymOD1B7LWBUCDIGMxO27iBw=="}],"memo":""},"metadata":{"timestamp":"1743761998"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fourth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yVMsA1dVS5o2dpm1EoxH55Ybm8sBwbmeCFhyboRoWjp9qnZhLXLvzu73jo0nZa8xJialU0upoHcWrr76K5rPBw=="}],"memo":""},"metadata":{"timestamp":"1743762003"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fifth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UEHh1VeBqkL3lCultuOyGU0LDvVTlrhg6wTJqAn+5gF2QUKWZi3Gn4CBbkoY0byq1OCDXr6R/K+SP3aB8QObAw=="}],"memo":""},"metadata":{"timestamp":"1743762008"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Sixth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3kby94L/InKntqzU+T3NRDno58jFcx87O0/FldOxJDlcT56+WaKthft6n+Wp0Jl1lz8Xv3LmgwGWQ3Pc52+oBg=="}],"memo":""},"metadata":{"timestamp":"1743762013"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Seventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"L/zuxl0k3DoZFKNs/kGgaEh1ROr/YafHDEmXlJw9aD/jH2Mbm/PhvU3La/o0PchdGC0A42xuwZ+SeMQIyUVdCA=="}],"memo":""},"metadata":{"timestamp":"1743762018"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eigth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VpVi4ICdRdDP3sT2HJNj5Vl5gFKZxgy+58rqpnkR8l1QBLPZDjP+hklXzsmhDouMdI+ssFCTU4mD1/W7sGUQAw=="}],"memo":""},"metadata":{"timestamp":"1743762023"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Ninth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u/zQSKIjPHAPocj4hEnEw441VWRByccTtenD12X8cBnYxBDHNV87PR+JBWUjNXN7GLZfPcjK5igMD2l5IqhwDA=="}],"memo":""},"metadata":{"timestamp":"1743762028"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Tenth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tnUlmhe3JjOtRxnpCDbYcpaeF3rNa8N0F5EYwJU8ba8zDX9St1hiBp66tScfyYbTeLE2aTRmUa8E+zh730++BA=="}],"memo":""},"metadata":{"timestamp":"1743762033"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eleventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"q43M1mc9mbW7TJWgTyT1L37ePTd7N1hkAWbUUfMztPKCblhBrECCKrzMwiE5iL+afNgiWGZcCpFc5KwtwPSyCQ=="}],"memo":""},"metadata":{"timestamp":"1743762039"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ReadOnlyExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"STdbtDRKw327m8lDyp9W1Fnr2A3iC2uws1pBNHuL9xya2JE6IYbU0Fe12FThHOLWK80Yp+L43bgVNOSOamrWAg=="}],"memo":""},"metadata":{"timestamp":"1743762044"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["4","Example Thread","This thread shouldn't be writable"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaJ2B8/gC/qRQxVQVYF4TUIkqDZiwqa1sqfTP+eIV8Q7gkx1sTOSqcWqvg5mOWw6wBTH9LhUi9lSXVYAUw7eCA=="}],"memo":""},"metadata":{"timestamp":"1743762049"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"FreezeBoard","args":["4"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SmNrbgokoxiJTXtSIymwGMBphqmB1J06gs/jdVJ1XKUuRO3CMmaJ5ytxvmVvwBlAja4QqA1T7bcgto5T8tv/Cg=="}],"memo":""},"metadata":{"timestamp":"1743762054"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["RepostExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jPxomuyfqs6yS9mJ1zXaTs9FWXwgPHaVJcH6/ADQ67I3vPXMxoKqJstfrbxMrvuuqtUPxU+pTgv3Im2lBV+qCA=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateRepost","args":["2","1","Custom repost title","Custom repost body","5"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VLCyyn5BwJZr8c7LJIX/9fiycuO7cfuq8Ulq6uCa7ZTmaUvPe7Mb2K54gI+4hDxEC+TBNLCTAr4W0YDi7uuaCQ=="}],"memo":""},"metadata":{"timestamp":"1743762064"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HUsxXJsbLLE7eqalnFbxs6QLrCECri8DfkKxQ7I0jDcoAuqpdwFv0TO1Y0WqpYAp1otB2t+BUQoG9VXhmYk3Dw=="}],"memo":""},"metadata":{"timestamp":"1743762325"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XQlmGs92NlV8UrVFWCivs35isbsW6JNzJB0nmE3vvHZCqpozufS9D9wGALa3Hu0Q9Kpd3d5x2WZ+q2iTmnOxAA=="}],"memo":""},"metadata":{"timestamp":"1743762441"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ua3nwMeerrzI17poTLZrtcvFkUSI0DU94fhwdpAZ0sj3oX+Zdy58QCBr99lqnJK884I7Qv3lORzBynXG5jbwDQ=="}],"memo":""},"metadata":{"timestamp":"1743762466"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743762511"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762858"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1aykqe5ddemku5mwd3elmwtpj8jgss47xrqpag4","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"chG844+xbriyl9WGrlc6xkHm736dDMmfgMfPREBqaiPEII5TfCVIbQ8q6DSR7LSm2+Hja93gLN28dYpl/In2Dw=="}],"memo":""},"metadata":{"timestamp":"1743767985"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1dtuj65mgja87gh0c45pd3rt4cah0kkw9lzld4y","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HKCPLxCVbpHst0ip432MlUIpiFmurceZOAjNZOCjq3aXAfsNREbyej3mLe240/+w4d7OeGD4LFB/ninsfphACA=="}],"memo":""},"metadata":{"timestamp":"1743768151"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743769312"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["test-manfred"]}],"fee":{"gas_wanted":"50000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"4xO97j7lj2RX9s6xjyqRDNGa8qs6kEShqhOJIObF+nH9iKCbmHagUmAJgVbgdauLbAzMMLlx6e05HgwXESc3Cw=="}],"memo":""},"metadata":{"timestamp":"1743774399"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["6","testing testing","👋"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1ZtT0NfPPwkk8JYdIJD/IEwmoveEfqV53nerV1Jt4K4AKhIHKr//2rMglFermH9UI7JPWIhf8sADVOONCPvCA=="}],"memo":""},"metadata":{"timestamp":"1743774450"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"9104212","gas_fee":"4742446ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"o+0plDtw6ntbQncO7v5Y1GqAV5NE21j8bDyIcKkKMqGO5qYPrutx4yl5WPJAoGz5pg8Howi/Aq/wJzxWHPXjCw=="}],"memo":""},"metadata":{"timestamp":"1743775038"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743775997"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776002"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776017"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"UpdateStatus","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"abVD8zghTuhurQtvCizQ+m2Lh72r0t0AJHh2dt3e+kSQOqjFfZtJ0xO5eNlHm8Kj7nRvTjeVoqmzWdYE3b/sAg=="}],"memo":""},"metadata":{"timestamp":"1743776022"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743776083"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hello","path":"gno.land/r/test12/hello","files":[{"name":"package.gno","body":"package hello\n\nfunc Render(path string) string {\n\treturn \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/demo/eco","func":"Render","args":["Deployed through play.gno.land"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NXiO4V07kWqpEPpSYKqmTsQlZO06J6v5OUF72Mr79nhgleTapAVcCHDnsIx0TxnRZzMNbauF/eXro5zujLUKDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743788578"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hworld","path":"gno.land/r/g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5/hworld","files":[{"name":"package.gno","body":"package hworld\n\nfunc Render(path string) string {\n\treturn \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/sys/users","func":"ResolveName","args":["abc"]}],"fee":{"gas_wanted":"3428737","gas_fee":"7144ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F0m9qBwjIzAghFc0JygVxaAsdQhQqnpQQw/gaC740ZTHBJL4/TrpaqxPBTdmrtKNIoQsTsQXkC1LZ+fk9BKeDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743793364"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g14n0zsnsk054uxwvnwmmqyrq6e87ynk5vq98qqp","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Kf5rmwnMs/nfl+VXJtQqrhsUFZqTQqybk5ADrsI5O2Lt9DVf+QqRP9vswBSC/WpPkgGMPeFBgQaLHpOi5awWDQ=="}],"memo":""},"metadata":{"timestamp":"1743587748"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1dzzx5qwcmawqnhhd76ehkteas5v2dg42hqnd7g","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"pfIacFtVu0UK1MgJVmS1uGL6BRTXTkc9SQ7qHy+Zh1xZcEhs0CJv+ZTv/D7TuHrgoXBTNOi7qLKgo0K36uvBDA=="}],"memo":""},"metadata":{"timestamp":"1743587759"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587924"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587939"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743587980"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743588120"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743588221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591981"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591991"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZAHmHJr6/jLN+AjWJQsb+t0vv3lF+WAfpd8525qOiqmXO1DeZ/rV+bzzh7fkaAAmTi9F/5Z00T8EF7sku2YBDA=="}],"memo":""},"metadata":{"timestamp":"1743597359"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2231690ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lBXZ55L/zJcSu0Nz3CtVpRumcACjpEVubgsLPiCKApSeOjEnmuuVkxH2mnh1ZMWt1nDVkbT4Zk0FBO8ythcADQ=="}],"memo":""},"metadata":{"timestamp":"1743597379"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887428","gas_fee":"165039ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CfKWRWGdsPCxkfaq3HED6HeeaMrLAQl4JfoKLXBzORDoqSui9g0pwgOvbMLAJQh1WsURlVQUKCT9bBxJIKGxDg=="}],"memo":""},"metadata":{"timestamp":"1743597384"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"3059175","gas_fee":"6374ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"U/Lh/vqW/msAgD5fgvDz5Eq1UBCZXknYYLXoKUKT0er1CEFGSZjihcKI4TZK16Rt0vcFnL2kR85a6+HsO3TJDg=="}],"memo":""},"metadata":{"timestamp":"1743597409"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Z3rGTeiuwQxAO1383d2XyzJ3ny+R6lVsMCH3AfNnQfHodVZUZlD1UyLA6hk/LqmMgMGhwQNMeroewPj6tNwhAQ=="}],"memo":""},"metadata":{"timestamp":"1743606306"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"miFYsl850KdWfaYVeUCHFUBQHWw0FUfKp/gh/tCTiIOIBm2jg+ki3YtWZkjq2jUCoHeN+nHx1smTN8xuOU6XCw=="}],"memo":""},"metadata":{"timestamp":"1743606668"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"9hNkFMu/xsQqvduZoi/8CZDiTtl9CFrjecn8LbIg1aVMvstwEYqA9O7HKQ8blamgzV7Seyv8tzdu9fYGjU2GDA=="}],"memo":""},"metadata":{"timestamp":"1743607723"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NRLFNdnKicUZR6tFldf8s4dn3L2xnF+TrH/JoJbAteD2zrHtiLjHL4faTopSaABlpgVAOkVGUOMILwokq+lkDA=="}],"memo":""},"metadata":{"timestamp":"1743608020"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3bt2TuGnvIPEFRLQmvr9fTNpmw9vddoc7JciKsGoLiP2LEGkuvxB+2sS/3zz6pbvptI6VIC0j3F3TxZiG2dpDw=="}],"memo":""},"metadata":{"timestamp":"1743608226"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n","admin"]}],"fee":{"gas_wanted":"8066534","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h9m9JF3DGXSQEpWHgk633+sSZvuQhVXiyQqXxihNqnWwwdPIUcG9EhGYZRRulcUDjNx9IuzALdpEzFeneOmhCA=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743608291"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"8967781","gas_fee":"18683ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KDUHz1HMhnSVLUZj4hLoxE7FlKqopgGbZMTXpkHV8jjul6TDBgdrfq5AyNFX3fH2sKjVTYGiFtEP3/cuV+m9Cw=="}],"memo":""},"metadata":{"timestamp":"1743608301"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743610126"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"DeleteTodo","args":["0"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ypbOAcxpAUGaUQt6F6KB3OhqJN2cRoD3dF8bkqySqRsVfhrXQJ3O/B9P2ex0jeKkezVoeRIpw2aN+2dwUa2hDQ=="}],"memo":""},"metadata":{"timestamp":"1743611628"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g14gvmle0a5hln0ct7wv857gucr7lmeust35736r","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kePfJ+g+ai4gbewkzMdmETesCmNI4i5ecAxwYpC4S6roDM3odtc8gDYipZqX7r5p37NP5p57MkhcMgODCZhdBA=="}],"memo":""},"metadata":{"timestamp":"1743662226"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4xzI4KB87lg/4EAWdmOPjO/R7VMfE8qE3jHysIvQuOlVylig2lajrqO+Bds39v5UqglfUvVS+mpWQ1KWUIEDA=="}],"memo":""},"metadata":{"timestamp":"1743663236"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"5000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Mq9IBbwNUb1YPvhyQIQhuw/eoxE2a4ue17kTC9Io08f9+CxgmjeHFuxfvteS1xsGsTe8qVVQemJHt10w+GSjDA=="}],"memo":""},"metadata":{"timestamp":"1743663533"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"10000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"MukwMPbas5Oz+wAk+oIfksfQx8DykYMmhaYaOnMynhvtwxNBlYTo4sAAkz1cVPLHYTu5czK6iBDFekbaOjVYDQ=="}],"memo":""},"metadata":{"timestamp":"1743663709"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hZQyD4QXJWRDvfK1fwSMGbJqGAQ6QI6jtPCuOM8yXoguotR561mxeGB6mEztRI0XE0SVsuw3qpzs9Rda9KaACA=="}],"memo":""},"metadata":{"timestamp":"1743666971"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2233340ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"d6iaXDqBE5lH4dYLNIfcEyb9dpHEYoBD1vD7B5sQQJ8c9/7e/ujH30RV7QZTn843pIWTplZj2OQ+GoScxXPPAg=="}],"memo":""},"metadata":{"timestamp":"1743666986"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","send":"1000000ugnot","pkg_path":"gno.land/r/gnoland/users/v1","func":"Register","args":["keyboard_worrier"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"WZ+i8zhkmdovnOGvtVlX0eK04aS2h1730ztiMLbsw0pAHohEIq1jkYrf8CeIcJFTlGRApmQkvRSytq7bVa7RAQ=="}],"memo":""},"metadata":{"timestamp":"1743672162"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743674585"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743675500"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676274"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676415"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676425"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676440"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676450"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676465"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","send":"","pkg_path":"gno.land/r/demo/userbook","func":"SignUp","args":null}],"fee":{"gas_wanted":"3000000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"b6gylbXUNmIJc8+UTKOqtssB3dtRA+9q46TN/WGgpL9pSCAwqVjCVO3BsUCYN4wyi4SFchw0fiUbUbuqOL9wCQ=="}],"memo":""},"metadata":{"timestamp":"1743676600"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"RemoveMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n"]}],"fee":{"gas_wanted":"7891622","gas_fee":"16441ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kFvFubneBzNxFJJsqdcFot4DI76vFnUL61hImedWMOYPT4oNpTPvu35RTbjH/CIjQ2ZbG21nvKR1cq72TNGIAg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677621"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","admin"]}],"fee":{"gas_wanted":"8066714","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TAAONmyVenhy51nV9BGWz5k4HFfNuFr8r7bwnbaBrHkB7w0knuA3L+8qMhD1h7Kp8KeIKKUnE8QMZayYtJMvCg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677721"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887404","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Arj8N87k6sLPuCZEV/uB92axfgpJeojYTh0C6QsSgUHJOeP/v7Sdn25cY045uI+5IiKFqiWhyZBCglJqwGLbAQ=="}],"memo":""},"metadata":{"timestamp":"1743677742"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["hello !"]}],"fee":{"gas_wanted":"887311","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"/GZGejcRk3HCoQIHSbhiOKnS5Dpjycv0Ke9W4W6vbVlF79A6YoudY/KBavSKEUmNR0Y7lyGxlCa+etTe7UT5Dg=="}],"memo":""},"metadata":{"timestamp":"1743677757"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"k8yjgyUuV0ZGtPIzDRM6VHiQExeKiRwy93C0tBfYn3kVZHvpIesoCGGWGvWF0zfoUXDJtZxUpC5QKiazh+i3AQ=="}],"memo":""},"metadata":{"timestamp":"1743680159"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"ChangeMemberRole","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6Ofd6RIF+1UULOLk50dyYYUlkPK5IZ/4Mlp/qHzeIGZrXrxck0lJ/saC99ZP/3+ughHkahxyx6eHU6nZG9lfAg=="}],"memo":""},"metadata":{"timestamp":"1743680391"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1721880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"FT0UHoGLEjePQfFtU1tyQ9qe7FxvdzTar5j1Xl00ZPozmei/qvvLGl8YhYi0V8sSJVouI8borYvb3dpqIQC/Ag=="}],"memo":""},"metadata":{"timestamp":"1743682979"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1d2hvkqhqckhzpaum09c002fesdw89qrcg9zqws","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"eSFCEK9IO/P5jxlfnbp35xVVYo36+CiOFJz/JQABTf9r/+da5JOSdgUemoC7R1EvJE9HCeJ2XWmbu0j5K31yDw=="}],"memo":""},"metadata":{"timestamp":"1743683221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1lrsrj4auaffjk538w3x2c9gzyth2m0n39zcg6d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"V7WYKzC8VemKyowufMneyzt0CQ6PR2RtCEEMnG4Jwx9CNVCNP6e54vE00yweRc5P2LU0+m9ZMOFUbblPQsY+DA=="}],"memo":""},"metadata":{"timestamp":"1743704885"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateReply","args":["2","1","1","Hey hey hey"]}],"fee":{"gas_wanted":"60000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bY/5T4aU3MOrBezBKCFXUR2RgMmPxpHFwi/xI6ga1b2u3JRxeYQx1+bOZtqknyFa8Feenu3GclmRnfknOQDyBQ=="}],"memo":""},"metadata":{"timestamp":"1743711043"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateBoard","args":["aeddi"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UlcPNzTB9SRYFhru5eBzZkqx1z6pk/iuEkbLCBEyI4QQKT75/GIsoVmR3Q0OWv9BEqzn6iep89664ieAb17KCg=="}],"memo":""},"metadata":{"timestamp":"1743711163"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g16znvp6wxupkkds8mmmtxhvmdly08xpa4rqagp3","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"BfNTMw8/jbCjUAxbYJSqAx71LTglT2ZB7rErSOurWZwbtFbHT2pMkbyYJym6agX/S13Ms+8RYPySznleZZy2Cg=="}],"memo":""},"metadata":{"timestamp":"1743712058"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateThread","args":["3","This is a test","Hello World"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1xJIqIyGXcSfsRczg0T/hKdr+hED2UDE0oCA/7YyQcna9Y2LtGmivjxAqiR+/E3Qa876okANEwvPjafqiLTAg=="}],"memo":""},"metadata":{"timestamp":"1743712737"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1648310ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"E3EBw9aZXdSZwrwQN9i2bQjTGgpMeFRhJS9EjaEJENZdnjkmkWXiM/8jQi026/ELjf6nV7oC77ciysIt3+FyAg=="}],"memo":""},"metadata":{"timestamp":"1743715914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EUy4N/WGhGY7IyvxkWJSpvvMm5UKPWmtuZYPwSE8JUQJ5/H3n6b8Xyljv6d+4xfO02mpmsqg57L3LY6PEcFiCw=="}],"memo":""},"metadata":{"timestamp":"1743738197"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XC5tB4Ww+jD/lgfSzvcKBmYg8nP697HYElMuyCwuArt2lo1NczPDAAHwjny191b1xy/8Pz2uae+iI9xGPXrOBQ=="}],"memo":""},"metadata":{"timestamp":"1743738288"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"DeletePost","args":["1","2","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SEMazbhceoUeLcw20UvlJqjlsT+oSRAOqdiA0bIeCwIex6a47RH45NT4qB644ulQ6YiRv9kD7sOS3sf8OKiUCA=="}],"memo":""},"metadata":{"timestamp":"1743738333"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3xdY2zUEaSvL2+NoPTHTD3X2FZ1Ehg/xPBZRRJi2Ylm6LU/F+HmMG0YhLVkvR5lEea0en2+Kn8UhdIgdPjlkAA=="}],"memo":""},"metadata":{"timestamp":"1743738469"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GCtUiktIhSyqpETUMRR/0Ty6v80QbmeROULnTsW72XKvSQZF1enMC90gtSn0F3kidponqgEAnTkrWoBvjTJVBg=="}],"memo":""},"metadata":{"timestamp":"1743738680"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TH4yuyDvuq6andRzdObtjw6Dzpaw7zqjNyoCw1FC07ipn9ZVUWcFIcPLM1eRU44RQqFtWQ7LhlDymM5LiS/9Aw=="}],"memo":""},"metadata":{"timestamp":"1743739027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"9000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"x7EtVQUYGVRT3Uo09arsuKUCOFQPhvg5718Vg6o3A74KWzqlUdT07sAADvGOCJxV22MBwe8ZLIMlEHx++NdJCw=="}],"memo":""},"metadata":{"timestamp":"1743739047"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ABOlkSDcCQJVf7mjnItLyRQyJjbSYLRXagmMz8poqvkjX1oTi2NGpNH6zu7466kPlFHmESXvy6di9sNfLhKjAg=="}],"memo":""},"metadata":{"timestamp":"1743739590"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["2","2"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kYuW3zW5gf3ruKjUwHJirEXeQYRcwyp6DSm9Ev+un2MNqF98LUiq51jNEBMKTLSpa3tA14JycfVXGm9WWlc/DA=="}],"memo":""},"metadata":{"timestamp":"1743739625"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1p5pa2sp4elcja2u8wn36zv3plsyp8xrqgz0usf","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y3k24ayy98evfOxRipkejsxyO6e4KpGvp3g18WK/I5dpHl6S3+X1YBqS4nsYvlUgd2pS1jKXNKyal6nfZE3fCw=="}],"memo":""},"metadata":{"timestamp":"1743750714"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fh2rWd2kWcbkBtMD/lkvdQTyb+qJmm41PqTxvrGs1/DHXFzxUy/ObzI9yR3WTafkheAaT3Hk+QcWh7C8eZJJCg=="}],"memo":""},"metadata":{"timestamp":"1743750895"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["aeddi-testing"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fosRIYGMBTklap54MeOskYvZ0qhOYfv4NiUXCPQtsncG2mKLibB8uR0YgN6VNPb1B/QkbY0CYjkvSK8rjYpUCA=="}],"memo":""},"metadata":{"timestamp":"1743751141"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","to_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","amount":"1000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Qg0qeTKOZCtxt3SYcwws9gIgf9EdulRfhcCeYa1mcfCCpynY3Qof2tctuQJ0YwdA73ckJC+5tosyt8Se54xcDA=="}],"memo":""},"metadata":{"timestamp":"1743755182"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KEh1CNIKget+9RJs7jwY0v+su73iInpdjp3/Qxo9FmgxZdreA4z7IOSEvBDCAVlL7xzLgj8NBIckrhgBXg6CAQ=="}],"memo":""},"metadata":{"timestamp":"1743760782"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"","pkg_path":"gno.land/r/demo/wugnot","func":"Transfer","args":["g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","-1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPbLggW1eugeEhTDF3cphB7ILmOsQpaE59va4Kf7hSMP3MTANuiTBVMcTJitdDEFLgWFCKl4JzzLpI69WgLcBw=="}],"memo":""},"metadata":{"timestamp":"1743760847"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761662"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","package":{"name":"boards2","path":"gno.land/r/devx000/gnoland/boards2/v1rc2","files":[{"name":"board.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\ntype BoardID uint64\n\nfunc (id BoardID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id BoardID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\ntype Board struct {\n\tid        BoardID // only set for public boards.\n\tname      string\n\taliases   []string\n\tcreator   std.Address\n\tthreads   avl.Tree // Post.id -\u003e *Post\n\tpostsCtr  uint64   // increments Post.id\n\tcreatedAt time.Time\n\tdeleted   avl.Tree // TODO reserved for fast-delete.\n\tperms     Permissions\n\treadonly  bool\n}\n\nfunc newBoard(id BoardID, name string, creator std.Address, p Permissions) *Board {\n\treturn \u0026Board{\n\t\tid:        id,\n\t\tname:      name,\n\t\tcreator:   creator,\n\t\tthreads:   avl.Tree{},\n\t\tcreatedAt: time.Now(),\n\t\tdeleted:   avl.Tree{},\n\t\tperms:     p,\n\t}\n}\n\nfunc (board *Board) GetID() BoardID {\n\treturn board.id\n}\n\n// GetName returns the name of the board.\nfunc (board *Board) GetName() string {\n\treturn board.name\n}\n\n// GetURL returns the relative URL of the board.\nfunc (board *Board) GetURL() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + url.PathEscape(board.name)\n}\n\n// GetURL returns relative board path relative.\n//\n// Note: returned result is not escaped. Use GetURL to get URL-encoded path.\nfunc (board *Board) GetPath() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + board.name\n}\n\nfunc (board *Board) GetPermissions() Permissions {\n\treturn board.perms\n}\n\n// SetReadonly updates board's read-only status.\nfunc (board *Board) SetReadonly(readonly bool) {\n\tboard.readonly = readonly\n}\n\n// IsReadonly checks if the board is a read-only board.\nfunc (board *Board) IsReadonly() bool {\n\treturn board.readonly\n}\n\nfunc (board *Board) GetThread(threadID PostID) (_ *Post, found bool) {\n\tv, found := board.threads.Get(threadID.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (board *Board) AddThread(creator std.Address, title string, body string) *Post {\n\tpid := board.incGetPostID()\n\tthread := newPost(board, pid, creator, title, body, pid, 0, 0)\n\tboard.threads.Set(pid.Key(), thread)\n\treturn thread\n}\n\n// NOTE: this can be potentially very expensive for threads with many replies.\n// TODO: implement optional fast-delete where thread is simply moved.\nfunc (board *Board) DeleteThread(pid PostID) {\n\t_, removed := board.threads.Remove(pid.Key())\n\tif !removed {\n\t\tpanic(\"thread does not exist with ID \" + pid.String())\n\t}\n}\n\n// Render renders a board into Markdown.\nfunc (board *Board) Render(path, menu string) string {\n\tvar sb strings.Builder\n\n\tsb.WriteString(\"# \" + board.GetName() + \"  \\n\")\n\tsb.WriteString(\"Board created by \" + newUserLink(board.creator) + \" \")\n\tsb.WriteString(\"on \" + board.createdAt.Format(dateFormat))\n\tsb.WriteString(\", #\" + board.id.String())\n\n\tif board.IsReadonly() {\n\t\tsb.WriteString(\"  \\n_**Starting new threads and commenting is disabled**_\")\n\t}\n\n\t// XXX: Menu is rendered by the caller to deal with links and sub-menus\n\t// TODO: We should have the render logic separated from boards so avoid sending menu as argument\n\tif menu != \"\" {\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tsb.WriteString(menu)\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(\"\\n\\n---\\n\")\n\n\tif board.threads.Size() == 0 {\n\t\tsb.WriteString(\"### This board doesn't have any threads\\n\")\n\t\tif !board.IsReadonly() {\n\t\t\turl := board.GetPostFormURL()\n\t\t\tsb.WriteString(\"Do you want to [start a new conversation](\" + url + \") in this board ?\")\n\t\t}\n\t\treturn sb.String()\n\t}\n\n\tp, err := pager.New(path, board.threads.Size(), pager.WithPageSize(pageSizeThreads))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tthread := v.(*Post)\n\t\tif thread.isHidden {\n\t\t\treturn false\n\t\t}\n\n\t\tsb.WriteString(thread.RenderSummary())\n\t\tsb.WriteString(\"\\n\")\n\t\treturn false\n\t}\n\n\tsb.WriteString(\"Sort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tsb.WriteString(newLink(\"newest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tsb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tsb.WriteString(\"\\n---\\n\")\n\t\tsb.WriteString(pager.Picker(p))\n\t}\n\n\treturn sb.String()\n}\n\nfunc (board *Board) incGetPostID() PostID {\n\tboard.postsCtr++\n\treturn PostID(board.postsCtr)\n}\n\nfunc (board *Board) GetURLFromThreadID(threadID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String()\n}\n\nfunc (board *Board) GetURLFromReplyID(threadID, replyID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String() + \"/\" + replyID.String()\n}\n\nfunc (board *Board) GetRenameFormURL() string { // TODO: These type of functions shouldn't be part of Board type\n\treturn txlink.Call(\n\t\t\"RenameBoard\",\n\t\t\"name\", board.name,\n\t\t\"newName\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"FreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t)\n}\n\nfunc (board *Board) GetUnfreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"UnfreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threadID\", \"\",\n\t\t\"replyID\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFlaggingThresholdFormURL() string {\n\treturn txlink.Call(\n\t\t\"SetFlaggingThreshold\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threshold\", \"\",\n\t)\n}\n\nfunc (board *Board) GetInviteMemberFormURL() string {\n\treturn txlink.Call(\n\t\t\"InviteMember\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"user\", \"\",\n\t\t\"role\", \"\",\n\t)\n}\n\nfunc (board *Board) GetPostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateThread\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (board *Board) GetMembersURL() string {\n\treturn board.GetURL() + \"/members\"\n}\n\nfunc createDefaultBoardPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(\n\t\tRoleAdmin,\n\t\tPermissionBoardRename,\n\t\tPermissionBoardFlaggingUpdate,\n\t\tPermissionMemberInvite,\n\t\tPermissionMemberRemove,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadDelete,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionThreadFreeze,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyDelete,\n\t\tPermissionReplyFlag,\n\t\tPermissionReplyFreeze,\n\t\tPermissionRoleChange,\n\t)\n\tperms.AddRole(\n\t\tRoleModerator,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyFlag,\n\t)\n\tperms.AddRole(\n\t\tRoleGuest,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadRepost,\n\t\tPermissionReplyCreate,\n\t)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n"},{"name":"board_readonly.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"time\"\n)\n\n// ReadonlyBoard defines an interface for readonly boards.\ntype ReadonlyBoard interface {\n\t// ID returns the unique identifier of the board.\n\tID() BoardID\n\n\t// Name returns the name of the board.\n\tName() string\n\n\t// Aliases returns a list with previous names assigned to the board.\n\tAliases() []string\n\n\t// Creator returns board's creator address.\n\tCreator() std.Address\n\n\t// LastPostID returns the ID assigned to the last created thread.\n\tLastPostID() uint64\n\n\t// CreatedAt returns the time when board was created.\n\tCreatedAt() time.Time\n\n\t// IsReadonly returns true when board shouldn't allow the creation of threads and comments.\n\tIsReadonly() bool\n\n\t// MembersCount returns the number of invited board members.\n\tMembersCount() int\n\n\t// IterateMembers allows reading the list of invited board members.\n\tIterateMembers(offset, count int, fn UsersIterFn)\n}\n\ntype readonlyBoard struct {\n\tboard *Board\n}\n\nfunc (b readonlyBoard) ID() BoardID {\n\treturn b.board.id\n}\n\nfunc (b readonlyBoard) Name() string {\n\treturn b.board.name\n}\n\nfunc (b readonlyBoard) Aliases() []string {\n\taliases := make([]string, len(b.board.aliases))\n\tfor i, s := range b.board.aliases {\n\t\taliases[i] = s\n\t}\n\treturn aliases\n}\n\nfunc (b readonlyBoard) Creator() std.Address {\n\treturn b.board.creator\n}\n\nfunc (b readonlyBoard) LastPostID() uint64 {\n\treturn b.board.postsCtr\n}\n\nfunc (b readonlyBoard) CreatedAt() time.Time {\n\treturn b.board.createdAt\n}\n\nfunc (b readonlyBoard) IsReadonly() bool {\n\treturn b.board.readonly\n}\n\nfunc (b readonlyBoard) MembersCount() int {\n\treturn b.board.perms.UsersCount()\n}\n\nfunc (b readonlyBoard) IterateMembers(offset, count int, fn UsersIterFn) {\n\tb.board.perms.IterateUsers(offset, count, fn)\n}\n"},{"name":"board_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nfunc TestBoardID_String(t *testing.T) {\n\tinput := BoardID(32)\n\n\tuassert.Equal(t, \"32\", input.String())\n}\n\nfunc TestBoardID_Key(t *testing.T) {\n\tinput := BoardID(128)\n\twant := strings.Repeat(\"0\", 7) + \"128\"\n\tuassert.Equal(t, want, input.Key())\n}\n\nfunc TestBoard_GetID(t *testing.T) {\n\twant := int(92)\n\tb := new(Board)\n\tb.id = BoardID(want)\n\tgot := int(b.GetID())\n\n\tuassert.Equal(t, got, want)\n\tuassert.NotEqual(t, got, want*want)\n}\n\nfunc TestBoard_GetURL(t *testing.T) {\n\tpkgPath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\tname := \"foobar_test_get_url123\"\n\twant := pkgPath + \":\" + name\n\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, name, addr, perms)\n\tgot := board.GetURL()\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\t_, ok := b.GetThread(12345)\n\tuassert.False(t, ok)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\t_, ok = b.GetThread(post.GetPostID())\n\tuassert.True(t, ok)\n}\n\nfunc TestBoard_DeleteThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\tid := post.GetPostID()\n\n\tb.DeleteThread(id)\n\n\t_, ok := b.GetThread(id)\n\tuassert.False(t, ok)\n}\n\nvar boardUrlPrefix = strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\nfunc TestBoard_GetURLFromThreadID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10\"\n\n\tgot := b.GetURLFromThreadID(10)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetURLFromReplyID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10/20\"\n\n\tgot := b.GetURLFromReplyID(10, 20)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetPostFormURL(t *testing.T) {\n\tbid := BoardID(386)\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(bid, \"foo1234\", addr, perms)\n\texpect := txlink.Call(\"CreateThread\", \"boardID\", bid.String(), \"title\", \"\", \"body\", \"\")\n\n\tgot := b.GetPostFormURL()\n\tuassert.Equal(t, expect, got)\n}\n"},{"name":"boards.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\nvar (\n\tgPerms        Permissions\n\tgNotice       string\n\tgHelp         string\n\tgLastBoardID  BoardID\n\tgBoardsByID   avl.Tree // string(id) -\u003e *Board\n\tgBoardsByName avl.Tree // string(name) -\u003e *Board\n\tgLocked       struct {\n\t\trealm        bool\n\t\trealmMembers bool\n\t}\n)\n\nfunc init() {\n\t// TODO: Define and change the default realm owner (or owners)\n\towner := std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\n\t// Initialize default realm permissions\n\tgPerms = createDefaultPermissions(owner)\n\n\t// Import relevant initial state from previous version\n\tinitFromPrevVersion()\n}\n\n// incGetBoardID returns a new board ID.\nfunc incGetBoardID() BoardID {\n\tgLastBoardID++\n\treturn gLastBoardID\n}\n\n// getBoard returns a board for a specific ID.\nfunc getBoard(id BoardID) (_ *Board, found bool) {\n\tv, exists := gBoardsByID.Get(id.Key())\n\tif !exists {\n\t\treturn nil, false\n\t}\n\treturn v.(*Board), true\n}\n\n// mustGetBoardByName returns a board or panics when it's not found.\nfunc mustGetBoardByName(name string) *Board {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tpanic(\"board does not exist with name: \" + name)\n\t}\n\treturn v.(*Board)\n}\n\n// mustGetBoard returns a board or panics when it's not found.\nfunc mustGetBoard(id BoardID) *Board {\n\tboard, found := getBoard(id)\n\tif !found {\n\t\tpanic(\"board does not exist with ID: \" + id.String())\n\t}\n\treturn board\n}\n\n// mustGetThread returns a thread or panics when it's not found.\nfunc mustGetThread(board *Board, threadID PostID) *Post {\n\tthread, found := board.GetThread(threadID)\n\tif !found {\n\t\tpanic(\"thread does not exist with ID: \" + threadID.String())\n\t}\n\treturn thread\n}\n\n// mustGetReply returns a reply or panics when it's not found.\nfunc mustGetReply(thread *Post, replyID PostID) *Post {\n\treply, found := thread.GetReply(replyID)\n\tif !found {\n\t\tpanic(\"reply does not exist with ID: \" + replyID.String())\n\t}\n\treturn reply\n}\n\nfunc mustGetPermissions(bid BoardID) Permissions {\n\tif bid != 0 {\n\t\tboard := mustGetBoard(bid)\n\t\treturn board.perms\n\t}\n\treturn gPerms\n}\n"},{"name":"flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\n// DefaultFlaggingThreshold defines the default number of flags that hides flaggable items.\nconst DefaultFlaggingThreshold = 1\n\nvar gFlaggingThresholds avl.Tree // string(board ID) -\u003e int\n\ntype Flag struct {\n\tUser   std.Address\n\tReason string\n}\n\ntype Flaggable interface {\n\t// AddFlag adds a new flag to an item.\n\t//\n\t// Returns false if item was already flagged by user.\n\tAddFlag(flag Flag) bool\n\n\t// FlagsCount returns number of times item was flagged.\n\tFlagsCount() int\n}\n\n// flagItem adds a flag to a flaggable item (post, thread, etc).\n//\n// Returns whether flag count threshold is reached and item can be hidden.\n//\n// Panics if flag count threshold was already reached.\nfunc flagItem(item Flaggable, flag Flag, threshold int) bool {\n\tif item.FlagsCount() \u003e= threshold {\n\t\tpanic(\"item flag count threshold exceeded: \" + strconv.Itoa(threshold))\n\t}\n\n\tif !item.AddFlag(flag) {\n\t\tpanic(\"item has been already flagged by a current user\")\n\t}\n\n\treturn item.FlagsCount() == threshold\n}\n\nfunc getFlaggingThreshold(bid BoardID) int {\n\tif v, ok := gFlaggingThresholds.Get(bid.String()); ok {\n\t\treturn v.(int)\n\t}\n\treturn DefaultFlaggingThreshold\n}\n"},{"name":"format.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/r/sys/users\"\n)\n\nfunc padLeft(s string, length int) string {\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\" \", length-len(s)) + s\n}\n\nfunc padZero(u64 uint64, length int) string {\n\ts := strconv.Itoa(int(u64))\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\"0\", length-len(s)) + s\n}\n\nfunc indentBody(indent string, body string) string {\n\tvar (\n\t\tres   string\n\t\tlines = strings.Split(body, \"\\n\")\n\t)\n\tfor i, line := range lines {\n\t\tif i \u003e 0 {\n\t\t\tres += \"\\n\"\n\t\t}\n\t\tres += indent + line\n\t}\n\treturn res\n}\n\n// NOTE: length must be greater than 3.\nfunc summaryOf(text string, length int) string {\n\tlines := strings.SplitN(text, \"\\n\", 2)\n\tline := lines[0]\n\tif len(line) \u003e length {\n\t\tline = line[:(length-3)] + \"...\"\n\t} else if len(lines) \u003e 1 {\n\t\t// len(line) \u003c= 80\n\t\tline = line + \"...\"\n\t}\n\treturn line\n}\n\n// newLink returns a Markdown link.\nfunc newLink(label, uri string) string {\n\treturn \"[\" + label + \"](\" + uri + \")\"\n}\n\n// newButtonLink returns a Makdown link with label wrapped in brackets.\nfunc newButtonLink(label, uri string) string {\n\treturn `[\\[` + label + `\\]](` + uri + \")\"\n}\n\n// newUserLink returns a Markdown link for an account to the users\n// realm or the address as string when a user is not registered.\nfunc newUserLink(addr std.Address) string {\n\tuser := users.ResolveAddress(addr)\n\tif user != nil {\n\t\treturn user.RenderLink(\"\")\n\t}\n\treturn addr.String()\n}\n"},{"name":"migrations.gno","body":"package boards2\n\nimport (\n\tv1rc1 \"gno.land/r/devx000/gnoland/boards2/v1rc1\"\n)\n\nfunc initFromPrevVersion() {\n\timportRealmMembers()\n}\n\nfunc importRealmMembers() {\n\tv1rc1.IterateRealmMembers(0, func(member v1rc1.User) bool {\n\t\t// XXX: This wouldn't be required if a boards2 package is created\n\t\troles := make([]Role, len(member.Roles))\n\t\tfor i, r := range member.Roles {\n\t\t\troles[i] = Role(r)\n\t\t}\n\n\t\tgPerms.AddUser(member.Address, roles...)\n\t\treturn false\n\t})\n}\n"},{"name":"permissions.gno","body":"package boards2\n\nimport \"std\"\n\nconst (\n\tPermissionRealmHelp           Permission = \"realm:help\"\n\tPermissionRealmLock                      = \"realm:lock\"\n\tPermissionRealmNotice                    = \"realm:notice\"\n\tPermissionBoardCreate                    = \"board:create\"\n\tPermissionBoardFlaggingUpdate            = \"board:flagging-update\"\n\tPermissionBoardFreeze                    = \"board:freeze\"\n\tPermissionBoardRename                    = \"board:rename\"\n\tPermissionThreadCreate                   = \"thread:create\"\n\tPermissionThreadDelete                   = \"thread:delete\"\n\tPermissionThreadEdit                     = \"thread:edit\"\n\tPermissionThreadFlag                     = \"thread:flag\"\n\tPermissionThreadFreeze                   = \"thread:freeze\"\n\tPermissionThreadRepost                   = \"thread:repost\"\n\tPermissionReplyCreate                    = \"reply:create\"\n\tPermissionReplyDelete                    = \"reply:delete\"\n\tPermissionReplyFlag                      = \"reply:flag\"\n\tPermissionReplyFreeze                    = \"reply:freeze\"\n\tPermissionMemberInvite                   = \"member:invite\"\n\tPermissionMemberRemove                   = \"member:remove\"\n\tPermissionRoleChange                     = \"role:change\"\n\tPermissionPermissionsUpdate              = \"permissions:update\"\n)\n\nconst (\n\tRoleGuest     Role = \"\"\n\tRoleOwner          = \"owner\"\n\tRoleAdmin          = \"admin\"\n\tRoleModerator      = \"moderator\"\n)\n\ntype (\n\t// Permission defines the type for permissions.\n\tPermission string\n\n\t// Role defines the type for user roles.\n\tRole string\n\n\t// Args is a list of generic arguments.\n\tArgs []interface{}\n\n\t// User contains user info.\n\tUser struct {\n\t\tAddress std.Address\n\t\tRoles   []Role\n\t}\n\n\t// UsersIterFn defines a function type to iterate users.\n\tUsersIterFn func(User) bool\n\n\t// Permissions define an interface to for permissioned execution.\n\tPermissions interface {\n\t\t// HasRole checks if a user has a specific role assigned.\n\t\tHasRole(std.Address, Role) bool\n\n\t\t// HasPermission checks if a user has a specific permission.\n\t\tHasPermission(std.Address, Permission) bool\n\n\t\t// WithPermission calls a callback when a user has a specific permission.\n\t\t// It panics on error.\n\t\tWithPermission(std.Address, Permission, Args, func(Args))\n\n\t\t// AddUser adds a new user to the permissioner.\n\t\tAddUser(std.Address, ...Role) error\n\n\t\t// SetUserRoles sets the roles of a user.\n\t\tSetUserRoles(std.Address, ...Role) error\n\n\t\t// RemoveUser removes a user from the permissioner.\n\t\tRemoveUser(std.Address) (removed bool)\n\n\t\t// HasUser checks if a user exists.\n\t\tHasUser(std.Address) bool\n\n\t\t// UsersCount returns the total number of users the permissioner contains.\n\t\tUsersCount() int\n\n\t\t// IterateUsers iterates permissions' users.\n\t\tIterateUsers(start, count int, fn UsersIterFn) bool\n\t}\n)\n"},{"name":"permissions_default.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\t\"gno.land/r/sys/users\"\n)\n\n// DefaultPermissions manages users, roles and permissions.\ntype DefaultPermissions struct {\n\tsuperRole Role\n\tdao       *commondao.CommonDAO\n\tusers     *avl.Tree // string(std.Address) -\u003e []Role\n\troles     *avl.Tree // string(role) -\u003e []Permission\n}\n\n// NewDefaultPermissions creates a new permissions type.\n// This type is a default implementation to handle users, roles and permissions.\nfunc NewDefaultPermissions(dao *commondao.CommonDAO) *DefaultPermissions {\n\tif dao == nil {\n\t\tpanic(\"default permissions require a DAO\")\n\t}\n\n\tdp := \u0026DefaultPermissions{\n\t\tdao:   dao,\n\t\troles: avl.NewTree(),\n\t\tusers: avl.NewTree(),\n\t}\n\n\t// Make sure that DAO users are indexed when DAO has members\n\tdao.Members().IterateByOffset(0, dao.Members().Size(), func(m std.Address) bool {\n\t\tdp.users.Set(m.String(), []Role(nil))\n\t\treturn false\n\t})\n\n\treturn dp\n}\n\n// SetSuperRole assigns a super role.\n// A super role is one that have all permissions.\n// These type of role doesn't need to be mapped to any permission.\nfunc (dp *DefaultPermissions) SetSuperRole(r Role) {\n\tdp.superRole = r\n}\n\n// AddRole add a role with one or more assigned permissions.\nfunc (dp *DefaultPermissions) AddRole(r Role, p Permission, extra ...Permission) {\n\tdp.roles.Set(string(r), append([]Permission{p}, extra...))\n}\n\n// RoleExists checks if a role exists.\nfunc (dp DefaultPermissions) RoleExists(r Role) bool {\n\tif dp.superRole != \"\" \u0026\u0026 r == dp.superRole {\n\t\treturn true\n\t}\n\n\treturn dp.roles.Iterate(\"\", \"\", func(name string, _ interface{}) bool {\n\t\treturn Role(name) == r\n\t})\n}\n\n// GetUserRoles returns the list of roles assigned to a user.\nfunc (dp DefaultPermissions) GetUserRoles(user std.Address) []Role {\n\tv, found := dp.users.Get(user.String())\n\tif !found {\n\t\treturn nil\n\t}\n\treturn v.([]Role)\n}\n\n// HasRole checks if a user has a specific role assigned.\nfunc (dp DefaultPermissions) HasRole(user std.Address, r Role) bool {\n\tfor _, role := range dp.GetUserRoles(user) {\n\t\tif role == r {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n// HasPermission checks if a user has a specific permission.\nfunc (dp DefaultPermissions) HasPermission(user std.Address, perm Permission) bool {\n\tfor _, r := range dp.GetUserRoles(user) {\n\t\tif dp.superRole == r {\n\t\t\treturn true\n\t\t}\n\n\t\tv, found := dp.roles.Get(string(r))\n\t\tif !found {\n\t\t\tcontinue\n\t\t}\n\n\t\tfor _, p := range v.([]Permission) {\n\t\t\tif p == perm {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\treturn false\n}\n\n// AddUser adds a new user to permissions.\nfunc (dp *DefaultPermissions) AddUser(user std.Address, roles ...Role) error {\n\tif dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user already exists\")\n\t}\n\n\tdp.dao.Members().Add(user)\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// SetUserRoles sets the roles of a user.\nfunc (dp *DefaultPermissions) SetUserRoles(user std.Address, roles ...Role) error {\n\tif !dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user not found\")\n\t}\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// RemoveUser removes a user from permissions.\nfunc (dp *DefaultPermissions) RemoveUser(user std.Address) bool {\n\t_, removed := dp.users.Remove(user.String())\n\tdp.dao.Members().Remove(user)\n\treturn removed\n}\n\n// HasUser checks if a user exists.\nfunc (dp DefaultPermissions) HasUser(user std.Address) bool {\n\treturn dp.users.Has(user.String())\n}\n\n// UsersCount returns the total number of users the permissioner contains.\nfunc (dp DefaultPermissions) UsersCount() int {\n\treturn dp.users.Size()\n}\n\n// IterateUsers iterates permissions' users.\nfunc (dp DefaultPermissions) IterateUsers(start, count int, fn UsersIterFn) bool {\n\treturn dp.users.IterateByOffset(start, count, func(k string, v interface{}) bool {\n\t\treturn fn(User{\n\t\t\tAddress: std.Address(k),\n\t\t\tRoles:   v.([]Role),\n\t\t})\n\t})\n}\n\n// WithPermission calls a callback when a user has a specific permission.\n// It panics on error or when a handler panics.\n// Callbacks are by default called when there is no handle registered for the permission.\nfunc (dp *DefaultPermissions) WithPermission(user std.Address, perm Permission, args Args, cb func(Args)) {\n\tif !dp.HasPermission(user, perm) || !dp.dao.Members().Has(user) {\n\t\tpanic(\"unauthorized\")\n\t}\n\n\tswitch perm {\n\tcase PermissionBoardCreate:\n\t\tdp.handleBoardCreate(args, cb)\n\tcase PermissionBoardRename:\n\t\tdp.handleBoardRename(args, cb)\n\tcase PermissionMemberInvite:\n\t\tdp.handleMemberInvite(args, cb)\n\tcase PermissionRoleChange:\n\t\tdp.handleRoleChange(args, cb)\n\tdefault:\n\t\tcb(args)\n\t}\n}\n\nfunc (dp *DefaultPermissions) setUserRoles(user std.Address, roles ...Role) error {\n\tfor _, r := range roles {\n\t\tif !dp.RoleExists(r) {\n\t\t\treturn errors.New(\"invalid role: \" + string(r))\n\t\t}\n\t}\n\n\tdp.users.Set(user.String(), append([]Role(nil), roles...))\n\treturn nil\n}\n\nfunc (DefaultPermissions) handleBoardCreate(args Args, cb func(Args)) {\n\tname, ok := args[0].(string)\n\tif !ok {\n\t\tpanic(\"expected board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(name)\n\tassertBoardNameBelongsToCaller(name)\n\n\tcb(args)\n}\n\nfunc (DefaultPermissions) handleBoardRename(args Args, cb func(Args)) {\n\tnewName, ok := args[2].(string)\n\tif !ok {\n\t\tpanic(\"expected new board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(newName)\n\tassertBoardNameBelongsToCaller(newName)\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleMemberInvite(args Args, cb func(Args)) {\n\t// Make sure that only owners invite other owners\n\trole, ok := args[1].(Role)\n\tif !ok {\n\t\tpanic(\"expected a valid new member role\")\n\t}\n\n\tif role == RoleOwner {\n\t\tif !dp.HasRole(std.PreviousRealm().Address(), RoleOwner) {\n\t\t\tpanic(\"only owners are allowed to invite other owners\")\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleRoleChange(args Args, cb func(Args)) {\n\t// Owners and Admins can change roles.\n\t// Admins should not be able to assign or remove the Owner role from members.\n\tif dp.HasRole(std.PreviousRealm().Address(), RoleAdmin) {\n\t\trole, ok := args[2].(Role)\n\t\tif !ok {\n\t\t\tpanic(\"expected a valid member role\")\n\t\t}\n\n\t\tif role == RoleOwner {\n\t\t\tpanic(\"admins are not allowed to promote members to Owner\")\n\t\t} else {\n\t\t\tmember, ok := args[1].(std.Address)\n\t\t\tif !ok {\n\t\t\t\tpanic(\"expected a valid member address\")\n\t\t\t}\n\n\t\t\tif dp.HasRole(member, RoleOwner) {\n\t\t\t\tpanic(\"admins are not allowed to remove the Owner role\")\n\t\t\t}\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc createDefaultPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(RoleAdmin, PermissionBoardCreate)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n\nfunc assertBoardNameIsNotAddress(s string) {\n\tif std.Address(s).IsValid() {\n\t\tpanic(\"addresses are not allowed as board name\")\n\t}\n}\n\nfunc assertBoardNameBelongsToCaller(name string) {\n\t// When the board name is the name of a registered user\n\t// check that caller is the owner of the name.\n\tuser, _ := users.ResolveName(name)\n\tif user != nil \u0026\u0026 user.Addr() != std.PreviousRealm().Address() {\n\t\tpanic(\"board name is a user name registered to a different user\")\n\t}\n}\n"},{"name":"permissions_default_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/urequire\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n)\n\nvar _ Permissions = (*DefaultPermissions)(nil)\n\nfunc TestDefaultPermissionsWithPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\targs       Args\n\t\tsetup      func() *DefaultPermissions\n\t\terr        string\n\t\tcalled     bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with arguments\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\targs:       Args{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t\t{\n\t\t\tname:       \"is not a DAO member\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\tcalled bool\n\t\t\t\targs   Args\n\t\t\t)\n\n\t\t\tperms := tc.setup()\n\t\t\tcallback := func(a Args) {\n\t\t\t\targs = a\n\t\t\t\tcalled = true\n\t\t\t}\n\n\t\t\ttestCaseFn := func() {\n\t\t\t\tperms.WithPermission(tc.user, tc.permission, tc.args, callback)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.PanicsWithMessage(t, tc.err, testCaseFn, \"panic\")\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NotPanics(t, testCaseFn, \"no panic\")\n\t\t\t}\n\n\t\t\turequire.Equal(t, tc.called, called, \"callback called\")\n\t\t\turequire.Equal(t, len(tc.args), len(args), \"args count\")\n\t\t\tfor i, a := range args {\n\t\t\t\tuassert.Equal(t, tc.args[i].(string), a.(string))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsGetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []string\n\t\tsetup func() *DefaultPermissions\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\", \"foo\", \"bar\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"not a user\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\", \"admin\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\troles := perms.GetUserRoles(tc.user)\n\n\t\t\turequire.Equal(t, len(tc.roles), len(roles), \"user role count\")\n\t\t\tfor i, r := range roles {\n\t\t\t\tuassert.Equal(t, tc.roles[i], string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasRole(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\trole  Role\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"admin\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"ok with multiple roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"foo\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"has no role\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasRole(tc.user, tc.role)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\tsetup      func() *DefaultPermissions\n\t\twant       bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple users\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple roles\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddRole(\"baz\", \"other\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\", \"baz\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasPermission(tc.user, tc.permission)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsAddUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"a\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"duplicated user\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"foo\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: foo\",\n\t\t},\n\t\t{\n\t\t\tname: \"already a DAO member\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(\n\t\t\t\t\tcommondao.New(commondao.WithMember(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")),\n\t\t\t\t)\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.AddUser(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.Error(t, err, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsSetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"c\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"remove roles\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"b\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"x\", \"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: x\",\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"user not found\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.SetUserRoles(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.True(t, err != nil, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsRemoveUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.RemoveUser(tc.user)\n\t\t\tuassert.Equal(t, tc.want, got)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsIterateUsers(t *testing.T) {\n\tusers := []User{\n\t\t{\n\t\t\tAddress: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tRoles:   []Role{\"foo\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\",\n\t\t\tRoles:   []Role{\"foo\", \"bar\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\",\n\t\t\tRoles:   []Role{\"bar\"},\n\t\t},\n\t}\n\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.AddRole(\"foo\", \"perm1\")\n\tperms.AddRole(\"bar\", \"perm2\")\n\tfor _, u := range users {\n\t\tperms.AddUser(u.Address, u.Roles...)\n\t}\n\n\tcases := []struct {\n\t\tname               string\n\t\tstart, count, want int\n\t}{\n\t\t{\n\t\t\tname:  \"exceed users count\",\n\t\t\tcount: 50,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"exact users count\",\n\t\t\tcount: 3,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"two users\",\n\t\t\tstart: 1,\n\t\t\tcount: 2,\n\t\t\twant:  2,\n\t\t},\n\t\t{\n\t\t\tname:  \"one user\",\n\t\t\tstart: 1,\n\t\t\tcount: 1,\n\t\t\twant:  1,\n\t\t},\n\t\t{\n\t\t\tname:  \"no iteration\",\n\t\t\tstart: 50,\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar i int\n\t\t\tperms.IterateUsers(0, len(users), func(u User) bool {\n\t\t\t\turequire.True(t, i \u003c len(users), \"expect iterator to respect number of users\")\n\t\t\t\tuassert.Equal(t, users[i].Address, u.Address)\n\n\t\t\t\turequire.Equal(t, len(users[i].Roles), len(u.Roles), \"expect number of roles to match\")\n\t\t\t\tfor j, r := range u.Roles {\n\t\t\t\t\tuassert.Equal(t, string(users[i].Roles[j]), string(u.Roles[j]))\n\t\t\t\t}\n\n\t\t\t\ti++\n\t\t\t})\n\n\t\t\tuassert.Equal(t, i, len(users), \"expect iterator to iterate all users\")\n\t\t})\n\t}\n}\n"},{"name":"post.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst dateFormat = \"2006-01-02 3:04pm MST\"\n\ntype PostID uint64\n\nfunc (id PostID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id PostID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\n// A Post is a \"thread\" or a \"reply\" depending on context.\n// A thread is a Post of a Board that holds other replies.\ntype Post struct {\n\tboard         *Board\n\tid            PostID\n\tcreator       std.Address\n\ttitle         string // optional\n\tbody          string\n\tisHidden      bool\n\tisReadonly    bool\n\treplies       avl.Tree // Post.id -\u003e *Post\n\trepliesAll    avl.Tree // Post.id -\u003e *Post (all replies, for top-level posts)\n\treposts       avl.Tree // Board.id -\u003e Post.id\n\tflags         []Flag\n\tthreadID      PostID  // original Post.id\n\tparentID      PostID  // parent Post.id (if reply or repost)\n\trepostBoardID BoardID // original Board.id (if repost)\n\trepostsCount  uint64\n\tcreatedAt     time.Time\n\tupdatedAt     time.Time\n}\n\nfunc newPost(board *Board, id PostID, creator std.Address, title, body string, threadID, parentID PostID, repostBoardID BoardID) *Post {\n\treturn \u0026Post{\n\t\tboard:         board,\n\t\tid:            id,\n\t\tcreator:       creator,\n\t\ttitle:         title,\n\t\tbody:          body,\n\t\treplies:       avl.Tree{},\n\t\trepliesAll:    avl.Tree{},\n\t\treposts:       avl.Tree{},\n\t\tthreadID:      threadID,\n\t\tparentID:      parentID,\n\t\trepostBoardID: repostBoardID,\n\t\tcreatedAt:     time.Now(),\n\t}\n}\n\nfunc (post *Post) IsRepost() bool {\n\treturn post.repostBoardID != 0\n}\n\nfunc (post *Post) IsThread() bool {\n\t// repost threads also have parent ID\n\treturn post.parentID == 0 || post.IsRepost()\n}\n\nfunc (post *Post) GetBoard() *Board {\n\treturn post.board\n}\n\nfunc (post *Post) GetPostID() PostID {\n\treturn post.id\n}\n\nfunc (post *Post) GetParentID() PostID {\n\treturn post.parentID\n}\n\nfunc (post *Post) GetRepostBoardID() BoardID {\n\treturn post.repostBoardID\n}\n\nfunc (post *Post) GetCreator() std.Address {\n\treturn post.creator\n}\n\nfunc (post *Post) GetTitle() string {\n\treturn post.title\n}\n\nfunc (post *Post) GetBody() string {\n\treturn post.body\n}\n\nfunc (post *Post) GetCreatedAt() time.Time {\n\treturn post.createdAt\n}\n\nfunc (post *Post) GetUpdatedAt() time.Time {\n\treturn post.updatedAt\n}\n\nfunc (post *Post) AddFlag(flag Flag) bool {\n\t// TODO: sort flags for fast search in case of big thresholds\n\tfor _, v := range post.flags {\n\t\tif v.User == flag.User {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tpost.flags = append(post.flags, flag)\n\treturn true\n}\n\nfunc (post *Post) FlagsCount() int {\n\treturn len(post.flags)\n}\n\nfunc (post *Post) SetVisible(isVisible bool) {\n\tpost.isHidden = !isVisible\n}\n\nfunc (post *Post) IsHidden() bool {\n\treturn post.isHidden\n}\n\nfunc (post *Post) SetReadonly(isReadonly bool) {\n\tpost.isReadonly = isReadonly\n}\n\nfunc (post *Post) IsReadonly() bool {\n\treturn post.isReadonly\n}\n\nfunc (post *Post) AddReply(creator std.Address, body string) *Post {\n\tboard := post.board\n\tpid := board.incGetPostID()\n\tpKey := pid.Key()\n\treply := newPost(board, pid, creator, \"\", body, post.threadID, post.id, 0)\n\t// TODO: Figure out how to remove this redundancy of data \"replies==repliesAll\" in threads\n\tpost.replies.Set(pKey, reply)\n\tif post.threadID == post.id {\n\t\tpost.repliesAll.Set(pKey, reply)\n\t} else {\n\t\tthread, _ := board.GetThread(post.threadID)\n\t\tthread.repliesAll.Set(pKey, reply)\n\t}\n\treturn reply\n}\n\nfunc (post *Post) Update(title string, body string) {\n\tpost.title = title\n\tpost.body = body\n\tpost.updatedAt = time.Now()\n}\n\nfunc (post *Post) HasReplies() bool {\n\treturn post.replies.Size() \u003e 0\n}\n\nfunc (thread *Post) GetReply(pid PostID) (_ *Post, found bool) {\n\tv, found := thread.repliesAll.Get(pid.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (post *Post) AddRepostTo(creator std.Address, repost *Post, dst *Board) {\n\tif !post.IsThread() {\n\t\tpanic(\"cannot repost non-thread post\")\n\t}\n\n\tpost.repostsCount++\n\tdst.threads.Set(repost.id.Key(), repost)\n\tpost.reposts.Set(dst.id.Key(), repost.id)\n}\n\nfunc (post *Post) DeleteReply(replyID PostID) error {\n\tif !post.IsThread() {\n\t\t// TODO: Allow removing replies from parent replies too\n\t\tpanic(\"cannot delete reply from a non-thread post\")\n\t}\n\n\tif post.id == replyID {\n\t\treturn errors.New(\"expected an ID of an inner reply\")\n\t}\n\n\tkey := replyID.Key()\n\tv, removed := post.repliesAll.Remove(key)\n\tif !removed {\n\t\treturn errors.New(\"reply not found in thread\")\n\t}\n\n\t// TODO: Shouldn't reply be hidden instead of deleted? Maybe replace reply by a deleted message.\n\treply := v.(*Post)\n\tif reply.parentID != post.id {\n\t\tparent, _ := post.GetReply(reply.parentID)\n\t\tparent.replies.Remove(key)\n\t} else {\n\t\tpost.replies.Remove(key)\n\t}\n\treturn nil\n}\n\nfunc (post *Post) GetSummary() string {\n\treturn summaryOf(post.body, 80)\n}\n\nfunc (post *Post) GetURL() string {\n\tif post.IsThread() {\n\t\treturn post.board.GetURLFromThreadID(post.id)\n\t}\n\treturn post.board.GetURLFromReplyID(post.threadID, post.id)\n}\n\nfunc (post *Post) GetReplyFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"CreateReply\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"replyID\", \"0\",\n\t\t\t\"body\", \"\",\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"CreateReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (post *Post) GetRepostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateRepost\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t\t\"destinationBoardID\", \"\",\n\t)\n}\n\nfunc (post *Post) GetDeleteFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"DeleteThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"DeleteReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t)\n}\n\nfunc (post *Post) GetEditFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"EditThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"title\", post.GetTitle(),\n\t\t\t\"body\", post.GetBody(),\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"EditReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", post.GetBody(),\n\t)\n}\n\nfunc (post *Post) GetFlagFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"FlagThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"reason\", \"\",\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"FlagReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"reason\", \"\",\n\t)\n}\n\nfunc (post *Post) RenderSummary() string {\n\tvar (\n\t\tb       strings.Builder\n\t\tpostURL = post.GetURL()\n\t\ttitle   = post.title\n\t)\n\n\tb.WriteString(\"**≡ \" + newLink(summaryOf(title, 80), postURL) + \"**  \\n\")\n\tb.WriteString(\"Created by \" + newUserLink(post.creator) + \" on \" + post.createdAt.Format(dateFormat))\n\tb.WriteString(\"  \\n**\")\n\tb.WriteString(strconv.Itoa(post.repliesAll.Size()) + \" replies • \")\n\tb.WriteString(strconv.Itoa(post.reposts.Size()) + \" reposts**\\n\")\n\treturn b.String()\n}\n\nfunc (post *Post) renderSourcePost(indent string) (string, *Post) {\n\tif !post.IsRepost() {\n\t\treturn \"\", nil\n\t}\n\n\tindent += \"\u003e \"\n\n\t// TODO: figure out a way to decouple posts from a global storage.\n\tboard, ok := getBoard(post.repostBoardID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source board has been deleted*\\n\\n\"), nil\n\t}\n\n\tsrcPost, ok := board.GetThread(post.parentID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source post has been deleted*\\n\\n\"), nil\n\t}\n\n\tif srcPost.isHidden {\n\t\treturn indentBody(indent, \"*⚠ Source post has been flagged as inappropriate*\\n\\n\"), nil\n\t}\n\n\treturn indentBody(indent, srcPost.GetSummary()) + \"\\n\\n\", srcPost\n}\n\n// renderPostContent renders post text content (including repost body).\n// Function will dump a predefined message instead of a body if post is hidden.\nfunc (post *Post) renderPostContent(sb *strings.Builder, indent string, levels int) {\n\tif post.isHidden {\n\t\t// Flagged comment should be hidden, but replies still visible (see: #3480)\n\t\t// Flagged threads will be hidden by render function caller.\n\t\tsb.WriteString(indentBody(indent, \"_⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n\t\tsb.WriteString(\"\\n\")\n\t\treturn\n\t}\n\n\tsrcContent, srcPost := post.renderSourcePost(indent)\n\tif post.IsRepost() \u0026\u0026 srcPost != nil {\n\t\tsb.WriteString(\"  \\nThis thread is a repost of [another thread](\" + srcPost.GetURL() + \"): \\n\")\n\t}\n\n\tsb.WriteString(srcContent)\n\n\tif post.IsRepost() \u0026\u0026 srcPost == nil \u0026\u0026 len(post.body) \u003e 0 {\n\t\t// Add a newline to separate source deleted message from repost body content\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(indentBody(indent, post.body))\n\tsb.WriteString(\"\\n\")\n\n\tif post.IsThread() {\n\t\t// Split content and controls for threads.\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\t// Buttons \u0026 counters\n\tsb.WriteString(indent)\n\tif !post.IsThread() {\n\t\tsb.WriteString(\"  \\n\")\n\t\tsb.WriteString(indent)\n\t}\n\n\tsb.WriteString(\"Created by \")\n\tsb.WriteString(newUserLink(post.creator))\n\tsb.WriteString(\" on \")\n\tsb.WriteString(post.createdAt.Format(dateFormat))\n\n\t// Add a reply view link to each top level reply\n\tif !post.IsThread() {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(newLink(\"#\"+post.id.String(), post.GetURL()))\n\t}\n\n\tif post.repostsCount \u003e 0 {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(strconv.FormatUint(post.repostsCount, 10))\n\t\tsb.WriteString(\" repost(s)\")\n\t}\n\n\tsb.WriteString(\"  \\n\")\n\tsb.WriteString(newLink(\"Flag\", post.GetFlagFormURL()))\n\n\tif post.IsThread() {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Repost\", post.GetRepostFormURL()))\n\t}\n\n\tisReadonly := post.IsReadonly() || post.GetBoard().IsReadonly()\n\tif !isReadonly {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Reply\", post.GetReplyFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Edit\", post.GetEditFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Delete\", post.GetDeleteFormURL()))\n\t}\n\n\tif levels == 0 {\n\t\tsb.WriteString(\" • \")\n\t\tif post.IsThread() {\n\t\t\tsb.WriteString(newLink(\"Show all Replies\", post.board.GetURLFromThreadID(post.GetPostID())))\n\t\t} else {\n\t\t\tsb.WriteString(newLink(\"View Thread\", post.board.GetURLFromThreadID(post.threadID)))\n\t\t}\n\t}\n\n\tsb.WriteString(\" \\n\")\n}\n\nfunc (post *Post) Render(path string, indent string, levels int) string {\n\tif post == nil {\n\t\treturn \"nil post\"\n\t}\n\n\t// TODO: pass a builder as arg into Render.\n\tvar sb strings.Builder\n\n\t// Thread reposts might not have a title, if so get title from source thread\n\ttitle := post.title\n\tif post.IsRepost() \u0026\u0026 title == \"\" {\n\t\tif board, ok := getBoard(post.repostBoardID); ok {\n\t\t\tif src, ok := board.GetThread(post.parentID); ok {\n\t\t\t\ttitle = src.GetTitle()\n\t\t\t}\n\t\t}\n\t}\n\n\tsb.WriteString(indent)\n\tif title != \"\" { // Replies don't have a title\n\t\tsb.WriteString(\"## \" + title + \"\\n\")\n\t}\n\tsb.WriteString(indent + \"\\n\")\n\n\tpost.renderPostContent(\u0026sb, indent, levels)\n\n\tif post.replies.Size() == 0 {\n\t\treturn sb.String()\n\t}\n\n\t// XXX: This triggers for reply views\n\tif levels == 0 {\n\t\tsb.WriteString(indent + \"\\n\")\n\t\tsb.WriteString(indent)\n\t\tsb.WriteString(\"\\n\")\n\t\treturn sb.String()\n\t}\n\n\tif path != \"\" {\n\t\tsb.WriteString(post.renderTopLevelReplies(path, indent, levels-1))\n\t} else {\n\t\tsb.WriteString(post.renderSubReplies(indent, levels-1))\n\t}\n\treturn sb.String()\n}\n\nfunc (post *Post) renderTopLevelReplies(path, indent string, levels int) string {\n\tp, err := pager.New(path, post.replies.Size(), pager.WithPageSize(pageSizeReplies))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\trender := func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t}\n\n\tb.WriteString(\"\\n\\n---\\nSort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tb.WriteString(newLink(\"newest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tb.WriteString(\"\\n---\\n\")\n\t\tb.WriteString(pager.Picker(p))\n\t}\n\n\treturn b.String()\n}\n\nfunc (post *Post) renderSubReplies(indent string, levels int) string {\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\tpost.replies.Iterate(\"\", \"\", func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t})\n\n\treturn b.String()\n}\n\nfunc (post *Post) RenderInner() string {\n\tif post.IsThread() {\n\t\tpanic(\"unexpected thread\")\n\t}\n\n\tvar (\n\t\ts         string\n\t\tthreadID  = post.threadID\n\t\tthread, _ = post.board.GetThread(threadID) // TODO: This seems redundant (post == thread)\n\t)\n\n\t// Fully render parent if it's not a repost.\n\tif !post.IsRepost() {\n\t\tvar (\n\t\t\tparent   *Post\n\t\t\tparentID = post.parentID\n\t\t)\n\n\t\tif thread.id == parentID {\n\t\t\tparent = thread\n\t\t} else {\n\t\t\tparent, _ = thread.GetReply(parentID)\n\t\t}\n\n\t\ts += parent.Render(\"\", \"\", 0) + \"\\n\"\n\t}\n\n\ts += post.Render(\"\", \"\u003e \", 5)\n\treturn s\n}\n"},{"name":"post_test.gno","body":"package boards2\n\nimport (\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/ufmt\"\n)\n\nfunc TestPostUpdate(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, \"test123\", addr, perms)\n\tcreator := testutils.TestAddress(\"creator\")\n\tpost := newPost(board, 1, creator, \"Title\", \"Body\", 1, 0, 0)\n\ttitle := \"New Title\"\n\tbody := \"New body\"\n\n\tpost.Update(title, body)\n\n\tuassert.Equal(t, title, post.GetTitle())\n\tuassert.Equal(t, body, post.GetBody())\n\tuassert.False(t, post.GetUpdatedAt().IsZero())\n}\n\nfunc TestPostAddFlag(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tpost := createTestThread(t)\n\n\tflag := Flag{\n\t\tUser:   addr,\n\t\tReason: \"foobar\",\n\t}\n\tuassert.True(t, post.AddFlag(flag))\n\tuassert.False(t, post.AddFlag(flag), \"should reject flag from duplicate user\")\n\tuassert.Equal(t, post.FlagsCount(), 1)\n}\n\nfunc TestPostSetVisible(t *testing.T) {\n\tpost := createTestThread(t)\n\tuassert.False(t, post.IsHidden(), \"post should be visible by default\")\n\n\tpost.SetVisible(false)\n\tuassert.True(t, post.IsHidden(), \"post should be hidden\")\n\n\tpost.SetVisible(true)\n\tuassert.False(t, post.IsHidden(), \"post should be visible\")\n}\n\nfunc TestPostAddRepostTo(t *testing.T) {\n\t// TODO: Improve this unit test\n\taddr := testutils.TestAddress(\"creatorDstBoard\")\n\tperms := createDefaultBoardPermissions(addr)\n\tcases := []struct {\n\t\tname, title, body string\n\t\tdstBoard          *Board\n\t\tthread            *Post\n\t\tsetup             func() *Post\n\t\terr               string\n\t}{\n\t\t{\n\t\t\tname:     \"repost thread\",\n\t\t\ttitle:    \"Repost Title\",\n\t\t\tbody:     \"Repost body\",\n\t\t\tdstBoard: newBoard(42, \"dst123\", addr, perms),\n\t\t\tsetup:    func() *Post { return createTestThread(t) },\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid repost from reply\",\n\t\t\tsetup: func() *Post { return createTestReply(t) },\n\t\t\terr:   \"cannot repost non-thread post\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\trepost  *Post\n\t\t\t\tcreator = testutils.TestAddress(\"repostCreator\")\n\t\t\t\tthread  = tc.setup()\n\t\t\t)\n\n\t\t\tcreateRepost := func() {\n\t\t\t\tvar repostId PostID\n\t\t\t\tif tc.dstBoard != nil {\n\t\t\t\t\trepostId = tc.dstBoard.incGetPostID()\n\t\t\t\t}\n\n\t\t\t\trepost = newPost(tc.dstBoard, repostId, creator, tc.title, tc.body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\t\t\t\tthread.AddRepostTo(creator, repost, tc.dstBoard)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.PanicsWithMessage(t, tc.err, createRepost)\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tuassert.NotPanics(t, createRepost)\n\t\t\t}\n\n\t\t\tr, found := tc.dstBoard.GetThread(repost.GetPostID())\n\t\t\tuassert.True(t, found)\n\t\t\tuassert.True(t, repost == r)\n\t\t\tuassert.Equal(t, tc.title, repost.GetTitle())\n\t\t\tuassert.Equal(t, tc.body, repost.GetBody())\n\t\t\tuassert.Equal(t, uint(thread.GetBoard().GetID()), uint(repost.GetRepostBoardID()))\n\t\t})\n\t}\n}\n\nfunc TestNewThread(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\ttitle := \"Test Title\"\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=0\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\teditURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=EditThread\u0026boardID=%d\u0026body=%s\u0026threadID=%d\u0026title=%s\",\n\t\tuint(boardID),\n\t\tbody,\n\t\tuint(threadID),\n\t\tstrings.ReplaceAll(title, \" \", \"+\"),\n\t)\n\trepostURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateRepost\u0026boardID=%d\u0026body=\u0026destinationBoardID=\u0026threadID=%d\u0026title=\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteThread\u0026boardID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tflagURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=FlagThread\u0026boardID=%d\u0026reason=\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\n\tthread := newPost(board, threadID, creator, title, body, threadID, 0, 0)\n\n\tuassert.True(t, thread.IsThread())\n\tuassert.Equal(t, uint(threadID), uint(thread.GetPostID()))\n\tuassert.False(t, thread.GetCreatedAt().IsZero())\n\tuassert.True(t, thread.GetUpdatedAt().IsZero())\n\tuassert.Equal(t, title, thread.GetTitle())\n\tuassert.Equal(t, body[:77]+\"...\", thread.GetSummary())\n\tuassert.False(t, thread.HasReplies())\n\tuassert.Equal(t, url, thread.GetURL())\n\tuassert.Equal(t, replyURL, thread.GetReplyFormURL())\n\tuassert.Equal(t, editURL, thread.GetEditFormURL())\n\tuassert.Equal(t, repostURL, thread.GetRepostFormURL())\n\tuassert.Equal(t, deleteURL, thread.GetDeleteFormURL())\n\tuassert.Equal(t, flagURL, thread.GetFlagFormURL())\n}\n\nfunc TestThreadAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tthreadID := uint(thread.GetPostID())\n\tbody := \"A reply\"\n\n\treply := thread.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, threadID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.True(t, thread.HasReplies())\n}\n\nfunc TestThreadGetReply(t *testing.T) {\n\tcases := []struct {\n\t\tname   string\n\t\tthread *Post\n\t\tsetup  func(thread *Post) (replyID PostID)\n\t\tfound  bool\n\t}{\n\t\t{\n\t\t\tname:   \"found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup: func(thread *Post) PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:   \"not found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup:  func(*Post) PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup(tc.thread)\n\n\t\t\treply, found := tc.thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestThreadDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"ok nested\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.AddReply(testutils.TestAddress(\"replier2\"), \"\").GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid\",\n\t\t\tsetup: func() PostID { return thread.GetPostID() },\n\t\t\terr:   \"expected an ID of an inner reply\",\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t\terr:   \"reply not found in thread\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\terr := thread.DeleteReply(replyID)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.ErrorContains(t, err, tc.err)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tuassert.NoError(t, err)\n\t\t\t_, found := thread.GetReply(replyID)\n\t\t\tuassert.False(t, found)\n\t\t})\n\t}\n}\n\nfunc TestThreadRenderSummary(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRenderInner(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestNewReply(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tparentID := PostID(1)\n\treplyID := PostID(2)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t\tuint(replyID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteReply\u0026boardID=%d\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\n\treply := newPost(board, replyID, creator, \"\", body, threadID, parentID, 0)\n\n\tuassert.False(t, reply.IsThread())\n\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\tuassert.False(t, reply.GetCreatedAt().IsZero())\n\tuassert.True(t, reply.GetUpdatedAt().IsZero())\n\tuassert.False(t, reply.HasReplies())\n\tuassert.Equal(t, body[:77]+\"...\", reply.GetSummary())\n\tuassert.Equal(t, url, reply.GetURL())\n\tuassert.Equal(t, replyURL, reply.GetReplyFormURL())\n\tuassert.Equal(t, deleteURL, reply.GetDeleteFormURL())\n}\n\nfunc TestReplyAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tparentReplyID := uint(parentReply.GetPostID())\n\tbody := \"A child reply\"\n\n\treply := parentReply.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, parentReplyID, uint(reply.GetParentID()))\n\tuassert.Equal(t, parentReplyID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.False(t, reply.HasReplies())\n\tuassert.True(t, parentReply.HasReplies())\n}\n\nfunc TestReplyGetReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\tfound bool\n\t}{\n\t\t{\n\t\t\tname: \"found\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := parentReply.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\treply, found := thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestReplyDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\treply := parentReply.AddReply(testutils.TestAddress(\"replier2\"), \"\")\n\n\t// NOTE: Deleting a reply from a parent reply should eventually be suported\n\tuassert.PanicsWithMessage(t, \"cannot delete reply from a non-thread post\", func() {\n\t\tparentReply.DeleteReply(reply.GetPostID())\n\t})\n}\n\nfunc TestReplyRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc createTestThread(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(1, \"test_board_123\", creator, perms)\n\treturn board.AddThread(creator, \"Title\", \"Body\")\n}\n\nfunc createTestReply(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\treturn thread.AddReply(creator, \"Test message\")\n}\n"},{"name":"public.gno","body":"package boards2\n\nimport (\n\t\"regexp\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n)\n\nconst (\n\t// MaxBoardNameLength defines the maximum length allowed for board names.\n\tMaxBoardNameLength = 50\n\n\t// MaxThreadTitleLength defines the maximum length allowed for thread titles.\n\tMaxThreadTitleLength = 100\n\n\t// MaxReplyLength defines the maximum length allowed for replies.\n\tMaxReplyLength = 300\n)\n\nvar (\n\treBoardName = regexp.MustCompile(`(?i)^[a-z]+[a-z0-9_\\-]{2,50}$`)\n\n\t// Minimalistic Markdown line prefix checks that if allowed would\n\t// break the current UI when submitting a reply. It denies replies\n\t// with headings, blockquotes or horizontal lines.\n\treDeniedReplyLinePrefixes = regexp.MustCompile(`(?m)^\\s*(#|---|\u003e)+`)\n)\n\n// SetHelp sets or updates boards realm help content.\nfunc SetHelp(content string) {\n\tcontent = strings.TrimSpace(content)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{content}\n\tgPerms.WithPermission(caller, PermissionRealmHelp, args, func(Args) {\n\t\tgHelp = content\n\t})\n}\n\n// SetPermissions sets a permissions implementation for boards2 realm or a board.\nfunc SetPermissions(bid BoardID, p Permissions) {\n\tassertRealmIsNotLocked()\n\n\tif p == nil {\n\t\tpanic(\"permissions is required\")\n\t}\n\n\tif bid != 0 {\n\t\tassertBoardExists(bid)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid}\n\tgPerms.WithPermission(caller, PermissionPermissionsUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\t// When board ID is zero it means that realm permissions are being updated\n\t\tif bid == 0 {\n\t\t\tgPerms = p\n\n\t\t\tstd.Emit(\n\t\t\t\t\"RealmPermissionsUpdated\",\n\t\t\t\t\"caller\", caller.String(),\n\t\t\t)\n\t\t\treturn\n\t\t}\n\n\t\t// Otherwise update the permissions of a single board\n\t\tboard := mustGetBoard(bid)\n\t\tboard.perms = p\n\n\t\tstd.Emit(\n\t\t\t\"BoardPermissionsUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t)\n\t})\n}\n\n// SetRealmNotice sets a notice to be displayed globally by the realm.\n// An empty message removes the realm notice.\nfunc SetRealmNotice(message string) {\n\tmessage = strings.TrimSpace(message)\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmNotice, nil, func(Args) {\n\t\tgNotice = message\n\n\t\tstd.Emit(\n\t\t\t\"RealmNoticeChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"message\", message,\n\t\t)\n\t})\n}\n\n// GetBoardIDFromName searches a board by name and returns it's ID.\nfunc GetBoardIDFromName(name string) (_ BoardID, found bool) {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\treturn 0, false\n\t}\n\treturn v.(*Board).id, true\n}\n\n// CreateBoard creates a new board.\nfunc CreateBoard(name string) BoardID {\n\tassertRealmIsNotLocked()\n\n\tname = strings.TrimSpace(name)\n\tassertIsValidBoardName(name)\n\tassertBoardNameNotExists(name)\n\n\tcaller := std.PreviousRealm().Address()\n\tid := incGetBoardID()\n\targs := Args{name, id}\n\tgPerms.WithPermission(caller, PermissionBoardCreate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(name)\n\n\t\tperms := createDefaultBoardPermissions(caller)\n\t\tboard := newBoard(id, name, caller, perms)\n\t\tgBoardsByID.Set(id.Key(), board)\n\t\tgBoardsByName.Set(name, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardCreated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", id.String(),\n\t\t\t\"name\", name,\n\t\t)\n\t})\n\treturn id\n}\n\n// RenameBoard changes the name of an existing board.\n//\n// A history of previous board names is kept when boards are renamed.\n// Because of that boards are also accesible using previous name(s).\nfunc RenameBoard(name, newName string) {\n\tassertRealmIsNotLocked()\n\n\tnewName = strings.TrimSpace(newName)\n\tassertIsValidBoardName(newName)\n\tassertBoardNameNotExists(newName)\n\n\tboard := mustGetBoardByName(name)\n\tassertBoardIsNotFrozen(board)\n\n\tbid := board.GetID()\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid, name, newName}\n\tboard.perms.WithPermission(caller, PermissionBoardRename, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(newName)\n\n\t\tboard := mustGetBoard(bid)\n\t\tboard.aliases = append(board.aliases, board.name)\n\t\tboard.name = newName\n\n\t\t// Index board for the new name keeping previous indexes for older names\n\t\tgBoardsByName.Set(newName, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardRenamed\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t\t\"name\", name,\n\t\t\t\"newName\", newName,\n\t\t)\n\t})\n}\n\n// CreateThread creates a new thread within a board.\nfunc CreateThread(boardID BoardID, title, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tbody = strings.TrimSpace(body)\n\tassertBodyIsNotEmpty(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadCreate)\n\n\tthread := board.AddThread(caller, title, body)\n\n\tstd.Emit(\n\t\t\"ThreadCreated\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", thread.GetPostID().String(),\n\t\t\"title\", title,\n\t)\n\n\treturn thread.id\n}\n\n// CreateReply creates a new comment or reply within a thread.\n//\n// The value of `replyID` is only required when creating a reply of another reply.\nfunc CreateReply(boardID BoardID, threadID, replyID PostID, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyCreate)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\tvar reply *Post\n\tif replyID == 0 {\n\t\t// When the parent reply is the thread just add reply to thread\n\t\treply = thread.AddReply(caller, body)\n\t} else {\n\t\t// Try to get parent reply and add a new child reply\n\t\tparent := mustGetReply(thread, replyID)\n\t\tif parent.IsHidden() || parent.IsReadonly() {\n\t\t\tpanic(\"replying to a hidden or frozen reply is not allowed\")\n\t\t}\n\n\t\treply = parent.AddReply(caller, body)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyCreate\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", reply.GetPostID().String(),\n\t)\n\n\treturn reply.id\n}\n\n// CreateRepost reposts a thread into another board.\nfunc CreateRepost(boardID BoardID, threadID PostID, title, body string, destinationBoardID BoardID) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tcaller := std.PreviousRealm().Address()\n\tdst := mustGetBoard(destinationBoardID)\n\tassertBoardIsNotFrozen(dst)\n\tassertHasBoardPermission(dst, caller, PermissionThreadRepost)\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\tif thread.IsRepost() {\n\t\tpanic(\"reposting a thread that is a repost is not allowed\")\n\t}\n\n\trepostId := dst.incGetPostID()\n\tbody = strings.TrimSpace(body)\n\trepost := newPost(dst, repostId, caller, title, body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\tthread.AddRepostTo(caller, repost, dst)\n\n\tstd.Emit(\n\t\t\"Repost\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"destinationBoardID\", destinationBoardID.String(),\n\t\t\"title\", title,\n\t)\n\n\treturn repostId\n}\n\n// DeleteThread deletes a thread from a board.\n//\n// Threads can be deleted by the users who created them or otherwise by users with special permissions.\nfunc DeleteThread(boardID BoardID, threadID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteThread filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\n\t\tif caller != thread.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionThreadDelete)\n\t\t}\n\t}\n\n\t// Hard delete thread and all its replies\n\tboard.DeleteThread(threadID)\n\n\tstd.Emit(\n\t\t\"ThreadDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t)\n}\n\n// DeleteReply deletes a reply from a thread.\n//\n// Replies can be deleted by the users who created them or otherwise by users with special permissions.\n// Soft deletion is used when the deleted reply contains sub replies, in which case the reply content\n// is replaced by a text informing that reply has been deleted to avoid deleting sub-replies.\nfunc DeleteReply(boardID BoardID, threadID, replyID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteReply filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\treply := mustGetReply(thread, replyID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\t\tassertReplyIsVisible(reply)\n\t\tassertReplyIsNotFrozen(reply)\n\n\t\tif caller != reply.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionReplyDelete)\n\t\t}\n\t}\n\n\t// Soft delete reply by changing its body when it contains\n\t// sub-replies, otherwise hard delete it.\n\tif reply.HasReplies() {\n\t\treply.Update(reply.GetTitle(), \"This reply has been deleted\")\n\t} else {\n\t\tthread.DeleteReply(replyID)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t)\n}\n\n// EditThread updates the title and body of thread.\n//\n// Threads can be updated by the users who created them or otherwise by users with special permissions.\nfunc EditThread(boardID BoardID, threadID PostID, title, body string) {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\tbody = strings.TrimSpace(body)\n\tif !thread.IsRepost() {\n\t\tassertBodyIsNotEmpty(body)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != thread.GetCreator() {\n\t\tassertHasBoardPermission(board, caller, PermissionThreadEdit)\n\t}\n\n\tthread.Update(title, body)\n\n\tstd.Emit(\n\t\t\"ThreadEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"title\", title,\n\t)\n}\n\n// EditReply updates the body of comment or reply.\n//\n// Replies can be updated only by the users who created them.\nfunc EditReply(boardID BoardID, threadID, replyID PostID, body string) {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\tassertReplyIsNotFrozen(reply)\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != reply.GetCreator() {\n\t\tpanic(\"only the reply creator is allowed to edit it\")\n\t}\n\n\treply.Update(\"\", body)\n\n\tstd.Emit(\n\t\t\"ReplyEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"body\", body,\n\t)\n}\n\n// InviteMember adds a member to the realm or to a boards.\n//\n// A role can optionally be specified to be assigned to the new member.\n// Board ID is only required when inviting a member to a board.\nfunc InviteMember(boardID BoardID, user std.Address, role Role) {\n\tassertUserAddressIsValid(user)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{user, role}\n\tperms.WithPermission(caller, PermissionMemberInvite, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.AddUser(user, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberInvited\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", user.String(),\n\t\t\t\"role\", string(role),\n\t\t)\n\t})\n}\n\n// RemoveMember removes a member from the realm or a boards.\n//\n// Board ID is only required when removing a member from board.\nfunc RemoveMember(boardID BoardID, member std.Address) {\n\tassertMembersUpdateIsEnabled(boardID)\n\tassertMemberAddressIsValid(member)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\tperms.WithPermission(caller, PermissionMemberRemove, Args{member}, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif !perms.RemoveUser(member) {\n\t\t\tpanic(\"member not found\")\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberRemoved\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t)\n\t})\n}\n\n// IsMember checks if an user is a member of the realm or a board.\n//\n// Board ID is only required when checking if a user is a member of a board.\nfunc IsMember(boardID BoardID, user std.Address) bool {\n\tassertUserAddressIsValid(user)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasUser(user)\n}\n\n// HasMemberRole checks if a realm or board member has a specific role assigned.\n//\n// Board ID is only required when checking a member of a board.\nfunc HasMemberRole(boardID BoardID, member std.Address, role Role) bool {\n\tassertMemberAddressIsValid(member)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasRole(member, role)\n}\n\n// ChangeMemberRole changes the role of a realm or board member.\n//\n// Board ID is only required when changing the role for a member of a board.\nfunc ChangeMemberRole(boardID BoardID, member std.Address, role Role) {\n\tassertMemberAddressIsValid(member)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, member, role}\n\tperms.WithPermission(caller, PermissionRoleChange, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.SetUserRoles(member, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"RoleChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t\t\"newRole\", string(role),\n\t\t)\n\t})\n}\n\n// IterateRealmMembers iterates realm members.\n// The iteration is done only for realm members, board members are not iterated.\nfunc IterateRealmMembers(offset int, fn UsersIterFn) (halted bool) {\n\tcount := gPerms.UsersCount() - offset\n\treturn gPerms.IterateUsers(offset, count, fn)\n}\n\n// IterateBoards iterates realm boards.\nfunc IterateBoards(offset int, fn func(ReadonlyBoard) bool) (halted bool) {\n\tcount := gBoardsByID.Size() - offset\n\treturn gBoardsByID.IterateByOffset(offset, count, func(_ string, v any) bool {\n\t\tboard, _ := v.(*Board)\n\t\treturn fn(readonlyBoard{board})\n\t})\n}\n\nfunc assertMemberAddressIsValid(member std.Address) {\n\tif !member.IsValid() {\n\t\tpanic(\"invalid member address\")\n\t}\n}\n\nfunc assertUserAddressIsValid(user std.Address) {\n\tif !user.IsValid() {\n\t\tpanic(\"invalid user address\")\n\t}\n}\n\nfunc assertHasBoardPermission(b *Board, user std.Address, p Permission) {\n\tif !b.perms.HasPermission(user, p) {\n\t\tpanic(\"unauthorized\")\n\t}\n}\n\nfunc assertBoardExists(id BoardID) {\n\tif _, found := getBoard(id); !found {\n\t\tpanic(\"board not found: \" + id.String())\n\t}\n}\n\nfunc assertBoardIsNotFrozen(b *Board) {\n\tif b.IsReadonly() {\n\t\tpanic(\"board is frozen\")\n\t}\n}\n\nfunc assertIsValidBoardName(name string) {\n\tsize := len(name)\n\tif size == 0 {\n\t\tpanic(\"board name is empty\")\n\t}\n\n\tif size \u003e MaxBoardNameLength {\n\t\tn := strconv.Itoa(MaxBoardNameLength)\n\t\tpanic(\"board name is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif !reBoardName.MatchString(name) {\n\t\tpanic(\"board name contains invalid characters\")\n\t}\n}\n\nfunc assertThreadIsNotFrozen(t *Post) {\n\tif t.IsReadonly() {\n\t\tpanic(\"thread is frozen\")\n\t}\n}\n\nfunc assertReplyIsNotFrozen(r *Post) {\n\tif r.IsReadonly() {\n\t\tpanic(\"reply is frozen\")\n\t}\n}\n\nfunc assertNameIsNotEmpty(name string) {\n\tif name == \"\" {\n\t\tpanic(\"name is empty\")\n\t}\n}\n\nfunc assertTitleIsValid(title string) {\n\tif title == \"\" {\n\t\tpanic(\"title is empty\")\n\t}\n\n\tif len(title) \u003e MaxThreadTitleLength {\n\t\tn := strconv.Itoa(MaxThreadTitleLength)\n\t\tpanic(\"thread title is too long, maximum allowed is \" + n + \" characters\")\n\t}\n}\n\nfunc assertBodyIsNotEmpty(body string) {\n\tif body == \"\" {\n\t\tpanic(\"body is empty\")\n\t}\n}\n\nfunc assertBoardNameNotExists(name string) {\n\tif gBoardsByName.Has(name) {\n\t\tpanic(\"board already exists\")\n\t}\n}\n\nfunc assertThreadExists(b *Board, threadID PostID) {\n\tif _, found := b.GetThread(threadID); !found {\n\t\tpanic(\"thread not found: \" + threadID.String())\n\t}\n}\n\nfunc assertReplyExists(thread *Post, replyID PostID) {\n\tif _, found := thread.GetReply(replyID); !found {\n\t\tpanic(\"reply not found: \" + replyID.String())\n\t}\n}\n\nfunc assertThreadIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"thread is hidden\")\n\t}\n}\n\nfunc assertReplyIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"reply is hidden\")\n\t}\n}\n\nfunc assertReplyBodyIsValid(body string) {\n\tassertBodyIsNotEmpty(body)\n\n\tif len(body) \u003e MaxReplyLength {\n\t\tn := strconv.Itoa(MaxReplyLength)\n\t\tpanic(\"reply is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif reDeniedReplyLinePrefixes.MatchString(body) {\n\t\tpanic(\"using Markdown headings, blockquotes or horizontal lines is not allowed in replies\")\n\t}\n}\n\nfunc assertMembersUpdateIsEnabled(boardID BoardID) {\n\tif boardID != 0 {\n\t\tassertRealmIsNotLocked()\n\t} else {\n\t\tassertRealmMembersAreNotLocked()\n\t}\n}\n"},{"name":"public_flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// SetFlaggingThreshold sets the number of flags required to hide a thread or comment.\n//\n// Threshold is only applicable within the board where it's setted.\nfunc SetFlaggingThreshold(boardID BoardID, threshold int) {\n\tif threshold \u003c 1 {\n\t\tpanic(\"invalid flagging threshold\")\n\t}\n\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, threshold}\n\tboard.perms.WithPermission(caller, PermissionBoardFlaggingUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\n\t\tgFlaggingThresholds.Set(boardID.String(), threshold)\n\t\tstd.Emit(\n\t\t\t\"FlaggingThresholdUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"threshold\", strconv.Itoa(threshold),\n\t\t)\n\t})\n}\n\n// GetFlaggingThreshold returns the number of flags required to hide a thread or comment within a board.\nfunc GetFlaggingThreshold(boardID BoardID) int {\n\tassertBoardExists(boardID)\n\treturn getFlaggingThreshold(boardID)\n}\n\n// FlagThread adds a new flag to a thread.\n//\n// Flagging requires special permissions and hides the thread when\n// the number of flags reaches a pre-defined flagging threshold.\nfunc FlagThread(boardID BoardID, threadID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionThreadFlag)\n\t}\n\n\tt, ok := board.GetThread(threadID)\n\tif !ok {\n\t\tpanic(\"post doesn't exist\")\n\t}\n\tassertThreadIsNotFrozen(t)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(t, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\tt.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ThreadFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n\n// FlagReply adds a new flag to a comment or reply.\n//\n// Flagging requires special permissions and hides the comment or reply\n// when the number of flags reaches a pre-defined flagging threshold.\nfunc FlagReply(boardID BoardID, threadID, replyID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionReplyFlag)\n\t}\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsNotFrozen(thread)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(reply, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\treply.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n"},{"name":"public_freeze.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// FreezeBoard freezes a board so no more threads and comments can be created or modified.\nfunc FreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, true)\n}\n\n// UnfreezeBoard removes frozen status from a board.\nfunc UnfreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, false)\n}\n\n// IsBoardFrozen checks if a board has been frozen.\nfunc IsBoardFrozen(boardID BoardID) bool {\n\tboard := mustGetBoard(boardID)\n\treturn board.IsReadonly()\n}\n\n// FreezeThread freezes a thread so thread cannot be replied, modified or deleted.\n//\n// Fails if board is frozen.\nfunc FreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, true)\n}\n\n// UnfreezeThread removes frozen status from a thread.\n//\n// Fails if board is frozen.\nfunc UnfreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, false)\n}\n\n// IsThreadFrozen checks if a thread has been frozen.\n//\n// Returns true if board is frozen.\nfunc IsThreadFrozen(boardID BoardID, threadID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treturn board.IsReadonly() || thread.IsReadonly()\n}\n\n// UnfreezeReply removes frozen status from a reply.\n//\n// Fails when parent thread or board are frozen.\nfunc UnfreezeReply(boardID BoardID, threadID, replyID PostID) {\n\t// XXX: Is there a use case for also freezing replies?\n\tsetReplyReadonly(boardID, threadID, replyID, false)\n}\n\n// FreezeReply freezes a thread reply so it cannot be modified or deleted.\n//\n// Fails when parent thread or board are frozen.\nfunc FreezeReply(boardID BoardID, threadID, replyID PostID) {\n\tsetReplyReadonly(boardID, threadID, replyID, true)\n}\n\n// IsReplyFrozen checks if a thread reply has been frozen.\n//\n// Returns true when board or a parent thread is frozen.\nfunc IsReplyFrozen(boardID BoardID, threadID, replyID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\treturn board.IsReadonly() || thread.IsReadonly() || reply.IsReadonly()\n}\n\nfunc setReplyReadonly(boardID BoardID, threadID, replyID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\tif isReadonly {\n\t\tassertReplyIsNotFrozen(reply)\n\t}\n\n\treply.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ReplyFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setThreadReadonly(boardID BoardID, threadID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tif isReadonly {\n\t\tassertThreadIsNotFrozen(thread)\n\t}\n\n\tthread.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ThreadFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setBoardReadonly(boardID BoardID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tif isReadonly {\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionBoardFreeze)\n\n\tboard.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"BoardFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n"},{"name":"public_lock.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// LockRealm locks the realm making it readonly.\n//\n// WARNING: Realm can't be unlocked once locked.\n//\n// Realm can also be locked without locking realm members.\n// Realm members can be locked when locking the realm or afterwards.\n// This is relevant for two reasons, one so members can be modified after lock.\n// The other is for realm owners, which can delete threads and comments after lock.\nfunc LockRealm(lockRealmMembers bool) {\n\tassertRealmMembersAreNotLocked()\n\n\t// If realm members are not being locked assert that realm is no locked.\n\t// Members can be locked after locking the realm, in a second `LockRealm` call.\n\tif !lockRealmMembers {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmLock, nil, func(Args) {\n\t\tgLocked.realm = true\n\t\tgLocked.realmMembers = lockRealmMembers\n\n\t\tstd.Emit(\n\t\t\t\"RealmLocked\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"lockRealmMembers\", strconv.FormatBool(lockRealmMembers),\n\t\t)\n\t})\n}\n\n// IsRealmLocked checks if boards realm has been locked.\nfunc IsRealmLocked() bool {\n\treturn gLocked.realm\n}\n\n// AreRealmMembersLocked checks if realm members has been locked.\nfunc AreRealmMembersLocked() bool {\n\treturn gLocked.realmMembers\n}\n\nfunc assertRealmIsNotLocked() { // TODO: Add filtests for locked realm case to all public functions\n\tif gLocked.realm {\n\t\tpanic(\"realm is locked\")\n\t}\n}\n\nfunc assertRealmMembersAreNotLocked() { // TODO: Add filtests for locked members case to all public member functions\n\tif gLocked.realmMembers {\n\t\tpanic(\"realm and members are locked\")\n\t}\n}\n"},{"name":"render.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/p/demo/mux\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst (\n\tpageSizeBoards  = 6\n\tpageSizeThreads = 6\n\tpageSizeReplies = 10\n)\n\nconst menuManageBoard = \"manageBoard\"\n\nfunc Render(path string) string {\n\trouter := mux.NewRouter()\n\trouter.HandleFunc(\"\", renderBoardsList)\n\trouter.HandleFunc(\"help\", renderHelp)\n\trouter.HandleFunc(\"admin-users\", renderMembers)\n\trouter.HandleFunc(\"{board}\", renderBoard)\n\trouter.HandleFunc(\"{board}/members\", renderMembers)\n\trouter.HandleFunc(\"{board}/{thread}\", renderThread)\n\trouter.HandleFunc(\"{board}/{thread}/{reply}\", renderReply)\n\n\trouter.NotFoundHandler = func(res *mux.ResponseWriter, _ *mux.Request) {\n\t\tres.Write(\"Path not found\")\n\t}\n\n\treturn router.Render(path)\n}\n\nfunc renderHelp(res *mux.ResponseWriter, _ *mux.Request) {\n\tres.Write(\"# Boards Help\\n\")\n\tif gHelp != \"\" {\n\t\tres.Write(gHelp)\n\t} else {\n\t\tres.Write(\"### Help content has not been uploaded\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(newLink(\"upload boards help\", txlink.Call(\"SetHelp\", \"content\", \"\")))\n\t\tres.Write(\" ?\")\n\t}\n}\n\nfunc renderBoardsList(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tres.Write(\"# Boards\\n\\n\")\n\trenderBoardListMenu(res, req)\n\tres.Write(\"\\n\\n---\\n\")\n\n\tif gBoardsByID.Size() == 0 {\n\t\tlink := txlink.Call(\"CreateBoard\", \"name\", \"\")\n\t\tres.Write(\"### Currently there are no boards\\n\")\n\t\tres.Write(\"Be the first to \")\n\t\tres.Write(newLink(\"create a new board\", link))\n\t\tres.Write(\" !\")\n\n\t\treturn\n\t}\n\n\tp, err := pager.New(req.RawPath, gBoardsByID.Size(), pager.WithPageSize(pageSizeBoards))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tboard := v.(*Board)\n\n\t\tres.Write(\"**\" + newLink(board.GetName(), board.GetURL()) + \"**  \\n\")\n\t\tres.Write(\"Created by \" + newUserLink(board.creator) + \" \")\n\t\tres.Write(\"on \" + board.createdAt.Format(dateFormat))\n\t\tres.Write(\", #\" + board.id.String() + \"  \\n\")\n\t\tres.Write(\"**\" + strconv.Itoa(board.threads.Size()) + \" threads\")\n\t\tif board.IsReadonly() {\n\t\t\tres.Write(\", read-only\")\n\t\t}\n\n\t\tres.Write(\"**\\n\\n\")\n\t\treturn false\n\t}\n\n\tres.Write(\"Sort by: \")\n\tr := realmpath.Parse(req.RawPath)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tres.Write(newLink(\"newest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tres.Write(newLink(\"oldest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n---\\n\")\n\t\tres.Write(pager.Picker(p))\n\t}\n}\n\nfunc renderBoardListMenu(res *mux.ResponseWriter, req *mux.Request) {\n\tpath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\n\tres.Write(newLink(\"Create Board\", txlink.Call(\"CreateBoard\", \"name\", \"\")))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"List Admin Users\", path+\":admin-users\"))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"Help\", path+\":help\"))\n\tres.Write(\"\\n\\n\")\n}\n\nfunc renderBoard(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tlink := newLink(\"create a new board\", txlink.Call(\"CreateBoard\", \"name\", name))\n\t\tres.Write(\"### The board you are looking for does not exist\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(link)\n\t\tres.Write(\" ?\")\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tmenu := renderBoardMenu(board, req)\n\n\tres.Write(board.Render(req.RawPath, menu))\n}\n\nfunc renderBoardMenu(board *Board, req *mux.Request) string {\n\tvar (\n\t\tb               strings.Builder\n\t\tboardMembersURL = board.GetPath() + \"/members\"\n\t)\n\n\tif board.IsReadonly() {\n\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\tb.WriteString(\" • \")\n\t\tb.WriteString(newLink(\"Unfreeze Board\", board.GetUnfreezeFormURL()))\n\t\tb.WriteString(\"\\n\")\n\t} else {\n\t\tb.WriteString(newLink(\"Create Thread\", board.GetPostFormURL()))\n\t\tb.WriteString(\" • \")\n\n\t\tmenu := getCurrentMenu(req.RawPath)\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"**Manage Board**\")\n\t\t} else {\n\t\t\tb.WriteString(newLink(\"Manage Board\", menuURL(menuManageBoard)))\n\t\t}\n\n\t\tb.WriteString(\"  \\n\")\n\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"↳\")\n\t\t\tb.WriteString(newLink(\"Invite Member\", board.GetInviteMemberFormURL()))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"Freeze Board\", board.GetFreezeFormURL()))\n\t\t\tb.WriteString(\"\\n\\n\")\n\t\t}\n\t}\n\n\treturn b.String()\n}\n\nfunc renderThread(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + rawID)\n\t} else if thread.IsHidden() {\n\t\tres.Write(\"Thread with ID: \" + rawID + \" has been flagged as inappropriate\")\n\t} else {\n\t\tres.Write(thread.Render(req.RawPath, \"\", 5))\n\t}\n}\n\nfunc renderReply(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\trawID = req.GetVar(\"reply\")\n\trID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid reply ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + req.GetVar(\"thread\"))\n\t\treturn\n\t}\n\n\treply, found := thread.GetReply(PostID(rID))\n\tif !found {\n\t\tres.Write(\"Reply does not exist with ID: \" + rawID)\n\t\treturn\n\t}\n\n\t// Call render even for hidden replies to display children.\n\t// Original comment content will be hidden under the hood.\n\t// See: #3480\n\tres.Write(reply.RenderInner())\n}\n\nfunc renderMembers(res *mux.ResponseWriter, req *mux.Request) {\n\tboardID := BoardID(0)\n\tperms := gPerms\n\tname := req.GetVar(\"board\")\n\tif name != \"\" {\n\t\tv, found := gBoardsByName.Get(name)\n\t\tif !found {\n\t\t\tres.Write(\"### Board not found\")\n\t\t\treturn\n\t\t}\n\n\t\tboard := v.(*Board)\n\t\tboardID = board.GetID()\n\t\tperms = board.perms\n\n\t\tres.Write(\"# \" + board.GetName() + \" Members\\n\")\n\t\tres.Write(\"### These are the board members\\n\\n\")\n\t} else {\n\t\tres.Write(\"# Admin Users\\n\")\n\t\tres.Write(\"### These are the admin users of the realm\\n\\n\")\n\t}\n\n\t// Create a pager with a small page size to reduce\n\t// the number of username lookups per page.\n\tp, err := pager.New(req.RawPath, perms.UsersCount(), pager.WithPageSize(5))\n\tif err != nil {\n\t\tres.Write(err.Error())\n\t\treturn\n\t}\n\n\tres.Write(\"| Member | Role | Actions |\\n| --- | --- | --- |\\n\")\n\tperms.IterateUsers(p.Offset(), p.PageSize(), func(u User) bool {\n\t\tres.Write(\"| \")\n\t\tres.Write(newUserLink(u.Address))\n\t\tres.Write(\" | \")\n\t\tres.Write(rolesToString(u.Roles))\n\t\tres.Write(\" | \")\n\t\tres.Write(newLink(\"remove\", txlink.Call(\n\t\t\t\"RemoveMember\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t)))\n\t\tres.Write(\" • \")\n\t\tres.Write(newLink(\"change role\", txlink.Call(\n\t\t\t\"ChangeMemberRole\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t\t\"role\", \"\",\n\t\t)))\n\t\tres.Write(\" |\\n\")\n\t\treturn false\n\t})\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n\\n\" + pager.Picker(p))\n\t}\n}\n\nfunc renderNotice(res *mux.ResponseWriter) {\n\tif gNotice == \"\" {\n\t\treturn\n\t}\n\n\tres.Write(\"\u003e \")\n\tres.Write(gNotice)\n\tres.Write(\"\\n\\n\")\n}\n\nfunc rolesToString(roles []Role) string {\n\tif len(roles) == 0 {\n\t\treturn \"\"\n\t}\n\n\tnames := make([]string, len(roles))\n\tfor i, r := range roles {\n\t\tnames[i] = string(r)\n\t}\n\treturn strings.Join(names, \", \")\n}\n\nfunc menuURL(name string) string {\n\t// TODO: Menu URL works because no other GET arguments are being used\n\treturn \"?menu=\" + name\n}\n\nfunc getCurrentMenu(rawURL string) string {\n\t_, rawQuery, found := strings.Cut(rawURL, \"?\")\n\tif !found {\n\t\treturn \"\"\n\t}\n\n\tquery, _ := url.ParseQuery(rawQuery)\n\treturn query.Get(\"menu\")\n}\n"},{"name":"z_0_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(\"test123\")\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_0_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tboardName = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(boardName)\n}\n\nfunc main() {\n\tboards2.CreateBoard(boardName)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_0_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_0_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"gnoland\")\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_0_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar name = strings.Repeat(\"X\", boards2.MaxBoardNameLength+1)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(name)\n}\n\n// Error:\n// board name is too long, maximum allowed is 50 characters\n"},{"name":"z_0_h_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname   = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\tboards2.InviteMember(0, member, boards2.RoleOwner) // Operate on realm DAO members instead of individual boards\n\ttesting.SetOriginCaller(member)\n\tusers.Register(name)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(name)\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"test123\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread as a moderator\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagThread(404, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_10_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Make the next call as an uninvited user\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, 404, \"\")\n}\n\n// Error:\n// post doesn't exist\n"},{"name":"z_10_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_10_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to flag threads\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with a specific flagging threshold\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread and flag it as a moderator\n\ttesting.SetOriginCaller(moderator)\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item has been already flagged by a current user\n"},{"name":"z_10_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a thread so the realm owner can flag and hide it with a single flag\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\t// Also freeze board to make sure that realm owner can still flag the thread\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_11_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_11_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditThread(404, 1, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_11_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_11_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to edit threads\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid   boards2.BoardID\n\tpid   boards2.PostID\n\ttitle = strings.Repeat(\"X\", boards2.MaxThreadTitleLength+1)\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, \"bar\")\n}\n\n// Error:\n// thread title is too long, maximum allowed is 100 characters\n"},{"name":"z_12_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Create a reply and a sub reply\n\tparentRID := boards2.CreateReply(bid, tid, 0, \"Parent\")\n\trid = boards2.CreateReply(bid, tid, parentRID, \"Child\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditReply(404, 1, 0, \"body\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_12_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, 404, 0, \"body\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_12_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, 404, \"body\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_12_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"new body\")\n}\n\n// Error:\n// only the reply creator is allowed to edit it\n"},{"name":"z_12_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Flag the reply so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"body\")\n}\n\n// Error:\n// reply is hidden\n"},{"name":"z_12_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_13_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagReply(404, 1, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_13_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, 404, 1, \"\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_13_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, 404, \"\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_13_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_13_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_13_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to flag replies\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a reply so the realm owner can flag and hide it with a single flag\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\t// Also freeze board to make sure that realm owner can still flag the reply\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n}\n\n// Output:\n// true\n"},{"name":"z_14_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_14_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteReply(404, 1, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_14_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, 404, 1)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_14_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, 404)\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_14_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent\")\n\tboards2.CreateReply(bid, tid, rid, \"Child reply\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Render content must contain the releted message instead of reply's body\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e This reply has been deleted\\n\"))\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e Child reply\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_14_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Call using a user that has not permission to delete replies\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_14_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to delete replies\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_15_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\tboards2.FlagThread(srcBID, srcTID, \"idk\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread is flagged\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_15_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID = 1024\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread doesn't exist\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread does not exist with ID: 1024\n"},{"name":"z_15_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_15_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/ufmt\"\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"original title\", \"original text\")\n}\n\nfunc main() {\n\t// Success case\n\ttID := boards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n\tp := ufmt.Sprintf(\"dst-board/%s\", tID)\n\tout := boards2.Render(p)\n\n\tprintln(strings.Contains(out, \"original text\"))\n\tprintln(strings.Contains(out, \"repost title\"))\n\tprintln(strings.Contains(out, \"repost text\"))\n}\n\n// Output:\n// true\n// true\n// true\n"},{"name":"z_15_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Create a board with a thread\n\torigBID := boards2.CreateBoard(\"origin-board\")\n\torigTID := boards2.CreateThread(origBID, \"title\", \"text\")\n\n\t// Create a second board and repost a thread using an empty title\n\tsrcBID = boards2.CreateBoard(\"source-board\")\n\tsrcTID = boards2.CreateRepost(origBID, origTID, \"original title\", \"original text\", srcBID)\n\n\t// Create a third board to try reposting the repost\n\tdstBID = boards2.CreateBoard(\"destination-board\")\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n}\n\n// Error:\n// reposting a thread that is a repost is not allowed\n"},{"name":"z_16_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 4)\n\n\t// Ensure that flagging threshold changed\n\tprintln(boards2.GetFlaggingThreshold(bid))\n}\n\n// Output:\n// 4\n"},{"name":"z_16_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nconst bid boards2.BoardID = 404\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_16_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(1, 0)\n}\n\n// Error:\n// invalid flagging threshold\n"},{"name":"z_17_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsBoardFrozen(bid))\n}\n\n// Output:\n// true\n"},{"name":"z_17_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_18_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_18_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\tuser = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid  = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_18_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tperms boards2.Permissions\n\tbid   boards2.BoardID\n)\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foobar\")\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new board permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_19_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\t// Attempt to freeze a thread on frozen board\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_19_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a frozen thread\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_19_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n}\n\n// Output:\n// true\n"},{"name":"z_1_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, boards2.RoleOwner)\n}\n\n// Error:\n// only owners are allowed to invite other owners\n"},{"name":"z_1_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n\trole  = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, user, boards2.Role(\"foobar\")) // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// invalid role: foobar\n"},{"name":"z_1_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole  = boards2.RoleOwner\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\") // Operate on board DAO members\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(0, user, role)) // Operate on realm DAO\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_1_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, user, role)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n}\n\n// Error:\n// user already exists\n"},{"name":"z_1_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_20_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a reply on frozen thread\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_20_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\nfunc main() {\n\t// Attempt to freeze already frozen reply\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_20_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// reply frozen\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.FreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// thread frozen\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// board frozen\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n}\n\n// Output:\n// false\n// true\n// false\n// true\n// false\n// true\n// false\n"},{"name":"z_20_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// unfrozen thread - should work\n\tr2 := boards2.CreateReply(bid, tid, rid, \"child 1\")\n\n\t// frozen thread - can't reply\n\tboards2.FreezeReply(bid, tid, rid)\n\tboards2.CreateReply(bid, tid, r2, \"child 2\")\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_21_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_21_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Set an initial message so it can be cleared\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n\tprintln(strings.HasPrefix(content, \"# Boards\"))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_21_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to set realm notice\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"Foo\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// false\n"},{"name":"z_22_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// realm is locked\n"},{"name":"z_22_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to lock the realm\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_22_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(true)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(true)\n}\n\n// Error:\n// realm and members are locked\n"},{"name":"z_22_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Lock the realm without locking realm members\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_23_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateRealmMembers(0, func(u boards2.User) bool {\n\t\tprintln(u.Address, string(u.Roles[0]))\n\t\treturn false\n\t})\n}\n\n// Output:\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_24_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid := boards2.CreateBoard(\"test123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleAdmin)\n\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateBoards(0, func(b boards2.ReadonlyBoard) bool {\n\t\tprintln(b.ID().String())\n\t\tprintln(b.Name())\n\n\t\tb.IterateMembers(0, b.MembersCount(), func(u boards2.User) bool {\n\t\t\tprintln(u.Address, string(u.Roles[0]))\n\t\t\treturn false\n\t\t})\n\t})\n}\n\n// Output:\n// 1\n// test123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj admin\n// 2\n// foo123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_2_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Test comment\"\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\trid := boards2.CreateReply(bid, tid, 0, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid == 2)\n\n\t// Render content must contain the reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateReply(404, 1, 0, \"comment\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_2_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, 404, 0, \"comment\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_2_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 404, \"comment\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_2_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Hide thread by flagging it so reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide thread by flagging it so reply of a reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"thread\", \"thread\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide reply by flagging it so sub reply can't be submitted\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_2_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_2_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"First comment\")\n}\n\nfunc main() {\n\trid2 := boards2.CreateReply(bid, tid, rid, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid2 == 3)\n\n\t// Render content must contain the sub-reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_k_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent comment\")\n\n\t// Flag parent post so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"Sub comment\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_l_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// cannot reply to a frozen thread\n\tboards2.CreateReply(bid, tid, 0, \"foobar\")\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_2_m_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, strings.Repeat(\"x\", boards2.MaxReplyLength+1))\n}\n\n// Error:\n// reply is too long, maximum allowed is 300 characters\n"},{"name":"z_2_n_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\u003e Markdown blockquote\")\n}\n\n// Error:\n// using Markdown headings, blockquotes or horizontal lines is not allowed in replies\n"},{"name":"z_3_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname    = \"foo123\"\n\tnewName = \"bar123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by the default board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_3_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, name)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_3_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RenameBoard(\"unexisting\", \"foo\")\n}\n\n// Error:\n// board does not exist with name: unexisting\n"},{"name":"z_3_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_3_f_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by another board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_g_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"short\")\n}\n\n// Error:\n// the minimum allowed board name length is 6 characters\n"},{"name":"z_3_i_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"barbaz\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_4_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleOwner\n\tbid     = boards2.BoardID(0) // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, member, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\towner2 = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin  = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, owner2, boards2.RoleOwner)\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, owner2, boards2.RoleAdmin)\n}\n\n// Error:\n// admins are not allowed to remove the Owner role\n"},{"name":"z_4_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\tboards2.InviteMember(bid, admin2, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin2, boards2.RoleOwner)\n}\n\n// Error:\n// admins are not allowed to promote members to Owner\n"},{"name":"z_4_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid     = boards2.BoardID(0)                                      // Operate on realm DAO members instead of individual boards\n\tnewRole = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole) // Owner can promote other members to Owner\n\n\t// Ensure that new role has been changed to owner\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin, boards2.Role(\"foo\"))\n}\n\n// Error:\n// invalid role: foo\n"},{"name":"z_4_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, \"invalid address\", boards2.RoleModerator)\n}\n\n// Error:\n// invalid member address\n"},{"name":"z_4_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, user, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.RemoveMember(bid, user)\n\n\t// Check that user is not a member\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n"},{"name":"z_5_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// member not found\n"},{"name":"z_6_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole   = boards2.RoleGuest\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, member, role)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, member, role))\n\tprintln(boards2.HasMemberRole(bid, member, \"invalid\"))\n\tprintln(boards2.IsMember(bid, member))\n}\n\n// Output:\n// true\n// false\n// true\n"},{"name":"z_6_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleGuest\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, user, role))\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n// false\n"},{"name":"z_7_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"test123\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tbid2, found := boards2.GetBoardIDFromName(name)\n\tprintln(found)\n\tprintln(bid2 == bid)\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_7_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid, found := boards2.GetBoardIDFromName(\"foobar\")\n\tprintln(found)\n\tprintln(bid == 0)\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_8_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\ttid := boards2.CreateThread(bid, title, body)\n\n\t// Ensure that returned ID is right\n\tprintln(tid == 1)\n\n\t// Thread should not be frozen by default\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// false\n// true\n// true\n"},{"name":"z_8_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateThread(404, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_8_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_8_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_8_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_9_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, title, body)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"},{"name":"z_9_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteThread(404, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_9_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, 404)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_9_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Call using a user that has not permission to delete threads\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_9_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to delete threads\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"}]},"deposit":""}],"fee":{"gas_wanted":"90000000","gas_fee":"900000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bgq2mHaqO+ClZqcBvMmMWga7izsxHfWWkLvVdUj/SREIux9mkLcHZopajDlzRU4k8U9+p/SzvdPV1ClD8QJjDQ=="}],"memo":""},"metadata":{"timestamp":"1743761702"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"RemoveMember","args":["0","g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zFD00e0aO8S4XCcGKK+hYFll9syWCwDLU552HISFFY136K4KdR7O3SYzcay0KJio6THBkoPzfjlp0pdrrSZaCw=="}],"memo":""},"metadata":{"timestamp":"1743761807"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["EmptyWithManyMembers"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"vNXG8vCPc5ta7xG0/BQCSnUVa38VwrZOtdy8pUPKITzPoiAuOf+ocKYSZ8eNNkh7IIeqjFYADPgOZeV4HvxhCw=="}],"memo":""},"metadata":{"timestamp":"1743761888"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ue4B6yp55w8jKpN2/TFsJrGhwsL0FQfrbFY59a0iYKLeVICAB5gIrsCf98/6Ct1/V6fU2vLJh0vpPekTtwc1Bw=="}],"memo":""},"metadata":{"timestamp":"1743761893"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1e5hud66rs7ye4zgeqmqvwfhurs2mnf408hdqcl","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"a6sqt1qst2TFlGCZoP5DLlOrC+145dUBL9Reb5duDYRGb8aWsRu1nlRurPbtCcig+kp7Nk1MyuMdUBL/lK7yCA=="}],"memo":""},"metadata":{"timestamp":"1743761898"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5","admin"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"AnS6SJIzlb3Z5lwMYoeR2KWH8TcOpbi/jH7Vsh9CIEn3KVSckMxDTaYk90fsCYHP2cPMbZfGQwENXQb+9a9bBg=="}],"memo":""},"metadata":{"timestamp":"1743761903"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g12chzmwxw8sezcxe9h2csp0tck76r4ptwdlyyqk","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lLmNQCvV7+oOKZucSXT90nYlTACWN6YEbkZKfccChBh/wUjeqLGS0YyszPxk7YOsj0K2/OGsrYOC0gukKjlMCw=="}],"memo":""},"metadata":{"timestamp":"1743761908"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1ym6zxff3xq7wfldcs3uyu7x7z40gstggcx8zdj","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zgzCQlf7PydhnCAGvd8Qx5PotGs1oRONk3nN95k2LIuFEEAVoHxGj+2PtMBQ1f91iTnBsJ1uKUuOJQ0OCsjTAA=="}],"memo":""},"metadata":{"timestamp":"1743761913"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["TheNumber42"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GJWNOcDkPKGY7PLPSuk2sMiLeBHeDfVKTSCR5ONQGp6pqI9iwCxj1H3cD+bfkCk1+p/UpfubXzU9Ya3q859gBw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["2","What's your take on it\\?","Seen in many places, unknown to many"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hA+wCreZUeme6OpRmNOJjo4Xwsz0he5X8mQ4g4MKVkeGqUwlIsG005FxDN/7RssNNFWH8EzGP4MGIozCwEA7AA=="}],"memo":""},"metadata":{"timestamp":"1743761923"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","What do you mean\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EIVelUPSStgGjqWLsj+NdD0fSHeZvm8Z7RnQvDQSpFuv7mHOGKV52jDZxWwH4lOHL2/e0vJKin2fWyXPF1ClCA=="}],"memo":""},"metadata":{"timestamp":"1743761928"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","よんじゅうに\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"rQ64TW3VyqAx0miELawdw5gR6g2lpNemxzXYq/kxToUNU8GYoXn4qWMO6otVdF+nsvQvkJfBBMHg9uIvDALSCw=="}],"memo":""},"metadata":{"timestamp":"1743761933"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","2","Cuarenta y dos\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y7zCrmgadsgAQCV6OiINH1LJmQ78gDYUTZ+ny0F1fNCL9nQPvbFTOwr7SX2kuaPe8iKbztZCe6N/1B//EEtpAw=="}],"memo":""},"metadata":{"timestamp":"1743761938"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ThreadsExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lH+1XZ2fVmGI2PXKfYUxKBFXKw3db+JjwAjECmsH4VXo+ppDtf79dEux0SdRltNdbx4zEW9O/3WENwu3hg5SBA=="}],"memo":""},"metadata":{"timestamp":"1743761943"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Seventh","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6NX0nRYSSn12bZ78/dmmYxWXM4IK9yQjLAomZn7edZ8Ri5BAtqZOSwvXbhZ0BFcUTgosLAgyrX30LteqkNnxBQ=="}],"memo":""},"metadata":{"timestamp":"1743761948"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Sixth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"sIPoU9jO89zc4y1GAYITh3PU9zJVGY3ugfSMsoBBxc93lOXDLAFUE+2AMQa/7Kwfyo1af4FXXFfygYCCICYSAg=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fifth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KdKslB6f6JkEB3boj5CZ1cIAOdAdF3bJ6cX6dsrT4XBK3u41XzmAK96gilAtVcVpCqNpnLul6wbbL+0exHd4AA=="}],"memo":""},"metadata":{"timestamp":"1743761958"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fourth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"D1fMGgWqqsxK7vF0ojPp36NpP6eU+1LsEUdbC2NL/xjhlsZfgU7Vu2XmXjFhFM9B2VGCwUBnEaMVufr3rW1HCQ=="}],"memo":""},"metadata":{"timestamp":"1743761963"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Third","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4uy78ABsfnWCUqmuzoU8ZUdJ7jpJrZa7J/cv/kvFT3peJhE2Rv7VrkTYcaZHKKjzWG14JmND4ZaaJnNr907Ag=="}],"memo":""},"metadata":{"timestamp":"1743761968"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Second","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"5dDdgrVSfFfD9kYaBD369pxn1g7l6jDOaNANwcuxGwhUaT9j5pcroAqHHTu5UJf4sekSNb/nSNEp37ucimaCCQ=="}],"memo":""},"metadata":{"timestamp":"1743761973"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","First with many Replies","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"OmSespthAIe99nCg3NNVqwdogdID85sViEarnls5JCXhygv/lzl79T4CFQIa42T13gOLMkPX9fm7OwT8mU1RAQ=="}],"memo":""},"metadata":{"timestamp":"1743761978"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZDniAUL1tJpPm4oBs4ExDExl8MJMedEzUBdezq600CaJEYvBznvd3vueZ5siRp7tHdaV0DgNmcXzZ+OxpqcQCg=="}],"memo":""},"metadata":{"timestamp":"1743761983"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","8","Sub First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F8ifXbTQbXb5RSL61RUb9S0tBzok3uo8RTDhh0501znHUYKYILNSitQg9Ak6XmwcV0UQcgO9zzLx316DBB7YBg=="}],"memo":""},"metadata":{"timestamp":"1743761988"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Second"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CkwjnV+bUGNb/AghoAxE8xc8/BZwAp5Qdhy4xkfZrtUpxGDRt1ji9DaM2ZzUQnDBQeXiev5RiZyA7I4gwva7Dw=="}],"memo":""},"metadata":{"timestamp":"1743761993"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Third"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3sNgEYAAHfXxWFQdYzafqv5vsFDEBMdCE3RRaKyQEQxpX92yNavn05wq7EtOeiIymOD1B7LWBUCDIGMxO27iBw=="}],"memo":""},"metadata":{"timestamp":"1743761998"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fourth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yVMsA1dVS5o2dpm1EoxH55Ybm8sBwbmeCFhyboRoWjp9qnZhLXLvzu73jo0nZa8xJialU0upoHcWrr76K5rPBw=="}],"memo":""},"metadata":{"timestamp":"1743762003"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fifth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UEHh1VeBqkL3lCultuOyGU0LDvVTlrhg6wTJqAn+5gF2QUKWZi3Gn4CBbkoY0byq1OCDXr6R/K+SP3aB8QObAw=="}],"memo":""},"metadata":{"timestamp":"1743762008"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Sixth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3kby94L/InKntqzU+T3NRDno58jFcx87O0/FldOxJDlcT56+WaKthft6n+Wp0Jl1lz8Xv3LmgwGWQ3Pc52+oBg=="}],"memo":""},"metadata":{"timestamp":"1743762013"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Seventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"L/zuxl0k3DoZFKNs/kGgaEh1ROr/YafHDEmXlJw9aD/jH2Mbm/PhvU3La/o0PchdGC0A42xuwZ+SeMQIyUVdCA=="}],"memo":""},"metadata":{"timestamp":"1743762018"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eigth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VpVi4ICdRdDP3sT2HJNj5Vl5gFKZxgy+58rqpnkR8l1QBLPZDjP+hklXzsmhDouMdI+ssFCTU4mD1/W7sGUQAw=="}],"memo":""},"metadata":{"timestamp":"1743762023"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Ninth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u/zQSKIjPHAPocj4hEnEw441VWRByccTtenD12X8cBnYxBDHNV87PR+JBWUjNXN7GLZfPcjK5igMD2l5IqhwDA=="}],"memo":""},"metadata":{"timestamp":"1743762028"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Tenth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tnUlmhe3JjOtRxnpCDbYcpaeF3rNa8N0F5EYwJU8ba8zDX9St1hiBp66tScfyYbTeLE2aTRmUa8E+zh730++BA=="}],"memo":""},"metadata":{"timestamp":"1743762033"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eleventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"q43M1mc9mbW7TJWgTyT1L37ePTd7N1hkAWbUUfMztPKCblhBrECCKrzMwiE5iL+afNgiWGZcCpFc5KwtwPSyCQ=="}],"memo":""},"metadata":{"timestamp":"1743762039"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ReadOnlyExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"STdbtDRKw327m8lDyp9W1Fnr2A3iC2uws1pBNHuL9xya2JE6IYbU0Fe12FThHOLWK80Yp+L43bgVNOSOamrWAg=="}],"memo":""},"metadata":{"timestamp":"1743762044"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["4","Example Thread","This thread shouldn't be writable"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaJ2B8/gC/qRQxVQVYF4TUIkqDZiwqa1sqfTP+eIV8Q7gkx1sTOSqcWqvg5mOWw6wBTH9LhUi9lSXVYAUw7eCA=="}],"memo":""},"metadata":{"timestamp":"1743762049"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"FreezeBoard","args":["4"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SmNrbgokoxiJTXtSIymwGMBphqmB1J06gs/jdVJ1XKUuRO3CMmaJ5ytxvmVvwBlAja4QqA1T7bcgto5T8tv/Cg=="}],"memo":""},"metadata":{"timestamp":"1743762054"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["RepostExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jPxomuyfqs6yS9mJ1zXaTs9FWXwgPHaVJcH6/ADQ67I3vPXMxoKqJstfrbxMrvuuqtUPxU+pTgv3Im2lBV+qCA=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateRepost","args":["2","1","Custom repost title","Custom repost body","5"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VLCyyn5BwJZr8c7LJIX/9fiycuO7cfuq8Ulq6uCa7ZTmaUvPe7Mb2K54gI+4hDxEC+TBNLCTAr4W0YDi7uuaCQ=="}],"memo":""},"metadata":{"timestamp":"1743762064"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HUsxXJsbLLE7eqalnFbxs6QLrCECri8DfkKxQ7I0jDcoAuqpdwFv0TO1Y0WqpYAp1otB2t+BUQoG9VXhmYk3Dw=="}],"memo":""},"metadata":{"timestamp":"1743762325"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XQlmGs92NlV8UrVFWCivs35isbsW6JNzJB0nmE3vvHZCqpozufS9D9wGALa3Hu0Q9Kpd3d5x2WZ+q2iTmnOxAA=="}],"memo":""},"metadata":{"timestamp":"1743762441"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ua3nwMeerrzI17poTLZrtcvFkUSI0DU94fhwdpAZ0sj3oX+Zdy58QCBr99lqnJK884I7Qv3lORzBynXG5jbwDQ=="}],"memo":""},"metadata":{"timestamp":"1743762466"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743762511"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762858"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1aykqe5ddemku5mwd3elmwtpj8jgss47xrqpag4","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"chG844+xbriyl9WGrlc6xkHm736dDMmfgMfPREBqaiPEII5TfCVIbQ8q6DSR7LSm2+Hja93gLN28dYpl/In2Dw=="}],"memo":""},"metadata":{"timestamp":"1743767985"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1dtuj65mgja87gh0c45pd3rt4cah0kkw9lzld4y","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HKCPLxCVbpHst0ip432MlUIpiFmurceZOAjNZOCjq3aXAfsNREbyej3mLe240/+w4d7OeGD4LFB/ninsfphACA=="}],"memo":""},"metadata":{"timestamp":"1743768151"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743769312"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["test-manfred"]}],"fee":{"gas_wanted":"50000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"4xO97j7lj2RX9s6xjyqRDNGa8qs6kEShqhOJIObF+nH9iKCbmHagUmAJgVbgdauLbAzMMLlx6e05HgwXESc3Cw=="}],"memo":""},"metadata":{"timestamp":"1743774399"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["6","testing testing","👋"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1ZtT0NfPPwkk8JYdIJD/IEwmoveEfqV53nerV1Jt4K4AKhIHKr//2rMglFermH9UI7JPWIhf8sADVOONCPvCA=="}],"memo":""},"metadata":{"timestamp":"1743774450"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"9104212","gas_fee":"4742446ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"o+0plDtw6ntbQncO7v5Y1GqAV5NE21j8bDyIcKkKMqGO5qYPrutx4yl5WPJAoGz5pg8Howi/Aq/wJzxWHPXjCw=="}],"memo":""},"metadata":{"timestamp":"1743775038"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743775997"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776002"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776017"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"UpdateStatus","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"abVD8zghTuhurQtvCizQ+m2Lh72r0t0AJHh2dt3e+kSQOqjFfZtJ0xO5eNlHm8Kj7nRvTjeVoqmzWdYE3b/sAg=="}],"memo":""},"metadata":{"timestamp":"1743776022"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743776083"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hello","path":"gno.land/r/test12/hello","files":[{"name":"package.gno","body":"package hello\n\nfunc Render(path string) string {\n\treturn \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/demo/eco","func":"Render","args":["Deployed through play.gno.land"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NXiO4V07kWqpEPpSYKqmTsQlZO06J6v5OUF72Mr79nhgleTapAVcCHDnsIx0TxnRZzMNbauF/eXro5zujLUKDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743788578"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hworld","path":"gno.land/r/g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5/hworld","files":[{"name":"package.gno","body":"package hworld\n\nfunc Render(path string) string {\n  return \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/sys/users","func":"ResolveName","args":["abc"]}],"fee":{"gas_wanted":"3428737","gas_fee":"7144ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F0m9qBwjIzAghFc0JygVxaAsdQhQqnpQQw/gaC740ZTHBJL4/TrpaqxPBTdmrtKNIoQsTsQXkC1LZ+fk9BKeDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743793364"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g150gdvn780ws7a3s9qpdvv7h4d9hq6vh672ely0","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yZMsHEcc7RI4t9HxQZKQikdr8da5aREuDgdhlUOTZXd5xpQXiWU1C2XeFG2pMAMp3CW2jUbaoQe4IJ0PisblAQ=="}],"memo":""},"metadata":{"timestamp":"1743859813"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g150gdvn780ws7a3s9qpdvv7h4d9hq6vh672ely0","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yZMsHEcc7RI4t9HxQZKQikdr8da5aREuDgdhlUOTZXd5xpQXiWU1C2XeFG2pMAMp3CW2jUbaoQe4IJ0PisblAQ=="}],"memo":""},"metadata":{"timestamp":"1743937361"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["FirstCatPost"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPVLnUetx7hCfdd5j8R2FiLe3q/I366w2fZvYsdwSqtmOy534t58ykbsw5gRdE0cfWZsROW5a/qB2VWkSCpBCA=="}],"memo":""},"metadata":{"timestamp":"1744009485"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateThread","args":["8","First cat post on boards2!","Katt Williams is an American stand-up comedian and actor. https://en.wikipedia.org/wiki/Katt_Williams"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"J09/6ygdvvm58J3jRqMSxafvYfmvs/NzXsmoCjNt4mAkdsJ/W6jJ9rdTd4EJWwIr08M39Drl+1G+kA0UydKaAg=="}],"memo":""},"metadata":{"timestamp":"1744009736"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["FirstCatPost"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"IOIyEHh8R0fPS4Z/y39Ly5T6h0QMrzeOtIauFapluMfR/TuOKD77EVc679KY08ZzsN15SCrdVa4XGUXcmn2XCQ=="}],"memo":""},"metadata":{"timestamp":"1744009852"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["7","First cat post on boards2!","Katt Williams is an American stand-up comedian and actor. https://en.wikipedia.org/wiki/Katt_Williams"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"N7L0GQbNWXkRA8o6HWji853DzaZPgNEB7MVQ//QMvGqxb0LxlSh+dCHDOljgmB4f/lLC76c4lSAaM2E528FrAA=="}],"memo":""},"metadata":{"timestamp":"1744009907"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g14n0zsnsk054uxwvnwmmqyrq6e87ynk5vq98qqp","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Kf5rmwnMs/nfl+VXJtQqrhsUFZqTQqybk5ADrsI5O2Lt9DVf+QqRP9vswBSC/WpPkgGMPeFBgQaLHpOi5awWDQ=="}],"memo":""},"metadata":{"timestamp":"1743587748"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1dzzx5qwcmawqnhhd76ehkteas5v2dg42hqnd7g","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"pfIacFtVu0UK1MgJVmS1uGL6BRTXTkc9SQ7qHy+Zh1xZcEhs0CJv+ZTv/D7TuHrgoXBTNOi7qLKgo0K36uvBDA=="}],"memo":""},"metadata":{"timestamp":"1743587759"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587924"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587939"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743587980"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743588120"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743588221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591981"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591991"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZAHmHJr6/jLN+AjWJQsb+t0vv3lF+WAfpd8525qOiqmXO1DeZ/rV+bzzh7fkaAAmTi9F/5Z00T8EF7sku2YBDA=="}],"memo":""},"metadata":{"timestamp":"1743597359"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2231690ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lBXZ55L/zJcSu0Nz3CtVpRumcACjpEVubgsLPiCKApSeOjEnmuuVkxH2mnh1ZMWt1nDVkbT4Zk0FBO8ythcADQ=="}],"memo":""},"metadata":{"timestamp":"1743597379"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887428","gas_fee":"165039ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CfKWRWGdsPCxkfaq3HED6HeeaMrLAQl4JfoKLXBzORDoqSui9g0pwgOvbMLAJQh1WsURlVQUKCT9bBxJIKGxDg=="}],"memo":""},"metadata":{"timestamp":"1743597384"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"3059175","gas_fee":"6374ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"U/Lh/vqW/msAgD5fgvDz5Eq1UBCZXknYYLXoKUKT0er1CEFGSZjihcKI4TZK16Rt0vcFnL2kR85a6+HsO3TJDg=="}],"memo":""},"metadata":{"timestamp":"1743597409"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Z3rGTeiuwQxAO1383d2XyzJ3ny+R6lVsMCH3AfNnQfHodVZUZlD1UyLA6hk/LqmMgMGhwQNMeroewPj6tNwhAQ=="}],"memo":""},"metadata":{"timestamp":"1743606306"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"miFYsl850KdWfaYVeUCHFUBQHWw0FUfKp/gh/tCTiIOIBm2jg+ki3YtWZkjq2jUCoHeN+nHx1smTN8xuOU6XCw=="}],"memo":""},"metadata":{"timestamp":"1743606668"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"9hNkFMu/xsQqvduZoi/8CZDiTtl9CFrjecn8LbIg1aVMvstwEYqA9O7HKQ8blamgzV7Seyv8tzdu9fYGjU2GDA=="}],"memo":""},"metadata":{"timestamp":"1743607723"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NRLFNdnKicUZR6tFldf8s4dn3L2xnF+TrH/JoJbAteD2zrHtiLjHL4faTopSaABlpgVAOkVGUOMILwokq+lkDA=="}],"memo":""},"metadata":{"timestamp":"1743608020"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3bt2TuGnvIPEFRLQmvr9fTNpmw9vddoc7JciKsGoLiP2LEGkuvxB+2sS/3zz6pbvptI6VIC0j3F3TxZiG2dpDw=="}],"memo":""},"metadata":{"timestamp":"1743608226"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n","admin"]}],"fee":{"gas_wanted":"8066534","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h9m9JF3DGXSQEpWHgk633+sSZvuQhVXiyQqXxihNqnWwwdPIUcG9EhGYZRRulcUDjNx9IuzALdpEzFeneOmhCA=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743608291"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"8967781","gas_fee":"18683ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KDUHz1HMhnSVLUZj4hLoxE7FlKqopgGbZMTXpkHV8jjul6TDBgdrfq5AyNFX3fH2sKjVTYGiFtEP3/cuV+m9Cw=="}],"memo":""},"metadata":{"timestamp":"1743608301"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743610126"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"DeleteTodo","args":["0"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ypbOAcxpAUGaUQt6F6KB3OhqJN2cRoD3dF8bkqySqRsVfhrXQJ3O/B9P2ex0jeKkezVoeRIpw2aN+2dwUa2hDQ=="}],"memo":""},"metadata":{"timestamp":"1743611628"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g14gvmle0a5hln0ct7wv857gucr7lmeust35736r","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kePfJ+g+ai4gbewkzMdmETesCmNI4i5ecAxwYpC4S6roDM3odtc8gDYipZqX7r5p37NP5p57MkhcMgODCZhdBA=="}],"memo":""},"metadata":{"timestamp":"1743662226"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4xzI4KB87lg/4EAWdmOPjO/R7VMfE8qE3jHysIvQuOlVylig2lajrqO+Bds39v5UqglfUvVS+mpWQ1KWUIEDA=="}],"memo":""},"metadata":{"timestamp":"1743663236"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"5000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Mq9IBbwNUb1YPvhyQIQhuw/eoxE2a4ue17kTC9Io08f9+CxgmjeHFuxfvteS1xsGsTe8qVVQemJHt10w+GSjDA=="}],"memo":""},"metadata":{"timestamp":"1743663533"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"10000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"MukwMPbas5Oz+wAk+oIfksfQx8DykYMmhaYaOnMynhvtwxNBlYTo4sAAkz1cVPLHYTu5czK6iBDFekbaOjVYDQ=="}],"memo":""},"metadata":{"timestamp":"1743663709"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hZQyD4QXJWRDvfK1fwSMGbJqGAQ6QI6jtPCuOM8yXoguotR561mxeGB6mEztRI0XE0SVsuw3qpzs9Rda9KaACA=="}],"memo":""},"metadata":{"timestamp":"1743666971"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2233340ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"d6iaXDqBE5lH4dYLNIfcEyb9dpHEYoBD1vD7B5sQQJ8c9/7e/ujH30RV7QZTn843pIWTplZj2OQ+GoScxXPPAg=="}],"memo":""},"metadata":{"timestamp":"1743666986"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","send":"1000000ugnot","pkg_path":"gno.land/r/gnoland/users/v1","func":"Register","args":["keyboard_worrier"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"WZ+i8zhkmdovnOGvtVlX0eK04aS2h1730ztiMLbsw0pAHohEIq1jkYrf8CeIcJFTlGRApmQkvRSytq7bVa7RAQ=="}],"memo":""},"metadata":{"timestamp":"1743672162"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743674585"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743675500"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676274"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676415"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676425"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676440"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676450"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676465"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","send":"","pkg_path":"gno.land/r/demo/userbook","func":"SignUp","args":null}],"fee":{"gas_wanted":"3000000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"b6gylbXUNmIJc8+UTKOqtssB3dtRA+9q46TN/WGgpL9pSCAwqVjCVO3BsUCYN4wyi4SFchw0fiUbUbuqOL9wCQ=="}],"memo":""},"metadata":{"timestamp":"1743676600"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"RemoveMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n"]}],"fee":{"gas_wanted":"7891622","gas_fee":"16441ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kFvFubneBzNxFJJsqdcFot4DI76vFnUL61hImedWMOYPT4oNpTPvu35RTbjH/CIjQ2ZbG21nvKR1cq72TNGIAg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677621"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","admin"]}],"fee":{"gas_wanted":"8066714","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TAAONmyVenhy51nV9BGWz5k4HFfNuFr8r7bwnbaBrHkB7w0knuA3L+8qMhD1h7Kp8KeIKKUnE8QMZayYtJMvCg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677721"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887404","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Arj8N87k6sLPuCZEV/uB92axfgpJeojYTh0C6QsSgUHJOeP/v7Sdn25cY045uI+5IiKFqiWhyZBCglJqwGLbAQ=="}],"memo":""},"metadata":{"timestamp":"1743677742"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["hello !"]}],"fee":{"gas_wanted":"887311","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"/GZGejcRk3HCoQIHSbhiOKnS5Dpjycv0Ke9W4W6vbVlF79A6YoudY/KBavSKEUmNR0Y7lyGxlCa+etTe7UT5Dg=="}],"memo":""},"metadata":{"timestamp":"1743677757"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"k8yjgyUuV0ZGtPIzDRM6VHiQExeKiRwy93C0tBfYn3kVZHvpIesoCGGWGvWF0zfoUXDJtZxUpC5QKiazh+i3AQ=="}],"memo":""},"metadata":{"timestamp":"1743680159"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"ChangeMemberRole","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6Ofd6RIF+1UULOLk50dyYYUlkPK5IZ/4Mlp/qHzeIGZrXrxck0lJ/saC99ZP/3+ughHkahxyx6eHU6nZG9lfAg=="}],"memo":""},"metadata":{"timestamp":"1743680391"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1721880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"FT0UHoGLEjePQfFtU1tyQ9qe7FxvdzTar5j1Xl00ZPozmei/qvvLGl8YhYi0V8sSJVouI8borYvb3dpqIQC/Ag=="}],"memo":""},"metadata":{"timestamp":"1743682979"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1d2hvkqhqckhzpaum09c002fesdw89qrcg9zqws","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"eSFCEK9IO/P5jxlfnbp35xVVYo36+CiOFJz/JQABTf9r/+da5JOSdgUemoC7R1EvJE9HCeJ2XWmbu0j5K31yDw=="}],"memo":""},"metadata":{"timestamp":"1743683221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1lrsrj4auaffjk538w3x2c9gzyth2m0n39zcg6d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"V7WYKzC8VemKyowufMneyzt0CQ6PR2RtCEEMnG4Jwx9CNVCNP6e54vE00yweRc5P2LU0+m9ZMOFUbblPQsY+DA=="}],"memo":""},"metadata":{"timestamp":"1743704885"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateReply","args":["2","1","1","Hey hey hey"]}],"fee":{"gas_wanted":"60000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bY/5T4aU3MOrBezBKCFXUR2RgMmPxpHFwi/xI6ga1b2u3JRxeYQx1+bOZtqknyFa8Feenu3GclmRnfknOQDyBQ=="}],"memo":""},"metadata":{"timestamp":"1743711043"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateBoard","args":["aeddi"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UlcPNzTB9SRYFhru5eBzZkqx1z6pk/iuEkbLCBEyI4QQKT75/GIsoVmR3Q0OWv9BEqzn6iep89664ieAb17KCg=="}],"memo":""},"metadata":{"timestamp":"1743711163"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g16znvp6wxupkkds8mmmtxhvmdly08xpa4rqagp3","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"BfNTMw8/jbCjUAxbYJSqAx71LTglT2ZB7rErSOurWZwbtFbHT2pMkbyYJym6agX/S13Ms+8RYPySznleZZy2Cg=="}],"memo":""},"metadata":{"timestamp":"1743712058"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateThread","args":["3","This is a test","Hello World"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1xJIqIyGXcSfsRczg0T/hKdr+hED2UDE0oCA/7YyQcna9Y2LtGmivjxAqiR+/E3Qa876okANEwvPjafqiLTAg=="}],"memo":""},"metadata":{"timestamp":"1743712737"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1648310ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"E3EBw9aZXdSZwrwQN9i2bQjTGgpMeFRhJS9EjaEJENZdnjkmkWXiM/8jQi026/ELjf6nV7oC77ciysIt3+FyAg=="}],"memo":""},"metadata":{"timestamp":"1743715914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EUy4N/WGhGY7IyvxkWJSpvvMm5UKPWmtuZYPwSE8JUQJ5/H3n6b8Xyljv6d+4xfO02mpmsqg57L3LY6PEcFiCw=="}],"memo":""},"metadata":{"timestamp":"1743738197"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XC5tB4Ww+jD/lgfSzvcKBmYg8nP697HYElMuyCwuArt2lo1NczPDAAHwjny191b1xy/8Pz2uae+iI9xGPXrOBQ=="}],"memo":""},"metadata":{"timestamp":"1743738288"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"DeletePost","args":["1","2","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SEMazbhceoUeLcw20UvlJqjlsT+oSRAOqdiA0bIeCwIex6a47RH45NT4qB644ulQ6YiRv9kD7sOS3sf8OKiUCA=="}],"memo":""},"metadata":{"timestamp":"1743738333"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3xdY2zUEaSvL2+NoPTHTD3X2FZ1Ehg/xPBZRRJi2Ylm6LU/F+HmMG0YhLVkvR5lEea0en2+Kn8UhdIgdPjlkAA=="}],"memo":""},"metadata":{"timestamp":"1743738469"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GCtUiktIhSyqpETUMRR/0Ty6v80QbmeROULnTsW72XKvSQZF1enMC90gtSn0F3kidponqgEAnTkrWoBvjTJVBg=="}],"memo":""},"metadata":{"timestamp":"1743738680"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TH4yuyDvuq6andRzdObtjw6Dzpaw7zqjNyoCw1FC07ipn9ZVUWcFIcPLM1eRU44RQqFtWQ7LhlDymM5LiS/9Aw=="}],"memo":""},"metadata":{"timestamp":"1743739027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"9000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"x7EtVQUYGVRT3Uo09arsuKUCOFQPhvg5718Vg6o3A74KWzqlUdT07sAADvGOCJxV22MBwe8ZLIMlEHx++NdJCw=="}],"memo":""},"metadata":{"timestamp":"1743739047"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ABOlkSDcCQJVf7mjnItLyRQyJjbSYLRXagmMz8poqvkjX1oTi2NGpNH6zu7466kPlFHmESXvy6di9sNfLhKjAg=="}],"memo":""},"metadata":{"timestamp":"1743739590"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["2","2"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kYuW3zW5gf3ruKjUwHJirEXeQYRcwyp6DSm9Ev+un2MNqF98LUiq51jNEBMKTLSpa3tA14JycfVXGm9WWlc/DA=="}],"memo":""},"metadata":{"timestamp":"1743739625"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1p5pa2sp4elcja2u8wn36zv3plsyp8xrqgz0usf","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y3k24ayy98evfOxRipkejsxyO6e4KpGvp3g18WK/I5dpHl6S3+X1YBqS4nsYvlUgd2pS1jKXNKyal6nfZE3fCw=="}],"memo":""},"metadata":{"timestamp":"1743750714"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fh2rWd2kWcbkBtMD/lkvdQTyb+qJmm41PqTxvrGs1/DHXFzxUy/ObzI9yR3WTafkheAaT3Hk+QcWh7C8eZJJCg=="}],"memo":""},"metadata":{"timestamp":"1743750895"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["aeddi-testing"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fosRIYGMBTklap54MeOskYvZ0qhOYfv4NiUXCPQtsncG2mKLibB8uR0YgN6VNPb1B/QkbY0CYjkvSK8rjYpUCA=="}],"memo":""},"metadata":{"timestamp":"1743751141"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","to_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","amount":"1000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Qg0qeTKOZCtxt3SYcwws9gIgf9EdulRfhcCeYa1mcfCCpynY3Qof2tctuQJ0YwdA73ckJC+5tosyt8Se54xcDA=="}],"memo":""},"metadata":{"timestamp":"1743755182"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KEh1CNIKget+9RJs7jwY0v+su73iInpdjp3/Qxo9FmgxZdreA4z7IOSEvBDCAVlL7xzLgj8NBIckrhgBXg6CAQ=="}],"memo":""},"metadata":{"timestamp":"1743760782"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"","pkg_path":"gno.land/r/demo/wugnot","func":"Transfer","args":["g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","-1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPbLggW1eugeEhTDF3cphB7ILmOsQpaE59va4Kf7hSMP3MTANuiTBVMcTJitdDEFLgWFCKl4JzzLpI69WgLcBw=="}],"memo":""},"metadata":{"timestamp":"1743760847"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761662"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","package":{"name":"boards2","path":"gno.land/r/devx000/gnoland/boards2/v1rc2","files":[{"name":"board.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\ntype BoardID uint64\n\nfunc (id BoardID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id BoardID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\ntype Board struct {\n\tid        BoardID // only set for public boards.\n\tname      string\n\taliases   []string\n\tcreator   std.Address\n\tthreads   avl.Tree // Post.id -\u003e *Post\n\tpostsCtr  uint64   // increments Post.id\n\tcreatedAt time.Time\n\tdeleted   avl.Tree // TODO reserved for fast-delete.\n\tperms     Permissions\n\treadonly  bool\n}\n\nfunc newBoard(id BoardID, name string, creator std.Address, p Permissions) *Board {\n\treturn \u0026Board{\n\t\tid:        id,\n\t\tname:      name,\n\t\tcreator:   creator,\n\t\tthreads:   avl.Tree{},\n\t\tcreatedAt: time.Now(),\n\t\tdeleted:   avl.Tree{},\n\t\tperms:     p,\n\t}\n}\n\nfunc (board *Board) GetID() BoardID {\n\treturn board.id\n}\n\n// GetName returns the name of the board.\nfunc (board *Board) GetName() string {\n\treturn board.name\n}\n\n// GetURL returns the relative URL of the board.\nfunc (board *Board) GetURL() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + url.PathEscape(board.name)\n}\n\n// GetURL returns relative board path relative.\n//\n// Note: returned result is not escaped. Use GetURL to get URL-encoded path.\nfunc (board *Board) GetPath() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + board.name\n}\n\nfunc (board *Board) GetPermissions() Permissions {\n\treturn board.perms\n}\n\n// SetReadonly updates board's read-only status.\nfunc (board *Board) SetReadonly(readonly bool) {\n\tboard.readonly = readonly\n}\n\n// IsReadonly checks if the board is a read-only board.\nfunc (board *Board) IsReadonly() bool {\n\treturn board.readonly\n}\n\nfunc (board *Board) GetThread(threadID PostID) (_ *Post, found bool) {\n\tv, found := board.threads.Get(threadID.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (board *Board) AddThread(creator std.Address, title string, body string) *Post {\n\tpid := board.incGetPostID()\n\tthread := newPost(board, pid, creator, title, body, pid, 0, 0)\n\tboard.threads.Set(pid.Key(), thread)\n\treturn thread\n}\n\n// NOTE: this can be potentially very expensive for threads with many replies.\n// TODO: implement optional fast-delete where thread is simply moved.\nfunc (board *Board) DeleteThread(pid PostID) {\n\t_, removed := board.threads.Remove(pid.Key())\n\tif !removed {\n\t\tpanic(\"thread does not exist with ID \" + pid.String())\n\t}\n}\n\n// Render renders a board into Markdown.\nfunc (board *Board) Render(path, menu string) string {\n\tvar sb strings.Builder\n\n\tsb.WriteString(\"# \" + board.GetName() + \"  \\n\")\n\tsb.WriteString(\"Board created by \" + newUserLink(board.creator) + \" \")\n\tsb.WriteString(\"on \" + board.createdAt.Format(dateFormat))\n\tsb.WriteString(\", #\" + board.id.String())\n\n\tif board.IsReadonly() {\n\t\tsb.WriteString(\"  \\n_**Starting new threads and commenting is disabled**_\")\n\t}\n\n\t// XXX: Menu is rendered by the caller to deal with links and sub-menus\n\t// TODO: We should have the render logic separated from boards so avoid sending menu as argument\n\tif menu != \"\" {\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tsb.WriteString(menu)\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(\"\\n\\n---\\n\")\n\n\tif board.threads.Size() == 0 {\n\t\tsb.WriteString(\"### This board doesn't have any threads\\n\")\n\t\tif !board.IsReadonly() {\n\t\t\turl := board.GetPostFormURL()\n\t\t\tsb.WriteString(\"Do you want to [start a new conversation](\" + url + \") in this board ?\")\n\t\t}\n\t\treturn sb.String()\n\t}\n\n\tp, err := pager.New(path, board.threads.Size(), pager.WithPageSize(pageSizeThreads))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tthread := v.(*Post)\n\t\tif thread.isHidden {\n\t\t\treturn false\n\t\t}\n\n\t\tsb.WriteString(thread.RenderSummary())\n\t\tsb.WriteString(\"\\n\")\n\t\treturn false\n\t}\n\n\tsb.WriteString(\"Sort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tsb.WriteString(newLink(\"newest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tsb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tsb.WriteString(\"\\n---\\n\")\n\t\tsb.WriteString(pager.Picker(p))\n\t}\n\n\treturn sb.String()\n}\n\nfunc (board *Board) incGetPostID() PostID {\n\tboard.postsCtr++\n\treturn PostID(board.postsCtr)\n}\n\nfunc (board *Board) GetURLFromThreadID(threadID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String()\n}\n\nfunc (board *Board) GetURLFromReplyID(threadID, replyID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String() + \"/\" + replyID.String()\n}\n\nfunc (board *Board) GetRenameFormURL() string { // TODO: These type of functions shouldn't be part of Board type\n\treturn txlink.Call(\n\t\t\"RenameBoard\",\n\t\t\"name\", board.name,\n\t\t\"newName\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"FreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t)\n}\n\nfunc (board *Board) GetUnfreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"UnfreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threadID\", \"\",\n\t\t\"replyID\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFlaggingThresholdFormURL() string {\n\treturn txlink.Call(\n\t\t\"SetFlaggingThreshold\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threshold\", \"\",\n\t)\n}\n\nfunc (board *Board) GetInviteMemberFormURL() string {\n\treturn txlink.Call(\n\t\t\"InviteMember\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"user\", \"\",\n\t\t\"role\", \"\",\n\t)\n}\n\nfunc (board *Board) GetPostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateThread\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (board *Board) GetMembersURL() string {\n\treturn board.GetURL() + \"/members\"\n}\n\nfunc createDefaultBoardPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(\n\t\tRoleAdmin,\n\t\tPermissionBoardRename,\n\t\tPermissionBoardFlaggingUpdate,\n\t\tPermissionMemberInvite,\n\t\tPermissionMemberRemove,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadDelete,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionThreadFreeze,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyDelete,\n\t\tPermissionReplyFlag,\n\t\tPermissionReplyFreeze,\n\t\tPermissionRoleChange,\n\t)\n\tperms.AddRole(\n\t\tRoleModerator,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyFlag,\n\t)\n\tperms.AddRole(\n\t\tRoleGuest,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadRepost,\n\t\tPermissionReplyCreate,\n\t)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n"},{"name":"board_readonly.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"time\"\n)\n\n// ReadonlyBoard defines an interface for readonly boards.\ntype ReadonlyBoard interface {\n\t// ID returns the unique identifier of the board.\n\tID() BoardID\n\n\t// Name returns the name of the board.\n\tName() string\n\n\t// Aliases returns a list with previous names assigned to the board.\n\tAliases() []string\n\n\t// Creator returns board's creator address.\n\tCreator() std.Address\n\n\t// LastPostID returns the ID assigned to the last created thread.\n\tLastPostID() uint64\n\n\t// CreatedAt returns the time when board was created.\n\tCreatedAt() time.Time\n\n\t// IsReadonly returns true when board shouldn't allow the creation of threads and comments.\n\tIsReadonly() bool\n\n\t// MembersCount returns the number of invited board members.\n\tMembersCount() int\n\n\t// IterateMembers allows reading the list of invited board members.\n\tIterateMembers(offset, count int, fn UsersIterFn)\n}\n\ntype readonlyBoard struct {\n\tboard *Board\n}\n\nfunc (b readonlyBoard) ID() BoardID {\n\treturn b.board.id\n}\n\nfunc (b readonlyBoard) Name() string {\n\treturn b.board.name\n}\n\nfunc (b readonlyBoard) Aliases() []string {\n\taliases := make([]string, len(b.board.aliases))\n\tfor i, s := range b.board.aliases {\n\t\taliases[i] = s\n\t}\n\treturn aliases\n}\n\nfunc (b readonlyBoard) Creator() std.Address {\n\treturn b.board.creator\n}\n\nfunc (b readonlyBoard) LastPostID() uint64 {\n\treturn b.board.postsCtr\n}\n\nfunc (b readonlyBoard) CreatedAt() time.Time {\n\treturn b.board.createdAt\n}\n\nfunc (b readonlyBoard) IsReadonly() bool {\n\treturn b.board.readonly\n}\n\nfunc (b readonlyBoard) MembersCount() int {\n\treturn b.board.perms.UsersCount()\n}\n\nfunc (b readonlyBoard) IterateMembers(offset, count int, fn UsersIterFn) {\n\tb.board.perms.IterateUsers(offset, count, fn)\n}\n"},{"name":"board_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nfunc TestBoardID_String(t *testing.T) {\n\tinput := BoardID(32)\n\n\tuassert.Equal(t, \"32\", input.String())\n}\n\nfunc TestBoardID_Key(t *testing.T) {\n\tinput := BoardID(128)\n\twant := strings.Repeat(\"0\", 7) + \"128\"\n\tuassert.Equal(t, want, input.Key())\n}\n\nfunc TestBoard_GetID(t *testing.T) {\n\twant := int(92)\n\tb := new(Board)\n\tb.id = BoardID(want)\n\tgot := int(b.GetID())\n\n\tuassert.Equal(t, got, want)\n\tuassert.NotEqual(t, got, want*want)\n}\n\nfunc TestBoard_GetURL(t *testing.T) {\n\tpkgPath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\tname := \"foobar_test_get_url123\"\n\twant := pkgPath + \":\" + name\n\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, name, addr, perms)\n\tgot := board.GetURL()\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\t_, ok := b.GetThread(12345)\n\tuassert.False(t, ok)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\t_, ok = b.GetThread(post.GetPostID())\n\tuassert.True(t, ok)\n}\n\nfunc TestBoard_DeleteThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\tid := post.GetPostID()\n\n\tb.DeleteThread(id)\n\n\t_, ok := b.GetThread(id)\n\tuassert.False(t, ok)\n}\n\nvar boardUrlPrefix = strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\nfunc TestBoard_GetURLFromThreadID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10\"\n\n\tgot := b.GetURLFromThreadID(10)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetURLFromReplyID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10/20\"\n\n\tgot := b.GetURLFromReplyID(10, 20)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetPostFormURL(t *testing.T) {\n\tbid := BoardID(386)\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(bid, \"foo1234\", addr, perms)\n\texpect := txlink.Call(\"CreateThread\", \"boardID\", bid.String(), \"title\", \"\", \"body\", \"\")\n\n\tgot := b.GetPostFormURL()\n\tuassert.Equal(t, expect, got)\n}\n"},{"name":"boards.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\nvar (\n\tgPerms        Permissions\n\tgNotice       string\n\tgHelp         string\n\tgLastBoardID  BoardID\n\tgBoardsByID   avl.Tree // string(id) -\u003e *Board\n\tgBoardsByName avl.Tree // string(name) -\u003e *Board\n\tgLocked       struct {\n\t\trealm        bool\n\t\trealmMembers bool\n\t}\n)\n\nfunc init() {\n\t// TODO: Define and change the default realm owner (or owners)\n\towner := std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\n\t// Initialize default realm permissions\n\tgPerms = createDefaultPermissions(owner)\n\n\t// Import relevant initial state from previous version\n\tinitFromPrevVersion()\n}\n\n// incGetBoardID returns a new board ID.\nfunc incGetBoardID() BoardID {\n\tgLastBoardID++\n\treturn gLastBoardID\n}\n\n// getBoard returns a board for a specific ID.\nfunc getBoard(id BoardID) (_ *Board, found bool) {\n\tv, exists := gBoardsByID.Get(id.Key())\n\tif !exists {\n\t\treturn nil, false\n\t}\n\treturn v.(*Board), true\n}\n\n// mustGetBoardByName returns a board or panics when it's not found.\nfunc mustGetBoardByName(name string) *Board {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tpanic(\"board does not exist with name: \" + name)\n\t}\n\treturn v.(*Board)\n}\n\n// mustGetBoard returns a board or panics when it's not found.\nfunc mustGetBoard(id BoardID) *Board {\n\tboard, found := getBoard(id)\n\tif !found {\n\t\tpanic(\"board does not exist with ID: \" + id.String())\n\t}\n\treturn board\n}\n\n// mustGetThread returns a thread or panics when it's not found.\nfunc mustGetThread(board *Board, threadID PostID) *Post {\n\tthread, found := board.GetThread(threadID)\n\tif !found {\n\t\tpanic(\"thread does not exist with ID: \" + threadID.String())\n\t}\n\treturn thread\n}\n\n// mustGetReply returns a reply or panics when it's not found.\nfunc mustGetReply(thread *Post, replyID PostID) *Post {\n\treply, found := thread.GetReply(replyID)\n\tif !found {\n\t\tpanic(\"reply does not exist with ID: \" + replyID.String())\n\t}\n\treturn reply\n}\n\nfunc mustGetPermissions(bid BoardID) Permissions {\n\tif bid != 0 {\n\t\tboard := mustGetBoard(bid)\n\t\treturn board.perms\n\t}\n\treturn gPerms\n}\n"},{"name":"flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\n// DefaultFlaggingThreshold defines the default number of flags that hides flaggable items.\nconst DefaultFlaggingThreshold = 1\n\nvar gFlaggingThresholds avl.Tree // string(board ID) -\u003e int\n\ntype Flag struct {\n\tUser   std.Address\n\tReason string\n}\n\ntype Flaggable interface {\n\t// AddFlag adds a new flag to an item.\n\t//\n\t// Returns false if item was already flagged by user.\n\tAddFlag(flag Flag) bool\n\n\t// FlagsCount returns number of times item was flagged.\n\tFlagsCount() int\n}\n\n// flagItem adds a flag to a flaggable item (post, thread, etc).\n//\n// Returns whether flag count threshold is reached and item can be hidden.\n//\n// Panics if flag count threshold was already reached.\nfunc flagItem(item Flaggable, flag Flag, threshold int) bool {\n\tif item.FlagsCount() \u003e= threshold {\n\t\tpanic(\"item flag count threshold exceeded: \" + strconv.Itoa(threshold))\n\t}\n\n\tif !item.AddFlag(flag) {\n\t\tpanic(\"item has been already flagged by a current user\")\n\t}\n\n\treturn item.FlagsCount() == threshold\n}\n\nfunc getFlaggingThreshold(bid BoardID) int {\n\tif v, ok := gFlaggingThresholds.Get(bid.String()); ok {\n\t\treturn v.(int)\n\t}\n\treturn DefaultFlaggingThreshold\n}\n"},{"name":"format.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/r/sys/users\"\n)\n\nfunc padLeft(s string, length int) string {\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\" \", length-len(s)) + s\n}\n\nfunc padZero(u64 uint64, length int) string {\n\ts := strconv.Itoa(int(u64))\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\"0\", length-len(s)) + s\n}\n\nfunc indentBody(indent string, body string) string {\n\tvar (\n\t\tres   string\n\t\tlines = strings.Split(body, \"\\n\")\n\t)\n\tfor i, line := range lines {\n\t\tif i \u003e 0 {\n\t\t\tres += \"\\n\"\n\t\t}\n\t\tres += indent + line\n\t}\n\treturn res\n}\n\n// NOTE: length must be greater than 3.\nfunc summaryOf(text string, length int) string {\n\tlines := strings.SplitN(text, \"\\n\", 2)\n\tline := lines[0]\n\tif len(line) \u003e length {\n\t\tline = line[:(length-3)] + \"...\"\n\t} else if len(lines) \u003e 1 {\n\t\t// len(line) \u003c= 80\n\t\tline = line + \"...\"\n\t}\n\treturn line\n}\n\n// newLink returns a Markdown link.\nfunc newLink(label, uri string) string {\n\treturn \"[\" + label + \"](\" + uri + \")\"\n}\n\n// newButtonLink returns a Makdown link with label wrapped in brackets.\nfunc newButtonLink(label, uri string) string {\n\treturn `[\\[` + label + `\\]](` + uri + \")\"\n}\n\n// newUserLink returns a Markdown link for an account to the users\n// realm or the address as string when a user is not registered.\nfunc newUserLink(addr std.Address) string {\n\tuser := users.ResolveAddress(addr)\n\tif user != nil {\n\t\treturn user.RenderLink(\"\")\n\t}\n\treturn addr.String()\n}\n"},{"name":"migrations.gno","body":"package boards2\n\nimport (\n\tv1rc1 \"gno.land/r/devx000/gnoland/boards2/v1rc1\"\n)\n\nfunc initFromPrevVersion() {\n\timportRealmMembers()\n}\n\nfunc importRealmMembers() {\n\tv1rc1.IterateRealmMembers(0, func(member v1rc1.User) bool {\n\t\t// XXX: This wouldn't be required if a boards2 package is created\n\t\troles := make([]Role, len(member.Roles))\n\t\tfor i, r := range member.Roles {\n\t\t\troles[i] = Role(r)\n\t\t}\n\n\t\tgPerms.AddUser(member.Address, roles...)\n\t\treturn false\n\t})\n}\n"},{"name":"permissions.gno","body":"package boards2\n\nimport \"std\"\n\nconst (\n\tPermissionRealmHelp           Permission = \"realm:help\"\n\tPermissionRealmLock                      = \"realm:lock\"\n\tPermissionRealmNotice                    = \"realm:notice\"\n\tPermissionBoardCreate                    = \"board:create\"\n\tPermissionBoardFlaggingUpdate            = \"board:flagging-update\"\n\tPermissionBoardFreeze                    = \"board:freeze\"\n\tPermissionBoardRename                    = \"board:rename\"\n\tPermissionThreadCreate                   = \"thread:create\"\n\tPermissionThreadDelete                   = \"thread:delete\"\n\tPermissionThreadEdit                     = \"thread:edit\"\n\tPermissionThreadFlag                     = \"thread:flag\"\n\tPermissionThreadFreeze                   = \"thread:freeze\"\n\tPermissionThreadRepost                   = \"thread:repost\"\n\tPermissionReplyCreate                    = \"reply:create\"\n\tPermissionReplyDelete                    = \"reply:delete\"\n\tPermissionReplyFlag                      = \"reply:flag\"\n\tPermissionReplyFreeze                    = \"reply:freeze\"\n\tPermissionMemberInvite                   = \"member:invite\"\n\tPermissionMemberRemove                   = \"member:remove\"\n\tPermissionRoleChange                     = \"role:change\"\n\tPermissionPermissionsUpdate              = \"permissions:update\"\n)\n\nconst (\n\tRoleGuest     Role = \"\"\n\tRoleOwner          = \"owner\"\n\tRoleAdmin          = \"admin\"\n\tRoleModerator      = \"moderator\"\n)\n\ntype (\n\t// Permission defines the type for permissions.\n\tPermission string\n\n\t// Role defines the type for user roles.\n\tRole string\n\n\t// Args is a list of generic arguments.\n\tArgs []interface{}\n\n\t// User contains user info.\n\tUser struct {\n\t\tAddress std.Address\n\t\tRoles   []Role\n\t}\n\n\t// UsersIterFn defines a function type to iterate users.\n\tUsersIterFn func(User) bool\n\n\t// Permissions define an interface to for permissioned execution.\n\tPermissions interface {\n\t\t// HasRole checks if a user has a specific role assigned.\n\t\tHasRole(std.Address, Role) bool\n\n\t\t// HasPermission checks if a user has a specific permission.\n\t\tHasPermission(std.Address, Permission) bool\n\n\t\t// WithPermission calls a callback when a user has a specific permission.\n\t\t// It panics on error.\n\t\tWithPermission(std.Address, Permission, Args, func(Args))\n\n\t\t// AddUser adds a new user to the permissioner.\n\t\tAddUser(std.Address, ...Role) error\n\n\t\t// SetUserRoles sets the roles of a user.\n\t\tSetUserRoles(std.Address, ...Role) error\n\n\t\t// RemoveUser removes a user from the permissioner.\n\t\tRemoveUser(std.Address) (removed bool)\n\n\t\t// HasUser checks if a user exists.\n\t\tHasUser(std.Address) bool\n\n\t\t// UsersCount returns the total number of users the permissioner contains.\n\t\tUsersCount() int\n\n\t\t// IterateUsers iterates permissions' users.\n\t\tIterateUsers(start, count int, fn UsersIterFn) bool\n\t}\n)\n"},{"name":"permissions_default.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\t\"gno.land/r/sys/users\"\n)\n\n// DefaultPermissions manages users, roles and permissions.\ntype DefaultPermissions struct {\n\tsuperRole Role\n\tdao       *commondao.CommonDAO\n\tusers     *avl.Tree // string(std.Address) -\u003e []Role\n\troles     *avl.Tree // string(role) -\u003e []Permission\n}\n\n// NewDefaultPermissions creates a new permissions type.\n// This type is a default implementation to handle users, roles and permissions.\nfunc NewDefaultPermissions(dao *commondao.CommonDAO) *DefaultPermissions {\n\tif dao == nil {\n\t\tpanic(\"default permissions require a DAO\")\n\t}\n\n\tdp := \u0026DefaultPermissions{\n\t\tdao:   dao,\n\t\troles: avl.NewTree(),\n\t\tusers: avl.NewTree(),\n\t}\n\n\t// Make sure that DAO users are indexed when DAO has members\n\tdao.Members().IterateByOffset(0, dao.Members().Size(), func(m std.Address) bool {\n\t\tdp.users.Set(m.String(), []Role(nil))\n\t\treturn false\n\t})\n\n\treturn dp\n}\n\n// SetSuperRole assigns a super role.\n// A super role is one that have all permissions.\n// These type of role doesn't need to be mapped to any permission.\nfunc (dp *DefaultPermissions) SetSuperRole(r Role) {\n\tdp.superRole = r\n}\n\n// AddRole add a role with one or more assigned permissions.\nfunc (dp *DefaultPermissions) AddRole(r Role, p Permission, extra ...Permission) {\n\tdp.roles.Set(string(r), append([]Permission{p}, extra...))\n}\n\n// RoleExists checks if a role exists.\nfunc (dp DefaultPermissions) RoleExists(r Role) bool {\n\tif dp.superRole != \"\" \u0026\u0026 r == dp.superRole {\n\t\treturn true\n\t}\n\n\treturn dp.roles.Iterate(\"\", \"\", func(name string, _ interface{}) bool {\n\t\treturn Role(name) == r\n\t})\n}\n\n// GetUserRoles returns the list of roles assigned to a user.\nfunc (dp DefaultPermissions) GetUserRoles(user std.Address) []Role {\n\tv, found := dp.users.Get(user.String())\n\tif !found {\n\t\treturn nil\n\t}\n\treturn v.([]Role)\n}\n\n// HasRole checks if a user has a specific role assigned.\nfunc (dp DefaultPermissions) HasRole(user std.Address, r Role) bool {\n\tfor _, role := range dp.GetUserRoles(user) {\n\t\tif role == r {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n// HasPermission checks if a user has a specific permission.\nfunc (dp DefaultPermissions) HasPermission(user std.Address, perm Permission) bool {\n\tfor _, r := range dp.GetUserRoles(user) {\n\t\tif dp.superRole == r {\n\t\t\treturn true\n\t\t}\n\n\t\tv, found := dp.roles.Get(string(r))\n\t\tif !found {\n\t\t\tcontinue\n\t\t}\n\n\t\tfor _, p := range v.([]Permission) {\n\t\t\tif p == perm {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\treturn false\n}\n\n// AddUser adds a new user to permissions.\nfunc (dp *DefaultPermissions) AddUser(user std.Address, roles ...Role) error {\n\tif dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user already exists\")\n\t}\n\n\tdp.dao.Members().Add(user)\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// SetUserRoles sets the roles of a user.\nfunc (dp *DefaultPermissions) SetUserRoles(user std.Address, roles ...Role) error {\n\tif !dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user not found\")\n\t}\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// RemoveUser removes a user from permissions.\nfunc (dp *DefaultPermissions) RemoveUser(user std.Address) bool {\n\t_, removed := dp.users.Remove(user.String())\n\tdp.dao.Members().Remove(user)\n\treturn removed\n}\n\n// HasUser checks if a user exists.\nfunc (dp DefaultPermissions) HasUser(user std.Address) bool {\n\treturn dp.users.Has(user.String())\n}\n\n// UsersCount returns the total number of users the permissioner contains.\nfunc (dp DefaultPermissions) UsersCount() int {\n\treturn dp.users.Size()\n}\n\n// IterateUsers iterates permissions' users.\nfunc (dp DefaultPermissions) IterateUsers(start, count int, fn UsersIterFn) bool {\n\treturn dp.users.IterateByOffset(start, count, func(k string, v interface{}) bool {\n\t\treturn fn(User{\n\t\t\tAddress: std.Address(k),\n\t\t\tRoles:   v.([]Role),\n\t\t})\n\t})\n}\n\n// WithPermission calls a callback when a user has a specific permission.\n// It panics on error or when a handler panics.\n// Callbacks are by default called when there is no handle registered for the permission.\nfunc (dp *DefaultPermissions) WithPermission(user std.Address, perm Permission, args Args, cb func(Args)) {\n\tif !dp.HasPermission(user, perm) || !dp.dao.Members().Has(user) {\n\t\tpanic(\"unauthorized\")\n\t}\n\n\tswitch perm {\n\tcase PermissionBoardCreate:\n\t\tdp.handleBoardCreate(args, cb)\n\tcase PermissionBoardRename:\n\t\tdp.handleBoardRename(args, cb)\n\tcase PermissionMemberInvite:\n\t\tdp.handleMemberInvite(args, cb)\n\tcase PermissionRoleChange:\n\t\tdp.handleRoleChange(args, cb)\n\tdefault:\n\t\tcb(args)\n\t}\n}\n\nfunc (dp *DefaultPermissions) setUserRoles(user std.Address, roles ...Role) error {\n\tfor _, r := range roles {\n\t\tif !dp.RoleExists(r) {\n\t\t\treturn errors.New(\"invalid role: \" + string(r))\n\t\t}\n\t}\n\n\tdp.users.Set(user.String(), append([]Role(nil), roles...))\n\treturn nil\n}\n\nfunc (DefaultPermissions) handleBoardCreate(args Args, cb func(Args)) {\n\tname, ok := args[0].(string)\n\tif !ok {\n\t\tpanic(\"expected board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(name)\n\tassertBoardNameBelongsToCaller(name)\n\n\tcb(args)\n}\n\nfunc (DefaultPermissions) handleBoardRename(args Args, cb func(Args)) {\n\tnewName, ok := args[2].(string)\n\tif !ok {\n\t\tpanic(\"expected new board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(newName)\n\tassertBoardNameBelongsToCaller(newName)\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleMemberInvite(args Args, cb func(Args)) {\n\t// Make sure that only owners invite other owners\n\trole, ok := args[1].(Role)\n\tif !ok {\n\t\tpanic(\"expected a valid new member role\")\n\t}\n\n\tif role == RoleOwner {\n\t\tif !dp.HasRole(std.PreviousRealm().Address(), RoleOwner) {\n\t\t\tpanic(\"only owners are allowed to invite other owners\")\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleRoleChange(args Args, cb func(Args)) {\n\t// Owners and Admins can change roles.\n\t// Admins should not be able to assign or remove the Owner role from members.\n\tif dp.HasRole(std.PreviousRealm().Address(), RoleAdmin) {\n\t\trole, ok := args[2].(Role)\n\t\tif !ok {\n\t\t\tpanic(\"expected a valid member role\")\n\t\t}\n\n\t\tif role == RoleOwner {\n\t\t\tpanic(\"admins are not allowed to promote members to Owner\")\n\t\t} else {\n\t\t\tmember, ok := args[1].(std.Address)\n\t\t\tif !ok {\n\t\t\t\tpanic(\"expected a valid member address\")\n\t\t\t}\n\n\t\t\tif dp.HasRole(member, RoleOwner) {\n\t\t\t\tpanic(\"admins are not allowed to remove the Owner role\")\n\t\t\t}\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc createDefaultPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(RoleAdmin, PermissionBoardCreate)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n\nfunc assertBoardNameIsNotAddress(s string) {\n\tif std.Address(s).IsValid() {\n\t\tpanic(\"addresses are not allowed as board name\")\n\t}\n}\n\nfunc assertBoardNameBelongsToCaller(name string) {\n\t// When the board name is the name of a registered user\n\t// check that caller is the owner of the name.\n\tuser, _ := users.ResolveName(name)\n\tif user != nil \u0026\u0026 user.Addr() != std.PreviousRealm().Address() {\n\t\tpanic(\"board name is a user name registered to a different user\")\n\t}\n}\n"},{"name":"permissions_default_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/urequire\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n)\n\nvar _ Permissions = (*DefaultPermissions)(nil)\n\nfunc TestDefaultPermissionsWithPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\targs       Args\n\t\tsetup      func() *DefaultPermissions\n\t\terr        string\n\t\tcalled     bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with arguments\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\targs:       Args{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t\t{\n\t\t\tname:       \"is not a DAO member\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\tcalled bool\n\t\t\t\targs   Args\n\t\t\t)\n\n\t\t\tperms := tc.setup()\n\t\t\tcallback := func(a Args) {\n\t\t\t\targs = a\n\t\t\t\tcalled = true\n\t\t\t}\n\n\t\t\ttestCaseFn := func() {\n\t\t\t\tperms.WithPermission(tc.user, tc.permission, tc.args, callback)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.PanicsWithMessage(t, tc.err, testCaseFn, \"panic\")\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NotPanics(t, testCaseFn, \"no panic\")\n\t\t\t}\n\n\t\t\turequire.Equal(t, tc.called, called, \"callback called\")\n\t\t\turequire.Equal(t, len(tc.args), len(args), \"args count\")\n\t\t\tfor i, a := range args {\n\t\t\t\tuassert.Equal(t, tc.args[i].(string), a.(string))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsGetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []string\n\t\tsetup func() *DefaultPermissions\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\", \"foo\", \"bar\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"not a user\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\", \"admin\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\troles := perms.GetUserRoles(tc.user)\n\n\t\t\turequire.Equal(t, len(tc.roles), len(roles), \"user role count\")\n\t\t\tfor i, r := range roles {\n\t\t\t\tuassert.Equal(t, tc.roles[i], string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasRole(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\trole  Role\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"admin\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"ok with multiple roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"foo\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"has no role\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasRole(tc.user, tc.role)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\tsetup      func() *DefaultPermissions\n\t\twant       bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple users\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple roles\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddRole(\"baz\", \"other\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\", \"baz\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasPermission(tc.user, tc.permission)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsAddUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"a\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"duplicated user\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"foo\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: foo\",\n\t\t},\n\t\t{\n\t\t\tname: \"already a DAO member\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(\n\t\t\t\t\tcommondao.New(commondao.WithMember(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")),\n\t\t\t\t)\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.AddUser(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.Error(t, err, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsSetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"c\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"remove roles\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"b\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"x\", \"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: x\",\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"user not found\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.SetUserRoles(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.True(t, err != nil, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsRemoveUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.RemoveUser(tc.user)\n\t\t\tuassert.Equal(t, tc.want, got)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsIterateUsers(t *testing.T) {\n\tusers := []User{\n\t\t{\n\t\t\tAddress: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tRoles:   []Role{\"foo\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\",\n\t\t\tRoles:   []Role{\"foo\", \"bar\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\",\n\t\t\tRoles:   []Role{\"bar\"},\n\t\t},\n\t}\n\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.AddRole(\"foo\", \"perm1\")\n\tperms.AddRole(\"bar\", \"perm2\")\n\tfor _, u := range users {\n\t\tperms.AddUser(u.Address, u.Roles...)\n\t}\n\n\tcases := []struct {\n\t\tname               string\n\t\tstart, count, want int\n\t}{\n\t\t{\n\t\t\tname:  \"exceed users count\",\n\t\t\tcount: 50,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"exact users count\",\n\t\t\tcount: 3,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"two users\",\n\t\t\tstart: 1,\n\t\t\tcount: 2,\n\t\t\twant:  2,\n\t\t},\n\t\t{\n\t\t\tname:  \"one user\",\n\t\t\tstart: 1,\n\t\t\tcount: 1,\n\t\t\twant:  1,\n\t\t},\n\t\t{\n\t\t\tname:  \"no iteration\",\n\t\t\tstart: 50,\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar i int\n\t\t\tperms.IterateUsers(0, len(users), func(u User) bool {\n\t\t\t\turequire.True(t, i \u003c len(users), \"expect iterator to respect number of users\")\n\t\t\t\tuassert.Equal(t, users[i].Address, u.Address)\n\n\t\t\t\turequire.Equal(t, len(users[i].Roles), len(u.Roles), \"expect number of roles to match\")\n\t\t\t\tfor j, r := range u.Roles {\n\t\t\t\t\tuassert.Equal(t, string(users[i].Roles[j]), string(u.Roles[j]))\n\t\t\t\t}\n\n\t\t\t\ti++\n\t\t\t})\n\n\t\t\tuassert.Equal(t, i, len(users), \"expect iterator to iterate all users\")\n\t\t})\n\t}\n}\n"},{"name":"post.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst dateFormat = \"2006-01-02 3:04pm MST\"\n\ntype PostID uint64\n\nfunc (id PostID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id PostID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\n// A Post is a \"thread\" or a \"reply\" depending on context.\n// A thread is a Post of a Board that holds other replies.\ntype Post struct {\n\tboard         *Board\n\tid            PostID\n\tcreator       std.Address\n\ttitle         string // optional\n\tbody          string\n\tisHidden      bool\n\tisReadonly    bool\n\treplies       avl.Tree // Post.id -\u003e *Post\n\trepliesAll    avl.Tree // Post.id -\u003e *Post (all replies, for top-level posts)\n\treposts       avl.Tree // Board.id -\u003e Post.id\n\tflags         []Flag\n\tthreadID      PostID  // original Post.id\n\tparentID      PostID  // parent Post.id (if reply or repost)\n\trepostBoardID BoardID // original Board.id (if repost)\n\trepostsCount  uint64\n\tcreatedAt     time.Time\n\tupdatedAt     time.Time\n}\n\nfunc newPost(board *Board, id PostID, creator std.Address, title, body string, threadID, parentID PostID, repostBoardID BoardID) *Post {\n\treturn \u0026Post{\n\t\tboard:         board,\n\t\tid:            id,\n\t\tcreator:       creator,\n\t\ttitle:         title,\n\t\tbody:          body,\n\t\treplies:       avl.Tree{},\n\t\trepliesAll:    avl.Tree{},\n\t\treposts:       avl.Tree{},\n\t\tthreadID:      threadID,\n\t\tparentID:      parentID,\n\t\trepostBoardID: repostBoardID,\n\t\tcreatedAt:     time.Now(),\n\t}\n}\n\nfunc (post *Post) IsRepost() bool {\n\treturn post.repostBoardID != 0\n}\n\nfunc (post *Post) IsThread() bool {\n\t// repost threads also have parent ID\n\treturn post.parentID == 0 || post.IsRepost()\n}\n\nfunc (post *Post) GetBoard() *Board {\n\treturn post.board\n}\n\nfunc (post *Post) GetPostID() PostID {\n\treturn post.id\n}\n\nfunc (post *Post) GetParentID() PostID {\n\treturn post.parentID\n}\n\nfunc (post *Post) GetRepostBoardID() BoardID {\n\treturn post.repostBoardID\n}\n\nfunc (post *Post) GetCreator() std.Address {\n\treturn post.creator\n}\n\nfunc (post *Post) GetTitle() string {\n\treturn post.title\n}\n\nfunc (post *Post) GetBody() string {\n\treturn post.body\n}\n\nfunc (post *Post) GetCreatedAt() time.Time {\n\treturn post.createdAt\n}\n\nfunc (post *Post) GetUpdatedAt() time.Time {\n\treturn post.updatedAt\n}\n\nfunc (post *Post) AddFlag(flag Flag) bool {\n\t// TODO: sort flags for fast search in case of big thresholds\n\tfor _, v := range post.flags {\n\t\tif v.User == flag.User {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tpost.flags = append(post.flags, flag)\n\treturn true\n}\n\nfunc (post *Post) FlagsCount() int {\n\treturn len(post.flags)\n}\n\nfunc (post *Post) SetVisible(isVisible bool) {\n\tpost.isHidden = !isVisible\n}\n\nfunc (post *Post) IsHidden() bool {\n\treturn post.isHidden\n}\n\nfunc (post *Post) SetReadonly(isReadonly bool) {\n\tpost.isReadonly = isReadonly\n}\n\nfunc (post *Post) IsReadonly() bool {\n\treturn post.isReadonly\n}\n\nfunc (post *Post) AddReply(creator std.Address, body string) *Post {\n\tboard := post.board\n\tpid := board.incGetPostID()\n\tpKey := pid.Key()\n\treply := newPost(board, pid, creator, \"\", body, post.threadID, post.id, 0)\n\t// TODO: Figure out how to remove this redundancy of data \"replies==repliesAll\" in threads\n\tpost.replies.Set(pKey, reply)\n\tif post.threadID == post.id {\n\t\tpost.repliesAll.Set(pKey, reply)\n\t} else {\n\t\tthread, _ := board.GetThread(post.threadID)\n\t\tthread.repliesAll.Set(pKey, reply)\n\t}\n\treturn reply\n}\n\nfunc (post *Post) Update(title string, body string) {\n\tpost.title = title\n\tpost.body = body\n\tpost.updatedAt = time.Now()\n}\n\nfunc (post *Post) HasReplies() bool {\n\treturn post.replies.Size() \u003e 0\n}\n\nfunc (thread *Post) GetReply(pid PostID) (_ *Post, found bool) {\n\tv, found := thread.repliesAll.Get(pid.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (post *Post) AddRepostTo(creator std.Address, repost *Post, dst *Board) {\n\tif !post.IsThread() {\n\t\tpanic(\"cannot repost non-thread post\")\n\t}\n\n\tpost.repostsCount++\n\tdst.threads.Set(repost.id.Key(), repost)\n\tpost.reposts.Set(dst.id.Key(), repost.id)\n}\n\nfunc (post *Post) DeleteReply(replyID PostID) error {\n\tif !post.IsThread() {\n\t\t// TODO: Allow removing replies from parent replies too\n\t\tpanic(\"cannot delete reply from a non-thread post\")\n\t}\n\n\tif post.id == replyID {\n\t\treturn errors.New(\"expected an ID of an inner reply\")\n\t}\n\n\tkey := replyID.Key()\n\tv, removed := post.repliesAll.Remove(key)\n\tif !removed {\n\t\treturn errors.New(\"reply not found in thread\")\n\t}\n\n\t// TODO: Shouldn't reply be hidden instead of deleted? Maybe replace reply by a deleted message.\n\treply := v.(*Post)\n\tif reply.parentID != post.id {\n\t\tparent, _ := post.GetReply(reply.parentID)\n\t\tparent.replies.Remove(key)\n\t} else {\n\t\tpost.replies.Remove(key)\n\t}\n\treturn nil\n}\n\nfunc (post *Post) GetSummary() string {\n\treturn summaryOf(post.body, 80)\n}\n\nfunc (post *Post) GetURL() string {\n\tif post.IsThread() {\n\t\treturn post.board.GetURLFromThreadID(post.id)\n\t}\n\treturn post.board.GetURLFromReplyID(post.threadID, post.id)\n}\n\nfunc (post *Post) GetReplyFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"CreateReply\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"replyID\", \"0\",\n\t\t\t\"body\", \"\",\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"CreateReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (post *Post) GetRepostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateRepost\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t\t\"destinationBoardID\", \"\",\n\t)\n}\n\nfunc (post *Post) GetDeleteFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"DeleteThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"DeleteReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t)\n}\n\nfunc (post *Post) GetEditFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"EditThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"title\", post.GetTitle(),\n\t\t\t\"body\", post.GetBody(),\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"EditReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", post.GetBody(),\n\t)\n}\n\nfunc (post *Post) GetFlagFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"FlagThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"reason\", \"\",\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"FlagReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"reason\", \"\",\n\t)\n}\n\nfunc (post *Post) RenderSummary() string {\n\tvar (\n\t\tb       strings.Builder\n\t\tpostURL = post.GetURL()\n\t\ttitle   = post.title\n\t)\n\n\tb.WriteString(\"**≡ \" + newLink(summaryOf(title, 80), postURL) + \"**  \\n\")\n\tb.WriteString(\"Created by \" + newUserLink(post.creator) + \" on \" + post.createdAt.Format(dateFormat))\n\tb.WriteString(\"  \\n**\")\n\tb.WriteString(strconv.Itoa(post.repliesAll.Size()) + \" replies • \")\n\tb.WriteString(strconv.Itoa(post.reposts.Size()) + \" reposts**\\n\")\n\treturn b.String()\n}\n\nfunc (post *Post) renderSourcePost(indent string) (string, *Post) {\n\tif !post.IsRepost() {\n\t\treturn \"\", nil\n\t}\n\n\tindent += \"\u003e \"\n\n\t// TODO: figure out a way to decouple posts from a global storage.\n\tboard, ok := getBoard(post.repostBoardID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source board has been deleted*\\n\\n\"), nil\n\t}\n\n\tsrcPost, ok := board.GetThread(post.parentID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source post has been deleted*\\n\\n\"), nil\n\t}\n\n\tif srcPost.isHidden {\n\t\treturn indentBody(indent, \"*⚠ Source post has been flagged as inappropriate*\\n\\n\"), nil\n\t}\n\n\treturn indentBody(indent, srcPost.GetSummary()) + \"\\n\\n\", srcPost\n}\n\n// renderPostContent renders post text content (including repost body).\n// Function will dump a predefined message instead of a body if post is hidden.\nfunc (post *Post) renderPostContent(sb *strings.Builder, indent string, levels int) {\n\tif post.isHidden {\n\t\t// Flagged comment should be hidden, but replies still visible (see: #3480)\n\t\t// Flagged threads will be hidden by render function caller.\n\t\tsb.WriteString(indentBody(indent, \"_⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n\t\tsb.WriteString(\"\\n\")\n\t\treturn\n\t}\n\n\tsrcContent, srcPost := post.renderSourcePost(indent)\n\tif post.IsRepost() \u0026\u0026 srcPost != nil {\n\t\tsb.WriteString(\"  \\nThis thread is a repost of [another thread](\" + srcPost.GetURL() + \"): \\n\")\n\t}\n\n\tsb.WriteString(srcContent)\n\n\tif post.IsRepost() \u0026\u0026 srcPost == nil \u0026\u0026 len(post.body) \u003e 0 {\n\t\t// Add a newline to separate source deleted message from repost body content\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(indentBody(indent, post.body))\n\tsb.WriteString(\"\\n\")\n\n\tif post.IsThread() {\n\t\t// Split content and controls for threads.\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\t// Buttons \u0026 counters\n\tsb.WriteString(indent)\n\tif !post.IsThread() {\n\t\tsb.WriteString(\"  \\n\")\n\t\tsb.WriteString(indent)\n\t}\n\n\tsb.WriteString(\"Created by \")\n\tsb.WriteString(newUserLink(post.creator))\n\tsb.WriteString(\" on \")\n\tsb.WriteString(post.createdAt.Format(dateFormat))\n\n\t// Add a reply view link to each top level reply\n\tif !post.IsThread() {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(newLink(\"#\"+post.id.String(), post.GetURL()))\n\t}\n\n\tif post.repostsCount \u003e 0 {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(strconv.FormatUint(post.repostsCount, 10))\n\t\tsb.WriteString(\" repost(s)\")\n\t}\n\n\tsb.WriteString(\"  \\n\")\n\tsb.WriteString(newLink(\"Flag\", post.GetFlagFormURL()))\n\n\tif post.IsThread() {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Repost\", post.GetRepostFormURL()))\n\t}\n\n\tisReadonly := post.IsReadonly() || post.GetBoard().IsReadonly()\n\tif !isReadonly {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Reply\", post.GetReplyFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Edit\", post.GetEditFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Delete\", post.GetDeleteFormURL()))\n\t}\n\n\tif levels == 0 {\n\t\tsb.WriteString(\" • \")\n\t\tif post.IsThread() {\n\t\t\tsb.WriteString(newLink(\"Show all Replies\", post.board.GetURLFromThreadID(post.GetPostID())))\n\t\t} else {\n\t\t\tsb.WriteString(newLink(\"View Thread\", post.board.GetURLFromThreadID(post.threadID)))\n\t\t}\n\t}\n\n\tsb.WriteString(\" \\n\")\n}\n\nfunc (post *Post) Render(path string, indent string, levels int) string {\n\tif post == nil {\n\t\treturn \"nil post\"\n\t}\n\n\t// TODO: pass a builder as arg into Render.\n\tvar sb strings.Builder\n\n\t// Thread reposts might not have a title, if so get title from source thread\n\ttitle := post.title\n\tif post.IsRepost() \u0026\u0026 title == \"\" {\n\t\tif board, ok := getBoard(post.repostBoardID); ok {\n\t\t\tif src, ok := board.GetThread(post.parentID); ok {\n\t\t\t\ttitle = src.GetTitle()\n\t\t\t}\n\t\t}\n\t}\n\n\tsb.WriteString(indent)\n\tif title != \"\" { // Replies don't have a title\n\t\tsb.WriteString(\"## \" + title + \"\\n\")\n\t}\n\tsb.WriteString(indent + \"\\n\")\n\n\tpost.renderPostContent(\u0026sb, indent, levels)\n\n\tif post.replies.Size() == 0 {\n\t\treturn sb.String()\n\t}\n\n\t// XXX: This triggers for reply views\n\tif levels == 0 {\n\t\tsb.WriteString(indent + \"\\n\")\n\t\tsb.WriteString(indent)\n\t\tsb.WriteString(\"\\n\")\n\t\treturn sb.String()\n\t}\n\n\tif path != \"\" {\n\t\tsb.WriteString(post.renderTopLevelReplies(path, indent, levels-1))\n\t} else {\n\t\tsb.WriteString(post.renderSubReplies(indent, levels-1))\n\t}\n\treturn sb.String()\n}\n\nfunc (post *Post) renderTopLevelReplies(path, indent string, levels int) string {\n\tp, err := pager.New(path, post.replies.Size(), pager.WithPageSize(pageSizeReplies))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\trender := func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t}\n\n\tb.WriteString(\"\\n\\n---\\nSort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tb.WriteString(newLink(\"newest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tb.WriteString(\"\\n---\\n\")\n\t\tb.WriteString(pager.Picker(p))\n\t}\n\n\treturn b.String()\n}\n\nfunc (post *Post) renderSubReplies(indent string, levels int) string {\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\tpost.replies.Iterate(\"\", \"\", func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t})\n\n\treturn b.String()\n}\n\nfunc (post *Post) RenderInner() string {\n\tif post.IsThread() {\n\t\tpanic(\"unexpected thread\")\n\t}\n\n\tvar (\n\t\ts         string\n\t\tthreadID  = post.threadID\n\t\tthread, _ = post.board.GetThread(threadID) // TODO: This seems redundant (post == thread)\n\t)\n\n\t// Fully render parent if it's not a repost.\n\tif !post.IsRepost() {\n\t\tvar (\n\t\t\tparent   *Post\n\t\t\tparentID = post.parentID\n\t\t)\n\n\t\tif thread.id == parentID {\n\t\t\tparent = thread\n\t\t} else {\n\t\t\tparent, _ = thread.GetReply(parentID)\n\t\t}\n\n\t\ts += parent.Render(\"\", \"\", 0) + \"\\n\"\n\t}\n\n\ts += post.Render(\"\", \"\u003e \", 5)\n\treturn s\n}\n"},{"name":"post_test.gno","body":"package boards2\n\nimport (\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/ufmt\"\n)\n\nfunc TestPostUpdate(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, \"test123\", addr, perms)\n\tcreator := testutils.TestAddress(\"creator\")\n\tpost := newPost(board, 1, creator, \"Title\", \"Body\", 1, 0, 0)\n\ttitle := \"New Title\"\n\tbody := \"New body\"\n\n\tpost.Update(title, body)\n\n\tuassert.Equal(t, title, post.GetTitle())\n\tuassert.Equal(t, body, post.GetBody())\n\tuassert.False(t, post.GetUpdatedAt().IsZero())\n}\n\nfunc TestPostAddFlag(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tpost := createTestThread(t)\n\n\tflag := Flag{\n\t\tUser:   addr,\n\t\tReason: \"foobar\",\n\t}\n\tuassert.True(t, post.AddFlag(flag))\n\tuassert.False(t, post.AddFlag(flag), \"should reject flag from duplicate user\")\n\tuassert.Equal(t, post.FlagsCount(), 1)\n}\n\nfunc TestPostSetVisible(t *testing.T) {\n\tpost := createTestThread(t)\n\tuassert.False(t, post.IsHidden(), \"post should be visible by default\")\n\n\tpost.SetVisible(false)\n\tuassert.True(t, post.IsHidden(), \"post should be hidden\")\n\n\tpost.SetVisible(true)\n\tuassert.False(t, post.IsHidden(), \"post should be visible\")\n}\n\nfunc TestPostAddRepostTo(t *testing.T) {\n\t// TODO: Improve this unit test\n\taddr := testutils.TestAddress(\"creatorDstBoard\")\n\tperms := createDefaultBoardPermissions(addr)\n\tcases := []struct {\n\t\tname, title, body string\n\t\tdstBoard          *Board\n\t\tthread            *Post\n\t\tsetup             func() *Post\n\t\terr               string\n\t}{\n\t\t{\n\t\t\tname:     \"repost thread\",\n\t\t\ttitle:    \"Repost Title\",\n\t\t\tbody:     \"Repost body\",\n\t\t\tdstBoard: newBoard(42, \"dst123\", addr, perms),\n\t\t\tsetup:    func() *Post { return createTestThread(t) },\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid repost from reply\",\n\t\t\tsetup: func() *Post { return createTestReply(t) },\n\t\t\terr:   \"cannot repost non-thread post\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\trepost  *Post\n\t\t\t\tcreator = testutils.TestAddress(\"repostCreator\")\n\t\t\t\tthread  = tc.setup()\n\t\t\t)\n\n\t\t\tcreateRepost := func() {\n\t\t\t\tvar repostId PostID\n\t\t\t\tif tc.dstBoard != nil {\n\t\t\t\t\trepostId = tc.dstBoard.incGetPostID()\n\t\t\t\t}\n\n\t\t\t\trepost = newPost(tc.dstBoard, repostId, creator, tc.title, tc.body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\t\t\t\tthread.AddRepostTo(creator, repost, tc.dstBoard)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.PanicsWithMessage(t, tc.err, createRepost)\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tuassert.NotPanics(t, createRepost)\n\t\t\t}\n\n\t\t\tr, found := tc.dstBoard.GetThread(repost.GetPostID())\n\t\t\tuassert.True(t, found)\n\t\t\tuassert.True(t, repost == r)\n\t\t\tuassert.Equal(t, tc.title, repost.GetTitle())\n\t\t\tuassert.Equal(t, tc.body, repost.GetBody())\n\t\t\tuassert.Equal(t, uint(thread.GetBoard().GetID()), uint(repost.GetRepostBoardID()))\n\t\t})\n\t}\n}\n\nfunc TestNewThread(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\ttitle := \"Test Title\"\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=0\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\teditURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=EditThread\u0026boardID=%d\u0026body=%s\u0026threadID=%d\u0026title=%s\",\n\t\tuint(boardID),\n\t\tbody,\n\t\tuint(threadID),\n\t\tstrings.ReplaceAll(title, \" \", \"+\"),\n\t)\n\trepostURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateRepost\u0026boardID=%d\u0026body=\u0026destinationBoardID=\u0026threadID=%d\u0026title=\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteThread\u0026boardID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tflagURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=FlagThread\u0026boardID=%d\u0026reason=\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\n\tthread := newPost(board, threadID, creator, title, body, threadID, 0, 0)\n\n\tuassert.True(t, thread.IsThread())\n\tuassert.Equal(t, uint(threadID), uint(thread.GetPostID()))\n\tuassert.False(t, thread.GetCreatedAt().IsZero())\n\tuassert.True(t, thread.GetUpdatedAt().IsZero())\n\tuassert.Equal(t, title, thread.GetTitle())\n\tuassert.Equal(t, body[:77]+\"...\", thread.GetSummary())\n\tuassert.False(t, thread.HasReplies())\n\tuassert.Equal(t, url, thread.GetURL())\n\tuassert.Equal(t, replyURL, thread.GetReplyFormURL())\n\tuassert.Equal(t, editURL, thread.GetEditFormURL())\n\tuassert.Equal(t, repostURL, thread.GetRepostFormURL())\n\tuassert.Equal(t, deleteURL, thread.GetDeleteFormURL())\n\tuassert.Equal(t, flagURL, thread.GetFlagFormURL())\n}\n\nfunc TestThreadAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tthreadID := uint(thread.GetPostID())\n\tbody := \"A reply\"\n\n\treply := thread.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, threadID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.True(t, thread.HasReplies())\n}\n\nfunc TestThreadGetReply(t *testing.T) {\n\tcases := []struct {\n\t\tname   string\n\t\tthread *Post\n\t\tsetup  func(thread *Post) (replyID PostID)\n\t\tfound  bool\n\t}{\n\t\t{\n\t\t\tname:   \"found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup: func(thread *Post) PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:   \"not found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup:  func(*Post) PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup(tc.thread)\n\n\t\t\treply, found := tc.thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestThreadDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"ok nested\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.AddReply(testutils.TestAddress(\"replier2\"), \"\").GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid\",\n\t\t\tsetup: func() PostID { return thread.GetPostID() },\n\t\t\terr:   \"expected an ID of an inner reply\",\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t\terr:   \"reply not found in thread\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\terr := thread.DeleteReply(replyID)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.ErrorContains(t, err, tc.err)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tuassert.NoError(t, err)\n\t\t\t_, found := thread.GetReply(replyID)\n\t\t\tuassert.False(t, found)\n\t\t})\n\t}\n}\n\nfunc TestThreadRenderSummary(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRenderInner(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestNewReply(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tparentID := PostID(1)\n\treplyID := PostID(2)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t\tuint(replyID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteReply\u0026boardID=%d\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\n\treply := newPost(board, replyID, creator, \"\", body, threadID, parentID, 0)\n\n\tuassert.False(t, reply.IsThread())\n\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\tuassert.False(t, reply.GetCreatedAt().IsZero())\n\tuassert.True(t, reply.GetUpdatedAt().IsZero())\n\tuassert.False(t, reply.HasReplies())\n\tuassert.Equal(t, body[:77]+\"...\", reply.GetSummary())\n\tuassert.Equal(t, url, reply.GetURL())\n\tuassert.Equal(t, replyURL, reply.GetReplyFormURL())\n\tuassert.Equal(t, deleteURL, reply.GetDeleteFormURL())\n}\n\nfunc TestReplyAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tparentReplyID := uint(parentReply.GetPostID())\n\tbody := \"A child reply\"\n\n\treply := parentReply.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, parentReplyID, uint(reply.GetParentID()))\n\tuassert.Equal(t, parentReplyID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.False(t, reply.HasReplies())\n\tuassert.True(t, parentReply.HasReplies())\n}\n\nfunc TestReplyGetReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\tfound bool\n\t}{\n\t\t{\n\t\t\tname: \"found\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := parentReply.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\treply, found := thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestReplyDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\treply := parentReply.AddReply(testutils.TestAddress(\"replier2\"), \"\")\n\n\t// NOTE: Deleting a reply from a parent reply should eventually be suported\n\tuassert.PanicsWithMessage(t, \"cannot delete reply from a non-thread post\", func() {\n\t\tparentReply.DeleteReply(reply.GetPostID())\n\t})\n}\n\nfunc TestReplyRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc createTestThread(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(1, \"test_board_123\", creator, perms)\n\treturn board.AddThread(creator, \"Title\", \"Body\")\n}\n\nfunc createTestReply(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\treturn thread.AddReply(creator, \"Test message\")\n}\n"},{"name":"public.gno","body":"package boards2\n\nimport (\n\t\"regexp\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n)\n\nconst (\n\t// MaxBoardNameLength defines the maximum length allowed for board names.\n\tMaxBoardNameLength = 50\n\n\t// MaxThreadTitleLength defines the maximum length allowed for thread titles.\n\tMaxThreadTitleLength = 100\n\n\t// MaxReplyLength defines the maximum length allowed for replies.\n\tMaxReplyLength = 300\n)\n\nvar (\n\treBoardName = regexp.MustCompile(`(?i)^[a-z]+[a-z0-9_\\-]{2,50}$`)\n\n\t// Minimalistic Markdown line prefix checks that if allowed would\n\t// break the current UI when submitting a reply. It denies replies\n\t// with headings, blockquotes or horizontal lines.\n\treDeniedReplyLinePrefixes = regexp.MustCompile(`(?m)^\\s*(#|---|\u003e)+`)\n)\n\n// SetHelp sets or updates boards realm help content.\nfunc SetHelp(content string) {\n\tcontent = strings.TrimSpace(content)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{content}\n\tgPerms.WithPermission(caller, PermissionRealmHelp, args, func(Args) {\n\t\tgHelp = content\n\t})\n}\n\n// SetPermissions sets a permissions implementation for boards2 realm or a board.\nfunc SetPermissions(bid BoardID, p Permissions) {\n\tassertRealmIsNotLocked()\n\n\tif p == nil {\n\t\tpanic(\"permissions is required\")\n\t}\n\n\tif bid != 0 {\n\t\tassertBoardExists(bid)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid}\n\tgPerms.WithPermission(caller, PermissionPermissionsUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\t// When board ID is zero it means that realm permissions are being updated\n\t\tif bid == 0 {\n\t\t\tgPerms = p\n\n\t\t\tstd.Emit(\n\t\t\t\t\"RealmPermissionsUpdated\",\n\t\t\t\t\"caller\", caller.String(),\n\t\t\t)\n\t\t\treturn\n\t\t}\n\n\t\t// Otherwise update the permissions of a single board\n\t\tboard := mustGetBoard(bid)\n\t\tboard.perms = p\n\n\t\tstd.Emit(\n\t\t\t\"BoardPermissionsUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t)\n\t})\n}\n\n// SetRealmNotice sets a notice to be displayed globally by the realm.\n// An empty message removes the realm notice.\nfunc SetRealmNotice(message string) {\n\tmessage = strings.TrimSpace(message)\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmNotice, nil, func(Args) {\n\t\tgNotice = message\n\n\t\tstd.Emit(\n\t\t\t\"RealmNoticeChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"message\", message,\n\t\t)\n\t})\n}\n\n// GetBoardIDFromName searches a board by name and returns it's ID.\nfunc GetBoardIDFromName(name string) (_ BoardID, found bool) {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\treturn 0, false\n\t}\n\treturn v.(*Board).id, true\n}\n\n// CreateBoard creates a new board.\nfunc CreateBoard(name string) BoardID {\n\tassertRealmIsNotLocked()\n\n\tname = strings.TrimSpace(name)\n\tassertIsValidBoardName(name)\n\tassertBoardNameNotExists(name)\n\n\tcaller := std.PreviousRealm().Address()\n\tid := incGetBoardID()\n\targs := Args{name, id}\n\tgPerms.WithPermission(caller, PermissionBoardCreate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(name)\n\n\t\tperms := createDefaultBoardPermissions(caller)\n\t\tboard := newBoard(id, name, caller, perms)\n\t\tgBoardsByID.Set(id.Key(), board)\n\t\tgBoardsByName.Set(name, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardCreated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", id.String(),\n\t\t\t\"name\", name,\n\t\t)\n\t})\n\treturn id\n}\n\n// RenameBoard changes the name of an existing board.\n//\n// A history of previous board names is kept when boards are renamed.\n// Because of that boards are also accesible using previous name(s).\nfunc RenameBoard(name, newName string) {\n\tassertRealmIsNotLocked()\n\n\tnewName = strings.TrimSpace(newName)\n\tassertIsValidBoardName(newName)\n\tassertBoardNameNotExists(newName)\n\n\tboard := mustGetBoardByName(name)\n\tassertBoardIsNotFrozen(board)\n\n\tbid := board.GetID()\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid, name, newName}\n\tboard.perms.WithPermission(caller, PermissionBoardRename, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(newName)\n\n\t\tboard := mustGetBoard(bid)\n\t\tboard.aliases = append(board.aliases, board.name)\n\t\tboard.name = newName\n\n\t\t// Index board for the new name keeping previous indexes for older names\n\t\tgBoardsByName.Set(newName, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardRenamed\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t\t\"name\", name,\n\t\t\t\"newName\", newName,\n\t\t)\n\t})\n}\n\n// CreateThread creates a new thread within a board.\nfunc CreateThread(boardID BoardID, title, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tbody = strings.TrimSpace(body)\n\tassertBodyIsNotEmpty(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadCreate)\n\n\tthread := board.AddThread(caller, title, body)\n\n\tstd.Emit(\n\t\t\"ThreadCreated\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", thread.GetPostID().String(),\n\t\t\"title\", title,\n\t)\n\n\treturn thread.id\n}\n\n// CreateReply creates a new comment or reply within a thread.\n//\n// The value of `replyID` is only required when creating a reply of another reply.\nfunc CreateReply(boardID BoardID, threadID, replyID PostID, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyCreate)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\tvar reply *Post\n\tif replyID == 0 {\n\t\t// When the parent reply is the thread just add reply to thread\n\t\treply = thread.AddReply(caller, body)\n\t} else {\n\t\t// Try to get parent reply and add a new child reply\n\t\tparent := mustGetReply(thread, replyID)\n\t\tif parent.IsHidden() || parent.IsReadonly() {\n\t\t\tpanic(\"replying to a hidden or frozen reply is not allowed\")\n\t\t}\n\n\t\treply = parent.AddReply(caller, body)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyCreate\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", reply.GetPostID().String(),\n\t)\n\n\treturn reply.id\n}\n\n// CreateRepost reposts a thread into another board.\nfunc CreateRepost(boardID BoardID, threadID PostID, title, body string, destinationBoardID BoardID) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tcaller := std.PreviousRealm().Address()\n\tdst := mustGetBoard(destinationBoardID)\n\tassertBoardIsNotFrozen(dst)\n\tassertHasBoardPermission(dst, caller, PermissionThreadRepost)\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\tif thread.IsRepost() {\n\t\tpanic(\"reposting a thread that is a repost is not allowed\")\n\t}\n\n\trepostId := dst.incGetPostID()\n\tbody = strings.TrimSpace(body)\n\trepost := newPost(dst, repostId, caller, title, body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\tthread.AddRepostTo(caller, repost, dst)\n\n\tstd.Emit(\n\t\t\"Repost\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"destinationBoardID\", destinationBoardID.String(),\n\t\t\"title\", title,\n\t)\n\n\treturn repostId\n}\n\n// DeleteThread deletes a thread from a board.\n//\n// Threads can be deleted by the users who created them or otherwise by users with special permissions.\nfunc DeleteThread(boardID BoardID, threadID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteThread filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\n\t\tif caller != thread.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionThreadDelete)\n\t\t}\n\t}\n\n\t// Hard delete thread and all its replies\n\tboard.DeleteThread(threadID)\n\n\tstd.Emit(\n\t\t\"ThreadDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t)\n}\n\n// DeleteReply deletes a reply from a thread.\n//\n// Replies can be deleted by the users who created them or otherwise by users with special permissions.\n// Soft deletion is used when the deleted reply contains sub replies, in which case the reply content\n// is replaced by a text informing that reply has been deleted to avoid deleting sub-replies.\nfunc DeleteReply(boardID BoardID, threadID, replyID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteReply filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\treply := mustGetReply(thread, replyID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\t\tassertReplyIsVisible(reply)\n\t\tassertReplyIsNotFrozen(reply)\n\n\t\tif caller != reply.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionReplyDelete)\n\t\t}\n\t}\n\n\t// Soft delete reply by changing its body when it contains\n\t// sub-replies, otherwise hard delete it.\n\tif reply.HasReplies() {\n\t\treply.Update(reply.GetTitle(), \"This reply has been deleted\")\n\t} else {\n\t\tthread.DeleteReply(replyID)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t)\n}\n\n// EditThread updates the title and body of thread.\n//\n// Threads can be updated by the users who created them or otherwise by users with special permissions.\nfunc EditThread(boardID BoardID, threadID PostID, title, body string) {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\tbody = strings.TrimSpace(body)\n\tif !thread.IsRepost() {\n\t\tassertBodyIsNotEmpty(body)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != thread.GetCreator() {\n\t\tassertHasBoardPermission(board, caller, PermissionThreadEdit)\n\t}\n\n\tthread.Update(title, body)\n\n\tstd.Emit(\n\t\t\"ThreadEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"title\", title,\n\t)\n}\n\n// EditReply updates the body of comment or reply.\n//\n// Replies can be updated only by the users who created them.\nfunc EditReply(boardID BoardID, threadID, replyID PostID, body string) {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\tassertReplyIsNotFrozen(reply)\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != reply.GetCreator() {\n\t\tpanic(\"only the reply creator is allowed to edit it\")\n\t}\n\n\treply.Update(\"\", body)\n\n\tstd.Emit(\n\t\t\"ReplyEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"body\", body,\n\t)\n}\n\n// InviteMember adds a member to the realm or to a boards.\n//\n// A role can optionally be specified to be assigned to the new member.\n// Board ID is only required when inviting a member to a board.\nfunc InviteMember(boardID BoardID, user std.Address, role Role) {\n\tassertUserAddressIsValid(user)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{user, role}\n\tperms.WithPermission(caller, PermissionMemberInvite, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.AddUser(user, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberInvited\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", user.String(),\n\t\t\t\"role\", string(role),\n\t\t)\n\t})\n}\n\n// RemoveMember removes a member from the realm or a boards.\n//\n// Board ID is only required when removing a member from board.\nfunc RemoveMember(boardID BoardID, member std.Address) {\n\tassertMembersUpdateIsEnabled(boardID)\n\tassertMemberAddressIsValid(member)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\tperms.WithPermission(caller, PermissionMemberRemove, Args{member}, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif !perms.RemoveUser(member) {\n\t\t\tpanic(\"member not found\")\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberRemoved\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t)\n\t})\n}\n\n// IsMember checks if an user is a member of the realm or a board.\n//\n// Board ID is only required when checking if a user is a member of a board.\nfunc IsMember(boardID BoardID, user std.Address) bool {\n\tassertUserAddressIsValid(user)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasUser(user)\n}\n\n// HasMemberRole checks if a realm or board member has a specific role assigned.\n//\n// Board ID is only required when checking a member of a board.\nfunc HasMemberRole(boardID BoardID, member std.Address, role Role) bool {\n\tassertMemberAddressIsValid(member)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasRole(member, role)\n}\n\n// ChangeMemberRole changes the role of a realm or board member.\n//\n// Board ID is only required when changing the role for a member of a board.\nfunc ChangeMemberRole(boardID BoardID, member std.Address, role Role) {\n\tassertMemberAddressIsValid(member)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, member, role}\n\tperms.WithPermission(caller, PermissionRoleChange, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.SetUserRoles(member, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"RoleChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t\t\"newRole\", string(role),\n\t\t)\n\t})\n}\n\n// IterateRealmMembers iterates realm members.\n// The iteration is done only for realm members, board members are not iterated.\nfunc IterateRealmMembers(offset int, fn UsersIterFn) (halted bool) {\n\tcount := gPerms.UsersCount() - offset\n\treturn gPerms.IterateUsers(offset, count, fn)\n}\n\n// IterateBoards iterates realm boards.\nfunc IterateBoards(offset int, fn func(ReadonlyBoard) bool) (halted bool) {\n\tcount := gBoardsByID.Size() - offset\n\treturn gBoardsByID.IterateByOffset(offset, count, func(_ string, v any) bool {\n\t\tboard, _ := v.(*Board)\n\t\treturn fn(readonlyBoard{board})\n\t})\n}\n\nfunc assertMemberAddressIsValid(member std.Address) {\n\tif !member.IsValid() {\n\t\tpanic(\"invalid member address\")\n\t}\n}\n\nfunc assertUserAddressIsValid(user std.Address) {\n\tif !user.IsValid() {\n\t\tpanic(\"invalid user address\")\n\t}\n}\n\nfunc assertHasBoardPermission(b *Board, user std.Address, p Permission) {\n\tif !b.perms.HasPermission(user, p) {\n\t\tpanic(\"unauthorized\")\n\t}\n}\n\nfunc assertBoardExists(id BoardID) {\n\tif _, found := getBoard(id); !found {\n\t\tpanic(\"board not found: \" + id.String())\n\t}\n}\n\nfunc assertBoardIsNotFrozen(b *Board) {\n\tif b.IsReadonly() {\n\t\tpanic(\"board is frozen\")\n\t}\n}\n\nfunc assertIsValidBoardName(name string) {\n\tsize := len(name)\n\tif size == 0 {\n\t\tpanic(\"board name is empty\")\n\t}\n\n\tif size \u003e MaxBoardNameLength {\n\t\tn := strconv.Itoa(MaxBoardNameLength)\n\t\tpanic(\"board name is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif !reBoardName.MatchString(name) {\n\t\tpanic(\"board name contains invalid characters\")\n\t}\n}\n\nfunc assertThreadIsNotFrozen(t *Post) {\n\tif t.IsReadonly() {\n\t\tpanic(\"thread is frozen\")\n\t}\n}\n\nfunc assertReplyIsNotFrozen(r *Post) {\n\tif r.IsReadonly() {\n\t\tpanic(\"reply is frozen\")\n\t}\n}\n\nfunc assertNameIsNotEmpty(name string) {\n\tif name == \"\" {\n\t\tpanic(\"name is empty\")\n\t}\n}\n\nfunc assertTitleIsValid(title string) {\n\tif title == \"\" {\n\t\tpanic(\"title is empty\")\n\t}\n\n\tif len(title) \u003e MaxThreadTitleLength {\n\t\tn := strconv.Itoa(MaxThreadTitleLength)\n\t\tpanic(\"thread title is too long, maximum allowed is \" + n + \" characters\")\n\t}\n}\n\nfunc assertBodyIsNotEmpty(body string) {\n\tif body == \"\" {\n\t\tpanic(\"body is empty\")\n\t}\n}\n\nfunc assertBoardNameNotExists(name string) {\n\tif gBoardsByName.Has(name) {\n\t\tpanic(\"board already exists\")\n\t}\n}\n\nfunc assertThreadExists(b *Board, threadID PostID) {\n\tif _, found := b.GetThread(threadID); !found {\n\t\tpanic(\"thread not found: \" + threadID.String())\n\t}\n}\n\nfunc assertReplyExists(thread *Post, replyID PostID) {\n\tif _, found := thread.GetReply(replyID); !found {\n\t\tpanic(\"reply not found: \" + replyID.String())\n\t}\n}\n\nfunc assertThreadIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"thread is hidden\")\n\t}\n}\n\nfunc assertReplyIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"reply is hidden\")\n\t}\n}\n\nfunc assertReplyBodyIsValid(body string) {\n\tassertBodyIsNotEmpty(body)\n\n\tif len(body) \u003e MaxReplyLength {\n\t\tn := strconv.Itoa(MaxReplyLength)\n\t\tpanic(\"reply is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif reDeniedReplyLinePrefixes.MatchString(body) {\n\t\tpanic(\"using Markdown headings, blockquotes or horizontal lines is not allowed in replies\")\n\t}\n}\n\nfunc assertMembersUpdateIsEnabled(boardID BoardID) {\n\tif boardID != 0 {\n\t\tassertRealmIsNotLocked()\n\t} else {\n\t\tassertRealmMembersAreNotLocked()\n\t}\n}\n"},{"name":"public_flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// SetFlaggingThreshold sets the number of flags required to hide a thread or comment.\n//\n// Threshold is only applicable within the board where it's setted.\nfunc SetFlaggingThreshold(boardID BoardID, threshold int) {\n\tif threshold \u003c 1 {\n\t\tpanic(\"invalid flagging threshold\")\n\t}\n\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, threshold}\n\tboard.perms.WithPermission(caller, PermissionBoardFlaggingUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\n\t\tgFlaggingThresholds.Set(boardID.String(), threshold)\n\t\tstd.Emit(\n\t\t\t\"FlaggingThresholdUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"threshold\", strconv.Itoa(threshold),\n\t\t)\n\t})\n}\n\n// GetFlaggingThreshold returns the number of flags required to hide a thread or comment within a board.\nfunc GetFlaggingThreshold(boardID BoardID) int {\n\tassertBoardExists(boardID)\n\treturn getFlaggingThreshold(boardID)\n}\n\n// FlagThread adds a new flag to a thread.\n//\n// Flagging requires special permissions and hides the thread when\n// the number of flags reaches a pre-defined flagging threshold.\nfunc FlagThread(boardID BoardID, threadID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionThreadFlag)\n\t}\n\n\tt, ok := board.GetThread(threadID)\n\tif !ok {\n\t\tpanic(\"post doesn't exist\")\n\t}\n\tassertThreadIsNotFrozen(t)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(t, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\tt.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ThreadFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n\n// FlagReply adds a new flag to a comment or reply.\n//\n// Flagging requires special permissions and hides the comment or reply\n// when the number of flags reaches a pre-defined flagging threshold.\nfunc FlagReply(boardID BoardID, threadID, replyID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionReplyFlag)\n\t}\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsNotFrozen(thread)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(reply, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\treply.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n"},{"name":"public_freeze.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// FreezeBoard freezes a board so no more threads and comments can be created or modified.\nfunc FreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, true)\n}\n\n// UnfreezeBoard removes frozen status from a board.\nfunc UnfreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, false)\n}\n\n// IsBoardFrozen checks if a board has been frozen.\nfunc IsBoardFrozen(boardID BoardID) bool {\n\tboard := mustGetBoard(boardID)\n\treturn board.IsReadonly()\n}\n\n// FreezeThread freezes a thread so thread cannot be replied, modified or deleted.\n//\n// Fails if board is frozen.\nfunc FreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, true)\n}\n\n// UnfreezeThread removes frozen status from a thread.\n//\n// Fails if board is frozen.\nfunc UnfreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, false)\n}\n\n// IsThreadFrozen checks if a thread has been frozen.\n//\n// Returns true if board is frozen.\nfunc IsThreadFrozen(boardID BoardID, threadID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treturn board.IsReadonly() || thread.IsReadonly()\n}\n\n// UnfreezeReply removes frozen status from a reply.\n//\n// Fails when parent thread or board are frozen.\nfunc UnfreezeReply(boardID BoardID, threadID, replyID PostID) {\n\t// XXX: Is there a use case for also freezing replies?\n\tsetReplyReadonly(boardID, threadID, replyID, false)\n}\n\n// FreezeReply freezes a thread reply so it cannot be modified or deleted.\n//\n// Fails when parent thread or board are frozen.\nfunc FreezeReply(boardID BoardID, threadID, replyID PostID) {\n\tsetReplyReadonly(boardID, threadID, replyID, true)\n}\n\n// IsReplyFrozen checks if a thread reply has been frozen.\n//\n// Returns true when board or a parent thread is frozen.\nfunc IsReplyFrozen(boardID BoardID, threadID, replyID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\treturn board.IsReadonly() || thread.IsReadonly() || reply.IsReadonly()\n}\n\nfunc setReplyReadonly(boardID BoardID, threadID, replyID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\tif isReadonly {\n\t\tassertReplyIsNotFrozen(reply)\n\t}\n\n\treply.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ReplyFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setThreadReadonly(boardID BoardID, threadID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tif isReadonly {\n\t\tassertThreadIsNotFrozen(thread)\n\t}\n\n\tthread.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ThreadFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setBoardReadonly(boardID BoardID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tif isReadonly {\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionBoardFreeze)\n\n\tboard.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"BoardFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n"},{"name":"public_lock.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// LockRealm locks the realm making it readonly.\n//\n// WARNING: Realm can't be unlocked once locked.\n//\n// Realm can also be locked without locking realm members.\n// Realm members can be locked when locking the realm or afterwards.\n// This is relevant for two reasons, one so members can be modified after lock.\n// The other is for realm owners, which can delete threads and comments after lock.\nfunc LockRealm(lockRealmMembers bool) {\n\tassertRealmMembersAreNotLocked()\n\n\t// If realm members are not being locked assert that realm is no locked.\n\t// Members can be locked after locking the realm, in a second `LockRealm` call.\n\tif !lockRealmMembers {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmLock, nil, func(Args) {\n\t\tgLocked.realm = true\n\t\tgLocked.realmMembers = lockRealmMembers\n\n\t\tstd.Emit(\n\t\t\t\"RealmLocked\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"lockRealmMembers\", strconv.FormatBool(lockRealmMembers),\n\t\t)\n\t})\n}\n\n// IsRealmLocked checks if boards realm has been locked.\nfunc IsRealmLocked() bool {\n\treturn gLocked.realm\n}\n\n// AreRealmMembersLocked checks if realm members has been locked.\nfunc AreRealmMembersLocked() bool {\n\treturn gLocked.realmMembers\n}\n\nfunc assertRealmIsNotLocked() { // TODO: Add filtests for locked realm case to all public functions\n\tif gLocked.realm {\n\t\tpanic(\"realm is locked\")\n\t}\n}\n\nfunc assertRealmMembersAreNotLocked() { // TODO: Add filtests for locked members case to all public member functions\n\tif gLocked.realmMembers {\n\t\tpanic(\"realm and members are locked\")\n\t}\n}\n"},{"name":"render.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/p/demo/mux\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst (\n\tpageSizeBoards  = 6\n\tpageSizeThreads = 6\n\tpageSizeReplies = 10\n)\n\nconst menuManageBoard = \"manageBoard\"\n\nfunc Render(path string) string {\n\trouter := mux.NewRouter()\n\trouter.HandleFunc(\"\", renderBoardsList)\n\trouter.HandleFunc(\"help\", renderHelp)\n\trouter.HandleFunc(\"admin-users\", renderMembers)\n\trouter.HandleFunc(\"{board}\", renderBoard)\n\trouter.HandleFunc(\"{board}/members\", renderMembers)\n\trouter.HandleFunc(\"{board}/{thread}\", renderThread)\n\trouter.HandleFunc(\"{board}/{thread}/{reply}\", renderReply)\n\n\trouter.NotFoundHandler = func(res *mux.ResponseWriter, _ *mux.Request) {\n\t\tres.Write(\"Path not found\")\n\t}\n\n\treturn router.Render(path)\n}\n\nfunc renderHelp(res *mux.ResponseWriter, _ *mux.Request) {\n\tres.Write(\"# Boards Help\\n\")\n\tif gHelp != \"\" {\n\t\tres.Write(gHelp)\n\t} else {\n\t\tres.Write(\"### Help content has not been uploaded\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(newLink(\"upload boards help\", txlink.Call(\"SetHelp\", \"content\", \"\")))\n\t\tres.Write(\" ?\")\n\t}\n}\n\nfunc renderBoardsList(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tres.Write(\"# Boards\\n\\n\")\n\trenderBoardListMenu(res, req)\n\tres.Write(\"\\n\\n---\\n\")\n\n\tif gBoardsByID.Size() == 0 {\n\t\tlink := txlink.Call(\"CreateBoard\", \"name\", \"\")\n\t\tres.Write(\"### Currently there are no boards\\n\")\n\t\tres.Write(\"Be the first to \")\n\t\tres.Write(newLink(\"create a new board\", link))\n\t\tres.Write(\" !\")\n\n\t\treturn\n\t}\n\n\tp, err := pager.New(req.RawPath, gBoardsByID.Size(), pager.WithPageSize(pageSizeBoards))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tboard := v.(*Board)\n\n\t\tres.Write(\"**\" + newLink(board.GetName(), board.GetURL()) + \"**  \\n\")\n\t\tres.Write(\"Created by \" + newUserLink(board.creator) + \" \")\n\t\tres.Write(\"on \" + board.createdAt.Format(dateFormat))\n\t\tres.Write(\", #\" + board.id.String() + \"  \\n\")\n\t\tres.Write(\"**\" + strconv.Itoa(board.threads.Size()) + \" threads\")\n\t\tif board.IsReadonly() {\n\t\t\tres.Write(\", read-only\")\n\t\t}\n\n\t\tres.Write(\"**\\n\\n\")\n\t\treturn false\n\t}\n\n\tres.Write(\"Sort by: \")\n\tr := realmpath.Parse(req.RawPath)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tres.Write(newLink(\"newest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tres.Write(newLink(\"oldest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n---\\n\")\n\t\tres.Write(pager.Picker(p))\n\t}\n}\n\nfunc renderBoardListMenu(res *mux.ResponseWriter, req *mux.Request) {\n\tpath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\n\tres.Write(newLink(\"Create Board\", txlink.Call(\"CreateBoard\", \"name\", \"\")))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"List Admin Users\", path+\":admin-users\"))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"Help\", path+\":help\"))\n\tres.Write(\"\\n\\n\")\n}\n\nfunc renderBoard(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tlink := newLink(\"create a new board\", txlink.Call(\"CreateBoard\", \"name\", name))\n\t\tres.Write(\"### The board you are looking for does not exist\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(link)\n\t\tres.Write(\" ?\")\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tmenu := renderBoardMenu(board, req)\n\n\tres.Write(board.Render(req.RawPath, menu))\n}\n\nfunc renderBoardMenu(board *Board, req *mux.Request) string {\n\tvar (\n\t\tb               strings.Builder\n\t\tboardMembersURL = board.GetPath() + \"/members\"\n\t)\n\n\tif board.IsReadonly() {\n\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\tb.WriteString(\" • \")\n\t\tb.WriteString(newLink(\"Unfreeze Board\", board.GetUnfreezeFormURL()))\n\t\tb.WriteString(\"\\n\")\n\t} else {\n\t\tb.WriteString(newLink(\"Create Thread\", board.GetPostFormURL()))\n\t\tb.WriteString(\" • \")\n\n\t\tmenu := getCurrentMenu(req.RawPath)\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"**Manage Board**\")\n\t\t} else {\n\t\t\tb.WriteString(newLink(\"Manage Board\", menuURL(menuManageBoard)))\n\t\t}\n\n\t\tb.WriteString(\"  \\n\")\n\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"↳\")\n\t\t\tb.WriteString(newLink(\"Invite Member\", board.GetInviteMemberFormURL()))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"Freeze Board\", board.GetFreezeFormURL()))\n\t\t\tb.WriteString(\"\\n\\n\")\n\t\t}\n\t}\n\n\treturn b.String()\n}\n\nfunc renderThread(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + rawID)\n\t} else if thread.IsHidden() {\n\t\tres.Write(\"Thread with ID: \" + rawID + \" has been flagged as inappropriate\")\n\t} else {\n\t\tres.Write(thread.Render(req.RawPath, \"\", 5))\n\t}\n}\n\nfunc renderReply(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\trawID = req.GetVar(\"reply\")\n\trID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid reply ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + req.GetVar(\"thread\"))\n\t\treturn\n\t}\n\n\treply, found := thread.GetReply(PostID(rID))\n\tif !found {\n\t\tres.Write(\"Reply does not exist with ID: \" + rawID)\n\t\treturn\n\t}\n\n\t// Call render even for hidden replies to display children.\n\t// Original comment content will be hidden under the hood.\n\t// See: #3480\n\tres.Write(reply.RenderInner())\n}\n\nfunc renderMembers(res *mux.ResponseWriter, req *mux.Request) {\n\tboardID := BoardID(0)\n\tperms := gPerms\n\tname := req.GetVar(\"board\")\n\tif name != \"\" {\n\t\tv, found := gBoardsByName.Get(name)\n\t\tif !found {\n\t\t\tres.Write(\"### Board not found\")\n\t\t\treturn\n\t\t}\n\n\t\tboard := v.(*Board)\n\t\tboardID = board.GetID()\n\t\tperms = board.perms\n\n\t\tres.Write(\"# \" + board.GetName() + \" Members\\n\")\n\t\tres.Write(\"### These are the board members\\n\\n\")\n\t} else {\n\t\tres.Write(\"# Admin Users\\n\")\n\t\tres.Write(\"### These are the admin users of the realm\\n\\n\")\n\t}\n\n\t// Create a pager with a small page size to reduce\n\t// the number of username lookups per page.\n\tp, err := pager.New(req.RawPath, perms.UsersCount(), pager.WithPageSize(5))\n\tif err != nil {\n\t\tres.Write(err.Error())\n\t\treturn\n\t}\n\n\tres.Write(\"| Member | Role | Actions |\\n| --- | --- | --- |\\n\")\n\tperms.IterateUsers(p.Offset(), p.PageSize(), func(u User) bool {\n\t\tres.Write(\"| \")\n\t\tres.Write(newUserLink(u.Address))\n\t\tres.Write(\" | \")\n\t\tres.Write(rolesToString(u.Roles))\n\t\tres.Write(\" | \")\n\t\tres.Write(newLink(\"remove\", txlink.Call(\n\t\t\t\"RemoveMember\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t)))\n\t\tres.Write(\" • \")\n\t\tres.Write(newLink(\"change role\", txlink.Call(\n\t\t\t\"ChangeMemberRole\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t\t\"role\", \"\",\n\t\t)))\n\t\tres.Write(\" |\\n\")\n\t\treturn false\n\t})\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n\\n\" + pager.Picker(p))\n\t}\n}\n\nfunc renderNotice(res *mux.ResponseWriter) {\n\tif gNotice == \"\" {\n\t\treturn\n\t}\n\n\tres.Write(\"\u003e \")\n\tres.Write(gNotice)\n\tres.Write(\"\\n\\n\")\n}\n\nfunc rolesToString(roles []Role) string {\n\tif len(roles) == 0 {\n\t\treturn \"\"\n\t}\n\n\tnames := make([]string, len(roles))\n\tfor i, r := range roles {\n\t\tnames[i] = string(r)\n\t}\n\treturn strings.Join(names, \", \")\n}\n\nfunc menuURL(name string) string {\n\t// TODO: Menu URL works because no other GET arguments are being used\n\treturn \"?menu=\" + name\n}\n\nfunc getCurrentMenu(rawURL string) string {\n\t_, rawQuery, found := strings.Cut(rawURL, \"?\")\n\tif !found {\n\t\treturn \"\"\n\t}\n\n\tquery, _ := url.ParseQuery(rawQuery)\n\treturn query.Get(\"menu\")\n}\n"},{"name":"z_0_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(\"test123\")\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_0_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tboardName = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(boardName)\n}\n\nfunc main() {\n\tboards2.CreateBoard(boardName)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_0_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_0_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"gnoland\")\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_0_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar name = strings.Repeat(\"X\", boards2.MaxBoardNameLength+1)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(name)\n}\n\n// Error:\n// board name is too long, maximum allowed is 50 characters\n"},{"name":"z_0_h_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname   = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\tboards2.InviteMember(0, member, boards2.RoleOwner) // Operate on realm DAO members instead of individual boards\n\ttesting.SetOriginCaller(member)\n\tusers.Register(name)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(name)\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"test123\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread as a moderator\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagThread(404, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_10_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Make the next call as an uninvited user\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, 404, \"\")\n}\n\n// Error:\n// post doesn't exist\n"},{"name":"z_10_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_10_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to flag threads\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with a specific flagging threshold\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread and flag it as a moderator\n\ttesting.SetOriginCaller(moderator)\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item has been already flagged by a current user\n"},{"name":"z_10_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a thread so the realm owner can flag and hide it with a single flag\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\t// Also freeze board to make sure that realm owner can still flag the thread\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_11_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_11_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditThread(404, 1, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_11_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_11_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to edit threads\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid   boards2.BoardID\n\tpid   boards2.PostID\n\ttitle = strings.Repeat(\"X\", boards2.MaxThreadTitleLength+1)\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, \"bar\")\n}\n\n// Error:\n// thread title is too long, maximum allowed is 100 characters\n"},{"name":"z_12_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Create a reply and a sub reply\n\tparentRID := boards2.CreateReply(bid, tid, 0, \"Parent\")\n\trid = boards2.CreateReply(bid, tid, parentRID, \"Child\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditReply(404, 1, 0, \"body\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_12_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, 404, 0, \"body\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_12_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, 404, \"body\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_12_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"new body\")\n}\n\n// Error:\n// only the reply creator is allowed to edit it\n"},{"name":"z_12_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Flag the reply so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"body\")\n}\n\n// Error:\n// reply is hidden\n"},{"name":"z_12_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_13_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagReply(404, 1, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_13_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, 404, 1, \"\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_13_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, 404, \"\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_13_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_13_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_13_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to flag replies\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a reply so the realm owner can flag and hide it with a single flag\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\t// Also freeze board to make sure that realm owner can still flag the reply\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n}\n\n// Output:\n// true\n"},{"name":"z_14_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_14_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteReply(404, 1, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_14_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, 404, 1)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_14_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, 404)\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_14_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent\")\n\tboards2.CreateReply(bid, tid, rid, \"Child reply\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Render content must contain the releted message instead of reply's body\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e This reply has been deleted\\n\"))\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e Child reply\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_14_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Call using a user that has not permission to delete replies\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_14_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to delete replies\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_15_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\tboards2.FlagThread(srcBID, srcTID, \"idk\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread is flagged\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_15_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID = 1024\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread doesn't exist\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread does not exist with ID: 1024\n"},{"name":"z_15_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_15_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/ufmt\"\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"original title\", \"original text\")\n}\n\nfunc main() {\n\t// Success case\n\ttID := boards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n\tp := ufmt.Sprintf(\"dst-board/%s\", tID)\n\tout := boards2.Render(p)\n\n\tprintln(strings.Contains(out, \"original text\"))\n\tprintln(strings.Contains(out, \"repost title\"))\n\tprintln(strings.Contains(out, \"repost text\"))\n}\n\n// Output:\n// true\n// true\n// true\n"},{"name":"z_15_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Create a board with a thread\n\torigBID := boards2.CreateBoard(\"origin-board\")\n\torigTID := boards2.CreateThread(origBID, \"title\", \"text\")\n\n\t// Create a second board and repost a thread using an empty title\n\tsrcBID = boards2.CreateBoard(\"source-board\")\n\tsrcTID = boards2.CreateRepost(origBID, origTID, \"original title\", \"original text\", srcBID)\n\n\t// Create a third board to try reposting the repost\n\tdstBID = boards2.CreateBoard(\"destination-board\")\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n}\n\n// Error:\n// reposting a thread that is a repost is not allowed\n"},{"name":"z_16_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 4)\n\n\t// Ensure that flagging threshold changed\n\tprintln(boards2.GetFlaggingThreshold(bid))\n}\n\n// Output:\n// 4\n"},{"name":"z_16_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nconst bid boards2.BoardID = 404\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_16_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(1, 0)\n}\n\n// Error:\n// invalid flagging threshold\n"},{"name":"z_17_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsBoardFrozen(bid))\n}\n\n// Output:\n// true\n"},{"name":"z_17_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_18_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_18_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\tuser = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid  = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_18_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tperms boards2.Permissions\n\tbid   boards2.BoardID\n)\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foobar\")\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new board permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_19_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\t// Attempt to freeze a thread on frozen board\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_19_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a frozen thread\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_19_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n}\n\n// Output:\n// true\n"},{"name":"z_1_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, boards2.RoleOwner)\n}\n\n// Error:\n// only owners are allowed to invite other owners\n"},{"name":"z_1_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n\trole  = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, user, boards2.Role(\"foobar\")) // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// invalid role: foobar\n"},{"name":"z_1_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole  = boards2.RoleOwner\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\") // Operate on board DAO members\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(0, user, role)) // Operate on realm DAO\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_1_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, user, role)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n}\n\n// Error:\n// user already exists\n"},{"name":"z_1_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_20_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a reply on frozen thread\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_20_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\nfunc main() {\n\t// Attempt to freeze already frozen reply\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_20_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// reply frozen\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.FreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// thread frozen\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// board frozen\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n}\n\n// Output:\n// false\n// true\n// false\n// true\n// false\n// true\n// false\n"},{"name":"z_20_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// unfrozen thread - should work\n\tr2 := boards2.CreateReply(bid, tid, rid, \"child 1\")\n\n\t// frozen thread - can't reply\n\tboards2.FreezeReply(bid, tid, rid)\n\tboards2.CreateReply(bid, tid, r2, \"child 2\")\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_21_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_21_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Set an initial message so it can be cleared\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n\tprintln(strings.HasPrefix(content, \"# Boards\"))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_21_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to set realm notice\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"Foo\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// false\n"},{"name":"z_22_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// realm is locked\n"},{"name":"z_22_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to lock the realm\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_22_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(true)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(true)\n}\n\n// Error:\n// realm and members are locked\n"},{"name":"z_22_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Lock the realm without locking realm members\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_23_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateRealmMembers(0, func(u boards2.User) bool {\n\t\tprintln(u.Address, string(u.Roles[0]))\n\t\treturn false\n\t})\n}\n\n// Output:\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_24_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid := boards2.CreateBoard(\"test123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleAdmin)\n\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateBoards(0, func(b boards2.ReadonlyBoard) bool {\n\t\tprintln(b.ID().String())\n\t\tprintln(b.Name())\n\n\t\tb.IterateMembers(0, b.MembersCount(), func(u boards2.User) bool {\n\t\t\tprintln(u.Address, string(u.Roles[0]))\n\t\t\treturn false\n\t\t})\n\t})\n}\n\n// Output:\n// 1\n// test123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj admin\n// 2\n// foo123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_2_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Test comment\"\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\trid := boards2.CreateReply(bid, tid, 0, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid == 2)\n\n\t// Render content must contain the reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateReply(404, 1, 0, \"comment\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_2_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, 404, 0, \"comment\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_2_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 404, \"comment\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_2_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Hide thread by flagging it so reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide thread by flagging it so reply of a reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"thread\", \"thread\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide reply by flagging it so sub reply can't be submitted\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_2_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_2_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"First comment\")\n}\n\nfunc main() {\n\trid2 := boards2.CreateReply(bid, tid, rid, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid2 == 3)\n\n\t// Render content must contain the sub-reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_k_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent comment\")\n\n\t// Flag parent post so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"Sub comment\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_l_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// cannot reply to a frozen thread\n\tboards2.CreateReply(bid, tid, 0, \"foobar\")\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_2_m_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, strings.Repeat(\"x\", boards2.MaxReplyLength+1))\n}\n\n// Error:\n// reply is too long, maximum allowed is 300 characters\n"},{"name":"z_2_n_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\u003e Markdown blockquote\")\n}\n\n// Error:\n// using Markdown headings, blockquotes or horizontal lines is not allowed in replies\n"},{"name":"z_3_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname    = \"foo123\"\n\tnewName = \"bar123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by the default board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_3_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, name)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_3_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RenameBoard(\"unexisting\", \"foo\")\n}\n\n// Error:\n// board does not exist with name: unexisting\n"},{"name":"z_3_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_3_f_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by another board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_g_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"short\")\n}\n\n// Error:\n// the minimum allowed board name length is 6 characters\n"},{"name":"z_3_i_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"barbaz\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_4_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleOwner\n\tbid     = boards2.BoardID(0) // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, member, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\towner2 = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin  = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, owner2, boards2.RoleOwner)\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, owner2, boards2.RoleAdmin)\n}\n\n// Error:\n// admins are not allowed to remove the Owner role\n"},{"name":"z_4_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\tboards2.InviteMember(bid, admin2, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin2, boards2.RoleOwner)\n}\n\n// Error:\n// admins are not allowed to promote members to Owner\n"},{"name":"z_4_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid     = boards2.BoardID(0)                                      // Operate on realm DAO members instead of individual boards\n\tnewRole = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole) // Owner can promote other members to Owner\n\n\t// Ensure that new role has been changed to owner\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin, boards2.Role(\"foo\"))\n}\n\n// Error:\n// invalid role: foo\n"},{"name":"z_4_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, \"invalid address\", boards2.RoleModerator)\n}\n\n// Error:\n// invalid member address\n"},{"name":"z_4_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, user, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.RemoveMember(bid, user)\n\n\t// Check that user is not a member\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n"},{"name":"z_5_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// member not found\n"},{"name":"z_6_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole   = boards2.RoleGuest\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, member, role)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, member, role))\n\tprintln(boards2.HasMemberRole(bid, member, \"invalid\"))\n\tprintln(boards2.IsMember(bid, member))\n}\n\n// Output:\n// true\n// false\n// true\n"},{"name":"z_6_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleGuest\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, user, role))\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n// false\n"},{"name":"z_7_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"test123\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tbid2, found := boards2.GetBoardIDFromName(name)\n\tprintln(found)\n\tprintln(bid2 == bid)\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_7_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid, found := boards2.GetBoardIDFromName(\"foobar\")\n\tprintln(found)\n\tprintln(bid == 0)\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_8_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\ttid := boards2.CreateThread(bid, title, body)\n\n\t// Ensure that returned ID is right\n\tprintln(tid == 1)\n\n\t// Thread should not be frozen by default\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// false\n// true\n// true\n"},{"name":"z_8_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateThread(404, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_8_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_8_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_8_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_9_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, title, body)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"},{"name":"z_9_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteThread(404, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_9_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, 404)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_9_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Call using a user that has not permission to delete threads\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_9_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to delete threads\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"}]},"deposit":""}],"fee":{"gas_wanted":"90000000","gas_fee":"900000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bgq2mHaqO+ClZqcBvMmMWga7izsxHfWWkLvVdUj/SREIux9mkLcHZopajDlzRU4k8U9+p/SzvdPV1ClD8QJjDQ=="}],"memo":""},"metadata":{"timestamp":"1743761702"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"RemoveMember","args":["0","g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zFD00e0aO8S4XCcGKK+hYFll9syWCwDLU552HISFFY136K4KdR7O3SYzcay0KJio6THBkoPzfjlp0pdrrSZaCw=="}],"memo":""},"metadata":{"timestamp":"1743761807"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["EmptyWithManyMembers"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"vNXG8vCPc5ta7xG0/BQCSnUVa38VwrZOtdy8pUPKITzPoiAuOf+ocKYSZ8eNNkh7IIeqjFYADPgOZeV4HvxhCw=="}],"memo":""},"metadata":{"timestamp":"1743761888"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ue4B6yp55w8jKpN2/TFsJrGhwsL0FQfrbFY59a0iYKLeVICAB5gIrsCf98/6Ct1/V6fU2vLJh0vpPekTtwc1Bw=="}],"memo":""},"metadata":{"timestamp":"1743761893"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1e5hud66rs7ye4zgeqmqvwfhurs2mnf408hdqcl","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"a6sqt1qst2TFlGCZoP5DLlOrC+145dUBL9Reb5duDYRGb8aWsRu1nlRurPbtCcig+kp7Nk1MyuMdUBL/lK7yCA=="}],"memo":""},"metadata":{"timestamp":"1743761898"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5","admin"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"AnS6SJIzlb3Z5lwMYoeR2KWH8TcOpbi/jH7Vsh9CIEn3KVSckMxDTaYk90fsCYHP2cPMbZfGQwENXQb+9a9bBg=="}],"memo":""},"metadata":{"timestamp":"1743761903"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g12chzmwxw8sezcxe9h2csp0tck76r4ptwdlyyqk","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lLmNQCvV7+oOKZucSXT90nYlTACWN6YEbkZKfccChBh/wUjeqLGS0YyszPxk7YOsj0K2/OGsrYOC0gukKjlMCw=="}],"memo":""},"metadata":{"timestamp":"1743761908"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1ym6zxff3xq7wfldcs3uyu7x7z40gstggcx8zdj","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zgzCQlf7PydhnCAGvd8Qx5PotGs1oRONk3nN95k2LIuFEEAVoHxGj+2PtMBQ1f91iTnBsJ1uKUuOJQ0OCsjTAA=="}],"memo":""},"metadata":{"timestamp":"1743761913"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["TheNumber42"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GJWNOcDkPKGY7PLPSuk2sMiLeBHeDfVKTSCR5ONQGp6pqI9iwCxj1H3cD+bfkCk1+p/UpfubXzU9Ya3q859gBw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["2","What's your take on it\\?","Seen in many places, unknown to many"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hA+wCreZUeme6OpRmNOJjo4Xwsz0he5X8mQ4g4MKVkeGqUwlIsG005FxDN/7RssNNFWH8EzGP4MGIozCwEA7AA=="}],"memo":""},"metadata":{"timestamp":"1743761923"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","What do you mean\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EIVelUPSStgGjqWLsj+NdD0fSHeZvm8Z7RnQvDQSpFuv7mHOGKV52jDZxWwH4lOHL2/e0vJKin2fWyXPF1ClCA=="}],"memo":""},"metadata":{"timestamp":"1743761928"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","よんじゅうに\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"rQ64TW3VyqAx0miELawdw5gR6g2lpNemxzXYq/kxToUNU8GYoXn4qWMO6otVdF+nsvQvkJfBBMHg9uIvDALSCw=="}],"memo":""},"metadata":{"timestamp":"1743761933"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","2","Cuarenta y dos\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y7zCrmgadsgAQCV6OiINH1LJmQ78gDYUTZ+ny0F1fNCL9nQPvbFTOwr7SX2kuaPe8iKbztZCe6N/1B//EEtpAw=="}],"memo":""},"metadata":{"timestamp":"1743761938"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ThreadsExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lH+1XZ2fVmGI2PXKfYUxKBFXKw3db+JjwAjECmsH4VXo+ppDtf79dEux0SdRltNdbx4zEW9O/3WENwu3hg5SBA=="}],"memo":""},"metadata":{"timestamp":"1743761943"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Seventh","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6NX0nRYSSn12bZ78/dmmYxWXM4IK9yQjLAomZn7edZ8Ri5BAtqZOSwvXbhZ0BFcUTgosLAgyrX30LteqkNnxBQ=="}],"memo":""},"metadata":{"timestamp":"1743761948"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Sixth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"sIPoU9jO89zc4y1GAYITh3PU9zJVGY3ugfSMsoBBxc93lOXDLAFUE+2AMQa/7Kwfyo1af4FXXFfygYCCICYSAg=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fifth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KdKslB6f6JkEB3boj5CZ1cIAOdAdF3bJ6cX6dsrT4XBK3u41XzmAK96gilAtVcVpCqNpnLul6wbbL+0exHd4AA=="}],"memo":""},"metadata":{"timestamp":"1743761958"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fourth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"D1fMGgWqqsxK7vF0ojPp36NpP6eU+1LsEUdbC2NL/xjhlsZfgU7Vu2XmXjFhFM9B2VGCwUBnEaMVufr3rW1HCQ=="}],"memo":""},"metadata":{"timestamp":"1743761963"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Third","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4uy78ABsfnWCUqmuzoU8ZUdJ7jpJrZa7J/cv/kvFT3peJhE2Rv7VrkTYcaZHKKjzWG14JmND4ZaaJnNr907Ag=="}],"memo":""},"metadata":{"timestamp":"1743761968"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Second","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"5dDdgrVSfFfD9kYaBD369pxn1g7l6jDOaNANwcuxGwhUaT9j5pcroAqHHTu5UJf4sekSNb/nSNEp37ucimaCCQ=="}],"memo":""},"metadata":{"timestamp":"1743761973"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","First with many Replies","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"OmSespthAIe99nCg3NNVqwdogdID85sViEarnls5JCXhygv/lzl79T4CFQIa42T13gOLMkPX9fm7OwT8mU1RAQ=="}],"memo":""},"metadata":{"timestamp":"1743761978"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZDniAUL1tJpPm4oBs4ExDExl8MJMedEzUBdezq600CaJEYvBznvd3vueZ5siRp7tHdaV0DgNmcXzZ+OxpqcQCg=="}],"memo":""},"metadata":{"timestamp":"1743761983"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","8","Sub First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F8ifXbTQbXb5RSL61RUb9S0tBzok3uo8RTDhh0501znHUYKYILNSitQg9Ak6XmwcV0UQcgO9zzLx316DBB7YBg=="}],"memo":""},"metadata":{"timestamp":"1743761988"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Second"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CkwjnV+bUGNb/AghoAxE8xc8/BZwAp5Qdhy4xkfZrtUpxGDRt1ji9DaM2ZzUQnDBQeXiev5RiZyA7I4gwva7Dw=="}],"memo":""},"metadata":{"timestamp":"1743761993"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Third"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3sNgEYAAHfXxWFQdYzafqv5vsFDEBMdCE3RRaKyQEQxpX92yNavn05wq7EtOeiIymOD1B7LWBUCDIGMxO27iBw=="}],"memo":""},"metadata":{"timestamp":"1743761998"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fourth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yVMsA1dVS5o2dpm1EoxH55Ybm8sBwbmeCFhyboRoWjp9qnZhLXLvzu73jo0nZa8xJialU0upoHcWrr76K5rPBw=="}],"memo":""},"metadata":{"timestamp":"1743762003"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fifth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UEHh1VeBqkL3lCultuOyGU0LDvVTlrhg6wTJqAn+5gF2QUKWZi3Gn4CBbkoY0byq1OCDXr6R/K+SP3aB8QObAw=="}],"memo":""},"metadata":{"timestamp":"1743762008"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Sixth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3kby94L/InKntqzU+T3NRDno58jFcx87O0/FldOxJDlcT56+WaKthft6n+Wp0Jl1lz8Xv3LmgwGWQ3Pc52+oBg=="}],"memo":""},"metadata":{"timestamp":"1743762013"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Seventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"L/zuxl0k3DoZFKNs/kGgaEh1ROr/YafHDEmXlJw9aD/jH2Mbm/PhvU3La/o0PchdGC0A42xuwZ+SeMQIyUVdCA=="}],"memo":""},"metadata":{"timestamp":"1743762018"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eigth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VpVi4ICdRdDP3sT2HJNj5Vl5gFKZxgy+58rqpnkR8l1QBLPZDjP+hklXzsmhDouMdI+ssFCTU4mD1/W7sGUQAw=="}],"memo":""},"metadata":{"timestamp":"1743762023"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Ninth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u/zQSKIjPHAPocj4hEnEw441VWRByccTtenD12X8cBnYxBDHNV87PR+JBWUjNXN7GLZfPcjK5igMD2l5IqhwDA=="}],"memo":""},"metadata":{"timestamp":"1743762028"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Tenth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tnUlmhe3JjOtRxnpCDbYcpaeF3rNa8N0F5EYwJU8ba8zDX9St1hiBp66tScfyYbTeLE2aTRmUa8E+zh730++BA=="}],"memo":""},"metadata":{"timestamp":"1743762033"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eleventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"q43M1mc9mbW7TJWgTyT1L37ePTd7N1hkAWbUUfMztPKCblhBrECCKrzMwiE5iL+afNgiWGZcCpFc5KwtwPSyCQ=="}],"memo":""},"metadata":{"timestamp":"1743762039"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ReadOnlyExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"STdbtDRKw327m8lDyp9W1Fnr2A3iC2uws1pBNHuL9xya2JE6IYbU0Fe12FThHOLWK80Yp+L43bgVNOSOamrWAg=="}],"memo":""},"metadata":{"timestamp":"1743762044"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["4","Example Thread","This thread shouldn't be writable"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaJ2B8/gC/qRQxVQVYF4TUIkqDZiwqa1sqfTP+eIV8Q7gkx1sTOSqcWqvg5mOWw6wBTH9LhUi9lSXVYAUw7eCA=="}],"memo":""},"metadata":{"timestamp":"1743762049"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"FreezeBoard","args":["4"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SmNrbgokoxiJTXtSIymwGMBphqmB1J06gs/jdVJ1XKUuRO3CMmaJ5ytxvmVvwBlAja4QqA1T7bcgto5T8tv/Cg=="}],"memo":""},"metadata":{"timestamp":"1743762054"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["RepostExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jPxomuyfqs6yS9mJ1zXaTs9FWXwgPHaVJcH6/ADQ67I3vPXMxoKqJstfrbxMrvuuqtUPxU+pTgv3Im2lBV+qCA=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateRepost","args":["2","1","Custom repost title","Custom repost body","5"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VLCyyn5BwJZr8c7LJIX/9fiycuO7cfuq8Ulq6uCa7ZTmaUvPe7Mb2K54gI+4hDxEC+TBNLCTAr4W0YDi7uuaCQ=="}],"memo":""},"metadata":{"timestamp":"1743762064"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HUsxXJsbLLE7eqalnFbxs6QLrCECri8DfkKxQ7I0jDcoAuqpdwFv0TO1Y0WqpYAp1otB2t+BUQoG9VXhmYk3Dw=="}],"memo":""},"metadata":{"timestamp":"1743762325"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XQlmGs92NlV8UrVFWCivs35isbsW6JNzJB0nmE3vvHZCqpozufS9D9wGALa3Hu0Q9Kpd3d5x2WZ+q2iTmnOxAA=="}],"memo":""},"metadata":{"timestamp":"1743762441"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ua3nwMeerrzI17poTLZrtcvFkUSI0DU94fhwdpAZ0sj3oX+Zdy58QCBr99lqnJK884I7Qv3lORzBynXG5jbwDQ=="}],"memo":""},"metadata":{"timestamp":"1743762466"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743762511"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762858"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1aykqe5ddemku5mwd3elmwtpj8jgss47xrqpag4","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"chG844+xbriyl9WGrlc6xkHm736dDMmfgMfPREBqaiPEII5TfCVIbQ8q6DSR7LSm2+Hja93gLN28dYpl/In2Dw=="}],"memo":""},"metadata":{"timestamp":"1743767985"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1dtuj65mgja87gh0c45pd3rt4cah0kkw9lzld4y","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HKCPLxCVbpHst0ip432MlUIpiFmurceZOAjNZOCjq3aXAfsNREbyej3mLe240/+w4d7OeGD4LFB/ninsfphACA=="}],"memo":""},"metadata":{"timestamp":"1743768151"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743769312"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["test-manfred"]}],"fee":{"gas_wanted":"50000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"4xO97j7lj2RX9s6xjyqRDNGa8qs6kEShqhOJIObF+nH9iKCbmHagUmAJgVbgdauLbAzMMLlx6e05HgwXESc3Cw=="}],"memo":""},"metadata":{"timestamp":"1743774399"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["6","testing testing","👋"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1ZtT0NfPPwkk8JYdIJD/IEwmoveEfqV53nerV1Jt4K4AKhIHKr//2rMglFermH9UI7JPWIhf8sADVOONCPvCA=="}],"memo":""},"metadata":{"timestamp":"1743774450"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"9104212","gas_fee":"4742446ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"o+0plDtw6ntbQncO7v5Y1GqAV5NE21j8bDyIcKkKMqGO5qYPrutx4yl5WPJAoGz5pg8Howi/Aq/wJzxWHPXjCw=="}],"memo":""},"metadata":{"timestamp":"1743775038"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743775997"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776002"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776017"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"UpdateStatus","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"abVD8zghTuhurQtvCizQ+m2Lh72r0t0AJHh2dt3e+kSQOqjFfZtJ0xO5eNlHm8Kj7nRvTjeVoqmzWdYE3b/sAg=="}],"memo":""},"metadata":{"timestamp":"1743776022"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743776083"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hello","path":"gno.land/r/test12/hello","files":[{"name":"package.gno","body":"package hello\n\nfunc Render(path string) string {\n\treturn \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/demo/eco","func":"Render","args":["Deployed through play.gno.land"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NXiO4V07kWqpEPpSYKqmTsQlZO06J6v5OUF72Mr79nhgleTapAVcCHDnsIx0TxnRZzMNbauF/eXro5zujLUKDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743788578"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hworld","path":"gno.land/r/g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5/hworld","files":[{"name":"package.gno","body":"package hworld\n\nfunc Render(path string) string {\n  return \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/sys/users","func":"ResolveName","args":["abc"]}],"fee":{"gas_wanted":"3428737","gas_fee":"7144ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F0m9qBwjIzAghFc0JygVxaAsdQhQqnpQQw/gaC740ZTHBJL4/TrpaqxPBTdmrtKNIoQsTsQXkC1LZ+fk9BKeDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743793364"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g150gdvn780ws7a3s9qpdvv7h4d9hq6vh672ely0","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yZMsHEcc7RI4t9HxQZKQikdr8da5aREuDgdhlUOTZXd5xpQXiWU1C2XeFG2pMAMp3CW2jUbaoQe4IJ0PisblAQ=="}],"memo":""},"metadata":{"timestamp":"1743859813"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g150gdvn780ws7a3s9qpdvv7h4d9hq6vh672ely0","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yZMsHEcc7RI4t9HxQZKQikdr8da5aREuDgdhlUOTZXd5xpQXiWU1C2XeFG2pMAMp3CW2jUbaoQe4IJ0PisblAQ=="}],"memo":""},"metadata":{"timestamp":"1743937361"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["FirstCatPost"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPVLnUetx7hCfdd5j8R2FiLe3q/I366w2fZvYsdwSqtmOy534t58ykbsw5gRdE0cfWZsROW5a/qB2VWkSCpBCA=="}],"memo":""},"metadata":{"timestamp":"1744009485"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateThread","args":["8","First cat post on boards2!","Katt Williams is an American stand-up comedian and actor. https://en.wikipedia.org/wiki/Katt_Williams"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"J09/6ygdvvm58J3jRqMSxafvYfmvs/NzXsmoCjNt4mAkdsJ/W6jJ9rdTd4EJWwIr08M39Drl+1G+kA0UydKaAg=="}],"memo":""},"metadata":{"timestamp":"1744009736"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["FirstCatPost"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"IOIyEHh8R0fPS4Z/y39Ly5T6h0QMrzeOtIauFapluMfR/TuOKD77EVc679KY08ZzsN15SCrdVa4XGUXcmn2XCQ=="}],"memo":""},"metadata":{"timestamp":"1744009852"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["7","First cat post on boards2!","Katt Williams is an American stand-up comedian and actor. https://en.wikipedia.org/wiki/Katt_Williams"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"N7L0GQbNWXkRA8o6HWji853DzaZPgNEB7MVQ//QMvGqxb0LxlSh+dCHDOljgmB4f/lLC76c4lSAaM2E528FrAA=="}],"memo":""},"metadata":{"timestamp":"1744009907"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g14n0zsnsk054uxwvnwmmqyrq6e87ynk5vq98qqp","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Kf5rmwnMs/nfl+VXJtQqrhsUFZqTQqybk5ADrsI5O2Lt9DVf+QqRP9vswBSC/WpPkgGMPeFBgQaLHpOi5awWDQ=="}],"memo":""},"metadata":{"timestamp":"1743587748"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1dzzx5qwcmawqnhhd76ehkteas5v2dg42hqnd7g","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"pfIacFtVu0UK1MgJVmS1uGL6BRTXTkc9SQ7qHy+Zh1xZcEhs0CJv+ZTv/D7TuHrgoXBTNOi7qLKgo0K36uvBDA=="}],"memo":""},"metadata":{"timestamp":"1743587759"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587924"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587939"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743587980"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743588120"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743588221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591981"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591991"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZAHmHJr6/jLN+AjWJQsb+t0vv3lF+WAfpd8525qOiqmXO1DeZ/rV+bzzh7fkaAAmTi9F/5Z00T8EF7sku2YBDA=="}],"memo":""},"metadata":{"timestamp":"1743597359"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2231690ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lBXZ55L/zJcSu0Nz3CtVpRumcACjpEVubgsLPiCKApSeOjEnmuuVkxH2mnh1ZMWt1nDVkbT4Zk0FBO8ythcADQ=="}],"memo":""},"metadata":{"timestamp":"1743597379"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887428","gas_fee":"165039ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CfKWRWGdsPCxkfaq3HED6HeeaMrLAQl4JfoKLXBzORDoqSui9g0pwgOvbMLAJQh1WsURlVQUKCT9bBxJIKGxDg=="}],"memo":""},"metadata":{"timestamp":"1743597384"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"3059175","gas_fee":"6374ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"U/Lh/vqW/msAgD5fgvDz5Eq1UBCZXknYYLXoKUKT0er1CEFGSZjihcKI4TZK16Rt0vcFnL2kR85a6+HsO3TJDg=="}],"memo":""},"metadata":{"timestamp":"1743597409"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Z3rGTeiuwQxAO1383d2XyzJ3ny+R6lVsMCH3AfNnQfHodVZUZlD1UyLA6hk/LqmMgMGhwQNMeroewPj6tNwhAQ=="}],"memo":""},"metadata":{"timestamp":"1743606306"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"miFYsl850KdWfaYVeUCHFUBQHWw0FUfKp/gh/tCTiIOIBm2jg+ki3YtWZkjq2jUCoHeN+nHx1smTN8xuOU6XCw=="}],"memo":""},"metadata":{"timestamp":"1743606668"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"9hNkFMu/xsQqvduZoi/8CZDiTtl9CFrjecn8LbIg1aVMvstwEYqA9O7HKQ8blamgzV7Seyv8tzdu9fYGjU2GDA=="}],"memo":""},"metadata":{"timestamp":"1743607723"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NRLFNdnKicUZR6tFldf8s4dn3L2xnF+TrH/JoJbAteD2zrHtiLjHL4faTopSaABlpgVAOkVGUOMILwokq+lkDA=="}],"memo":""},"metadata":{"timestamp":"1743608020"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3bt2TuGnvIPEFRLQmvr9fTNpmw9vddoc7JciKsGoLiP2LEGkuvxB+2sS/3zz6pbvptI6VIC0j3F3TxZiG2dpDw=="}],"memo":""},"metadata":{"timestamp":"1743608226"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n","admin"]}],"fee":{"gas_wanted":"8066534","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h9m9JF3DGXSQEpWHgk633+sSZvuQhVXiyQqXxihNqnWwwdPIUcG9EhGYZRRulcUDjNx9IuzALdpEzFeneOmhCA=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743608291"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"8967781","gas_fee":"18683ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KDUHz1HMhnSVLUZj4hLoxE7FlKqopgGbZMTXpkHV8jjul6TDBgdrfq5AyNFX3fH2sKjVTYGiFtEP3/cuV+m9Cw=="}],"memo":""},"metadata":{"timestamp":"1743608301"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743610126"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"DeleteTodo","args":["0"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ypbOAcxpAUGaUQt6F6KB3OhqJN2cRoD3dF8bkqySqRsVfhrXQJ3O/B9P2ex0jeKkezVoeRIpw2aN+2dwUa2hDQ=="}],"memo":""},"metadata":{"timestamp":"1743611628"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g14gvmle0a5hln0ct7wv857gucr7lmeust35736r","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kePfJ+g+ai4gbewkzMdmETesCmNI4i5ecAxwYpC4S6roDM3odtc8gDYipZqX7r5p37NP5p57MkhcMgODCZhdBA=="}],"memo":""},"metadata":{"timestamp":"1743662226"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4xzI4KB87lg/4EAWdmOPjO/R7VMfE8qE3jHysIvQuOlVylig2lajrqO+Bds39v5UqglfUvVS+mpWQ1KWUIEDA=="}],"memo":""},"metadata":{"timestamp":"1743663236"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"5000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Mq9IBbwNUb1YPvhyQIQhuw/eoxE2a4ue17kTC9Io08f9+CxgmjeHFuxfvteS1xsGsTe8qVVQemJHt10w+GSjDA=="}],"memo":""},"metadata":{"timestamp":"1743663533"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"10000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"MukwMPbas5Oz+wAk+oIfksfQx8DykYMmhaYaOnMynhvtwxNBlYTo4sAAkz1cVPLHYTu5czK6iBDFekbaOjVYDQ=="}],"memo":""},"metadata":{"timestamp":"1743663709"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hZQyD4QXJWRDvfK1fwSMGbJqGAQ6QI6jtPCuOM8yXoguotR561mxeGB6mEztRI0XE0SVsuw3qpzs9Rda9KaACA=="}],"memo":""},"metadata":{"timestamp":"1743666971"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2233340ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"d6iaXDqBE5lH4dYLNIfcEyb9dpHEYoBD1vD7B5sQQJ8c9/7e/ujH30RV7QZTn843pIWTplZj2OQ+GoScxXPPAg=="}],"memo":""},"metadata":{"timestamp":"1743666986"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","send":"1000000ugnot","pkg_path":"gno.land/r/gnoland/users/v1","func":"Register","args":["keyboard_worrier"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"WZ+i8zhkmdovnOGvtVlX0eK04aS2h1730ztiMLbsw0pAHohEIq1jkYrf8CeIcJFTlGRApmQkvRSytq7bVa7RAQ=="}],"memo":""},"metadata":{"timestamp":"1743672162"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743674585"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743675500"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676274"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676415"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676425"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676440"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676450"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676465"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","send":"","pkg_path":"gno.land/r/demo/userbook","func":"SignUp","args":null}],"fee":{"gas_wanted":"3000000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"b6gylbXUNmIJc8+UTKOqtssB3dtRA+9q46TN/WGgpL9pSCAwqVjCVO3BsUCYN4wyi4SFchw0fiUbUbuqOL9wCQ=="}],"memo":""},"metadata":{"timestamp":"1743676600"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"RemoveMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n"]}],"fee":{"gas_wanted":"7891622","gas_fee":"16441ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kFvFubneBzNxFJJsqdcFot4DI76vFnUL61hImedWMOYPT4oNpTPvu35RTbjH/CIjQ2ZbG21nvKR1cq72TNGIAg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677621"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","admin"]}],"fee":{"gas_wanted":"8066714","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TAAONmyVenhy51nV9BGWz5k4HFfNuFr8r7bwnbaBrHkB7w0knuA3L+8qMhD1h7Kp8KeIKKUnE8QMZayYtJMvCg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677721"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887404","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Arj8N87k6sLPuCZEV/uB92axfgpJeojYTh0C6QsSgUHJOeP/v7Sdn25cY045uI+5IiKFqiWhyZBCglJqwGLbAQ=="}],"memo":""},"metadata":{"timestamp":"1743677742"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["hello !"]}],"fee":{"gas_wanted":"887311","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"/GZGejcRk3HCoQIHSbhiOKnS5Dpjycv0Ke9W4W6vbVlF79A6YoudY/KBavSKEUmNR0Y7lyGxlCa+etTe7UT5Dg=="}],"memo":""},"metadata":{"timestamp":"1743677757"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"k8yjgyUuV0ZGtPIzDRM6VHiQExeKiRwy93C0tBfYn3kVZHvpIesoCGGWGvWF0zfoUXDJtZxUpC5QKiazh+i3AQ=="}],"memo":""},"metadata":{"timestamp":"1743680159"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"ChangeMemberRole","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6Ofd6RIF+1UULOLk50dyYYUlkPK5IZ/4Mlp/qHzeIGZrXrxck0lJ/saC99ZP/3+ughHkahxyx6eHU6nZG9lfAg=="}],"memo":""},"metadata":{"timestamp":"1743680391"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1721880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"FT0UHoGLEjePQfFtU1tyQ9qe7FxvdzTar5j1Xl00ZPozmei/qvvLGl8YhYi0V8sSJVouI8borYvb3dpqIQC/Ag=="}],"memo":""},"metadata":{"timestamp":"1743682979"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1d2hvkqhqckhzpaum09c002fesdw89qrcg9zqws","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"eSFCEK9IO/P5jxlfnbp35xVVYo36+CiOFJz/JQABTf9r/+da5JOSdgUemoC7R1EvJE9HCeJ2XWmbu0j5K31yDw=="}],"memo":""},"metadata":{"timestamp":"1743683221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1lrsrj4auaffjk538w3x2c9gzyth2m0n39zcg6d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"V7WYKzC8VemKyowufMneyzt0CQ6PR2RtCEEMnG4Jwx9CNVCNP6e54vE00yweRc5P2LU0+m9ZMOFUbblPQsY+DA=="}],"memo":""},"metadata":{"timestamp":"1743704885"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateReply","args":["2","1","1","Hey hey hey"]}],"fee":{"gas_wanted":"60000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bY/5T4aU3MOrBezBKCFXUR2RgMmPxpHFwi/xI6ga1b2u3JRxeYQx1+bOZtqknyFa8Feenu3GclmRnfknOQDyBQ=="}],"memo":""},"metadata":{"timestamp":"1743711043"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateBoard","args":["aeddi"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UlcPNzTB9SRYFhru5eBzZkqx1z6pk/iuEkbLCBEyI4QQKT75/GIsoVmR3Q0OWv9BEqzn6iep89664ieAb17KCg=="}],"memo":""},"metadata":{"timestamp":"1743711163"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g16znvp6wxupkkds8mmmtxhvmdly08xpa4rqagp3","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"BfNTMw8/jbCjUAxbYJSqAx71LTglT2ZB7rErSOurWZwbtFbHT2pMkbyYJym6agX/S13Ms+8RYPySznleZZy2Cg=="}],"memo":""},"metadata":{"timestamp":"1743712058"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateThread","args":["3","This is a test","Hello World"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1xJIqIyGXcSfsRczg0T/hKdr+hED2UDE0oCA/7YyQcna9Y2LtGmivjxAqiR+/E3Qa876okANEwvPjafqiLTAg=="}],"memo":""},"metadata":{"timestamp":"1743712737"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1648310ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"E3EBw9aZXdSZwrwQN9i2bQjTGgpMeFRhJS9EjaEJENZdnjkmkWXiM/8jQi026/ELjf6nV7oC77ciysIt3+FyAg=="}],"memo":""},"metadata":{"timestamp":"1743715914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EUy4N/WGhGY7IyvxkWJSpvvMm5UKPWmtuZYPwSE8JUQJ5/H3n6b8Xyljv6d+4xfO02mpmsqg57L3LY6PEcFiCw=="}],"memo":""},"metadata":{"timestamp":"1743738197"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XC5tB4Ww+jD/lgfSzvcKBmYg8nP697HYElMuyCwuArt2lo1NczPDAAHwjny191b1xy/8Pz2uae+iI9xGPXrOBQ=="}],"memo":""},"metadata":{"timestamp":"1743738288"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"DeletePost","args":["1","2","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SEMazbhceoUeLcw20UvlJqjlsT+oSRAOqdiA0bIeCwIex6a47RH45NT4qB644ulQ6YiRv9kD7sOS3sf8OKiUCA=="}],"memo":""},"metadata":{"timestamp":"1743738333"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3xdY2zUEaSvL2+NoPTHTD3X2FZ1Ehg/xPBZRRJi2Ylm6LU/F+HmMG0YhLVkvR5lEea0en2+Kn8UhdIgdPjlkAA=="}],"memo":""},"metadata":{"timestamp":"1743738469"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GCtUiktIhSyqpETUMRR/0Ty6v80QbmeROULnTsW72XKvSQZF1enMC90gtSn0F3kidponqgEAnTkrWoBvjTJVBg=="}],"memo":""},"metadata":{"timestamp":"1743738680"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TH4yuyDvuq6andRzdObtjw6Dzpaw7zqjNyoCw1FC07ipn9ZVUWcFIcPLM1eRU44RQqFtWQ7LhlDymM5LiS/9Aw=="}],"memo":""},"metadata":{"timestamp":"1743739027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"9000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"x7EtVQUYGVRT3Uo09arsuKUCOFQPhvg5718Vg6o3A74KWzqlUdT07sAADvGOCJxV22MBwe8ZLIMlEHx++NdJCw=="}],"memo":""},"metadata":{"timestamp":"1743739047"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ABOlkSDcCQJVf7mjnItLyRQyJjbSYLRXagmMz8poqvkjX1oTi2NGpNH6zu7466kPlFHmESXvy6di9sNfLhKjAg=="}],"memo":""},"metadata":{"timestamp":"1743739590"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["2","2"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kYuW3zW5gf3ruKjUwHJirEXeQYRcwyp6DSm9Ev+un2MNqF98LUiq51jNEBMKTLSpa3tA14JycfVXGm9WWlc/DA=="}],"memo":""},"metadata":{"timestamp":"1743739625"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1p5pa2sp4elcja2u8wn36zv3plsyp8xrqgz0usf","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y3k24ayy98evfOxRipkejsxyO6e4KpGvp3g18WK/I5dpHl6S3+X1YBqS4nsYvlUgd2pS1jKXNKyal6nfZE3fCw=="}],"memo":""},"metadata":{"timestamp":"1743750714"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fh2rWd2kWcbkBtMD/lkvdQTyb+qJmm41PqTxvrGs1/DHXFzxUy/ObzI9yR3WTafkheAaT3Hk+QcWh7C8eZJJCg=="}],"memo":""},"metadata":{"timestamp":"1743750895"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["aeddi-testing"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fosRIYGMBTklap54MeOskYvZ0qhOYfv4NiUXCPQtsncG2mKLibB8uR0YgN6VNPb1B/QkbY0CYjkvSK8rjYpUCA=="}],"memo":""},"metadata":{"timestamp":"1743751141"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","to_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","amount":"1000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Qg0qeTKOZCtxt3SYcwws9gIgf9EdulRfhcCeYa1mcfCCpynY3Qof2tctuQJ0YwdA73ckJC+5tosyt8Se54xcDA=="}],"memo":""},"metadata":{"timestamp":"1743755182"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KEh1CNIKget+9RJs7jwY0v+su73iInpdjp3/Qxo9FmgxZdreA4z7IOSEvBDCAVlL7xzLgj8NBIckrhgBXg6CAQ=="}],"memo":""},"metadata":{"timestamp":"1743760782"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"","pkg_path":"gno.land/r/demo/wugnot","func":"Transfer","args":["g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","-1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPbLggW1eugeEhTDF3cphB7ILmOsQpaE59va4Kf7hSMP3MTANuiTBVMcTJitdDEFLgWFCKl4JzzLpI69WgLcBw=="}],"memo":""},"metadata":{"timestamp":"1743760847"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761662"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","package":{"name":"boards2","path":"gno.land/r/devx000/gnoland/boards2/v1rc2","files":[{"name":"board.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\ntype BoardID uint64\n\nfunc (id BoardID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id BoardID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\ntype Board struct {\n\tid        BoardID // only set for public boards.\n\tname      string\n\taliases   []string\n\tcreator   std.Address\n\tthreads   avl.Tree // Post.id -\u003e *Post\n\tpostsCtr  uint64   // increments Post.id\n\tcreatedAt time.Time\n\tdeleted   avl.Tree // TODO reserved for fast-delete.\n\tperms     Permissions\n\treadonly  bool\n}\n\nfunc newBoard(id BoardID, name string, creator std.Address, p Permissions) *Board {\n\treturn \u0026Board{\n\t\tid:        id,\n\t\tname:      name,\n\t\tcreator:   creator,\n\t\tthreads:   avl.Tree{},\n\t\tcreatedAt: time.Now(),\n\t\tdeleted:   avl.Tree{},\n\t\tperms:     p,\n\t}\n}\n\nfunc (board *Board) GetID() BoardID {\n\treturn board.id\n}\n\n// GetName returns the name of the board.\nfunc (board *Board) GetName() string {\n\treturn board.name\n}\n\n// GetURL returns the relative URL of the board.\nfunc (board *Board) GetURL() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + url.PathEscape(board.name)\n}\n\n// GetURL returns relative board path relative.\n//\n// Note: returned result is not escaped. Use GetURL to get URL-encoded path.\nfunc (board *Board) GetPath() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + board.name\n}\n\nfunc (board *Board) GetPermissions() Permissions {\n\treturn board.perms\n}\n\n// SetReadonly updates board's read-only status.\nfunc (board *Board) SetReadonly(readonly bool) {\n\tboard.readonly = readonly\n}\n\n// IsReadonly checks if the board is a read-only board.\nfunc (board *Board) IsReadonly() bool {\n\treturn board.readonly\n}\n\nfunc (board *Board) GetThread(threadID PostID) (_ *Post, found bool) {\n\tv, found := board.threads.Get(threadID.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (board *Board) AddThread(creator std.Address, title string, body string) *Post {\n\tpid := board.incGetPostID()\n\tthread := newPost(board, pid, creator, title, body, pid, 0, 0)\n\tboard.threads.Set(pid.Key(), thread)\n\treturn thread\n}\n\n// NOTE: this can be potentially very expensive for threads with many replies.\n// TODO: implement optional fast-delete where thread is simply moved.\nfunc (board *Board) DeleteThread(pid PostID) {\n\t_, removed := board.threads.Remove(pid.Key())\n\tif !removed {\n\t\tpanic(\"thread does not exist with ID \" + pid.String())\n\t}\n}\n\n// Render renders a board into Markdown.\nfunc (board *Board) Render(path, menu string) string {\n\tvar sb strings.Builder\n\n\tsb.WriteString(\"# \" + board.GetName() + \"  \\n\")\n\tsb.WriteString(\"Board created by \" + newUserLink(board.creator) + \" \")\n\tsb.WriteString(\"on \" + board.createdAt.Format(dateFormat))\n\tsb.WriteString(\", #\" + board.id.String())\n\n\tif board.IsReadonly() {\n\t\tsb.WriteString(\"  \\n_**Starting new threads and commenting is disabled**_\")\n\t}\n\n\t// XXX: Menu is rendered by the caller to deal with links and sub-menus\n\t// TODO: We should have the render logic separated from boards so avoid sending menu as argument\n\tif menu != \"\" {\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tsb.WriteString(menu)\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(\"\\n\\n---\\n\")\n\n\tif board.threads.Size() == 0 {\n\t\tsb.WriteString(\"### This board doesn't have any threads\\n\")\n\t\tif !board.IsReadonly() {\n\t\t\turl := board.GetPostFormURL()\n\t\t\tsb.WriteString(\"Do you want to [start a new conversation](\" + url + \") in this board ?\")\n\t\t}\n\t\treturn sb.String()\n\t}\n\n\tp, err := pager.New(path, board.threads.Size(), pager.WithPageSize(pageSizeThreads))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tthread := v.(*Post)\n\t\tif thread.isHidden {\n\t\t\treturn false\n\t\t}\n\n\t\tsb.WriteString(thread.RenderSummary())\n\t\tsb.WriteString(\"\\n\")\n\t\treturn false\n\t}\n\n\tsb.WriteString(\"Sort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tsb.WriteString(newLink(\"newest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tsb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tsb.WriteString(\"\\n---\\n\")\n\t\tsb.WriteString(pager.Picker(p))\n\t}\n\n\treturn sb.String()\n}\n\nfunc (board *Board) incGetPostID() PostID {\n\tboard.postsCtr++\n\treturn PostID(board.postsCtr)\n}\n\nfunc (board *Board) GetURLFromThreadID(threadID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String()\n}\n\nfunc (board *Board) GetURLFromReplyID(threadID, replyID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String() + \"/\" + replyID.String()\n}\n\nfunc (board *Board) GetRenameFormURL() string { // TODO: These type of functions shouldn't be part of Board type\n\treturn txlink.Call(\n\t\t\"RenameBoard\",\n\t\t\"name\", board.name,\n\t\t\"newName\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"FreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t)\n}\n\nfunc (board *Board) GetUnfreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"UnfreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threadID\", \"\",\n\t\t\"replyID\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFlaggingThresholdFormURL() string {\n\treturn txlink.Call(\n\t\t\"SetFlaggingThreshold\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threshold\", \"\",\n\t)\n}\n\nfunc (board *Board) GetInviteMemberFormURL() string {\n\treturn txlink.Call(\n\t\t\"InviteMember\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"user\", \"\",\n\t\t\"role\", \"\",\n\t)\n}\n\nfunc (board *Board) GetPostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateThread\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (board *Board) GetMembersURL() string {\n\treturn board.GetURL() + \"/members\"\n}\n\nfunc createDefaultBoardPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(\n\t\tRoleAdmin,\n\t\tPermissionBoardRename,\n\t\tPermissionBoardFlaggingUpdate,\n\t\tPermissionMemberInvite,\n\t\tPermissionMemberRemove,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadDelete,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionThreadFreeze,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyDelete,\n\t\tPermissionReplyFlag,\n\t\tPermissionReplyFreeze,\n\t\tPermissionRoleChange,\n\t)\n\tperms.AddRole(\n\t\tRoleModerator,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyFlag,\n\t)\n\tperms.AddRole(\n\t\tRoleGuest,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadRepost,\n\t\tPermissionReplyCreate,\n\t)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n"},{"name":"board_readonly.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"time\"\n)\n\n// ReadonlyBoard defines an interface for readonly boards.\ntype ReadonlyBoard interface {\n\t// ID returns the unique identifier of the board.\n\tID() BoardID\n\n\t// Name returns the name of the board.\n\tName() string\n\n\t// Aliases returns a list with previous names assigned to the board.\n\tAliases() []string\n\n\t// Creator returns board's creator address.\n\tCreator() std.Address\n\n\t// LastPostID returns the ID assigned to the last created thread.\n\tLastPostID() uint64\n\n\t// CreatedAt returns the time when board was created.\n\tCreatedAt() time.Time\n\n\t// IsReadonly returns true when board shouldn't allow the creation of threads and comments.\n\tIsReadonly() bool\n\n\t// MembersCount returns the number of invited board members.\n\tMembersCount() int\n\n\t// IterateMembers allows reading the list of invited board members.\n\tIterateMembers(offset, count int, fn UsersIterFn)\n}\n\ntype readonlyBoard struct {\n\tboard *Board\n}\n\nfunc (b readonlyBoard) ID() BoardID {\n\treturn b.board.id\n}\n\nfunc (b readonlyBoard) Name() string {\n\treturn b.board.name\n}\n\nfunc (b readonlyBoard) Aliases() []string {\n\taliases := make([]string, len(b.board.aliases))\n\tfor i, s := range b.board.aliases {\n\t\taliases[i] = s\n\t}\n\treturn aliases\n}\n\nfunc (b readonlyBoard) Creator() std.Address {\n\treturn b.board.creator\n}\n\nfunc (b readonlyBoard) LastPostID() uint64 {\n\treturn b.board.postsCtr\n}\n\nfunc (b readonlyBoard) CreatedAt() time.Time {\n\treturn b.board.createdAt\n}\n\nfunc (b readonlyBoard) IsReadonly() bool {\n\treturn b.board.readonly\n}\n\nfunc (b readonlyBoard) MembersCount() int {\n\treturn b.board.perms.UsersCount()\n}\n\nfunc (b readonlyBoard) IterateMembers(offset, count int, fn UsersIterFn) {\n\tb.board.perms.IterateUsers(offset, count, fn)\n}\n"},{"name":"board_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nfunc TestBoardID_String(t *testing.T) {\n\tinput := BoardID(32)\n\n\tuassert.Equal(t, \"32\", input.String())\n}\n\nfunc TestBoardID_Key(t *testing.T) {\n\tinput := BoardID(128)\n\twant := strings.Repeat(\"0\", 7) + \"128\"\n\tuassert.Equal(t, want, input.Key())\n}\n\nfunc TestBoard_GetID(t *testing.T) {\n\twant := int(92)\n\tb := new(Board)\n\tb.id = BoardID(want)\n\tgot := int(b.GetID())\n\n\tuassert.Equal(t, got, want)\n\tuassert.NotEqual(t, got, want*want)\n}\n\nfunc TestBoard_GetURL(t *testing.T) {\n\tpkgPath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\tname := \"foobar_test_get_url123\"\n\twant := pkgPath + \":\" + name\n\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, name, addr, perms)\n\tgot := board.GetURL()\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\t_, ok := b.GetThread(12345)\n\tuassert.False(t, ok)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\t_, ok = b.GetThread(post.GetPostID())\n\tuassert.True(t, ok)\n}\n\nfunc TestBoard_DeleteThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\tid := post.GetPostID()\n\n\tb.DeleteThread(id)\n\n\t_, ok := b.GetThread(id)\n\tuassert.False(t, ok)\n}\n\nvar boardUrlPrefix = strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\nfunc TestBoard_GetURLFromThreadID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10\"\n\n\tgot := b.GetURLFromThreadID(10)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetURLFromReplyID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10/20\"\n\n\tgot := b.GetURLFromReplyID(10, 20)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetPostFormURL(t *testing.T) {\n\tbid := BoardID(386)\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(bid, \"foo1234\", addr, perms)\n\texpect := txlink.Call(\"CreateThread\", \"boardID\", bid.String(), \"title\", \"\", \"body\", \"\")\n\n\tgot := b.GetPostFormURL()\n\tuassert.Equal(t, expect, got)\n}\n"},{"name":"boards.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\nvar (\n\tgPerms        Permissions\n\tgNotice       string\n\tgHelp         string\n\tgLastBoardID  BoardID\n\tgBoardsByID   avl.Tree // string(id) -\u003e *Board\n\tgBoardsByName avl.Tree // string(name) -\u003e *Board\n\tgLocked       struct {\n\t\trealm        bool\n\t\trealmMembers bool\n\t}\n)\n\nfunc init() {\n\t// TODO: Define and change the default realm owner (or owners)\n\towner := std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\n\t// Initialize default realm permissions\n\tgPerms = createDefaultPermissions(owner)\n\n\t// Import relevant initial state from previous version\n\tinitFromPrevVersion()\n}\n\n// incGetBoardID returns a new board ID.\nfunc incGetBoardID() BoardID {\n\tgLastBoardID++\n\treturn gLastBoardID\n}\n\n// getBoard returns a board for a specific ID.\nfunc getBoard(id BoardID) (_ *Board, found bool) {\n\tv, exists := gBoardsByID.Get(id.Key())\n\tif !exists {\n\t\treturn nil, false\n\t}\n\treturn v.(*Board), true\n}\n\n// mustGetBoardByName returns a board or panics when it's not found.\nfunc mustGetBoardByName(name string) *Board {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tpanic(\"board does not exist with name: \" + name)\n\t}\n\treturn v.(*Board)\n}\n\n// mustGetBoard returns a board or panics when it's not found.\nfunc mustGetBoard(id BoardID) *Board {\n\tboard, found := getBoard(id)\n\tif !found {\n\t\tpanic(\"board does not exist with ID: \" + id.String())\n\t}\n\treturn board\n}\n\n// mustGetThread returns a thread or panics when it's not found.\nfunc mustGetThread(board *Board, threadID PostID) *Post {\n\tthread, found := board.GetThread(threadID)\n\tif !found {\n\t\tpanic(\"thread does not exist with ID: \" + threadID.String())\n\t}\n\treturn thread\n}\n\n// mustGetReply returns a reply or panics when it's not found.\nfunc mustGetReply(thread *Post, replyID PostID) *Post {\n\treply, found := thread.GetReply(replyID)\n\tif !found {\n\t\tpanic(\"reply does not exist with ID: \" + replyID.String())\n\t}\n\treturn reply\n}\n\nfunc mustGetPermissions(bid BoardID) Permissions {\n\tif bid != 0 {\n\t\tboard := mustGetBoard(bid)\n\t\treturn board.perms\n\t}\n\treturn gPerms\n}\n"},{"name":"flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\n// DefaultFlaggingThreshold defines the default number of flags that hides flaggable items.\nconst DefaultFlaggingThreshold = 1\n\nvar gFlaggingThresholds avl.Tree // string(board ID) -\u003e int\n\ntype Flag struct {\n\tUser   std.Address\n\tReason string\n}\n\ntype Flaggable interface {\n\t// AddFlag adds a new flag to an item.\n\t//\n\t// Returns false if item was already flagged by user.\n\tAddFlag(flag Flag) bool\n\n\t// FlagsCount returns number of times item was flagged.\n\tFlagsCount() int\n}\n\n// flagItem adds a flag to a flaggable item (post, thread, etc).\n//\n// Returns whether flag count threshold is reached and item can be hidden.\n//\n// Panics if flag count threshold was already reached.\nfunc flagItem(item Flaggable, flag Flag, threshold int) bool {\n\tif item.FlagsCount() \u003e= threshold {\n\t\tpanic(\"item flag count threshold exceeded: \" + strconv.Itoa(threshold))\n\t}\n\n\tif !item.AddFlag(flag) {\n\t\tpanic(\"item has been already flagged by a current user\")\n\t}\n\n\treturn item.FlagsCount() == threshold\n}\n\nfunc getFlaggingThreshold(bid BoardID) int {\n\tif v, ok := gFlaggingThresholds.Get(bid.String()); ok {\n\t\treturn v.(int)\n\t}\n\treturn DefaultFlaggingThreshold\n}\n"},{"name":"format.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/r/sys/users\"\n)\n\nfunc padLeft(s string, length int) string {\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\" \", length-len(s)) + s\n}\n\nfunc padZero(u64 uint64, length int) string {\n\ts := strconv.Itoa(int(u64))\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\"0\", length-len(s)) + s\n}\n\nfunc indentBody(indent string, body string) string {\n\tvar (\n\t\tres   string\n\t\tlines = strings.Split(body, \"\\n\")\n\t)\n\tfor i, line := range lines {\n\t\tif i \u003e 0 {\n\t\t\tres += \"\\n\"\n\t\t}\n\t\tres += indent + line\n\t}\n\treturn res\n}\n\n// NOTE: length must be greater than 3.\nfunc summaryOf(text string, length int) string {\n\tlines := strings.SplitN(text, \"\\n\", 2)\n\tline := lines[0]\n\tif len(line) \u003e length {\n\t\tline = line[:(length-3)] + \"...\"\n\t} else if len(lines) \u003e 1 {\n\t\t// len(line) \u003c= 80\n\t\tline = line + \"...\"\n\t}\n\treturn line\n}\n\n// newLink returns a Markdown link.\nfunc newLink(label, uri string) string {\n\treturn \"[\" + label + \"](\" + uri + \")\"\n}\n\n// newButtonLink returns a Makdown link with label wrapped in brackets.\nfunc newButtonLink(label, uri string) string {\n\treturn `[\\[` + label + `\\]](` + uri + \")\"\n}\n\n// newUserLink returns a Markdown link for an account to the users\n// realm or the address as string when a user is not registered.\nfunc newUserLink(addr std.Address) string {\n\tuser := users.ResolveAddress(addr)\n\tif user != nil {\n\t\treturn user.RenderLink(\"\")\n\t}\n\treturn addr.String()\n}\n"},{"name":"migrations.gno","body":"package boards2\n\nimport (\n\tv1rc1 \"gno.land/r/devx000/gnoland/boards2/v1rc1\"\n)\n\nfunc initFromPrevVersion() {\n\timportRealmMembers()\n}\n\nfunc importRealmMembers() {\n\tv1rc1.IterateRealmMembers(0, func(member v1rc1.User) bool {\n\t\t// XXX: This wouldn't be required if a boards2 package is created\n\t\troles := make([]Role, len(member.Roles))\n\t\tfor i, r := range member.Roles {\n\t\t\troles[i] = Role(r)\n\t\t}\n\n\t\tgPerms.AddUser(member.Address, roles...)\n\t\treturn false\n\t})\n}\n"},{"name":"permissions.gno","body":"package boards2\n\nimport \"std\"\n\nconst (\n\tPermissionRealmHelp           Permission = \"realm:help\"\n\tPermissionRealmLock                      = \"realm:lock\"\n\tPermissionRealmNotice                    = \"realm:notice\"\n\tPermissionBoardCreate                    = \"board:create\"\n\tPermissionBoardFlaggingUpdate            = \"board:flagging-update\"\n\tPermissionBoardFreeze                    = \"board:freeze\"\n\tPermissionBoardRename                    = \"board:rename\"\n\tPermissionThreadCreate                   = \"thread:create\"\n\tPermissionThreadDelete                   = \"thread:delete\"\n\tPermissionThreadEdit                     = \"thread:edit\"\n\tPermissionThreadFlag                     = \"thread:flag\"\n\tPermissionThreadFreeze                   = \"thread:freeze\"\n\tPermissionThreadRepost                   = \"thread:repost\"\n\tPermissionReplyCreate                    = \"reply:create\"\n\tPermissionReplyDelete                    = \"reply:delete\"\n\tPermissionReplyFlag                      = \"reply:flag\"\n\tPermissionReplyFreeze                    = \"reply:freeze\"\n\tPermissionMemberInvite                   = \"member:invite\"\n\tPermissionMemberRemove                   = \"member:remove\"\n\tPermissionRoleChange                     = \"role:change\"\n\tPermissionPermissionsUpdate              = \"permissions:update\"\n)\n\nconst (\n\tRoleGuest     Role = \"\"\n\tRoleOwner          = \"owner\"\n\tRoleAdmin          = \"admin\"\n\tRoleModerator      = \"moderator\"\n)\n\ntype (\n\t// Permission defines the type for permissions.\n\tPermission string\n\n\t// Role defines the type for user roles.\n\tRole string\n\n\t// Args is a list of generic arguments.\n\tArgs []interface{}\n\n\t// User contains user info.\n\tUser struct {\n\t\tAddress std.Address\n\t\tRoles   []Role\n\t}\n\n\t// UsersIterFn defines a function type to iterate users.\n\tUsersIterFn func(User) bool\n\n\t// Permissions define an interface to for permissioned execution.\n\tPermissions interface {\n\t\t// HasRole checks if a user has a specific role assigned.\n\t\tHasRole(std.Address, Role) bool\n\n\t\t// HasPermission checks if a user has a specific permission.\n\t\tHasPermission(std.Address, Permission) bool\n\n\t\t// WithPermission calls a callback when a user has a specific permission.\n\t\t// It panics on error.\n\t\tWithPermission(std.Address, Permission, Args, func(Args))\n\n\t\t// AddUser adds a new user to the permissioner.\n\t\tAddUser(std.Address, ...Role) error\n\n\t\t// SetUserRoles sets the roles of a user.\n\t\tSetUserRoles(std.Address, ...Role) error\n\n\t\t// RemoveUser removes a user from the permissioner.\n\t\tRemoveUser(std.Address) (removed bool)\n\n\t\t// HasUser checks if a user exists.\n\t\tHasUser(std.Address) bool\n\n\t\t// UsersCount returns the total number of users the permissioner contains.\n\t\tUsersCount() int\n\n\t\t// IterateUsers iterates permissions' users.\n\t\tIterateUsers(start, count int, fn UsersIterFn) bool\n\t}\n)\n"},{"name":"permissions_default.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\t\"gno.land/r/sys/users\"\n)\n\n// DefaultPermissions manages users, roles and permissions.\ntype DefaultPermissions struct {\n\tsuperRole Role\n\tdao       *commondao.CommonDAO\n\tusers     *avl.Tree // string(std.Address) -\u003e []Role\n\troles     *avl.Tree // string(role) -\u003e []Permission\n}\n\n// NewDefaultPermissions creates a new permissions type.\n// This type is a default implementation to handle users, roles and permissions.\nfunc NewDefaultPermissions(dao *commondao.CommonDAO) *DefaultPermissions {\n\tif dao == nil {\n\t\tpanic(\"default permissions require a DAO\")\n\t}\n\n\tdp := \u0026DefaultPermissions{\n\t\tdao:   dao,\n\t\troles: avl.NewTree(),\n\t\tusers: avl.NewTree(),\n\t}\n\n\t// Make sure that DAO users are indexed when DAO has members\n\tdao.Members().IterateByOffset(0, dao.Members().Size(), func(m std.Address) bool {\n\t\tdp.users.Set(m.String(), []Role(nil))\n\t\treturn false\n\t})\n\n\treturn dp\n}\n\n// SetSuperRole assigns a super role.\n// A super role is one that have all permissions.\n// These type of role doesn't need to be mapped to any permission.\nfunc (dp *DefaultPermissions) SetSuperRole(r Role) {\n\tdp.superRole = r\n}\n\n// AddRole add a role with one or more assigned permissions.\nfunc (dp *DefaultPermissions) AddRole(r Role, p Permission, extra ...Permission) {\n\tdp.roles.Set(string(r), append([]Permission{p}, extra...))\n}\n\n// RoleExists checks if a role exists.\nfunc (dp DefaultPermissions) RoleExists(r Role) bool {\n\tif dp.superRole != \"\" \u0026\u0026 r == dp.superRole {\n\t\treturn true\n\t}\n\n\treturn dp.roles.Iterate(\"\", \"\", func(name string, _ interface{}) bool {\n\t\treturn Role(name) == r\n\t})\n}\n\n// GetUserRoles returns the list of roles assigned to a user.\nfunc (dp DefaultPermissions) GetUserRoles(user std.Address) []Role {\n\tv, found := dp.users.Get(user.String())\n\tif !found {\n\t\treturn nil\n\t}\n\treturn v.([]Role)\n}\n\n// HasRole checks if a user has a specific role assigned.\nfunc (dp DefaultPermissions) HasRole(user std.Address, r Role) bool {\n\tfor _, role := range dp.GetUserRoles(user) {\n\t\tif role == r {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n// HasPermission checks if a user has a specific permission.\nfunc (dp DefaultPermissions) HasPermission(user std.Address, perm Permission) bool {\n\tfor _, r := range dp.GetUserRoles(user) {\n\t\tif dp.superRole == r {\n\t\t\treturn true\n\t\t}\n\n\t\tv, found := dp.roles.Get(string(r))\n\t\tif !found {\n\t\t\tcontinue\n\t\t}\n\n\t\tfor _, p := range v.([]Permission) {\n\t\t\tif p == perm {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\treturn false\n}\n\n// AddUser adds a new user to permissions.\nfunc (dp *DefaultPermissions) AddUser(user std.Address, roles ...Role) error {\n\tif dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user already exists\")\n\t}\n\n\tdp.dao.Members().Add(user)\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// SetUserRoles sets the roles of a user.\nfunc (dp *DefaultPermissions) SetUserRoles(user std.Address, roles ...Role) error {\n\tif !dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user not found\")\n\t}\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// RemoveUser removes a user from permissions.\nfunc (dp *DefaultPermissions) RemoveUser(user std.Address) bool {\n\t_, removed := dp.users.Remove(user.String())\n\tdp.dao.Members().Remove(user)\n\treturn removed\n}\n\n// HasUser checks if a user exists.\nfunc (dp DefaultPermissions) HasUser(user std.Address) bool {\n\treturn dp.users.Has(user.String())\n}\n\n// UsersCount returns the total number of users the permissioner contains.\nfunc (dp DefaultPermissions) UsersCount() int {\n\treturn dp.users.Size()\n}\n\n// IterateUsers iterates permissions' users.\nfunc (dp DefaultPermissions) IterateUsers(start, count int, fn UsersIterFn) bool {\n\treturn dp.users.IterateByOffset(start, count, func(k string, v interface{}) bool {\n\t\treturn fn(User{\n\t\t\tAddress: std.Address(k),\n\t\t\tRoles:   v.([]Role),\n\t\t})\n\t})\n}\n\n// WithPermission calls a callback when a user has a specific permission.\n// It panics on error or when a handler panics.\n// Callbacks are by default called when there is no handle registered for the permission.\nfunc (dp *DefaultPermissions) WithPermission(user std.Address, perm Permission, args Args, cb func(Args)) {\n\tif !dp.HasPermission(user, perm) || !dp.dao.Members().Has(user) {\n\t\tpanic(\"unauthorized\")\n\t}\n\n\tswitch perm {\n\tcase PermissionBoardCreate:\n\t\tdp.handleBoardCreate(args, cb)\n\tcase PermissionBoardRename:\n\t\tdp.handleBoardRename(args, cb)\n\tcase PermissionMemberInvite:\n\t\tdp.handleMemberInvite(args, cb)\n\tcase PermissionRoleChange:\n\t\tdp.handleRoleChange(args, cb)\n\tdefault:\n\t\tcb(args)\n\t}\n}\n\nfunc (dp *DefaultPermissions) setUserRoles(user std.Address, roles ...Role) error {\n\tfor _, r := range roles {\n\t\tif !dp.RoleExists(r) {\n\t\t\treturn errors.New(\"invalid role: \" + string(r))\n\t\t}\n\t}\n\n\tdp.users.Set(user.String(), append([]Role(nil), roles...))\n\treturn nil\n}\n\nfunc (DefaultPermissions) handleBoardCreate(args Args, cb func(Args)) {\n\tname, ok := args[0].(string)\n\tif !ok {\n\t\tpanic(\"expected board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(name)\n\tassertBoardNameBelongsToCaller(name)\n\n\tcb(args)\n}\n\nfunc (DefaultPermissions) handleBoardRename(args Args, cb func(Args)) {\n\tnewName, ok := args[2].(string)\n\tif !ok {\n\t\tpanic(\"expected new board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(newName)\n\tassertBoardNameBelongsToCaller(newName)\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleMemberInvite(args Args, cb func(Args)) {\n\t// Make sure that only owners invite other owners\n\trole, ok := args[1].(Role)\n\tif !ok {\n\t\tpanic(\"expected a valid new member role\")\n\t}\n\n\tif role == RoleOwner {\n\t\tif !dp.HasRole(std.PreviousRealm().Address(), RoleOwner) {\n\t\t\tpanic(\"only owners are allowed to invite other owners\")\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleRoleChange(args Args, cb func(Args)) {\n\t// Owners and Admins can change roles.\n\t// Admins should not be able to assign or remove the Owner role from members.\n\tif dp.HasRole(std.PreviousRealm().Address(), RoleAdmin) {\n\t\trole, ok := args[2].(Role)\n\t\tif !ok {\n\t\t\tpanic(\"expected a valid member role\")\n\t\t}\n\n\t\tif role == RoleOwner {\n\t\t\tpanic(\"admins are not allowed to promote members to Owner\")\n\t\t} else {\n\t\t\tmember, ok := args[1].(std.Address)\n\t\t\tif !ok {\n\t\t\t\tpanic(\"expected a valid member address\")\n\t\t\t}\n\n\t\t\tif dp.HasRole(member, RoleOwner) {\n\t\t\t\tpanic(\"admins are not allowed to remove the Owner role\")\n\t\t\t}\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc createDefaultPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(RoleAdmin, PermissionBoardCreate)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n\nfunc assertBoardNameIsNotAddress(s string) {\n\tif std.Address(s).IsValid() {\n\t\tpanic(\"addresses are not allowed as board name\")\n\t}\n}\n\nfunc assertBoardNameBelongsToCaller(name string) {\n\t// When the board name is the name of a registered user\n\t// check that caller is the owner of the name.\n\tuser, _ := users.ResolveName(name)\n\tif user != nil \u0026\u0026 user.Addr() != std.PreviousRealm().Address() {\n\t\tpanic(\"board name is a user name registered to a different user\")\n\t}\n}\n"},{"name":"permissions_default_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/urequire\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n)\n\nvar _ Permissions = (*DefaultPermissions)(nil)\n\nfunc TestDefaultPermissionsWithPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\targs       Args\n\t\tsetup      func() *DefaultPermissions\n\t\terr        string\n\t\tcalled     bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with arguments\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\targs:       Args{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t\t{\n\t\t\tname:       \"is not a DAO member\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\tcalled bool\n\t\t\t\targs   Args\n\t\t\t)\n\n\t\t\tperms := tc.setup()\n\t\t\tcallback := func(a Args) {\n\t\t\t\targs = a\n\t\t\t\tcalled = true\n\t\t\t}\n\n\t\t\ttestCaseFn := func() {\n\t\t\t\tperms.WithPermission(tc.user, tc.permission, tc.args, callback)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.PanicsWithMessage(t, tc.err, testCaseFn, \"panic\")\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NotPanics(t, testCaseFn, \"no panic\")\n\t\t\t}\n\n\t\t\turequire.Equal(t, tc.called, called, \"callback called\")\n\t\t\turequire.Equal(t, len(tc.args), len(args), \"args count\")\n\t\t\tfor i, a := range args {\n\t\t\t\tuassert.Equal(t, tc.args[i].(string), a.(string))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsGetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []string\n\t\tsetup func() *DefaultPermissions\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\", \"foo\", \"bar\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"not a user\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\", \"admin\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\troles := perms.GetUserRoles(tc.user)\n\n\t\t\turequire.Equal(t, len(tc.roles), len(roles), \"user role count\")\n\t\t\tfor i, r := range roles {\n\t\t\t\tuassert.Equal(t, tc.roles[i], string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasRole(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\trole  Role\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"admin\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"ok with multiple roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"foo\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"has no role\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasRole(tc.user, tc.role)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\tsetup      func() *DefaultPermissions\n\t\twant       bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple users\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple roles\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddRole(\"baz\", \"other\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\", \"baz\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasPermission(tc.user, tc.permission)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsAddUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"a\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"duplicated user\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"foo\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: foo\",\n\t\t},\n\t\t{\n\t\t\tname: \"already a DAO member\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(\n\t\t\t\t\tcommondao.New(commondao.WithMember(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")),\n\t\t\t\t)\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.AddUser(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.Error(t, err, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsSetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"c\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"remove roles\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"b\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"x\", \"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: x\",\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"user not found\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.SetUserRoles(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.True(t, err != nil, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsRemoveUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.RemoveUser(tc.user)\n\t\t\tuassert.Equal(t, tc.want, got)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsIterateUsers(t *testing.T) {\n\tusers := []User{\n\t\t{\n\t\t\tAddress: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tRoles:   []Role{\"foo\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\",\n\t\t\tRoles:   []Role{\"foo\", \"bar\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\",\n\t\t\tRoles:   []Role{\"bar\"},\n\t\t},\n\t}\n\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.AddRole(\"foo\", \"perm1\")\n\tperms.AddRole(\"bar\", \"perm2\")\n\tfor _, u := range users {\n\t\tperms.AddUser(u.Address, u.Roles...)\n\t}\n\n\tcases := []struct {\n\t\tname               string\n\t\tstart, count, want int\n\t}{\n\t\t{\n\t\t\tname:  \"exceed users count\",\n\t\t\tcount: 50,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"exact users count\",\n\t\t\tcount: 3,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"two users\",\n\t\t\tstart: 1,\n\t\t\tcount: 2,\n\t\t\twant:  2,\n\t\t},\n\t\t{\n\t\t\tname:  \"one user\",\n\t\t\tstart: 1,\n\t\t\tcount: 1,\n\t\t\twant:  1,\n\t\t},\n\t\t{\n\t\t\tname:  \"no iteration\",\n\t\t\tstart: 50,\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar i int\n\t\t\tperms.IterateUsers(0, len(users), func(u User) bool {\n\t\t\t\turequire.True(t, i \u003c len(users), \"expect iterator to respect number of users\")\n\t\t\t\tuassert.Equal(t, users[i].Address, u.Address)\n\n\t\t\t\turequire.Equal(t, len(users[i].Roles), len(u.Roles), \"expect number of roles to match\")\n\t\t\t\tfor j, r := range u.Roles {\n\t\t\t\t\tuassert.Equal(t, string(users[i].Roles[j]), string(u.Roles[j]))\n\t\t\t\t}\n\n\t\t\t\ti++\n\t\t\t})\n\n\t\t\tuassert.Equal(t, i, len(users), \"expect iterator to iterate all users\")\n\t\t})\n\t}\n}\n"},{"name":"post.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst dateFormat = \"2006-01-02 3:04pm MST\"\n\ntype PostID uint64\n\nfunc (id PostID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id PostID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\n// A Post is a \"thread\" or a \"reply\" depending on context.\n// A thread is a Post of a Board that holds other replies.\ntype Post struct {\n\tboard         *Board\n\tid            PostID\n\tcreator       std.Address\n\ttitle         string // optional\n\tbody          string\n\tisHidden      bool\n\tisReadonly    bool\n\treplies       avl.Tree // Post.id -\u003e *Post\n\trepliesAll    avl.Tree // Post.id -\u003e *Post (all replies, for top-level posts)\n\treposts       avl.Tree // Board.id -\u003e Post.id\n\tflags         []Flag\n\tthreadID      PostID  // original Post.id\n\tparentID      PostID  // parent Post.id (if reply or repost)\n\trepostBoardID BoardID // original Board.id (if repost)\n\trepostsCount  uint64\n\tcreatedAt     time.Time\n\tupdatedAt     time.Time\n}\n\nfunc newPost(board *Board, id PostID, creator std.Address, title, body string, threadID, parentID PostID, repostBoardID BoardID) *Post {\n\treturn \u0026Post{\n\t\tboard:         board,\n\t\tid:            id,\n\t\tcreator:       creator,\n\t\ttitle:         title,\n\t\tbody:          body,\n\t\treplies:       avl.Tree{},\n\t\trepliesAll:    avl.Tree{},\n\t\treposts:       avl.Tree{},\n\t\tthreadID:      threadID,\n\t\tparentID:      parentID,\n\t\trepostBoardID: repostBoardID,\n\t\tcreatedAt:     time.Now(),\n\t}\n}\n\nfunc (post *Post) IsRepost() bool {\n\treturn post.repostBoardID != 0\n}\n\nfunc (post *Post) IsThread() bool {\n\t// repost threads also have parent ID\n\treturn post.parentID == 0 || post.IsRepost()\n}\n\nfunc (post *Post) GetBoard() *Board {\n\treturn post.board\n}\n\nfunc (post *Post) GetPostID() PostID {\n\treturn post.id\n}\n\nfunc (post *Post) GetParentID() PostID {\n\treturn post.parentID\n}\n\nfunc (post *Post) GetRepostBoardID() BoardID {\n\treturn post.repostBoardID\n}\n\nfunc (post *Post) GetCreator() std.Address {\n\treturn post.creator\n}\n\nfunc (post *Post) GetTitle() string {\n\treturn post.title\n}\n\nfunc (post *Post) GetBody() string {\n\treturn post.body\n}\n\nfunc (post *Post) GetCreatedAt() time.Time {\n\treturn post.createdAt\n}\n\nfunc (post *Post) GetUpdatedAt() time.Time {\n\treturn post.updatedAt\n}\n\nfunc (post *Post) AddFlag(flag Flag) bool {\n\t// TODO: sort flags for fast search in case of big thresholds\n\tfor _, v := range post.flags {\n\t\tif v.User == flag.User {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tpost.flags = append(post.flags, flag)\n\treturn true\n}\n\nfunc (post *Post) FlagsCount() int {\n\treturn len(post.flags)\n}\n\nfunc (post *Post) SetVisible(isVisible bool) {\n\tpost.isHidden = !isVisible\n}\n\nfunc (post *Post) IsHidden() bool {\n\treturn post.isHidden\n}\n\nfunc (post *Post) SetReadonly(isReadonly bool) {\n\tpost.isReadonly = isReadonly\n}\n\nfunc (post *Post) IsReadonly() bool {\n\treturn post.isReadonly\n}\n\nfunc (post *Post) AddReply(creator std.Address, body string) *Post {\n\tboard := post.board\n\tpid := board.incGetPostID()\n\tpKey := pid.Key()\n\treply := newPost(board, pid, creator, \"\", body, post.threadID, post.id, 0)\n\t// TODO: Figure out how to remove this redundancy of data \"replies==repliesAll\" in threads\n\tpost.replies.Set(pKey, reply)\n\tif post.threadID == post.id {\n\t\tpost.repliesAll.Set(pKey, reply)\n\t} else {\n\t\tthread, _ := board.GetThread(post.threadID)\n\t\tthread.repliesAll.Set(pKey, reply)\n\t}\n\treturn reply\n}\n\nfunc (post *Post) Update(title string, body string) {\n\tpost.title = title\n\tpost.body = body\n\tpost.updatedAt = time.Now()\n}\n\nfunc (post *Post) HasReplies() bool {\n\treturn post.replies.Size() \u003e 0\n}\n\nfunc (thread *Post) GetReply(pid PostID) (_ *Post, found bool) {\n\tv, found := thread.repliesAll.Get(pid.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (post *Post) AddRepostTo(creator std.Address, repost *Post, dst *Board) {\n\tif !post.IsThread() {\n\t\tpanic(\"cannot repost non-thread post\")\n\t}\n\n\tpost.repostsCount++\n\tdst.threads.Set(repost.id.Key(), repost)\n\tpost.reposts.Set(dst.id.Key(), repost.id)\n}\n\nfunc (post *Post) DeleteReply(replyID PostID) error {\n\tif !post.IsThread() {\n\t\t// TODO: Allow removing replies from parent replies too\n\t\tpanic(\"cannot delete reply from a non-thread post\")\n\t}\n\n\tif post.id == replyID {\n\t\treturn errors.New(\"expected an ID of an inner reply\")\n\t}\n\n\tkey := replyID.Key()\n\tv, removed := post.repliesAll.Remove(key)\n\tif !removed {\n\t\treturn errors.New(\"reply not found in thread\")\n\t}\n\n\t// TODO: Shouldn't reply be hidden instead of deleted? Maybe replace reply by a deleted message.\n\treply := v.(*Post)\n\tif reply.parentID != post.id {\n\t\tparent, _ := post.GetReply(reply.parentID)\n\t\tparent.replies.Remove(key)\n\t} else {\n\t\tpost.replies.Remove(key)\n\t}\n\treturn nil\n}\n\nfunc (post *Post) GetSummary() string {\n\treturn summaryOf(post.body, 80)\n}\n\nfunc (post *Post) GetURL() string {\n\tif post.IsThread() {\n\t\treturn post.board.GetURLFromThreadID(post.id)\n\t}\n\treturn post.board.GetURLFromReplyID(post.threadID, post.id)\n}\n\nfunc (post *Post) GetReplyFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"CreateReply\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"replyID\", \"0\",\n\t\t\t\"body\", \"\",\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"CreateReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (post *Post) GetRepostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateRepost\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t\t\"destinationBoardID\", \"\",\n\t)\n}\n\nfunc (post *Post) GetDeleteFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"DeleteThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"DeleteReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t)\n}\n\nfunc (post *Post) GetEditFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"EditThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"title\", post.GetTitle(),\n\t\t\t\"body\", post.GetBody(),\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"EditReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", post.GetBody(),\n\t)\n}\n\nfunc (post *Post) GetFlagFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"FlagThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"reason\", \"\",\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"FlagReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"reason\", \"\",\n\t)\n}\n\nfunc (post *Post) RenderSummary() string {\n\tvar (\n\t\tb       strings.Builder\n\t\tpostURL = post.GetURL()\n\t\ttitle   = post.title\n\t)\n\n\tb.WriteString(\"**≡ \" + newLink(summaryOf(title, 80), postURL) + \"**  \\n\")\n\tb.WriteString(\"Created by \" + newUserLink(post.creator) + \" on \" + post.createdAt.Format(dateFormat))\n\tb.WriteString(\"  \\n**\")\n\tb.WriteString(strconv.Itoa(post.repliesAll.Size()) + \" replies • \")\n\tb.WriteString(strconv.Itoa(post.reposts.Size()) + \" reposts**\\n\")\n\treturn b.String()\n}\n\nfunc (post *Post) renderSourcePost(indent string) (string, *Post) {\n\tif !post.IsRepost() {\n\t\treturn \"\", nil\n\t}\n\n\tindent += \"\u003e \"\n\n\t// TODO: figure out a way to decouple posts from a global storage.\n\tboard, ok := getBoard(post.repostBoardID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source board has been deleted*\\n\\n\"), nil\n\t}\n\n\tsrcPost, ok := board.GetThread(post.parentID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source post has been deleted*\\n\\n\"), nil\n\t}\n\n\tif srcPost.isHidden {\n\t\treturn indentBody(indent, \"*⚠ Source post has been flagged as inappropriate*\\n\\n\"), nil\n\t}\n\n\treturn indentBody(indent, srcPost.GetSummary()) + \"\\n\\n\", srcPost\n}\n\n// renderPostContent renders post text content (including repost body).\n// Function will dump a predefined message instead of a body if post is hidden.\nfunc (post *Post) renderPostContent(sb *strings.Builder, indent string, levels int) {\n\tif post.isHidden {\n\t\t// Flagged comment should be hidden, but replies still visible (see: #3480)\n\t\t// Flagged threads will be hidden by render function caller.\n\t\tsb.WriteString(indentBody(indent, \"_⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n\t\tsb.WriteString(\"\\n\")\n\t\treturn\n\t}\n\n\tsrcContent, srcPost := post.renderSourcePost(indent)\n\tif post.IsRepost() \u0026\u0026 srcPost != nil {\n\t\tsb.WriteString(\"  \\nThis thread is a repost of [another thread](\" + srcPost.GetURL() + \"): \\n\")\n\t}\n\n\tsb.WriteString(srcContent)\n\n\tif post.IsRepost() \u0026\u0026 srcPost == nil \u0026\u0026 len(post.body) \u003e 0 {\n\t\t// Add a newline to separate source deleted message from repost body content\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(indentBody(indent, post.body))\n\tsb.WriteString(\"\\n\")\n\n\tif post.IsThread() {\n\t\t// Split content and controls for threads.\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\t// Buttons \u0026 counters\n\tsb.WriteString(indent)\n\tif !post.IsThread() {\n\t\tsb.WriteString(\"  \\n\")\n\t\tsb.WriteString(indent)\n\t}\n\n\tsb.WriteString(\"Created by \")\n\tsb.WriteString(newUserLink(post.creator))\n\tsb.WriteString(\" on \")\n\tsb.WriteString(post.createdAt.Format(dateFormat))\n\n\t// Add a reply view link to each top level reply\n\tif !post.IsThread() {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(newLink(\"#\"+post.id.String(), post.GetURL()))\n\t}\n\n\tif post.repostsCount \u003e 0 {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(strconv.FormatUint(post.repostsCount, 10))\n\t\tsb.WriteString(\" repost(s)\")\n\t}\n\n\tsb.WriteString(\"  \\n\")\n\tsb.WriteString(newLink(\"Flag\", post.GetFlagFormURL()))\n\n\tif post.IsThread() {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Repost\", post.GetRepostFormURL()))\n\t}\n\n\tisReadonly := post.IsReadonly() || post.GetBoard().IsReadonly()\n\tif !isReadonly {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Reply\", post.GetReplyFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Edit\", post.GetEditFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Delete\", post.GetDeleteFormURL()))\n\t}\n\n\tif levels == 0 {\n\t\tsb.WriteString(\" • \")\n\t\tif post.IsThread() {\n\t\t\tsb.WriteString(newLink(\"Show all Replies\", post.board.GetURLFromThreadID(post.GetPostID())))\n\t\t} else {\n\t\t\tsb.WriteString(newLink(\"View Thread\", post.board.GetURLFromThreadID(post.threadID)))\n\t\t}\n\t}\n\n\tsb.WriteString(\" \\n\")\n}\n\nfunc (post *Post) Render(path string, indent string, levels int) string {\n\tif post == nil {\n\t\treturn \"nil post\"\n\t}\n\n\t// TODO: pass a builder as arg into Render.\n\tvar sb strings.Builder\n\n\t// Thread reposts might not have a title, if so get title from source thread\n\ttitle := post.title\n\tif post.IsRepost() \u0026\u0026 title == \"\" {\n\t\tif board, ok := getBoard(post.repostBoardID); ok {\n\t\t\tif src, ok := board.GetThread(post.parentID); ok {\n\t\t\t\ttitle = src.GetTitle()\n\t\t\t}\n\t\t}\n\t}\n\n\tsb.WriteString(indent)\n\tif title != \"\" { // Replies don't have a title\n\t\tsb.WriteString(\"## \" + title + \"\\n\")\n\t}\n\tsb.WriteString(indent + \"\\n\")\n\n\tpost.renderPostContent(\u0026sb, indent, levels)\n\n\tif post.replies.Size() == 0 {\n\t\treturn sb.String()\n\t}\n\n\t// XXX: This triggers for reply views\n\tif levels == 0 {\n\t\tsb.WriteString(indent + \"\\n\")\n\t\tsb.WriteString(indent)\n\t\tsb.WriteString(\"\\n\")\n\t\treturn sb.String()\n\t}\n\n\tif path != \"\" {\n\t\tsb.WriteString(post.renderTopLevelReplies(path, indent, levels-1))\n\t} else {\n\t\tsb.WriteString(post.renderSubReplies(indent, levels-1))\n\t}\n\treturn sb.String()\n}\n\nfunc (post *Post) renderTopLevelReplies(path, indent string, levels int) string {\n\tp, err := pager.New(path, post.replies.Size(), pager.WithPageSize(pageSizeReplies))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\trender := func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t}\n\n\tb.WriteString(\"\\n\\n---\\nSort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tb.WriteString(newLink(\"newest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tb.WriteString(\"\\n---\\n\")\n\t\tb.WriteString(pager.Picker(p))\n\t}\n\n\treturn b.String()\n}\n\nfunc (post *Post) renderSubReplies(indent string, levels int) string {\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\tpost.replies.Iterate(\"\", \"\", func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t})\n\n\treturn b.String()\n}\n\nfunc (post *Post) RenderInner() string {\n\tif post.IsThread() {\n\t\tpanic(\"unexpected thread\")\n\t}\n\n\tvar (\n\t\ts         string\n\t\tthreadID  = post.threadID\n\t\tthread, _ = post.board.GetThread(threadID) // TODO: This seems redundant (post == thread)\n\t)\n\n\t// Fully render parent if it's not a repost.\n\tif !post.IsRepost() {\n\t\tvar (\n\t\t\tparent   *Post\n\t\t\tparentID = post.parentID\n\t\t)\n\n\t\tif thread.id == parentID {\n\t\t\tparent = thread\n\t\t} else {\n\t\t\tparent, _ = thread.GetReply(parentID)\n\t\t}\n\n\t\ts += parent.Render(\"\", \"\", 0) + \"\\n\"\n\t}\n\n\ts += post.Render(\"\", \"\u003e \", 5)\n\treturn s\n}\n"},{"name":"post_test.gno","body":"package boards2\n\nimport (\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/ufmt\"\n)\n\nfunc TestPostUpdate(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, \"test123\", addr, perms)\n\tcreator := testutils.TestAddress(\"creator\")\n\tpost := newPost(board, 1, creator, \"Title\", \"Body\", 1, 0, 0)\n\ttitle := \"New Title\"\n\tbody := \"New body\"\n\n\tpost.Update(title, body)\n\n\tuassert.Equal(t, title, post.GetTitle())\n\tuassert.Equal(t, body, post.GetBody())\n\tuassert.False(t, post.GetUpdatedAt().IsZero())\n}\n\nfunc TestPostAddFlag(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tpost := createTestThread(t)\n\n\tflag := Flag{\n\t\tUser:   addr,\n\t\tReason: \"foobar\",\n\t}\n\tuassert.True(t, post.AddFlag(flag))\n\tuassert.False(t, post.AddFlag(flag), \"should reject flag from duplicate user\")\n\tuassert.Equal(t, post.FlagsCount(), 1)\n}\n\nfunc TestPostSetVisible(t *testing.T) {\n\tpost := createTestThread(t)\n\tuassert.False(t, post.IsHidden(), \"post should be visible by default\")\n\n\tpost.SetVisible(false)\n\tuassert.True(t, post.IsHidden(), \"post should be hidden\")\n\n\tpost.SetVisible(true)\n\tuassert.False(t, post.IsHidden(), \"post should be visible\")\n}\n\nfunc TestPostAddRepostTo(t *testing.T) {\n\t// TODO: Improve this unit test\n\taddr := testutils.TestAddress(\"creatorDstBoard\")\n\tperms := createDefaultBoardPermissions(addr)\n\tcases := []struct {\n\t\tname, title, body string\n\t\tdstBoard          *Board\n\t\tthread            *Post\n\t\tsetup             func() *Post\n\t\terr               string\n\t}{\n\t\t{\n\t\t\tname:     \"repost thread\",\n\t\t\ttitle:    \"Repost Title\",\n\t\t\tbody:     \"Repost body\",\n\t\t\tdstBoard: newBoard(42, \"dst123\", addr, perms),\n\t\t\tsetup:    func() *Post { return createTestThread(t) },\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid repost from reply\",\n\t\t\tsetup: func() *Post { return createTestReply(t) },\n\t\t\terr:   \"cannot repost non-thread post\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\trepost  *Post\n\t\t\t\tcreator = testutils.TestAddress(\"repostCreator\")\n\t\t\t\tthread  = tc.setup()\n\t\t\t)\n\n\t\t\tcreateRepost := func() {\n\t\t\t\tvar repostId PostID\n\t\t\t\tif tc.dstBoard != nil {\n\t\t\t\t\trepostId = tc.dstBoard.incGetPostID()\n\t\t\t\t}\n\n\t\t\t\trepost = newPost(tc.dstBoard, repostId, creator, tc.title, tc.body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\t\t\t\tthread.AddRepostTo(creator, repost, tc.dstBoard)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.PanicsWithMessage(t, tc.err, createRepost)\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tuassert.NotPanics(t, createRepost)\n\t\t\t}\n\n\t\t\tr, found := tc.dstBoard.GetThread(repost.GetPostID())\n\t\t\tuassert.True(t, found)\n\t\t\tuassert.True(t, repost == r)\n\t\t\tuassert.Equal(t, tc.title, repost.GetTitle())\n\t\t\tuassert.Equal(t, tc.body, repost.GetBody())\n\t\t\tuassert.Equal(t, uint(thread.GetBoard().GetID()), uint(repost.GetRepostBoardID()))\n\t\t})\n\t}\n}\n\nfunc TestNewThread(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\ttitle := \"Test Title\"\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=0\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\teditURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=EditThread\u0026boardID=%d\u0026body=%s\u0026threadID=%d\u0026title=%s\",\n\t\tuint(boardID),\n\t\tbody,\n\t\tuint(threadID),\n\t\tstrings.ReplaceAll(title, \" \", \"+\"),\n\t)\n\trepostURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateRepost\u0026boardID=%d\u0026body=\u0026destinationBoardID=\u0026threadID=%d\u0026title=\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteThread\u0026boardID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tflagURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=FlagThread\u0026boardID=%d\u0026reason=\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\n\tthread := newPost(board, threadID, creator, title, body, threadID, 0, 0)\n\n\tuassert.True(t, thread.IsThread())\n\tuassert.Equal(t, uint(threadID), uint(thread.GetPostID()))\n\tuassert.False(t, thread.GetCreatedAt().IsZero())\n\tuassert.True(t, thread.GetUpdatedAt().IsZero())\n\tuassert.Equal(t, title, thread.GetTitle())\n\tuassert.Equal(t, body[:77]+\"...\", thread.GetSummary())\n\tuassert.False(t, thread.HasReplies())\n\tuassert.Equal(t, url, thread.GetURL())\n\tuassert.Equal(t, replyURL, thread.GetReplyFormURL())\n\tuassert.Equal(t, editURL, thread.GetEditFormURL())\n\tuassert.Equal(t, repostURL, thread.GetRepostFormURL())\n\tuassert.Equal(t, deleteURL, thread.GetDeleteFormURL())\n\tuassert.Equal(t, flagURL, thread.GetFlagFormURL())\n}\n\nfunc TestThreadAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tthreadID := uint(thread.GetPostID())\n\tbody := \"A reply\"\n\n\treply := thread.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, threadID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.True(t, thread.HasReplies())\n}\n\nfunc TestThreadGetReply(t *testing.T) {\n\tcases := []struct {\n\t\tname   string\n\t\tthread *Post\n\t\tsetup  func(thread *Post) (replyID PostID)\n\t\tfound  bool\n\t}{\n\t\t{\n\t\t\tname:   \"found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup: func(thread *Post) PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:   \"not found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup:  func(*Post) PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup(tc.thread)\n\n\t\t\treply, found := tc.thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestThreadDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"ok nested\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.AddReply(testutils.TestAddress(\"replier2\"), \"\").GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid\",\n\t\t\tsetup: func() PostID { return thread.GetPostID() },\n\t\t\terr:   \"expected an ID of an inner reply\",\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t\terr:   \"reply not found in thread\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\terr := thread.DeleteReply(replyID)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.ErrorContains(t, err, tc.err)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tuassert.NoError(t, err)\n\t\t\t_, found := thread.GetReply(replyID)\n\t\t\tuassert.False(t, found)\n\t\t})\n\t}\n}\n\nfunc TestThreadRenderSummary(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRenderInner(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestNewReply(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tparentID := PostID(1)\n\treplyID := PostID(2)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t\tuint(replyID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteReply\u0026boardID=%d\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\n\treply := newPost(board, replyID, creator, \"\", body, threadID, parentID, 0)\n\n\tuassert.False(t, reply.IsThread())\n\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\tuassert.False(t, reply.GetCreatedAt().IsZero())\n\tuassert.True(t, reply.GetUpdatedAt().IsZero())\n\tuassert.False(t, reply.HasReplies())\n\tuassert.Equal(t, body[:77]+\"...\", reply.GetSummary())\n\tuassert.Equal(t, url, reply.GetURL())\n\tuassert.Equal(t, replyURL, reply.GetReplyFormURL())\n\tuassert.Equal(t, deleteURL, reply.GetDeleteFormURL())\n}\n\nfunc TestReplyAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tparentReplyID := uint(parentReply.GetPostID())\n\tbody := \"A child reply\"\n\n\treply := parentReply.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, parentReplyID, uint(reply.GetParentID()))\n\tuassert.Equal(t, parentReplyID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.False(t, reply.HasReplies())\n\tuassert.True(t, parentReply.HasReplies())\n}\n\nfunc TestReplyGetReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\tfound bool\n\t}{\n\t\t{\n\t\t\tname: \"found\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := parentReply.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\treply, found := thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestReplyDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\treply := parentReply.AddReply(testutils.TestAddress(\"replier2\"), \"\")\n\n\t// NOTE: Deleting a reply from a parent reply should eventually be suported\n\tuassert.PanicsWithMessage(t, \"cannot delete reply from a non-thread post\", func() {\n\t\tparentReply.DeleteReply(reply.GetPostID())\n\t})\n}\n\nfunc TestReplyRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc createTestThread(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(1, \"test_board_123\", creator, perms)\n\treturn board.AddThread(creator, \"Title\", \"Body\")\n}\n\nfunc createTestReply(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\treturn thread.AddReply(creator, \"Test message\")\n}\n"},{"name":"public.gno","body":"package boards2\n\nimport (\n\t\"regexp\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n)\n\nconst (\n\t// MaxBoardNameLength defines the maximum length allowed for board names.\n\tMaxBoardNameLength = 50\n\n\t// MaxThreadTitleLength defines the maximum length allowed for thread titles.\n\tMaxThreadTitleLength = 100\n\n\t// MaxReplyLength defines the maximum length allowed for replies.\n\tMaxReplyLength = 300\n)\n\nvar (\n\treBoardName = regexp.MustCompile(`(?i)^[a-z]+[a-z0-9_\\-]{2,50}$`)\n\n\t// Minimalistic Markdown line prefix checks that if allowed would\n\t// break the current UI when submitting a reply. It denies replies\n\t// with headings, blockquotes or horizontal lines.\n\treDeniedReplyLinePrefixes = regexp.MustCompile(`(?m)^\\s*(#|---|\u003e)+`)\n)\n\n// SetHelp sets or updates boards realm help content.\nfunc SetHelp(content string) {\n\tcontent = strings.TrimSpace(content)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{content}\n\tgPerms.WithPermission(caller, PermissionRealmHelp, args, func(Args) {\n\t\tgHelp = content\n\t})\n}\n\n// SetPermissions sets a permissions implementation for boards2 realm or a board.\nfunc SetPermissions(bid BoardID, p Permissions) {\n\tassertRealmIsNotLocked()\n\n\tif p == nil {\n\t\tpanic(\"permissions is required\")\n\t}\n\n\tif bid != 0 {\n\t\tassertBoardExists(bid)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid}\n\tgPerms.WithPermission(caller, PermissionPermissionsUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\t// When board ID is zero it means that realm permissions are being updated\n\t\tif bid == 0 {\n\t\t\tgPerms = p\n\n\t\t\tstd.Emit(\n\t\t\t\t\"RealmPermissionsUpdated\",\n\t\t\t\t\"caller\", caller.String(),\n\t\t\t)\n\t\t\treturn\n\t\t}\n\n\t\t// Otherwise update the permissions of a single board\n\t\tboard := mustGetBoard(bid)\n\t\tboard.perms = p\n\n\t\tstd.Emit(\n\t\t\t\"BoardPermissionsUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t)\n\t})\n}\n\n// SetRealmNotice sets a notice to be displayed globally by the realm.\n// An empty message removes the realm notice.\nfunc SetRealmNotice(message string) {\n\tmessage = strings.TrimSpace(message)\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmNotice, nil, func(Args) {\n\t\tgNotice = message\n\n\t\tstd.Emit(\n\t\t\t\"RealmNoticeChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"message\", message,\n\t\t)\n\t})\n}\n\n// GetBoardIDFromName searches a board by name and returns it's ID.\nfunc GetBoardIDFromName(name string) (_ BoardID, found bool) {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\treturn 0, false\n\t}\n\treturn v.(*Board).id, true\n}\n\n// CreateBoard creates a new board.\nfunc CreateBoard(name string) BoardID {\n\tassertRealmIsNotLocked()\n\n\tname = strings.TrimSpace(name)\n\tassertIsValidBoardName(name)\n\tassertBoardNameNotExists(name)\n\n\tcaller := std.PreviousRealm().Address()\n\tid := incGetBoardID()\n\targs := Args{name, id}\n\tgPerms.WithPermission(caller, PermissionBoardCreate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(name)\n\n\t\tperms := createDefaultBoardPermissions(caller)\n\t\tboard := newBoard(id, name, caller, perms)\n\t\tgBoardsByID.Set(id.Key(), board)\n\t\tgBoardsByName.Set(name, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardCreated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", id.String(),\n\t\t\t\"name\", name,\n\t\t)\n\t})\n\treturn id\n}\n\n// RenameBoard changes the name of an existing board.\n//\n// A history of previous board names is kept when boards are renamed.\n// Because of that boards are also accesible using previous name(s).\nfunc RenameBoard(name, newName string) {\n\tassertRealmIsNotLocked()\n\n\tnewName = strings.TrimSpace(newName)\n\tassertIsValidBoardName(newName)\n\tassertBoardNameNotExists(newName)\n\n\tboard := mustGetBoardByName(name)\n\tassertBoardIsNotFrozen(board)\n\n\tbid := board.GetID()\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid, name, newName}\n\tboard.perms.WithPermission(caller, PermissionBoardRename, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(newName)\n\n\t\tboard := mustGetBoard(bid)\n\t\tboard.aliases = append(board.aliases, board.name)\n\t\tboard.name = newName\n\n\t\t// Index board for the new name keeping previous indexes for older names\n\t\tgBoardsByName.Set(newName, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardRenamed\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t\t\"name\", name,\n\t\t\t\"newName\", newName,\n\t\t)\n\t})\n}\n\n// CreateThread creates a new thread within a board.\nfunc CreateThread(boardID BoardID, title, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tbody = strings.TrimSpace(body)\n\tassertBodyIsNotEmpty(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadCreate)\n\n\tthread := board.AddThread(caller, title, body)\n\n\tstd.Emit(\n\t\t\"ThreadCreated\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", thread.GetPostID().String(),\n\t\t\"title\", title,\n\t)\n\n\treturn thread.id\n}\n\n// CreateReply creates a new comment or reply within a thread.\n//\n// The value of `replyID` is only required when creating a reply of another reply.\nfunc CreateReply(boardID BoardID, threadID, replyID PostID, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyCreate)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\tvar reply *Post\n\tif replyID == 0 {\n\t\t// When the parent reply is the thread just add reply to thread\n\t\treply = thread.AddReply(caller, body)\n\t} else {\n\t\t// Try to get parent reply and add a new child reply\n\t\tparent := mustGetReply(thread, replyID)\n\t\tif parent.IsHidden() || parent.IsReadonly() {\n\t\t\tpanic(\"replying to a hidden or frozen reply is not allowed\")\n\t\t}\n\n\t\treply = parent.AddReply(caller, body)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyCreate\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", reply.GetPostID().String(),\n\t)\n\n\treturn reply.id\n}\n\n// CreateRepost reposts a thread into another board.\nfunc CreateRepost(boardID BoardID, threadID PostID, title, body string, destinationBoardID BoardID) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tcaller := std.PreviousRealm().Address()\n\tdst := mustGetBoard(destinationBoardID)\n\tassertBoardIsNotFrozen(dst)\n\tassertHasBoardPermission(dst, caller, PermissionThreadRepost)\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\tif thread.IsRepost() {\n\t\tpanic(\"reposting a thread that is a repost is not allowed\")\n\t}\n\n\trepostId := dst.incGetPostID()\n\tbody = strings.TrimSpace(body)\n\trepost := newPost(dst, repostId, caller, title, body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\tthread.AddRepostTo(caller, repost, dst)\n\n\tstd.Emit(\n\t\t\"Repost\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"destinationBoardID\", destinationBoardID.String(),\n\t\t\"title\", title,\n\t)\n\n\treturn repostId\n}\n\n// DeleteThread deletes a thread from a board.\n//\n// Threads can be deleted by the users who created them or otherwise by users with special permissions.\nfunc DeleteThread(boardID BoardID, threadID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteThread filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\n\t\tif caller != thread.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionThreadDelete)\n\t\t}\n\t}\n\n\t// Hard delete thread and all its replies\n\tboard.DeleteThread(threadID)\n\n\tstd.Emit(\n\t\t\"ThreadDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t)\n}\n\n// DeleteReply deletes a reply from a thread.\n//\n// Replies can be deleted by the users who created them or otherwise by users with special permissions.\n// Soft deletion is used when the deleted reply contains sub replies, in which case the reply content\n// is replaced by a text informing that reply has been deleted to avoid deleting sub-replies.\nfunc DeleteReply(boardID BoardID, threadID, replyID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteReply filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\treply := mustGetReply(thread, replyID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\t\tassertReplyIsVisible(reply)\n\t\tassertReplyIsNotFrozen(reply)\n\n\t\tif caller != reply.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionReplyDelete)\n\t\t}\n\t}\n\n\t// Soft delete reply by changing its body when it contains\n\t// sub-replies, otherwise hard delete it.\n\tif reply.HasReplies() {\n\t\treply.Update(reply.GetTitle(), \"This reply has been deleted\")\n\t} else {\n\t\tthread.DeleteReply(replyID)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t)\n}\n\n// EditThread updates the title and body of thread.\n//\n// Threads can be updated by the users who created them or otherwise by users with special permissions.\nfunc EditThread(boardID BoardID, threadID PostID, title, body string) {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\tbody = strings.TrimSpace(body)\n\tif !thread.IsRepost() {\n\t\tassertBodyIsNotEmpty(body)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != thread.GetCreator() {\n\t\tassertHasBoardPermission(board, caller, PermissionThreadEdit)\n\t}\n\n\tthread.Update(title, body)\n\n\tstd.Emit(\n\t\t\"ThreadEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"title\", title,\n\t)\n}\n\n// EditReply updates the body of comment or reply.\n//\n// Replies can be updated only by the users who created them.\nfunc EditReply(boardID BoardID, threadID, replyID PostID, body string) {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\tassertReplyIsNotFrozen(reply)\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != reply.GetCreator() {\n\t\tpanic(\"only the reply creator is allowed to edit it\")\n\t}\n\n\treply.Update(\"\", body)\n\n\tstd.Emit(\n\t\t\"ReplyEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"body\", body,\n\t)\n}\n\n// InviteMember adds a member to the realm or to a boards.\n//\n// A role can optionally be specified to be assigned to the new member.\n// Board ID is only required when inviting a member to a board.\nfunc InviteMember(boardID BoardID, user std.Address, role Role) {\n\tassertUserAddressIsValid(user)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{user, role}\n\tperms.WithPermission(caller, PermissionMemberInvite, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.AddUser(user, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberInvited\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", user.String(),\n\t\t\t\"role\", string(role),\n\t\t)\n\t})\n}\n\n// RemoveMember removes a member from the realm or a boards.\n//\n// Board ID is only required when removing a member from board.\nfunc RemoveMember(boardID BoardID, member std.Address) {\n\tassertMembersUpdateIsEnabled(boardID)\n\tassertMemberAddressIsValid(member)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\tperms.WithPermission(caller, PermissionMemberRemove, Args{member}, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif !perms.RemoveUser(member) {\n\t\t\tpanic(\"member not found\")\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberRemoved\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t)\n\t})\n}\n\n// IsMember checks if an user is a member of the realm or a board.\n//\n// Board ID is only required when checking if a user is a member of a board.\nfunc IsMember(boardID BoardID, user std.Address) bool {\n\tassertUserAddressIsValid(user)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasUser(user)\n}\n\n// HasMemberRole checks if a realm or board member has a specific role assigned.\n//\n// Board ID is only required when checking a member of a board.\nfunc HasMemberRole(boardID BoardID, member std.Address, role Role) bool {\n\tassertMemberAddressIsValid(member)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasRole(member, role)\n}\n\n// ChangeMemberRole changes the role of a realm or board member.\n//\n// Board ID is only required when changing the role for a member of a board.\nfunc ChangeMemberRole(boardID BoardID, member std.Address, role Role) {\n\tassertMemberAddressIsValid(member)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, member, role}\n\tperms.WithPermission(caller, PermissionRoleChange, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.SetUserRoles(member, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"RoleChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t\t\"newRole\", string(role),\n\t\t)\n\t})\n}\n\n// IterateRealmMembers iterates realm members.\n// The iteration is done only for realm members, board members are not iterated.\nfunc IterateRealmMembers(offset int, fn UsersIterFn) (halted bool) {\n\tcount := gPerms.UsersCount() - offset\n\treturn gPerms.IterateUsers(offset, count, fn)\n}\n\n// IterateBoards iterates realm boards.\nfunc IterateBoards(offset int, fn func(ReadonlyBoard) bool) (halted bool) {\n\tcount := gBoardsByID.Size() - offset\n\treturn gBoardsByID.IterateByOffset(offset, count, func(_ string, v any) bool {\n\t\tboard, _ := v.(*Board)\n\t\treturn fn(readonlyBoard{board})\n\t})\n}\n\nfunc assertMemberAddressIsValid(member std.Address) {\n\tif !member.IsValid() {\n\t\tpanic(\"invalid member address\")\n\t}\n}\n\nfunc assertUserAddressIsValid(user std.Address) {\n\tif !user.IsValid() {\n\t\tpanic(\"invalid user address\")\n\t}\n}\n\nfunc assertHasBoardPermission(b *Board, user std.Address, p Permission) {\n\tif !b.perms.HasPermission(user, p) {\n\t\tpanic(\"unauthorized\")\n\t}\n}\n\nfunc assertBoardExists(id BoardID) {\n\tif _, found := getBoard(id); !found {\n\t\tpanic(\"board not found: \" + id.String())\n\t}\n}\n\nfunc assertBoardIsNotFrozen(b *Board) {\n\tif b.IsReadonly() {\n\t\tpanic(\"board is frozen\")\n\t}\n}\n\nfunc assertIsValidBoardName(name string) {\n\tsize := len(name)\n\tif size == 0 {\n\t\tpanic(\"board name is empty\")\n\t}\n\n\tif size \u003e MaxBoardNameLength {\n\t\tn := strconv.Itoa(MaxBoardNameLength)\n\t\tpanic(\"board name is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif !reBoardName.MatchString(name) {\n\t\tpanic(\"board name contains invalid characters\")\n\t}\n}\n\nfunc assertThreadIsNotFrozen(t *Post) {\n\tif t.IsReadonly() {\n\t\tpanic(\"thread is frozen\")\n\t}\n}\n\nfunc assertReplyIsNotFrozen(r *Post) {\n\tif r.IsReadonly() {\n\t\tpanic(\"reply is frozen\")\n\t}\n}\n\nfunc assertNameIsNotEmpty(name string) {\n\tif name == \"\" {\n\t\tpanic(\"name is empty\")\n\t}\n}\n\nfunc assertTitleIsValid(title string) {\n\tif title == \"\" {\n\t\tpanic(\"title is empty\")\n\t}\n\n\tif len(title) \u003e MaxThreadTitleLength {\n\t\tn := strconv.Itoa(MaxThreadTitleLength)\n\t\tpanic(\"thread title is too long, maximum allowed is \" + n + \" characters\")\n\t}\n}\n\nfunc assertBodyIsNotEmpty(body string) {\n\tif body == \"\" {\n\t\tpanic(\"body is empty\")\n\t}\n}\n\nfunc assertBoardNameNotExists(name string) {\n\tif gBoardsByName.Has(name) {\n\t\tpanic(\"board already exists\")\n\t}\n}\n\nfunc assertThreadExists(b *Board, threadID PostID) {\n\tif _, found := b.GetThread(threadID); !found {\n\t\tpanic(\"thread not found: \" + threadID.String())\n\t}\n}\n\nfunc assertReplyExists(thread *Post, replyID PostID) {\n\tif _, found := thread.GetReply(replyID); !found {\n\t\tpanic(\"reply not found: \" + replyID.String())\n\t}\n}\n\nfunc assertThreadIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"thread is hidden\")\n\t}\n}\n\nfunc assertReplyIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"reply is hidden\")\n\t}\n}\n\nfunc assertReplyBodyIsValid(body string) {\n\tassertBodyIsNotEmpty(body)\n\n\tif len(body) \u003e MaxReplyLength {\n\t\tn := strconv.Itoa(MaxReplyLength)\n\t\tpanic(\"reply is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif reDeniedReplyLinePrefixes.MatchString(body) {\n\t\tpanic(\"using Markdown headings, blockquotes or horizontal lines is not allowed in replies\")\n\t}\n}\n\nfunc assertMembersUpdateIsEnabled(boardID BoardID) {\n\tif boardID != 0 {\n\t\tassertRealmIsNotLocked()\n\t} else {\n\t\tassertRealmMembersAreNotLocked()\n\t}\n}\n"},{"name":"public_flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// SetFlaggingThreshold sets the number of flags required to hide a thread or comment.\n//\n// Threshold is only applicable within the board where it's setted.\nfunc SetFlaggingThreshold(boardID BoardID, threshold int) {\n\tif threshold \u003c 1 {\n\t\tpanic(\"invalid flagging threshold\")\n\t}\n\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, threshold}\n\tboard.perms.WithPermission(caller, PermissionBoardFlaggingUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\n\t\tgFlaggingThresholds.Set(boardID.String(), threshold)\n\t\tstd.Emit(\n\t\t\t\"FlaggingThresholdUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"threshold\", strconv.Itoa(threshold),\n\t\t)\n\t})\n}\n\n// GetFlaggingThreshold returns the number of flags required to hide a thread or comment within a board.\nfunc GetFlaggingThreshold(boardID BoardID) int {\n\tassertBoardExists(boardID)\n\treturn getFlaggingThreshold(boardID)\n}\n\n// FlagThread adds a new flag to a thread.\n//\n// Flagging requires special permissions and hides the thread when\n// the number of flags reaches a pre-defined flagging threshold.\nfunc FlagThread(boardID BoardID, threadID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionThreadFlag)\n\t}\n\n\tt, ok := board.GetThread(threadID)\n\tif !ok {\n\t\tpanic(\"post doesn't exist\")\n\t}\n\tassertThreadIsNotFrozen(t)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(t, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\tt.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ThreadFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n\n// FlagReply adds a new flag to a comment or reply.\n//\n// Flagging requires special permissions and hides the comment or reply\n// when the number of flags reaches a pre-defined flagging threshold.\nfunc FlagReply(boardID BoardID, threadID, replyID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionReplyFlag)\n\t}\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsNotFrozen(thread)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(reply, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\treply.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n"},{"name":"public_freeze.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// FreezeBoard freezes a board so no more threads and comments can be created or modified.\nfunc FreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, true)\n}\n\n// UnfreezeBoard removes frozen status from a board.\nfunc UnfreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, false)\n}\n\n// IsBoardFrozen checks if a board has been frozen.\nfunc IsBoardFrozen(boardID BoardID) bool {\n\tboard := mustGetBoard(boardID)\n\treturn board.IsReadonly()\n}\n\n// FreezeThread freezes a thread so thread cannot be replied, modified or deleted.\n//\n// Fails if board is frozen.\nfunc FreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, true)\n}\n\n// UnfreezeThread removes frozen status from a thread.\n//\n// Fails if board is frozen.\nfunc UnfreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, false)\n}\n\n// IsThreadFrozen checks if a thread has been frozen.\n//\n// Returns true if board is frozen.\nfunc IsThreadFrozen(boardID BoardID, threadID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treturn board.IsReadonly() || thread.IsReadonly()\n}\n\n// UnfreezeReply removes frozen status from a reply.\n//\n// Fails when parent thread or board are frozen.\nfunc UnfreezeReply(boardID BoardID, threadID, replyID PostID) {\n\t// XXX: Is there a use case for also freezing replies?\n\tsetReplyReadonly(boardID, threadID, replyID, false)\n}\n\n// FreezeReply freezes a thread reply so it cannot be modified or deleted.\n//\n// Fails when parent thread or board are frozen.\nfunc FreezeReply(boardID BoardID, threadID, replyID PostID) {\n\tsetReplyReadonly(boardID, threadID, replyID, true)\n}\n\n// IsReplyFrozen checks if a thread reply has been frozen.\n//\n// Returns true when board or a parent thread is frozen.\nfunc IsReplyFrozen(boardID BoardID, threadID, replyID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\treturn board.IsReadonly() || thread.IsReadonly() || reply.IsReadonly()\n}\n\nfunc setReplyReadonly(boardID BoardID, threadID, replyID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\tif isReadonly {\n\t\tassertReplyIsNotFrozen(reply)\n\t}\n\n\treply.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ReplyFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setThreadReadonly(boardID BoardID, threadID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tif isReadonly {\n\t\tassertThreadIsNotFrozen(thread)\n\t}\n\n\tthread.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ThreadFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setBoardReadonly(boardID BoardID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tif isReadonly {\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionBoardFreeze)\n\n\tboard.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"BoardFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n"},{"name":"public_lock.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// LockRealm locks the realm making it readonly.\n//\n// WARNING: Realm can't be unlocked once locked.\n//\n// Realm can also be locked without locking realm members.\n// Realm members can be locked when locking the realm or afterwards.\n// This is relevant for two reasons, one so members can be modified after lock.\n// The other is for realm owners, which can delete threads and comments after lock.\nfunc LockRealm(lockRealmMembers bool) {\n\tassertRealmMembersAreNotLocked()\n\n\t// If realm members are not being locked assert that realm is no locked.\n\t// Members can be locked after locking the realm, in a second `LockRealm` call.\n\tif !lockRealmMembers {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmLock, nil, func(Args) {\n\t\tgLocked.realm = true\n\t\tgLocked.realmMembers = lockRealmMembers\n\n\t\tstd.Emit(\n\t\t\t\"RealmLocked\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"lockRealmMembers\", strconv.FormatBool(lockRealmMembers),\n\t\t)\n\t})\n}\n\n// IsRealmLocked checks if boards realm has been locked.\nfunc IsRealmLocked() bool {\n\treturn gLocked.realm\n}\n\n// AreRealmMembersLocked checks if realm members has been locked.\nfunc AreRealmMembersLocked() bool {\n\treturn gLocked.realmMembers\n}\n\nfunc assertRealmIsNotLocked() { // TODO: Add filtests for locked realm case to all public functions\n\tif gLocked.realm {\n\t\tpanic(\"realm is locked\")\n\t}\n}\n\nfunc assertRealmMembersAreNotLocked() { // TODO: Add filtests for locked members case to all public member functions\n\tif gLocked.realmMembers {\n\t\tpanic(\"realm and members are locked\")\n\t}\n}\n"},{"name":"render.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/p/demo/mux\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst (\n\tpageSizeBoards  = 6\n\tpageSizeThreads = 6\n\tpageSizeReplies = 10\n)\n\nconst menuManageBoard = \"manageBoard\"\n\nfunc Render(path string) string {\n\trouter := mux.NewRouter()\n\trouter.HandleFunc(\"\", renderBoardsList)\n\trouter.HandleFunc(\"help\", renderHelp)\n\trouter.HandleFunc(\"admin-users\", renderMembers)\n\trouter.HandleFunc(\"{board}\", renderBoard)\n\trouter.HandleFunc(\"{board}/members\", renderMembers)\n\trouter.HandleFunc(\"{board}/{thread}\", renderThread)\n\trouter.HandleFunc(\"{board}/{thread}/{reply}\", renderReply)\n\n\trouter.NotFoundHandler = func(res *mux.ResponseWriter, _ *mux.Request) {\n\t\tres.Write(\"Path not found\")\n\t}\n\n\treturn router.Render(path)\n}\n\nfunc renderHelp(res *mux.ResponseWriter, _ *mux.Request) {\n\tres.Write(\"# Boards Help\\n\")\n\tif gHelp != \"\" {\n\t\tres.Write(gHelp)\n\t} else {\n\t\tres.Write(\"### Help content has not been uploaded\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(newLink(\"upload boards help\", txlink.Call(\"SetHelp\", \"content\", \"\")))\n\t\tres.Write(\" ?\")\n\t}\n}\n\nfunc renderBoardsList(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tres.Write(\"# Boards\\n\\n\")\n\trenderBoardListMenu(res, req)\n\tres.Write(\"\\n\\n---\\n\")\n\n\tif gBoardsByID.Size() == 0 {\n\t\tlink := txlink.Call(\"CreateBoard\", \"name\", \"\")\n\t\tres.Write(\"### Currently there are no boards\\n\")\n\t\tres.Write(\"Be the first to \")\n\t\tres.Write(newLink(\"create a new board\", link))\n\t\tres.Write(\" !\")\n\n\t\treturn\n\t}\n\n\tp, err := pager.New(req.RawPath, gBoardsByID.Size(), pager.WithPageSize(pageSizeBoards))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tboard := v.(*Board)\n\n\t\tres.Write(\"**\" + newLink(board.GetName(), board.GetURL()) + \"**  \\n\")\n\t\tres.Write(\"Created by \" + newUserLink(board.creator) + \" \")\n\t\tres.Write(\"on \" + board.createdAt.Format(dateFormat))\n\t\tres.Write(\", #\" + board.id.String() + \"  \\n\")\n\t\tres.Write(\"**\" + strconv.Itoa(board.threads.Size()) + \" threads\")\n\t\tif board.IsReadonly() {\n\t\t\tres.Write(\", read-only\")\n\t\t}\n\n\t\tres.Write(\"**\\n\\n\")\n\t\treturn false\n\t}\n\n\tres.Write(\"Sort by: \")\n\tr := realmpath.Parse(req.RawPath)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tres.Write(newLink(\"newest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tres.Write(newLink(\"oldest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n---\\n\")\n\t\tres.Write(pager.Picker(p))\n\t}\n}\n\nfunc renderBoardListMenu(res *mux.ResponseWriter, req *mux.Request) {\n\tpath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\n\tres.Write(newLink(\"Create Board\", txlink.Call(\"CreateBoard\", \"name\", \"\")))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"List Admin Users\", path+\":admin-users\"))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"Help\", path+\":help\"))\n\tres.Write(\"\\n\\n\")\n}\n\nfunc renderBoard(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tlink := newLink(\"create a new board\", txlink.Call(\"CreateBoard\", \"name\", name))\n\t\tres.Write(\"### The board you are looking for does not exist\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(link)\n\t\tres.Write(\" ?\")\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tmenu := renderBoardMenu(board, req)\n\n\tres.Write(board.Render(req.RawPath, menu))\n}\n\nfunc renderBoardMenu(board *Board, req *mux.Request) string {\n\tvar (\n\t\tb               strings.Builder\n\t\tboardMembersURL = board.GetPath() + \"/members\"\n\t)\n\n\tif board.IsReadonly() {\n\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\tb.WriteString(\" • \")\n\t\tb.WriteString(newLink(\"Unfreeze Board\", board.GetUnfreezeFormURL()))\n\t\tb.WriteString(\"\\n\")\n\t} else {\n\t\tb.WriteString(newLink(\"Create Thread\", board.GetPostFormURL()))\n\t\tb.WriteString(\" • \")\n\n\t\tmenu := getCurrentMenu(req.RawPath)\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"**Manage Board**\")\n\t\t} else {\n\t\t\tb.WriteString(newLink(\"Manage Board\", menuURL(menuManageBoard)))\n\t\t}\n\n\t\tb.WriteString(\"  \\n\")\n\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"↳\")\n\t\t\tb.WriteString(newLink(\"Invite Member\", board.GetInviteMemberFormURL()))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"Freeze Board\", board.GetFreezeFormURL()))\n\t\t\tb.WriteString(\"\\n\\n\")\n\t\t}\n\t}\n\n\treturn b.String()\n}\n\nfunc renderThread(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + rawID)\n\t} else if thread.IsHidden() {\n\t\tres.Write(\"Thread with ID: \" + rawID + \" has been flagged as inappropriate\")\n\t} else {\n\t\tres.Write(thread.Render(req.RawPath, \"\", 5))\n\t}\n}\n\nfunc renderReply(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\trawID = req.GetVar(\"reply\")\n\trID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid reply ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + req.GetVar(\"thread\"))\n\t\treturn\n\t}\n\n\treply, found := thread.GetReply(PostID(rID))\n\tif !found {\n\t\tres.Write(\"Reply does not exist with ID: \" + rawID)\n\t\treturn\n\t}\n\n\t// Call render even for hidden replies to display children.\n\t// Original comment content will be hidden under the hood.\n\t// See: #3480\n\tres.Write(reply.RenderInner())\n}\n\nfunc renderMembers(res *mux.ResponseWriter, req *mux.Request) {\n\tboardID := BoardID(0)\n\tperms := gPerms\n\tname := req.GetVar(\"board\")\n\tif name != \"\" {\n\t\tv, found := gBoardsByName.Get(name)\n\t\tif !found {\n\t\t\tres.Write(\"### Board not found\")\n\t\t\treturn\n\t\t}\n\n\t\tboard := v.(*Board)\n\t\tboardID = board.GetID()\n\t\tperms = board.perms\n\n\t\tres.Write(\"# \" + board.GetName() + \" Members\\n\")\n\t\tres.Write(\"### These are the board members\\n\\n\")\n\t} else {\n\t\tres.Write(\"# Admin Users\\n\")\n\t\tres.Write(\"### These are the admin users of the realm\\n\\n\")\n\t}\n\n\t// Create a pager with a small page size to reduce\n\t// the number of username lookups per page.\n\tp, err := pager.New(req.RawPath, perms.UsersCount(), pager.WithPageSize(5))\n\tif err != nil {\n\t\tres.Write(err.Error())\n\t\treturn\n\t}\n\n\tres.Write(\"| Member | Role | Actions |\\n| --- | --- | --- |\\n\")\n\tperms.IterateUsers(p.Offset(), p.PageSize(), func(u User) bool {\n\t\tres.Write(\"| \")\n\t\tres.Write(newUserLink(u.Address))\n\t\tres.Write(\" | \")\n\t\tres.Write(rolesToString(u.Roles))\n\t\tres.Write(\" | \")\n\t\tres.Write(newLink(\"remove\", txlink.Call(\n\t\t\t\"RemoveMember\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t)))\n\t\tres.Write(\" • \")\n\t\tres.Write(newLink(\"change role\", txlink.Call(\n\t\t\t\"ChangeMemberRole\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t\t\"role\", \"\",\n\t\t)))\n\t\tres.Write(\" |\\n\")\n\t\treturn false\n\t})\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n\\n\" + pager.Picker(p))\n\t}\n}\n\nfunc renderNotice(res *mux.ResponseWriter) {\n\tif gNotice == \"\" {\n\t\treturn\n\t}\n\n\tres.Write(\"\u003e \")\n\tres.Write(gNotice)\n\tres.Write(\"\\n\\n\")\n}\n\nfunc rolesToString(roles []Role) string {\n\tif len(roles) == 0 {\n\t\treturn \"\"\n\t}\n\n\tnames := make([]string, len(roles))\n\tfor i, r := range roles {\n\t\tnames[i] = string(r)\n\t}\n\treturn strings.Join(names, \", \")\n}\n\nfunc menuURL(name string) string {\n\t// TODO: Menu URL works because no other GET arguments are being used\n\treturn \"?menu=\" + name\n}\n\nfunc getCurrentMenu(rawURL string) string {\n\t_, rawQuery, found := strings.Cut(rawURL, \"?\")\n\tif !found {\n\t\treturn \"\"\n\t}\n\n\tquery, _ := url.ParseQuery(rawQuery)\n\treturn query.Get(\"menu\")\n}\n"},{"name":"z_0_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(\"test123\")\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_0_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tboardName = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(boardName)\n}\n\nfunc main() {\n\tboards2.CreateBoard(boardName)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_0_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_0_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"gnoland\")\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_0_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar name = strings.Repeat(\"X\", boards2.MaxBoardNameLength+1)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(name)\n}\n\n// Error:\n// board name is too long, maximum allowed is 50 characters\n"},{"name":"z_0_h_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname   = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\tboards2.InviteMember(0, member, boards2.RoleOwner) // Operate on realm DAO members instead of individual boards\n\ttesting.SetOriginCaller(member)\n\tusers.Register(name)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(name)\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"test123\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread as a moderator\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagThread(404, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_10_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Make the next call as an uninvited user\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, 404, \"\")\n}\n\n// Error:\n// post doesn't exist\n"},{"name":"z_10_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_10_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to flag threads\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with a specific flagging threshold\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread and flag it as a moderator\n\ttesting.SetOriginCaller(moderator)\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item has been already flagged by a current user\n"},{"name":"z_10_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a thread so the realm owner can flag and hide it with a single flag\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\t// Also freeze board to make sure that realm owner can still flag the thread\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_11_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_11_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditThread(404, 1, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_11_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_11_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to edit threads\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid   boards2.BoardID\n\tpid   boards2.PostID\n\ttitle = strings.Repeat(\"X\", boards2.MaxThreadTitleLength+1)\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, \"bar\")\n}\n\n// Error:\n// thread title is too long, maximum allowed is 100 characters\n"},{"name":"z_12_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Create a reply and a sub reply\n\tparentRID := boards2.CreateReply(bid, tid, 0, \"Parent\")\n\trid = boards2.CreateReply(bid, tid, parentRID, \"Child\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditReply(404, 1, 0, \"body\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_12_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, 404, 0, \"body\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_12_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, 404, \"body\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_12_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"new body\")\n}\n\n// Error:\n// only the reply creator is allowed to edit it\n"},{"name":"z_12_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Flag the reply so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"body\")\n}\n\n// Error:\n// reply is hidden\n"},{"name":"z_12_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_13_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagReply(404, 1, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_13_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, 404, 1, \"\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_13_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, 404, \"\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_13_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_13_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_13_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to flag replies\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a reply so the realm owner can flag and hide it with a single flag\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\t// Also freeze board to make sure that realm owner can still flag the reply\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n}\n\n// Output:\n// true\n"},{"name":"z_14_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_14_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteReply(404, 1, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_14_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, 404, 1)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_14_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, 404)\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_14_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent\")\n\tboards2.CreateReply(bid, tid, rid, \"Child reply\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Render content must contain the releted message instead of reply's body\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e This reply has been deleted\\n\"))\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e Child reply\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_14_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Call using a user that has not permission to delete replies\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_14_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to delete replies\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_15_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\tboards2.FlagThread(srcBID, srcTID, \"idk\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread is flagged\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_15_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID = 1024\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread doesn't exist\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread does not exist with ID: 1024\n"},{"name":"z_15_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_15_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/ufmt\"\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"original title\", \"original text\")\n}\n\nfunc main() {\n\t// Success case\n\ttID := boards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n\tp := ufmt.Sprintf(\"dst-board/%s\", tID)\n\tout := boards2.Render(p)\n\n\tprintln(strings.Contains(out, \"original text\"))\n\tprintln(strings.Contains(out, \"repost title\"))\n\tprintln(strings.Contains(out, \"repost text\"))\n}\n\n// Output:\n// true\n// true\n// true\n"},{"name":"z_15_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Create a board with a thread\n\torigBID := boards2.CreateBoard(\"origin-board\")\n\torigTID := boards2.CreateThread(origBID, \"title\", \"text\")\n\n\t// Create a second board and repost a thread using an empty title\n\tsrcBID = boards2.CreateBoard(\"source-board\")\n\tsrcTID = boards2.CreateRepost(origBID, origTID, \"original title\", \"original text\", srcBID)\n\n\t// Create a third board to try reposting the repost\n\tdstBID = boards2.CreateBoard(\"destination-board\")\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n}\n\n// Error:\n// reposting a thread that is a repost is not allowed\n"},{"name":"z_16_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 4)\n\n\t// Ensure that flagging threshold changed\n\tprintln(boards2.GetFlaggingThreshold(bid))\n}\n\n// Output:\n// 4\n"},{"name":"z_16_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nconst bid boards2.BoardID = 404\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_16_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(1, 0)\n}\n\n// Error:\n// invalid flagging threshold\n"},{"name":"z_17_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsBoardFrozen(bid))\n}\n\n// Output:\n// true\n"},{"name":"z_17_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_18_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_18_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\tuser = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid  = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_18_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tperms boards2.Permissions\n\tbid   boards2.BoardID\n)\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foobar\")\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new board permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_19_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\t// Attempt to freeze a thread on frozen board\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_19_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a frozen thread\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_19_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n}\n\n// Output:\n// true\n"},{"name":"z_1_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, boards2.RoleOwner)\n}\n\n// Error:\n// only owners are allowed to invite other owners\n"},{"name":"z_1_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n\trole  = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, user, boards2.Role(\"foobar\")) // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// invalid role: foobar\n"},{"name":"z_1_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole  = boards2.RoleOwner\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\") // Operate on board DAO members\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(0, user, role)) // Operate on realm DAO\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_1_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, user, role)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n}\n\n// Error:\n// user already exists\n"},{"name":"z_1_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_20_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a reply on frozen thread\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_20_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\nfunc main() {\n\t// Attempt to freeze already frozen reply\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_20_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// reply frozen\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.FreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// thread frozen\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// board frozen\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n}\n\n// Output:\n// false\n// true\n// false\n// true\n// false\n// true\n// false\n"},{"name":"z_20_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// unfrozen thread - should work\n\tr2 := boards2.CreateReply(bid, tid, rid, \"child 1\")\n\n\t// frozen thread - can't reply\n\tboards2.FreezeReply(bid, tid, rid)\n\tboards2.CreateReply(bid, tid, r2, \"child 2\")\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_21_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_21_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Set an initial message so it can be cleared\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n\tprintln(strings.HasPrefix(content, \"# Boards\"))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_21_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to set realm notice\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"Foo\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// false\n"},{"name":"z_22_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// realm is locked\n"},{"name":"z_22_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to lock the realm\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_22_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(true)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(true)\n}\n\n// Error:\n// realm and members are locked\n"},{"name":"z_22_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Lock the realm without locking realm members\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_23_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateRealmMembers(0, func(u boards2.User) bool {\n\t\tprintln(u.Address, string(u.Roles[0]))\n\t\treturn false\n\t})\n}\n\n// Output:\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_24_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid := boards2.CreateBoard(\"test123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleAdmin)\n\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateBoards(0, func(b boards2.ReadonlyBoard) bool {\n\t\tprintln(b.ID().String())\n\t\tprintln(b.Name())\n\n\t\tb.IterateMembers(0, b.MembersCount(), func(u boards2.User) bool {\n\t\t\tprintln(u.Address, string(u.Roles[0]))\n\t\t\treturn false\n\t\t})\n\t})\n}\n\n// Output:\n// 1\n// test123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj admin\n// 2\n// foo123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_2_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Test comment\"\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\trid := boards2.CreateReply(bid, tid, 0, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid == 2)\n\n\t// Render content must contain the reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateReply(404, 1, 0, \"comment\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_2_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, 404, 0, \"comment\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_2_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 404, \"comment\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_2_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Hide thread by flagging it so reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide thread by flagging it so reply of a reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"thread\", \"thread\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide reply by flagging it so sub reply can't be submitted\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_2_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_2_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"First comment\")\n}\n\nfunc main() {\n\trid2 := boards2.CreateReply(bid, tid, rid, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid2 == 3)\n\n\t// Render content must contain the sub-reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_k_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent comment\")\n\n\t// Flag parent post so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"Sub comment\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_l_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// cannot reply to a frozen thread\n\tboards2.CreateReply(bid, tid, 0, \"foobar\")\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_2_m_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, strings.Repeat(\"x\", boards2.MaxReplyLength+1))\n}\n\n// Error:\n// reply is too long, maximum allowed is 300 characters\n"},{"name":"z_2_n_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\u003e Markdown blockquote\")\n}\n\n// Error:\n// using Markdown headings, blockquotes or horizontal lines is not allowed in replies\n"},{"name":"z_3_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname    = \"foo123\"\n\tnewName = \"bar123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by the default board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_3_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, name)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_3_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RenameBoard(\"unexisting\", \"foo\")\n}\n\n// Error:\n// board does not exist with name: unexisting\n"},{"name":"z_3_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_3_f_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by another board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_g_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"short\")\n}\n\n// Error:\n// the minimum allowed board name length is 6 characters\n"},{"name":"z_3_i_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"barbaz\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_4_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleOwner\n\tbid     = boards2.BoardID(0) // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, member, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\towner2 = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin  = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, owner2, boards2.RoleOwner)\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, owner2, boards2.RoleAdmin)\n}\n\n// Error:\n// admins are not allowed to remove the Owner role\n"},{"name":"z_4_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\tboards2.InviteMember(bid, admin2, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin2, boards2.RoleOwner)\n}\n\n// Error:\n// admins are not allowed to promote members to Owner\n"},{"name":"z_4_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid     = boards2.BoardID(0)                                      // Operate on realm DAO members instead of individual boards\n\tnewRole = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole) // Owner can promote other members to Owner\n\n\t// Ensure that new role has been changed to owner\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin, boards2.Role(\"foo\"))\n}\n\n// Error:\n// invalid role: foo\n"},{"name":"z_4_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, \"invalid address\", boards2.RoleModerator)\n}\n\n// Error:\n// invalid member address\n"},{"name":"z_4_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, user, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.RemoveMember(bid, user)\n\n\t// Check that user is not a member\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n"},{"name":"z_5_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// member not found\n"},{"name":"z_6_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole   = boards2.RoleGuest\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, member, role)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, member, role))\n\tprintln(boards2.HasMemberRole(bid, member, \"invalid\"))\n\tprintln(boards2.IsMember(bid, member))\n}\n\n// Output:\n// true\n// false\n// true\n"},{"name":"z_6_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleGuest\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, user, role))\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n// false\n"},{"name":"z_7_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"test123\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tbid2, found := boards2.GetBoardIDFromName(name)\n\tprintln(found)\n\tprintln(bid2 == bid)\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_7_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid, found := boards2.GetBoardIDFromName(\"foobar\")\n\tprintln(found)\n\tprintln(bid == 0)\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_8_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\ttid := boards2.CreateThread(bid, title, body)\n\n\t// Ensure that returned ID is right\n\tprintln(tid == 1)\n\n\t// Thread should not be frozen by default\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// false\n// true\n// true\n"},{"name":"z_8_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateThread(404, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_8_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_8_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_8_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_9_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, title, body)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"},{"name":"z_9_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteThread(404, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_9_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, 404)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_9_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Call using a user that has not permission to delete threads\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_9_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to delete threads\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"}]},"deposit":""}],"fee":{"gas_wanted":"90000000","gas_fee":"900000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bgq2mHaqO+ClZqcBvMmMWga7izsxHfWWkLvVdUj/SREIux9mkLcHZopajDlzRU4k8U9+p/SzvdPV1ClD8QJjDQ=="}],"memo":""},"metadata":{"timestamp":"1743761702"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"RemoveMember","args":["0","g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zFD00e0aO8S4XCcGKK+hYFll9syWCwDLU552HISFFY136K4KdR7O3SYzcay0KJio6THBkoPzfjlp0pdrrSZaCw=="}],"memo":""},"metadata":{"timestamp":"1743761807"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["EmptyWithManyMembers"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"vNXG8vCPc5ta7xG0/BQCSnUVa38VwrZOtdy8pUPKITzPoiAuOf+ocKYSZ8eNNkh7IIeqjFYADPgOZeV4HvxhCw=="}],"memo":""},"metadata":{"timestamp":"1743761888"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ue4B6yp55w8jKpN2/TFsJrGhwsL0FQfrbFY59a0iYKLeVICAB5gIrsCf98/6Ct1/V6fU2vLJh0vpPekTtwc1Bw=="}],"memo":""},"metadata":{"timestamp":"1743761893"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1e5hud66rs7ye4zgeqmqvwfhurs2mnf408hdqcl","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"a6sqt1qst2TFlGCZoP5DLlOrC+145dUBL9Reb5duDYRGb8aWsRu1nlRurPbtCcig+kp7Nk1MyuMdUBL/lK7yCA=="}],"memo":""},"metadata":{"timestamp":"1743761898"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5","admin"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"AnS6SJIzlb3Z5lwMYoeR2KWH8TcOpbi/jH7Vsh9CIEn3KVSckMxDTaYk90fsCYHP2cPMbZfGQwENXQb+9a9bBg=="}],"memo":""},"metadata":{"timestamp":"1743761903"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g12chzmwxw8sezcxe9h2csp0tck76r4ptwdlyyqk","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lLmNQCvV7+oOKZucSXT90nYlTACWN6YEbkZKfccChBh/wUjeqLGS0YyszPxk7YOsj0K2/OGsrYOC0gukKjlMCw=="}],"memo":""},"metadata":{"timestamp":"1743761908"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1ym6zxff3xq7wfldcs3uyu7x7z40gstggcx8zdj","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zgzCQlf7PydhnCAGvd8Qx5PotGs1oRONk3nN95k2LIuFEEAVoHxGj+2PtMBQ1f91iTnBsJ1uKUuOJQ0OCsjTAA=="}],"memo":""},"metadata":{"timestamp":"1743761913"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["TheNumber42"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GJWNOcDkPKGY7PLPSuk2sMiLeBHeDfVKTSCR5ONQGp6pqI9iwCxj1H3cD+bfkCk1+p/UpfubXzU9Ya3q859gBw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["2","What's your take on it\\?","Seen in many places, unknown to many"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hA+wCreZUeme6OpRmNOJjo4Xwsz0he5X8mQ4g4MKVkeGqUwlIsG005FxDN/7RssNNFWH8EzGP4MGIozCwEA7AA=="}],"memo":""},"metadata":{"timestamp":"1743761923"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","What do you mean\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EIVelUPSStgGjqWLsj+NdD0fSHeZvm8Z7RnQvDQSpFuv7mHOGKV52jDZxWwH4lOHL2/e0vJKin2fWyXPF1ClCA=="}],"memo":""},"metadata":{"timestamp":"1743761928"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","よんじゅうに\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"rQ64TW3VyqAx0miELawdw5gR6g2lpNemxzXYq/kxToUNU8GYoXn4qWMO6otVdF+nsvQvkJfBBMHg9uIvDALSCw=="}],"memo":""},"metadata":{"timestamp":"1743761933"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","2","Cuarenta y dos\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y7zCrmgadsgAQCV6OiINH1LJmQ78gDYUTZ+ny0F1fNCL9nQPvbFTOwr7SX2kuaPe8iKbztZCe6N/1B//EEtpAw=="}],"memo":""},"metadata":{"timestamp":"1743761938"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ThreadsExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lH+1XZ2fVmGI2PXKfYUxKBFXKw3db+JjwAjECmsH4VXo+ppDtf79dEux0SdRltNdbx4zEW9O/3WENwu3hg5SBA=="}],"memo":""},"metadata":{"timestamp":"1743761943"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Seventh","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6NX0nRYSSn12bZ78/dmmYxWXM4IK9yQjLAomZn7edZ8Ri5BAtqZOSwvXbhZ0BFcUTgosLAgyrX30LteqkNnxBQ=="}],"memo":""},"metadata":{"timestamp":"1743761948"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Sixth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"sIPoU9jO89zc4y1GAYITh3PU9zJVGY3ugfSMsoBBxc93lOXDLAFUE+2AMQa/7Kwfyo1af4FXXFfygYCCICYSAg=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fifth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KdKslB6f6JkEB3boj5CZ1cIAOdAdF3bJ6cX6dsrT4XBK3u41XzmAK96gilAtVcVpCqNpnLul6wbbL+0exHd4AA=="}],"memo":""},"metadata":{"timestamp":"1743761958"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fourth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"D1fMGgWqqsxK7vF0ojPp36NpP6eU+1LsEUdbC2NL/xjhlsZfgU7Vu2XmXjFhFM9B2VGCwUBnEaMVufr3rW1HCQ=="}],"memo":""},"metadata":{"timestamp":"1743761963"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Third","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4uy78ABsfnWCUqmuzoU8ZUdJ7jpJrZa7J/cv/kvFT3peJhE2Rv7VrkTYcaZHKKjzWG14JmND4ZaaJnNr907Ag=="}],"memo":""},"metadata":{"timestamp":"1743761968"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Second","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"5dDdgrVSfFfD9kYaBD369pxn1g7l6jDOaNANwcuxGwhUaT9j5pcroAqHHTu5UJf4sekSNb/nSNEp37ucimaCCQ=="}],"memo":""},"metadata":{"timestamp":"1743761973"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","First with many Replies","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"OmSespthAIe99nCg3NNVqwdogdID85sViEarnls5JCXhygv/lzl79T4CFQIa42T13gOLMkPX9fm7OwT8mU1RAQ=="}],"memo":""},"metadata":{"timestamp":"1743761978"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZDniAUL1tJpPm4oBs4ExDExl8MJMedEzUBdezq600CaJEYvBznvd3vueZ5siRp7tHdaV0DgNmcXzZ+OxpqcQCg=="}],"memo":""},"metadata":{"timestamp":"1743761983"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","8","Sub First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F8ifXbTQbXb5RSL61RUb9S0tBzok3uo8RTDhh0501znHUYKYILNSitQg9Ak6XmwcV0UQcgO9zzLx316DBB7YBg=="}],"memo":""},"metadata":{"timestamp":"1743761988"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Second"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CkwjnV+bUGNb/AghoAxE8xc8/BZwAp5Qdhy4xkfZrtUpxGDRt1ji9DaM2ZzUQnDBQeXiev5RiZyA7I4gwva7Dw=="}],"memo":""},"metadata":{"timestamp":"1743761993"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Third"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3sNgEYAAHfXxWFQdYzafqv5vsFDEBMdCE3RRaKyQEQxpX92yNavn05wq7EtOeiIymOD1B7LWBUCDIGMxO27iBw=="}],"memo":""},"metadata":{"timestamp":"1743761998"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fourth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yVMsA1dVS5o2dpm1EoxH55Ybm8sBwbmeCFhyboRoWjp9qnZhLXLvzu73jo0nZa8xJialU0upoHcWrr76K5rPBw=="}],"memo":""},"metadata":{"timestamp":"1743762003"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fifth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UEHh1VeBqkL3lCultuOyGU0LDvVTlrhg6wTJqAn+5gF2QUKWZi3Gn4CBbkoY0byq1OCDXr6R/K+SP3aB8QObAw=="}],"memo":""},"metadata":{"timestamp":"1743762008"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Sixth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3kby94L/InKntqzU+T3NRDno58jFcx87O0/FldOxJDlcT56+WaKthft6n+Wp0Jl1lz8Xv3LmgwGWQ3Pc52+oBg=="}],"memo":""},"metadata":{"timestamp":"1743762013"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Seventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"L/zuxl0k3DoZFKNs/kGgaEh1ROr/YafHDEmXlJw9aD/jH2Mbm/PhvU3La/o0PchdGC0A42xuwZ+SeMQIyUVdCA=="}],"memo":""},"metadata":{"timestamp":"1743762018"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eigth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VpVi4ICdRdDP3sT2HJNj5Vl5gFKZxgy+58rqpnkR8l1QBLPZDjP+hklXzsmhDouMdI+ssFCTU4mD1/W7sGUQAw=="}],"memo":""},"metadata":{"timestamp":"1743762023"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Ninth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u/zQSKIjPHAPocj4hEnEw441VWRByccTtenD12X8cBnYxBDHNV87PR+JBWUjNXN7GLZfPcjK5igMD2l5IqhwDA=="}],"memo":""},"metadata":{"timestamp":"1743762028"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Tenth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tnUlmhe3JjOtRxnpCDbYcpaeF3rNa8N0F5EYwJU8ba8zDX9St1hiBp66tScfyYbTeLE2aTRmUa8E+zh730++BA=="}],"memo":""},"metadata":{"timestamp":"1743762033"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eleventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"q43M1mc9mbW7TJWgTyT1L37ePTd7N1hkAWbUUfMztPKCblhBrECCKrzMwiE5iL+afNgiWGZcCpFc5KwtwPSyCQ=="}],"memo":""},"metadata":{"timestamp":"1743762039"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ReadOnlyExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"STdbtDRKw327m8lDyp9W1Fnr2A3iC2uws1pBNHuL9xya2JE6IYbU0Fe12FThHOLWK80Yp+L43bgVNOSOamrWAg=="}],"memo":""},"metadata":{"timestamp":"1743762044"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["4","Example Thread","This thread shouldn't be writable"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaJ2B8/gC/qRQxVQVYF4TUIkqDZiwqa1sqfTP+eIV8Q7gkx1sTOSqcWqvg5mOWw6wBTH9LhUi9lSXVYAUw7eCA=="}],"memo":""},"metadata":{"timestamp":"1743762049"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"FreezeBoard","args":["4"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SmNrbgokoxiJTXtSIymwGMBphqmB1J06gs/jdVJ1XKUuRO3CMmaJ5ytxvmVvwBlAja4QqA1T7bcgto5T8tv/Cg=="}],"memo":""},"metadata":{"timestamp":"1743762054"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["RepostExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jPxomuyfqs6yS9mJ1zXaTs9FWXwgPHaVJcH6/ADQ67I3vPXMxoKqJstfrbxMrvuuqtUPxU+pTgv3Im2lBV+qCA=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateRepost","args":["2","1","Custom repost title","Custom repost body","5"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VLCyyn5BwJZr8c7LJIX/9fiycuO7cfuq8Ulq6uCa7ZTmaUvPe7Mb2K54gI+4hDxEC+TBNLCTAr4W0YDi7uuaCQ=="}],"memo":""},"metadata":{"timestamp":"1743762064"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HUsxXJsbLLE7eqalnFbxs6QLrCECri8DfkKxQ7I0jDcoAuqpdwFv0TO1Y0WqpYAp1otB2t+BUQoG9VXhmYk3Dw=="}],"memo":""},"metadata":{"timestamp":"1743762325"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XQlmGs92NlV8UrVFWCivs35isbsW6JNzJB0nmE3vvHZCqpozufS9D9wGALa3Hu0Q9Kpd3d5x2WZ+q2iTmnOxAA=="}],"memo":""},"metadata":{"timestamp":"1743762441"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ua3nwMeerrzI17poTLZrtcvFkUSI0DU94fhwdpAZ0sj3oX+Zdy58QCBr99lqnJK884I7Qv3lORzBynXG5jbwDQ=="}],"memo":""},"metadata":{"timestamp":"1743762466"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743762511"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762858"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1aykqe5ddemku5mwd3elmwtpj8jgss47xrqpag4","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"chG844+xbriyl9WGrlc6xkHm736dDMmfgMfPREBqaiPEII5TfCVIbQ8q6DSR7LSm2+Hja93gLN28dYpl/In2Dw=="}],"memo":""},"metadata":{"timestamp":"1743767985"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1dtuj65mgja87gh0c45pd3rt4cah0kkw9lzld4y","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HKCPLxCVbpHst0ip432MlUIpiFmurceZOAjNZOCjq3aXAfsNREbyej3mLe240/+w4d7OeGD4LFB/ninsfphACA=="}],"memo":""},"metadata":{"timestamp":"1743768151"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743769312"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["test-manfred"]}],"fee":{"gas_wanted":"50000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"4xO97j7lj2RX9s6xjyqRDNGa8qs6kEShqhOJIObF+nH9iKCbmHagUmAJgVbgdauLbAzMMLlx6e05HgwXESc3Cw=="}],"memo":""},"metadata":{"timestamp":"1743774399"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["6","testing testing","👋"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1ZtT0NfPPwkk8JYdIJD/IEwmoveEfqV53nerV1Jt4K4AKhIHKr//2rMglFermH9UI7JPWIhf8sADVOONCPvCA=="}],"memo":""},"metadata":{"timestamp":"1743774450"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"9104212","gas_fee":"4742446ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"o+0plDtw6ntbQncO7v5Y1GqAV5NE21j8bDyIcKkKMqGO5qYPrutx4yl5WPJAoGz5pg8Howi/Aq/wJzxWHPXjCw=="}],"memo":""},"metadata":{"timestamp":"1743775038"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743775997"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776002"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776017"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"UpdateStatus","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"abVD8zghTuhurQtvCizQ+m2Lh72r0t0AJHh2dt3e+kSQOqjFfZtJ0xO5eNlHm8Kj7nRvTjeVoqmzWdYE3b/sAg=="}],"memo":""},"metadata":{"timestamp":"1743776022"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743776083"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hello","path":"gno.land/r/test12/hello","files":[{"name":"package.gno","body":"package hello\n\nfunc Render(path string) string {\n\treturn \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/demo/eco","func":"Render","args":["Deployed through play.gno.land"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NXiO4V07kWqpEPpSYKqmTsQlZO06J6v5OUF72Mr79nhgleTapAVcCHDnsIx0TxnRZzMNbauF/eXro5zujLUKDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743788578"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hworld","path":"gno.land/r/g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5/hworld","files":[{"name":"package.gno","body":"package hworld\n\nfunc Render(path string) string {\n  return \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/sys/users","func":"ResolveName","args":["abc"]}],"fee":{"gas_wanted":"3428737","gas_fee":"7144ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F0m9qBwjIzAghFc0JygVxaAsdQhQqnpQQw/gaC740ZTHBJL4/TrpaqxPBTdmrtKNIoQsTsQXkC1LZ+fk9BKeDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743793364"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g150gdvn780ws7a3s9qpdvv7h4d9hq6vh672ely0","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yZMsHEcc7RI4t9HxQZKQikdr8da5aREuDgdhlUOTZXd5xpQXiWU1C2XeFG2pMAMp3CW2jUbaoQe4IJ0PisblAQ=="}],"memo":""},"metadata":{"timestamp":"1743859813"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g150gdvn780ws7a3s9qpdvv7h4d9hq6vh672ely0","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yZMsHEcc7RI4t9HxQZKQikdr8da5aREuDgdhlUOTZXd5xpQXiWU1C2XeFG2pMAMp3CW2jUbaoQe4IJ0PisblAQ=="}],"memo":""},"metadata":{"timestamp":"1743937361"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["FirstCatPost"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPVLnUetx7hCfdd5j8R2FiLe3q/I366w2fZvYsdwSqtmOy534t58ykbsw5gRdE0cfWZsROW5a/qB2VWkSCpBCA=="}],"memo":""},"metadata":{"timestamp":"1744009485"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateThread","args":["8","First cat post on boards2!","Katt Williams is an American stand-up comedian and actor. https://en.wikipedia.org/wiki/Katt_Williams"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"J09/6ygdvvm58J3jRqMSxafvYfmvs/NzXsmoCjNt4mAkdsJ/W6jJ9rdTd4EJWwIr08M39Drl+1G+kA0UydKaAg=="}],"memo":""},"metadata":{"timestamp":"1744009736"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["FirstCatPost"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"IOIyEHh8R0fPS4Z/y39Ly5T6h0QMrzeOtIauFapluMfR/TuOKD77EVc679KY08ZzsN15SCrdVa4XGUXcmn2XCQ=="}],"memo":""},"metadata":{"timestamp":"1744009852"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["7","First cat post on boards2!","Katt Williams is an American stand-up comedian and actor. https://en.wikipedia.org/wiki/Katt_Williams"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"N7L0GQbNWXkRA8o6HWji853DzaZPgNEB7MVQ//QMvGqxb0LxlSh+dCHDOljgmB4f/lLC76c4lSAaM2E528FrAA=="}],"memo":""},"metadata":{"timestamp":"1744009907"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g14n0zsnsk054uxwvnwmmqyrq6e87ynk5vq98qqp","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Kf5rmwnMs/nfl+VXJtQqrhsUFZqTQqybk5ADrsI5O2Lt9DVf+QqRP9vswBSC/WpPkgGMPeFBgQaLHpOi5awWDQ=="}],"memo":""},"metadata":{"timestamp":"1743587748"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1dzzx5qwcmawqnhhd76ehkteas5v2dg42hqnd7g","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"pfIacFtVu0UK1MgJVmS1uGL6BRTXTkc9SQ7qHy+Zh1xZcEhs0CJv+ZTv/D7TuHrgoXBTNOi7qLKgo0K36uvBDA=="}],"memo":""},"metadata":{"timestamp":"1743587759"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587924"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743587939"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743587980"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743588120"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1ecnuruz6mgmnw4wdtjtt62lecj0lcddp3anu84","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaLRHLnIk6zslUHuWqRVRbBvTUzm5jDl+zZxFZdthnVkMhWlmhEeHdjFWo+V+sbx/EOOZDbme19d4ZddPT47DQ=="}],"memo":""},"metadata":{"timestamp":"1743588221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591981"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1g37jpfcnnvmpfajhcdv9syvdy7w2kr47frss90","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CICSk4lNynXhgDVXNw9L+4Xk2z4XQ0y2asTkjbuiC6BxE08PAv+1kVbQ0oyGwdzAtOGW46hOPGizlrGiWxG8CA=="}],"memo":""},"metadata":{"timestamp":"1743591991"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZAHmHJr6/jLN+AjWJQsb+t0vv3lF+WAfpd8525qOiqmXO1DeZ/rV+bzzh7fkaAAmTi9F/5Z00T8EF7sku2YBDA=="}],"memo":""},"metadata":{"timestamp":"1743597359"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2231690ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lBXZ55L/zJcSu0Nz3CtVpRumcACjpEVubgsLPiCKApSeOjEnmuuVkxH2mnh1ZMWt1nDVkbT4Zk0FBO8ythcADQ=="}],"memo":""},"metadata":{"timestamp":"1743597379"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887428","gas_fee":"165039ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CfKWRWGdsPCxkfaq3HED6HeeaMrLAQl4JfoKLXBzORDoqSui9g0pwgOvbMLAJQh1WsURlVQUKCT9bBxJIKGxDg=="}],"memo":""},"metadata":{"timestamp":"1743597384"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"3059175","gas_fee":"6374ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"U/Lh/vqW/msAgD5fgvDz5Eq1UBCZXknYYLXoKUKT0er1CEFGSZjihcKI4TZK16Rt0vcFnL2kR85a6+HsO3TJDg=="}],"memo":""},"metadata":{"timestamp":"1743597409"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Z3rGTeiuwQxAO1383d2XyzJ3ny+R6lVsMCH3AfNnQfHodVZUZlD1UyLA6hk/LqmMgMGhwQNMeroewPj6tNwhAQ=="}],"memo":""},"metadata":{"timestamp":"1743606306"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"miFYsl850KdWfaYVeUCHFUBQHWw0FUfKp/gh/tCTiIOIBm2jg+ki3YtWZkjq2jUCoHeN+nHx1smTN8xuOU6XCw=="}],"memo":""},"metadata":{"timestamp":"1743606668"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"9hNkFMu/xsQqvduZoi/8CZDiTtl9CFrjecn8LbIg1aVMvstwEYqA9O7HKQ8blamgzV7Seyv8tzdu9fYGjU2GDA=="}],"memo":""},"metadata":{"timestamp":"1743607723"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NRLFNdnKicUZR6tFldf8s4dn3L2xnF+TrH/JoJbAteD2zrHtiLjHL4faTopSaABlpgVAOkVGUOMILwokq+lkDA=="}],"memo":""},"metadata":{"timestamp":"1743608020"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3bt2TuGnvIPEFRLQmvr9fTNpmw9vddoc7JciKsGoLiP2LEGkuvxB+2sS/3zz6pbvptI6VIC0j3F3TxZiG2dpDw=="}],"memo":""},"metadata":{"timestamp":"1743608226"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n","admin"]}],"fee":{"gas_wanted":"8066534","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h9m9JF3DGXSQEpWHgk633+sSZvuQhVXiyQqXxihNqnWwwdPIUcG9EhGYZRRulcUDjNx9IuzALdpEzFeneOmhCA=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743608291"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g17290cwvmrapvp869xfnhhawa8sm9edpufzat7d","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"8967781","gas_fee":"18683ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KDUHz1HMhnSVLUZj4hLoxE7FlKqopgGbZMTXpkHV8jjul6TDBgdrfq5AyNFX3fH2sKjVTYGiFtEP3/cuV+m9Cw=="}],"memo":""},"metadata":{"timestamp":"1743608301"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743610126"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"DeleteTodo","args":["0"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ypbOAcxpAUGaUQt6F6KB3OhqJN2cRoD3dF8bkqySqRsVfhrXQJ3O/B9P2ex0jeKkezVoeRIpw2aN+2dwUa2hDQ=="}],"memo":""},"metadata":{"timestamp":"1743611628"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g14gvmle0a5hln0ct7wv857gucr7lmeust35736r","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kePfJ+g+ai4gbewkzMdmETesCmNI4i5ecAxwYpC4S6roDM3odtc8gDYipZqX7r5p37NP5p57MkhcMgODCZhdBA=="}],"memo":""},"metadata":{"timestamp":"1743662226"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4xzI4KB87lg/4EAWdmOPjO/R7VMfE8qE3jHysIvQuOlVylig2lajrqO+Bds39v5UqglfUvVS+mpWQ1KWUIEDA=="}],"memo":""},"metadata":{"timestamp":"1743663236"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"5000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Mq9IBbwNUb1YPvhyQIQhuw/eoxE2a4ue17kTC9Io08f9+CxgmjeHFuxfvteS1xsGsTe8qVVQemJHt10w+GSjDA=="}],"memo":""},"metadata":{"timestamp":"1743663533"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1u4pzrdsnhqd3cypet5qtrk6cdtftxdzd5297fx","send":"","pkg_path":"gno.land/r/demo/foo721","func":"BalanceOf","args":["g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj"]}],"fee":{"gas_wanted":"10000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"MukwMPbas5Oz+wAk+oIfksfQx8DykYMmhaYaOnMynhvtwxNBlYTo4sAAkz1cVPLHYTu5czK6iBDFekbaOjVYDQ=="}],"memo":""},"metadata":{"timestamp":"1743663709"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hZQyD4QXJWRDvfK1fwSMGbJqGAQ6QI6jtPCuOM8yXoguotR561mxeGB6mEztRI0XE0SVsuw3qpzs9Rda9KaACA=="}],"memo":""},"metadata":{"timestamp":"1743666971"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1kufw42c0duur8g90dl43peluhqpksan72mw6r8","send":"","pkg_path":"gno.land/r/docs/adder","func":"Add","args":["42"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2233340ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"d6iaXDqBE5lH4dYLNIfcEyb9dpHEYoBD1vD7B5sQQJ8c9/7e/ujH30RV7QZTn843pIWTplZj2OQ+GoScxXPPAg=="}],"memo":""},"metadata":{"timestamp":"1743666986"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","send":"1000000ugnot","pkg_path":"gno.land/r/gnoland/users/v1","func":"Register","args":["keyboard_worrier"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"WZ+i8zhkmdovnOGvtVlX0eK04aS2h1730ztiMLbsw0pAHohEIq1jkYrf8CeIcJFTlGRApmQkvRSytq7bVa7RAQ=="}],"memo":""},"metadata":{"timestamp":"1743672162"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743674585"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743675500"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676274"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676415"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676425"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676440"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676450"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u0+OEZBml5JhgchiRyijv/e3EBkxIj4fB9mNsutWrRQDHZ5v+XhqefRAfD/u48h4fm/6+qT79Rml451EVmAuBw=="}],"memo":""},"metadata":{"timestamp":"1743676465"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18fesw70rewm692y0wmj7079t5yck65zv34etql","send":"","pkg_path":"gno.land/r/demo/userbook","func":"SignUp","args":null}],"fee":{"gas_wanted":"3000000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"b6gylbXUNmIJc8+UTKOqtssB3dtRA+9q46TN/WGgpL9pSCAwqVjCVO3BsUCYN4wyi4SFchw0fiUbUbuqOL9wCQ=="}],"memo":""},"metadata":{"timestamp":"1743676600"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"RemoveMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5\n"]}],"fee":{"gas_wanted":"7891622","gas_fee":"16441ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kFvFubneBzNxFJJsqdcFot4DI76vFnUL61hImedWMOYPT4oNpTPvu35RTbjH/CIjQ2ZbG21nvKR1cq72TNGIAg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677621"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1778y2yphxs2wpuaflsy5y9qwcd4gttn4g5yjx5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["6","g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","admin"]}],"fee":{"gas_wanted":"8066714","gas_fee":"16806ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TAAONmyVenhy51nV9BGWz5k4HFfNuFr8r7bwnbaBrHkB7w0knuA3L+8qMhD1h7Kp8KeIKKUnE8QMZayYtJMvCg=="}],"memo":"Called through gno.studio"},"metadata":{"timestamp":"1743677721"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["Message%21"]}],"fee":{"gas_wanted":"887404","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Arj8N87k6sLPuCZEV/uB92axfgpJeojYTh0C6QsSgUHJOeP/v7Sdn25cY045uI+5IiKFqiWhyZBCglJqwGLbAQ=="}],"memo":""},"metadata":{"timestamp":"1743677742"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1euj8ry6ygx02x48u4505heckkclyps3w87uqtj","send":"","pkg_path":"gno.land/r/docs/buttons","func":"UpdateMOTD","args":["hello !"]}],"fee":{"gas_wanted":"887311","gas_fee":"1849ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"/GZGejcRk3HCoQIHSbhiOKnS5Dpjycv0Ke9W4W6vbVlF79A6YoudY/KBavSKEUmNR0Y7lyGxlCa+etTe7UT5Dg=="}],"memo":""},"metadata":{"timestamp":"1743677757"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"k8yjgyUuV0ZGtPIzDRM6VHiQExeKiRwy93C0tBfYn3kVZHvpIesoCGGWGvWF0zfoUXDJtZxUpC5QKiazh+i3AQ=="}],"memo":""},"metadata":{"timestamp":"1743680159"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"ChangeMemberRole","args":["0","g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6Ofd6RIF+1UULOLk50dyYYUlkPK5IZ/4Mlp/qHzeIGZrXrxck0lJ/saC99ZP/3+ughHkahxyx6eHU6nZG9lfAg=="}],"memo":""},"metadata":{"timestamp":"1743680391"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g125em6arxsnj49vx35f0n0z34putv5ty3376fg5","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1721880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"FT0UHoGLEjePQfFtU1tyQ9qe7FxvdzTar5j1Xl00ZPozmei/qvvLGl8YhYi0V8sSJVouI8borYvb3dpqIQC/Ag=="}],"memo":""},"metadata":{"timestamp":"1743682979"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1d2hvkqhqckhzpaum09c002fesdw89qrcg9zqws","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"eSFCEK9IO/P5jxlfnbp35xVVYo36+CiOFJz/JQABTf9r/+da5JOSdgUemoC7R1EvJE9HCeJ2XWmbu0j5K31yDw=="}],"memo":""},"metadata":{"timestamp":"1743683221"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1lrsrj4auaffjk538w3x2c9gzyth2m0n39zcg6d","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"V7WYKzC8VemKyowufMneyzt0CQ6PR2RtCEEMnG4Jwx9CNVCNP6e54vE00yweRc5P2LU0+m9ZMOFUbblPQsY+DA=="}],"memo":""},"metadata":{"timestamp":"1743704885"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateReply","args":["2","1","1","Hey hey hey"]}],"fee":{"gas_wanted":"60000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bY/5T4aU3MOrBezBKCFXUR2RgMmPxpHFwi/xI6ga1b2u3JRxeYQx1+bOZtqknyFa8Feenu3GclmRnfknOQDyBQ=="}],"memo":""},"metadata":{"timestamp":"1743711043"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateBoard","args":["aeddi"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UlcPNzTB9SRYFhru5eBzZkqx1z6pk/iuEkbLCBEyI4QQKT75/GIsoVmR3Q0OWv9BEqzn6iep89664ieAb17KCg=="}],"memo":""},"metadata":{"timestamp":"1743711163"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g16znvp6wxupkkds8mmmtxhvmdly08xpa4rqagp3","owner"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"BfNTMw8/jbCjUAxbYJSqAx71LTglT2ZB7rErSOurWZwbtFbHT2pMkbyYJym6agX/S13Ms+8RYPySznleZZy2Cg=="}],"memo":""},"metadata":{"timestamp":"1743712058"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateThread","args":["3","This is a test","Hello World"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1xJIqIyGXcSfsRczg0T/hKdr+hED2UDE0oCA/7YyQcna9Y2LtGmivjxAqiR+/E3Qa876okANEwvPjafqiLTAg=="}],"memo":""},"metadata":{"timestamp":"1743712737"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1jazghxvvgz3egnr2fc8uf72z4g0l03596y9ls7","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"1648310ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"E3EBw9aZXdSZwrwQN9i2bQjTGgpMeFRhJS9EjaEJENZdnjkmkWXiM/8jQi026/ELjf6nV7oC77ciysIt3+FyAg=="}],"memo":""},"metadata":{"timestamp":"1743715914"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EUy4N/WGhGY7IyvxkWJSpvvMm5UKPWmtuZYPwSE8JUQJ5/H3n6b8Xyljv6d+4xfO02mpmsqg57L3LY6PEcFiCw=="}],"memo":""},"metadata":{"timestamp":"1743738197"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XC5tB4Ww+jD/lgfSzvcKBmYg8nP697HYElMuyCwuArt2lo1NczPDAAHwjny191b1xy/8Pz2uae+iI9xGPXrOBQ=="}],"memo":""},"metadata":{"timestamp":"1743738288"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"DeletePost","args":["1","2","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SEMazbhceoUeLcw20UvlJqjlsT+oSRAOqdiA0bIeCwIex6a47RH45NT4qB644ulQ6YiRv9kD7sOS3sf8OKiUCA=="}],"memo":""},"metadata":{"timestamp":"1743738333"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/leon/hof","func":"Upvote","args":["gno.land%2Fr%2Fursulovic%2Fhome"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3xdY2zUEaSvL2+NoPTHTD3X2FZ1Ehg/xPBZRRJi2Ylm6LU/F+HmMG0YhLVkvR5lEea0en2+Kn8UhdIgdPjlkAA=="}],"memo":""},"metadata":{"timestamp":"1743738469"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["1","2"]}],"fee":{"gas_wanted":"2000000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GCtUiktIhSyqpETUMRR/0Ty6v80QbmeROULnTsW72XKvSQZF1enMC90gtSn0F3kidponqgEAnTkrWoBvjTJVBg=="}],"memo":""},"metadata":{"timestamp":"1743738680"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"TH4yuyDvuq6andRzdObtjw6Dzpaw7zqjNyoCw1FC07ipn9ZVUWcFIcPLM1eRU44RQqFtWQ7LhlDymM5LiS/9Aw=="}],"memo":""},"metadata":{"timestamp":"1743739027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1nnl20472w0effzcexuqmk4ntn20wg95ytygy55","to_address":"g1ueac005m96sheu75w2vpencyuzam66zz54msh9","amount":"9000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"x7EtVQUYGVRT3Uo09arsuKUCOFQPhvg5718Vg6o3A74KWzqlUdT07sAADvGOCJxV22MBwe8ZLIMlEHx++NdJCw=="}],"memo":""},"metadata":{"timestamp":"1743739047"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ABOlkSDcCQJVf7mjnItLyRQyJjbSYLRXagmMz8poqvkjX1oTi2NGpNH6zu7466kPlFHmESXvy6di9sNfLhKjAg=="}],"memo":""},"metadata":{"timestamp":"1743739590"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1zeq4hn2hd2azde6p9x2ya9gp3ug30vuuv56pym","send":"","pkg_path":"gno.land/r/demo/boards","func":"CreateRepost","args":["2","2"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"kYuW3zW5gf3ruKjUwHJirEXeQYRcwyp6DSm9Ev+un2MNqF98LUiq51jNEBMKTLSpa3tA14JycfVXGm9WWlc/DA=="}],"memo":""},"metadata":{"timestamp":"1743739625"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g1p5pa2sp4elcja2u8wn36zv3plsyp8xrqgz0usf","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y3k24ayy98evfOxRipkejsxyO6e4KpGvp3g18WK/I5dpHl6S3+X1YBqS4nsYvlUgd2pS1jKXNKyal6nfZE3fCw=="}],"memo":""},"metadata":{"timestamp":"1743750714"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"InviteMember","args":["0","g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","admin"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fh2rWd2kWcbkBtMD/lkvdQTyb+qJmm41PqTxvrGs1/DHXFzxUy/ObzI9yR3WTafkheAaT3Hk+QcWh7C8eZJJCg=="}],"memo":""},"metadata":{"timestamp":"1743750895"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g18x425qmujg99cfz3q97y4uep5pxjq3z8lmpt25","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["aeddi-testing"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"fosRIYGMBTklap54MeOskYvZ0qhOYfv4NiUXCPQtsncG2mKLibB8uR0YgN6VNPb1B/QkbY0CYjkvSK8rjYpUCA=="}],"memo":""},"metadata":{"timestamp":"1743751141"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","to_address":"g193wtm0r2gu5w4tfrwn92nsunnuya9jxyz03dsu","amount":"1000000ugnot"}],"fee":{"gas_wanted":"12000000","gas_fee":"100000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Qg0qeTKOZCtxt3SYcwws9gIgf9EdulRfhcCeYa1mcfCCpynY3Qof2tctuQJ0YwdA73ckJC+5tosyt8Se54xcDA=="}],"memo":""},"metadata":{"timestamp":"1743755182"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KEh1CNIKget+9RJs7jwY0v+su73iInpdjp3/Qxo9FmgxZdreA4z7IOSEvBDCAVlL7xzLgj8NBIckrhgBXg6CAQ=="}],"memo":""},"metadata":{"timestamp":"1743760782"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"","pkg_path":"gno.land/r/demo/wugnot","func":"Transfer","args":["g1ffzxha57dh0qgv9ma5v393ur0zexfvp6lsjpae","-1"]}],"fee":{"gas_wanted":"12000000","gas_fee":"2109130ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPbLggW1eugeEhTDF3cphB7ILmOsQpaE59va4Kf7hSMP3MTANuiTBVMcTJitdDEFLgWFCKl4JzzLpI69WgLcBw=="}],"memo":""},"metadata":{"timestamp":"1743760847"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761662"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","package":{"name":"boards2","path":"gno.land/r/devx000/gnoland/boards2/v1rc2","files":[{"name":"board.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\ntype BoardID uint64\n\nfunc (id BoardID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id BoardID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\ntype Board struct {\n\tid        BoardID // only set for public boards.\n\tname      string\n\taliases   []string\n\tcreator   std.Address\n\tthreads   avl.Tree // Post.id -\u003e *Post\n\tpostsCtr  uint64   // increments Post.id\n\tcreatedAt time.Time\n\tdeleted   avl.Tree // TODO reserved for fast-delete.\n\tperms     Permissions\n\treadonly  bool\n}\n\nfunc newBoard(id BoardID, name string, creator std.Address, p Permissions) *Board {\n\treturn \u0026Board{\n\t\tid:        id,\n\t\tname:      name,\n\t\tcreator:   creator,\n\t\tthreads:   avl.Tree{},\n\t\tcreatedAt: time.Now(),\n\t\tdeleted:   avl.Tree{},\n\t\tperms:     p,\n\t}\n}\n\nfunc (board *Board) GetID() BoardID {\n\treturn board.id\n}\n\n// GetName returns the name of the board.\nfunc (board *Board) GetName() string {\n\treturn board.name\n}\n\n// GetURL returns the relative URL of the board.\nfunc (board *Board) GetURL() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + url.PathEscape(board.name)\n}\n\n// GetURL returns relative board path relative.\n//\n// Note: returned result is not escaped. Use GetURL to get URL-encoded path.\nfunc (board *Board) GetPath() string {\n\treturn strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\") + \":\" + board.name\n}\n\nfunc (board *Board) GetPermissions() Permissions {\n\treturn board.perms\n}\n\n// SetReadonly updates board's read-only status.\nfunc (board *Board) SetReadonly(readonly bool) {\n\tboard.readonly = readonly\n}\n\n// IsReadonly checks if the board is a read-only board.\nfunc (board *Board) IsReadonly() bool {\n\treturn board.readonly\n}\n\nfunc (board *Board) GetThread(threadID PostID) (_ *Post, found bool) {\n\tv, found := board.threads.Get(threadID.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (board *Board) AddThread(creator std.Address, title string, body string) *Post {\n\tpid := board.incGetPostID()\n\tthread := newPost(board, pid, creator, title, body, pid, 0, 0)\n\tboard.threads.Set(pid.Key(), thread)\n\treturn thread\n}\n\n// NOTE: this can be potentially very expensive for threads with many replies.\n// TODO: implement optional fast-delete where thread is simply moved.\nfunc (board *Board) DeleteThread(pid PostID) {\n\t_, removed := board.threads.Remove(pid.Key())\n\tif !removed {\n\t\tpanic(\"thread does not exist with ID \" + pid.String())\n\t}\n}\n\n// Render renders a board into Markdown.\nfunc (board *Board) Render(path, menu string) string {\n\tvar sb strings.Builder\n\n\tsb.WriteString(\"# \" + board.GetName() + \"  \\n\")\n\tsb.WriteString(\"Board created by \" + newUserLink(board.creator) + \" \")\n\tsb.WriteString(\"on \" + board.createdAt.Format(dateFormat))\n\tsb.WriteString(\", #\" + board.id.String())\n\n\tif board.IsReadonly() {\n\t\tsb.WriteString(\"  \\n_**Starting new threads and commenting is disabled**_\")\n\t}\n\n\t// XXX: Menu is rendered by the caller to deal with links and sub-menus\n\t// TODO: We should have the render logic separated from boards so avoid sending menu as argument\n\tif menu != \"\" {\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tsb.WriteString(menu)\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(\"\\n\\n---\\n\")\n\n\tif board.threads.Size() == 0 {\n\t\tsb.WriteString(\"### This board doesn't have any threads\\n\")\n\t\tif !board.IsReadonly() {\n\t\t\turl := board.GetPostFormURL()\n\t\t\tsb.WriteString(\"Do you want to [start a new conversation](\" + url + \") in this board ?\")\n\t\t}\n\t\treturn sb.String()\n\t}\n\n\tp, err := pager.New(path, board.threads.Size(), pager.WithPageSize(pageSizeThreads))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tthread := v.(*Post)\n\t\tif thread.isHidden {\n\t\t\treturn false\n\t\t}\n\n\t\tsb.WriteString(thread.RenderSummary())\n\t\tsb.WriteString(\"\\n\")\n\t\treturn false\n\t}\n\n\tsb.WriteString(\"Sort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tsb.WriteString(newLink(\"newest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tsb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tsb.WriteString(\"\\n\\n\")\n\t\tboard.threads.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tsb.WriteString(\"\\n---\\n\")\n\t\tsb.WriteString(pager.Picker(p))\n\t}\n\n\treturn sb.String()\n}\n\nfunc (board *Board) incGetPostID() PostID {\n\tboard.postsCtr++\n\treturn PostID(board.postsCtr)\n}\n\nfunc (board *Board) GetURLFromThreadID(threadID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String()\n}\n\nfunc (board *Board) GetURLFromReplyID(threadID, replyID PostID) string {\n\treturn board.GetURL() + \"/\" + threadID.String() + \"/\" + replyID.String()\n}\n\nfunc (board *Board) GetRenameFormURL() string { // TODO: These type of functions shouldn't be part of Board type\n\treturn txlink.Call(\n\t\t\"RenameBoard\",\n\t\t\"name\", board.name,\n\t\t\"newName\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"FreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t)\n}\n\nfunc (board *Board) GetUnfreezeFormURL() string {\n\treturn txlink.Call(\n\t\t\"UnfreezeBoard\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threadID\", \"\",\n\t\t\"replyID\", \"\",\n\t)\n}\n\nfunc (board *Board) GetFlaggingThresholdFormURL() string {\n\treturn txlink.Call(\n\t\t\"SetFlaggingThreshold\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"threshold\", \"\",\n\t)\n}\n\nfunc (board *Board) GetInviteMemberFormURL() string {\n\treturn txlink.Call(\n\t\t\"InviteMember\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"user\", \"\",\n\t\t\"role\", \"\",\n\t)\n}\n\nfunc (board *Board) GetPostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateThread\",\n\t\t\"boardID\", board.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (board *Board) GetMembersURL() string {\n\treturn board.GetURL() + \"/members\"\n}\n\nfunc createDefaultBoardPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(\n\t\tRoleAdmin,\n\t\tPermissionBoardRename,\n\t\tPermissionBoardFlaggingUpdate,\n\t\tPermissionMemberInvite,\n\t\tPermissionMemberRemove,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadDelete,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionThreadFreeze,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyDelete,\n\t\tPermissionReplyFlag,\n\t\tPermissionReplyFreeze,\n\t\tPermissionRoleChange,\n\t)\n\tperms.AddRole(\n\t\tRoleModerator,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadEdit,\n\t\tPermissionThreadRepost,\n\t\tPermissionThreadFlag,\n\t\tPermissionReplyCreate,\n\t\tPermissionReplyFlag,\n\t)\n\tperms.AddRole(\n\t\tRoleGuest,\n\t\tPermissionThreadCreate,\n\t\tPermissionThreadRepost,\n\t\tPermissionReplyCreate,\n\t)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n"},{"name":"board_readonly.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"time\"\n)\n\n// ReadonlyBoard defines an interface for readonly boards.\ntype ReadonlyBoard interface {\n\t// ID returns the unique identifier of the board.\n\tID() BoardID\n\n\t// Name returns the name of the board.\n\tName() string\n\n\t// Aliases returns a list with previous names assigned to the board.\n\tAliases() []string\n\n\t// Creator returns board's creator address.\n\tCreator() std.Address\n\n\t// LastPostID returns the ID assigned to the last created thread.\n\tLastPostID() uint64\n\n\t// CreatedAt returns the time when board was created.\n\tCreatedAt() time.Time\n\n\t// IsReadonly returns true when board shouldn't allow the creation of threads and comments.\n\tIsReadonly() bool\n\n\t// MembersCount returns the number of invited board members.\n\tMembersCount() int\n\n\t// IterateMembers allows reading the list of invited board members.\n\tIterateMembers(offset, count int, fn UsersIterFn)\n}\n\ntype readonlyBoard struct {\n\tboard *Board\n}\n\nfunc (b readonlyBoard) ID() BoardID {\n\treturn b.board.id\n}\n\nfunc (b readonlyBoard) Name() string {\n\treturn b.board.name\n}\n\nfunc (b readonlyBoard) Aliases() []string {\n\taliases := make([]string, len(b.board.aliases))\n\tfor i, s := range b.board.aliases {\n\t\taliases[i] = s\n\t}\n\treturn aliases\n}\n\nfunc (b readonlyBoard) Creator() std.Address {\n\treturn b.board.creator\n}\n\nfunc (b readonlyBoard) LastPostID() uint64 {\n\treturn b.board.postsCtr\n}\n\nfunc (b readonlyBoard) CreatedAt() time.Time {\n\treturn b.board.createdAt\n}\n\nfunc (b readonlyBoard) IsReadonly() bool {\n\treturn b.board.readonly\n}\n\nfunc (b readonlyBoard) MembersCount() int {\n\treturn b.board.perms.UsersCount()\n}\n\nfunc (b readonlyBoard) IterateMembers(offset, count int, fn UsersIterFn) {\n\tb.board.perms.IterateUsers(offset, count, fn)\n}\n"},{"name":"board_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nfunc TestBoardID_String(t *testing.T) {\n\tinput := BoardID(32)\n\n\tuassert.Equal(t, \"32\", input.String())\n}\n\nfunc TestBoardID_Key(t *testing.T) {\n\tinput := BoardID(128)\n\twant := strings.Repeat(\"0\", 7) + \"128\"\n\tuassert.Equal(t, want, input.Key())\n}\n\nfunc TestBoard_GetID(t *testing.T) {\n\twant := int(92)\n\tb := new(Board)\n\tb.id = BoardID(want)\n\tgot := int(b.GetID())\n\n\tuassert.Equal(t, got, want)\n\tuassert.NotEqual(t, got, want*want)\n}\n\nfunc TestBoard_GetURL(t *testing.T) {\n\tpkgPath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\tname := \"foobar_test_get_url123\"\n\twant := pkgPath + \":\" + name\n\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, name, addr, perms)\n\tgot := board.GetURL()\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\t_, ok := b.GetThread(12345)\n\tuassert.False(t, ok)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\t_, ok = b.GetThread(post.GetPostID())\n\tuassert.True(t, ok)\n}\n\nfunc TestBoard_DeleteThread(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(1, \"test123\", addr, perms)\n\n\tpost := b.AddThread(addr, \"foo\", \"bar\")\n\tid := post.GetPostID()\n\n\tb.DeleteThread(id)\n\n\t_, ok := b.GetThread(id)\n\tuassert.False(t, ok)\n}\n\nvar boardUrlPrefix = strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\nfunc TestBoard_GetURLFromThreadID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10\"\n\n\tgot := b.GetURLFromThreadID(10)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetURLFromReplyID(t *testing.T) {\n\tboardName := \"test12345\"\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(BoardID(11), boardName, addr, perms)\n\twant := boardUrlPrefix + \":\" + boardName + \"/10/20\"\n\n\tgot := b.GetURLFromReplyID(10, 20)\n\tuassert.Equal(t, want, got)\n}\n\nfunc TestBoard_GetPostFormURL(t *testing.T) {\n\tbid := BoardID(386)\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tb := newBoard(bid, \"foo1234\", addr, perms)\n\texpect := txlink.Call(\"CreateThread\", \"boardID\", bid.String(), \"title\", \"\", \"body\", \"\")\n\n\tgot := b.GetPostFormURL()\n\tuassert.Equal(t, expect, got)\n}\n"},{"name":"boards.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\nvar (\n\tgPerms        Permissions\n\tgNotice       string\n\tgHelp         string\n\tgLastBoardID  BoardID\n\tgBoardsByID   avl.Tree // string(id) -\u003e *Board\n\tgBoardsByName avl.Tree // string(name) -\u003e *Board\n\tgLocked       struct {\n\t\trealm        bool\n\t\trealmMembers bool\n\t}\n)\n\nfunc init() {\n\t// TODO: Define and change the default realm owner (or owners)\n\towner := std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\n\t// Initialize default realm permissions\n\tgPerms = createDefaultPermissions(owner)\n\n\t// Import relevant initial state from previous version\n\tinitFromPrevVersion()\n}\n\n// incGetBoardID returns a new board ID.\nfunc incGetBoardID() BoardID {\n\tgLastBoardID++\n\treturn gLastBoardID\n}\n\n// getBoard returns a board for a specific ID.\nfunc getBoard(id BoardID) (_ *Board, found bool) {\n\tv, exists := gBoardsByID.Get(id.Key())\n\tif !exists {\n\t\treturn nil, false\n\t}\n\treturn v.(*Board), true\n}\n\n// mustGetBoardByName returns a board or panics when it's not found.\nfunc mustGetBoardByName(name string) *Board {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tpanic(\"board does not exist with name: \" + name)\n\t}\n\treturn v.(*Board)\n}\n\n// mustGetBoard returns a board or panics when it's not found.\nfunc mustGetBoard(id BoardID) *Board {\n\tboard, found := getBoard(id)\n\tif !found {\n\t\tpanic(\"board does not exist with ID: \" + id.String())\n\t}\n\treturn board\n}\n\n// mustGetThread returns a thread or panics when it's not found.\nfunc mustGetThread(board *Board, threadID PostID) *Post {\n\tthread, found := board.GetThread(threadID)\n\tif !found {\n\t\tpanic(\"thread does not exist with ID: \" + threadID.String())\n\t}\n\treturn thread\n}\n\n// mustGetReply returns a reply or panics when it's not found.\nfunc mustGetReply(thread *Post, replyID PostID) *Post {\n\treply, found := thread.GetReply(replyID)\n\tif !found {\n\t\tpanic(\"reply does not exist with ID: \" + replyID.String())\n\t}\n\treturn reply\n}\n\nfunc mustGetPermissions(bid BoardID) Permissions {\n\tif bid != 0 {\n\t\tboard := mustGetBoard(bid)\n\t\treturn board.perms\n\t}\n\treturn gPerms\n}\n"},{"name":"flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\n\t\"gno.land/p/demo/avl\"\n)\n\n// DefaultFlaggingThreshold defines the default number of flags that hides flaggable items.\nconst DefaultFlaggingThreshold = 1\n\nvar gFlaggingThresholds avl.Tree // string(board ID) -\u003e int\n\ntype Flag struct {\n\tUser   std.Address\n\tReason string\n}\n\ntype Flaggable interface {\n\t// AddFlag adds a new flag to an item.\n\t//\n\t// Returns false if item was already flagged by user.\n\tAddFlag(flag Flag) bool\n\n\t// FlagsCount returns number of times item was flagged.\n\tFlagsCount() int\n}\n\n// flagItem adds a flag to a flaggable item (post, thread, etc).\n//\n// Returns whether flag count threshold is reached and item can be hidden.\n//\n// Panics if flag count threshold was already reached.\nfunc flagItem(item Flaggable, flag Flag, threshold int) bool {\n\tif item.FlagsCount() \u003e= threshold {\n\t\tpanic(\"item flag count threshold exceeded: \" + strconv.Itoa(threshold))\n\t}\n\n\tif !item.AddFlag(flag) {\n\t\tpanic(\"item has been already flagged by a current user\")\n\t}\n\n\treturn item.FlagsCount() == threshold\n}\n\nfunc getFlaggingThreshold(bid BoardID) int {\n\tif v, ok := gFlaggingThresholds.Get(bid.String()); ok {\n\t\treturn v.(int)\n\t}\n\treturn DefaultFlaggingThreshold\n}\n"},{"name":"format.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/r/sys/users\"\n)\n\nfunc padLeft(s string, length int) string {\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\" \", length-len(s)) + s\n}\n\nfunc padZero(u64 uint64, length int) string {\n\ts := strconv.Itoa(int(u64))\n\tif len(s) \u003e= length {\n\t\treturn s\n\t}\n\treturn strings.Repeat(\"0\", length-len(s)) + s\n}\n\nfunc indentBody(indent string, body string) string {\n\tvar (\n\t\tres   string\n\t\tlines = strings.Split(body, \"\\n\")\n\t)\n\tfor i, line := range lines {\n\t\tif i \u003e 0 {\n\t\t\tres += \"\\n\"\n\t\t}\n\t\tres += indent + line\n\t}\n\treturn res\n}\n\n// NOTE: length must be greater than 3.\nfunc summaryOf(text string, length int) string {\n\tlines := strings.SplitN(text, \"\\n\", 2)\n\tline := lines[0]\n\tif len(line) \u003e length {\n\t\tline = line[:(length-3)] + \"...\"\n\t} else if len(lines) \u003e 1 {\n\t\t// len(line) \u003c= 80\n\t\tline = line + \"...\"\n\t}\n\treturn line\n}\n\n// newLink returns a Markdown link.\nfunc newLink(label, uri string) string {\n\treturn \"[\" + label + \"](\" + uri + \")\"\n}\n\n// newButtonLink returns a Makdown link with label wrapped in brackets.\nfunc newButtonLink(label, uri string) string {\n\treturn `[\\[` + label + `\\]](` + uri + \")\"\n}\n\n// newUserLink returns a Markdown link for an account to the users\n// realm or the address as string when a user is not registered.\nfunc newUserLink(addr std.Address) string {\n\tuser := users.ResolveAddress(addr)\n\tif user != nil {\n\t\treturn user.RenderLink(\"\")\n\t}\n\treturn addr.String()\n}\n"},{"name":"migrations.gno","body":"package boards2\n\nimport (\n\tv1rc1 \"gno.land/r/devx000/gnoland/boards2/v1rc1\"\n)\n\nfunc initFromPrevVersion() {\n\timportRealmMembers()\n}\n\nfunc importRealmMembers() {\n\tv1rc1.IterateRealmMembers(0, func(member v1rc1.User) bool {\n\t\t// XXX: This wouldn't be required if a boards2 package is created\n\t\troles := make([]Role, len(member.Roles))\n\t\tfor i, r := range member.Roles {\n\t\t\troles[i] = Role(r)\n\t\t}\n\n\t\tgPerms.AddUser(member.Address, roles...)\n\t\treturn false\n\t})\n}\n"},{"name":"permissions.gno","body":"package boards2\n\nimport \"std\"\n\nconst (\n\tPermissionRealmHelp           Permission = \"realm:help\"\n\tPermissionRealmLock                      = \"realm:lock\"\n\tPermissionRealmNotice                    = \"realm:notice\"\n\tPermissionBoardCreate                    = \"board:create\"\n\tPermissionBoardFlaggingUpdate            = \"board:flagging-update\"\n\tPermissionBoardFreeze                    = \"board:freeze\"\n\tPermissionBoardRename                    = \"board:rename\"\n\tPermissionThreadCreate                   = \"thread:create\"\n\tPermissionThreadDelete                   = \"thread:delete\"\n\tPermissionThreadEdit                     = \"thread:edit\"\n\tPermissionThreadFlag                     = \"thread:flag\"\n\tPermissionThreadFreeze                   = \"thread:freeze\"\n\tPermissionThreadRepost                   = \"thread:repost\"\n\tPermissionReplyCreate                    = \"reply:create\"\n\tPermissionReplyDelete                    = \"reply:delete\"\n\tPermissionReplyFlag                      = \"reply:flag\"\n\tPermissionReplyFreeze                    = \"reply:freeze\"\n\tPermissionMemberInvite                   = \"member:invite\"\n\tPermissionMemberRemove                   = \"member:remove\"\n\tPermissionRoleChange                     = \"role:change\"\n\tPermissionPermissionsUpdate              = \"permissions:update\"\n)\n\nconst (\n\tRoleGuest     Role = \"\"\n\tRoleOwner          = \"owner\"\n\tRoleAdmin          = \"admin\"\n\tRoleModerator      = \"moderator\"\n)\n\ntype (\n\t// Permission defines the type for permissions.\n\tPermission string\n\n\t// Role defines the type for user roles.\n\tRole string\n\n\t// Args is a list of generic arguments.\n\tArgs []interface{}\n\n\t// User contains user info.\n\tUser struct {\n\t\tAddress std.Address\n\t\tRoles   []Role\n\t}\n\n\t// UsersIterFn defines a function type to iterate users.\n\tUsersIterFn func(User) bool\n\n\t// Permissions define an interface to for permissioned execution.\n\tPermissions interface {\n\t\t// HasRole checks if a user has a specific role assigned.\n\t\tHasRole(std.Address, Role) bool\n\n\t\t// HasPermission checks if a user has a specific permission.\n\t\tHasPermission(std.Address, Permission) bool\n\n\t\t// WithPermission calls a callback when a user has a specific permission.\n\t\t// It panics on error.\n\t\tWithPermission(std.Address, Permission, Args, func(Args))\n\n\t\t// AddUser adds a new user to the permissioner.\n\t\tAddUser(std.Address, ...Role) error\n\n\t\t// SetUserRoles sets the roles of a user.\n\t\tSetUserRoles(std.Address, ...Role) error\n\n\t\t// RemoveUser removes a user from the permissioner.\n\t\tRemoveUser(std.Address) (removed bool)\n\n\t\t// HasUser checks if a user exists.\n\t\tHasUser(std.Address) bool\n\n\t\t// UsersCount returns the total number of users the permissioner contains.\n\t\tUsersCount() int\n\n\t\t// IterateUsers iterates permissions' users.\n\t\tIterateUsers(start, count int, fn UsersIterFn) bool\n\t}\n)\n"},{"name":"permissions_default.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\n\t\"gno.land/p/demo/avl\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\t\"gno.land/r/sys/users\"\n)\n\n// DefaultPermissions manages users, roles and permissions.\ntype DefaultPermissions struct {\n\tsuperRole Role\n\tdao       *commondao.CommonDAO\n\tusers     *avl.Tree // string(std.Address) -\u003e []Role\n\troles     *avl.Tree // string(role) -\u003e []Permission\n}\n\n// NewDefaultPermissions creates a new permissions type.\n// This type is a default implementation to handle users, roles and permissions.\nfunc NewDefaultPermissions(dao *commondao.CommonDAO) *DefaultPermissions {\n\tif dao == nil {\n\t\tpanic(\"default permissions require a DAO\")\n\t}\n\n\tdp := \u0026DefaultPermissions{\n\t\tdao:   dao,\n\t\troles: avl.NewTree(),\n\t\tusers: avl.NewTree(),\n\t}\n\n\t// Make sure that DAO users are indexed when DAO has members\n\tdao.Members().IterateByOffset(0, dao.Members().Size(), func(m std.Address) bool {\n\t\tdp.users.Set(m.String(), []Role(nil))\n\t\treturn false\n\t})\n\n\treturn dp\n}\n\n// SetSuperRole assigns a super role.\n// A super role is one that have all permissions.\n// These type of role doesn't need to be mapped to any permission.\nfunc (dp *DefaultPermissions) SetSuperRole(r Role) {\n\tdp.superRole = r\n}\n\n// AddRole add a role with one or more assigned permissions.\nfunc (dp *DefaultPermissions) AddRole(r Role, p Permission, extra ...Permission) {\n\tdp.roles.Set(string(r), append([]Permission{p}, extra...))\n}\n\n// RoleExists checks if a role exists.\nfunc (dp DefaultPermissions) RoleExists(r Role) bool {\n\tif dp.superRole != \"\" \u0026\u0026 r == dp.superRole {\n\t\treturn true\n\t}\n\n\treturn dp.roles.Iterate(\"\", \"\", func(name string, _ interface{}) bool {\n\t\treturn Role(name) == r\n\t})\n}\n\n// GetUserRoles returns the list of roles assigned to a user.\nfunc (dp DefaultPermissions) GetUserRoles(user std.Address) []Role {\n\tv, found := dp.users.Get(user.String())\n\tif !found {\n\t\treturn nil\n\t}\n\treturn v.([]Role)\n}\n\n// HasRole checks if a user has a specific role assigned.\nfunc (dp DefaultPermissions) HasRole(user std.Address, r Role) bool {\n\tfor _, role := range dp.GetUserRoles(user) {\n\t\tif role == r {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n// HasPermission checks if a user has a specific permission.\nfunc (dp DefaultPermissions) HasPermission(user std.Address, perm Permission) bool {\n\tfor _, r := range dp.GetUserRoles(user) {\n\t\tif dp.superRole == r {\n\t\t\treturn true\n\t\t}\n\n\t\tv, found := dp.roles.Get(string(r))\n\t\tif !found {\n\t\t\tcontinue\n\t\t}\n\n\t\tfor _, p := range v.([]Permission) {\n\t\t\tif p == perm {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\treturn false\n}\n\n// AddUser adds a new user to permissions.\nfunc (dp *DefaultPermissions) AddUser(user std.Address, roles ...Role) error {\n\tif dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user already exists\")\n\t}\n\n\tdp.dao.Members().Add(user)\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// SetUserRoles sets the roles of a user.\nfunc (dp *DefaultPermissions) SetUserRoles(user std.Address, roles ...Role) error {\n\tif !dp.users.Has(user.String()) {\n\t\treturn errors.New(\"user not found\")\n\t}\n\treturn dp.setUserRoles(user, roles...)\n}\n\n// RemoveUser removes a user from permissions.\nfunc (dp *DefaultPermissions) RemoveUser(user std.Address) bool {\n\t_, removed := dp.users.Remove(user.String())\n\tdp.dao.Members().Remove(user)\n\treturn removed\n}\n\n// HasUser checks if a user exists.\nfunc (dp DefaultPermissions) HasUser(user std.Address) bool {\n\treturn dp.users.Has(user.String())\n}\n\n// UsersCount returns the total number of users the permissioner contains.\nfunc (dp DefaultPermissions) UsersCount() int {\n\treturn dp.users.Size()\n}\n\n// IterateUsers iterates permissions' users.\nfunc (dp DefaultPermissions) IterateUsers(start, count int, fn UsersIterFn) bool {\n\treturn dp.users.IterateByOffset(start, count, func(k string, v interface{}) bool {\n\t\treturn fn(User{\n\t\t\tAddress: std.Address(k),\n\t\t\tRoles:   v.([]Role),\n\t\t})\n\t})\n}\n\n// WithPermission calls a callback when a user has a specific permission.\n// It panics on error or when a handler panics.\n// Callbacks are by default called when there is no handle registered for the permission.\nfunc (dp *DefaultPermissions) WithPermission(user std.Address, perm Permission, args Args, cb func(Args)) {\n\tif !dp.HasPermission(user, perm) || !dp.dao.Members().Has(user) {\n\t\tpanic(\"unauthorized\")\n\t}\n\n\tswitch perm {\n\tcase PermissionBoardCreate:\n\t\tdp.handleBoardCreate(args, cb)\n\tcase PermissionBoardRename:\n\t\tdp.handleBoardRename(args, cb)\n\tcase PermissionMemberInvite:\n\t\tdp.handleMemberInvite(args, cb)\n\tcase PermissionRoleChange:\n\t\tdp.handleRoleChange(args, cb)\n\tdefault:\n\t\tcb(args)\n\t}\n}\n\nfunc (dp *DefaultPermissions) setUserRoles(user std.Address, roles ...Role) error {\n\tfor _, r := range roles {\n\t\tif !dp.RoleExists(r) {\n\t\t\treturn errors.New(\"invalid role: \" + string(r))\n\t\t}\n\t}\n\n\tdp.users.Set(user.String(), append([]Role(nil), roles...))\n\treturn nil\n}\n\nfunc (DefaultPermissions) handleBoardCreate(args Args, cb func(Args)) {\n\tname, ok := args[0].(string)\n\tif !ok {\n\t\tpanic(\"expected board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(name)\n\tassertBoardNameBelongsToCaller(name)\n\n\tcb(args)\n}\n\nfunc (DefaultPermissions) handleBoardRename(args Args, cb func(Args)) {\n\tnewName, ok := args[2].(string)\n\tif !ok {\n\t\tpanic(\"expected new board name to be a string\")\n\t}\n\n\tassertBoardNameIsNotAddress(newName)\n\tassertBoardNameBelongsToCaller(newName)\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleMemberInvite(args Args, cb func(Args)) {\n\t// Make sure that only owners invite other owners\n\trole, ok := args[1].(Role)\n\tif !ok {\n\t\tpanic(\"expected a valid new member role\")\n\t}\n\n\tif role == RoleOwner {\n\t\tif !dp.HasRole(std.PreviousRealm().Address(), RoleOwner) {\n\t\t\tpanic(\"only owners are allowed to invite other owners\")\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc (dp DefaultPermissions) handleRoleChange(args Args, cb func(Args)) {\n\t// Owners and Admins can change roles.\n\t// Admins should not be able to assign or remove the Owner role from members.\n\tif dp.HasRole(std.PreviousRealm().Address(), RoleAdmin) {\n\t\trole, ok := args[2].(Role)\n\t\tif !ok {\n\t\t\tpanic(\"expected a valid member role\")\n\t\t}\n\n\t\tif role == RoleOwner {\n\t\t\tpanic(\"admins are not allowed to promote members to Owner\")\n\t\t} else {\n\t\t\tmember, ok := args[1].(std.Address)\n\t\t\tif !ok {\n\t\t\t\tpanic(\"expected a valid member address\")\n\t\t\t}\n\n\t\t\tif dp.HasRole(member, RoleOwner) {\n\t\t\t\tpanic(\"admins are not allowed to remove the Owner role\")\n\t\t\t}\n\t\t}\n\t}\n\n\tcb(args)\n}\n\nfunc createDefaultPermissions(owner std.Address) *DefaultPermissions {\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.SetSuperRole(RoleOwner)\n\tperms.AddRole(RoleAdmin, PermissionBoardCreate)\n\tperms.AddUser(owner, RoleOwner)\n\treturn perms\n}\n\nfunc assertBoardNameIsNotAddress(s string) {\n\tif std.Address(s).IsValid() {\n\t\tpanic(\"addresses are not allowed as board name\")\n\t}\n}\n\nfunc assertBoardNameBelongsToCaller(name string) {\n\t// When the board name is the name of a registered user\n\t// check that caller is the owner of the name.\n\tuser, _ := users.ResolveName(name)\n\tif user != nil \u0026\u0026 user.Addr() != std.PreviousRealm().Address() {\n\t\tpanic(\"board name is a user name registered to a different user\")\n\t}\n}\n"},{"name":"permissions_default_test.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/urequire\"\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n)\n\nvar _ Permissions = (*DefaultPermissions)(nil)\n\nfunc TestDefaultPermissionsWithPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\targs       Args\n\t\tsetup      func() *DefaultPermissions\n\t\terr        string\n\t\tcalled     bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with arguments\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\targs:       Args{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\tcalled: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t\t{\n\t\t\tname:       \"is not a DAO member\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"unauthorized\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\tcalled bool\n\t\t\t\targs   Args\n\t\t\t)\n\n\t\t\tperms := tc.setup()\n\t\t\tcallback := func(a Args) {\n\t\t\t\targs = a\n\t\t\t\tcalled = true\n\t\t\t}\n\n\t\t\ttestCaseFn := func() {\n\t\t\t\tperms.WithPermission(tc.user, tc.permission, tc.args, callback)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.PanicsWithMessage(t, tc.err, testCaseFn, \"panic\")\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NotPanics(t, testCaseFn, \"no panic\")\n\t\t\t}\n\n\t\t\turequire.Equal(t, tc.called, called, \"callback called\")\n\t\t\turequire.Equal(t, len(tc.args), len(args), \"args count\")\n\t\t\tfor i, a := range args {\n\t\t\t\tuassert.Equal(t, tc.args[i].(string), a.(string))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsGetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []string\n\t\tsetup func() *DefaultPermissions\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\", \"foo\", \"bar\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"not a user\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\troles: []string{\"admin\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"bar\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"admin\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\", \"admin\", \"bar\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\troles := perms.GetUserRoles(tc.user)\n\n\t\t\turequire.Equal(t, len(tc.roles), len(roles), \"user role count\")\n\t\t\tfor i, r := range roles {\n\t\t\t\tuassert.Equal(t, tc.roles[i], string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasRole(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\trole  Role\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"admin\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"ok with multiple roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"foo\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"admin\", \"x\")\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"admin\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user without roles\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"has no role\",\n\t\t\tuser: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\trole: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"x\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasRole(tc.user, tc.role)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsHasPermission(t *testing.T) {\n\tcases := []struct {\n\t\tname       string\n\t\tuser       std.Address\n\t\tpermission Permission\n\t\tsetup      func() *DefaultPermissions\n\t\twant       bool\n\t}{\n\t\t{\n\t\t\tname:       \"ok\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple users\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"bar\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"ok with multiple roles\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddRole(\"baz\", \"other\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\", \"baz\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname:       \"no permission\",\n\t\t\tuser:       \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tpermission: \"other\",\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"foo\", \"bar\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"foo\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.HasPermission(tc.user, tc.permission)\n\t\t\tuassert.Equal(t, got, tc.want)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsAddUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple users\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", \"a\")\n\t\t\t\tperms.AddUser(\"g1w4ek2u3jta047h6lta047h6lta047h6l9huexc\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"duplicated user\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated user\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"foo\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: foo\",\n\t\t},\n\t\t{\n\t\t\tname: \"already a DAO member\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(\n\t\t\t\t\tcommondao.New(commondao.WithMember(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")),\n\t\t\t\t)\n\t\t\t},\n\t\t\terr: \"user already exists\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.AddUser(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.Error(t, err, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsSetUserRoles(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\troles []Role\n\t\tsetup func() *DefaultPermissions\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname:  \"single role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"multiple roles\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"b\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"duplicated role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"a\", \"c\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddRole(\"c\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"c\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"remove roles\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddRole(\"b\", \"permission2\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\", \"b\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid role\",\n\t\t\tuser:  std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\troles: []Role{\"x\", \"a\"},\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddRole(\"a\", \"permission1\")\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\", \"a\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\terr: \"invalid role: x\",\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t\terr: \"user not found\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\n\t\t\terr := perms.SetUserRoles(tc.user, tc.roles...)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\turequire.True(t, err != nil, \"expected an error\")\n\t\t\t\tuassert.Equal(t, tc.err, err.Error())\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\turequire.NoError(t, err)\n\t\t\t}\n\n\t\t\troles := perms.GetUserRoles(tc.user)\n\t\t\tuassert.Equal(t, len(tc.roles), len(roles))\n\t\t\tfor i, r := range roles {\n\t\t\t\turequire.Equal(t, string(tc.roles[i]), string(r))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsRemoveUser(t *testing.T) {\n\tcases := []struct {\n\t\tname  string\n\t\tuser  std.Address\n\t\tsetup func() *DefaultPermissions\n\t\twant  bool\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\tperms := NewDefaultPermissions(commondao.New())\n\t\t\t\tperms.AddUser(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n\t\t\t\treturn perms\n\t\t\t},\n\t\t\twant: true,\n\t\t},\n\t\t{\n\t\t\tname: \"user not found\",\n\t\t\tuser: std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\"),\n\t\t\tsetup: func() *DefaultPermissions {\n\t\t\t\treturn NewDefaultPermissions(commondao.New())\n\t\t\t},\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tperms := tc.setup()\n\t\t\tgot := perms.RemoveUser(tc.user)\n\t\t\tuassert.Equal(t, tc.want, got)\n\t\t})\n\t}\n}\n\nfunc TestDefaultPermissionsIterateUsers(t *testing.T) {\n\tusers := []User{\n\t\t{\n\t\t\tAddress: \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\",\n\t\t\tRoles:   []Role{\"foo\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\",\n\t\t\tRoles:   []Role{\"foo\", \"bar\"},\n\t\t},\n\t\t{\n\t\t\tAddress: \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\",\n\t\t\tRoles:   []Role{\"bar\"},\n\t\t},\n\t}\n\n\tperms := NewDefaultPermissions(commondao.New())\n\tperms.AddRole(\"foo\", \"perm1\")\n\tperms.AddRole(\"bar\", \"perm2\")\n\tfor _, u := range users {\n\t\tperms.AddUser(u.Address, u.Roles...)\n\t}\n\n\tcases := []struct {\n\t\tname               string\n\t\tstart, count, want int\n\t}{\n\t\t{\n\t\t\tname:  \"exceed users count\",\n\t\t\tcount: 50,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"exact users count\",\n\t\t\tcount: 3,\n\t\t\twant:  3,\n\t\t},\n\t\t{\n\t\t\tname:  \"two users\",\n\t\t\tstart: 1,\n\t\t\tcount: 2,\n\t\t\twant:  2,\n\t\t},\n\t\t{\n\t\t\tname:  \"one user\",\n\t\t\tstart: 1,\n\t\t\tcount: 1,\n\t\t\twant:  1,\n\t\t},\n\t\t{\n\t\t\tname:  \"no iteration\",\n\t\t\tstart: 50,\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar i int\n\t\t\tperms.IterateUsers(0, len(users), func(u User) bool {\n\t\t\t\turequire.True(t, i \u003c len(users), \"expect iterator to respect number of users\")\n\t\t\t\tuassert.Equal(t, users[i].Address, u.Address)\n\n\t\t\t\turequire.Equal(t, len(users[i].Roles), len(u.Roles), \"expect number of roles to match\")\n\t\t\t\tfor j, r := range u.Roles {\n\t\t\t\t\tuassert.Equal(t, string(users[i].Roles[j]), string(u.Roles[j]))\n\t\t\t\t}\n\n\t\t\t\ti++\n\t\t\t})\n\n\t\t\tuassert.Equal(t, i, len(users), \"expect iterator to iterate all users\")\n\t\t})\n\t}\n}\n"},{"name":"post.gno","body":"package boards2\n\nimport (\n\t\"errors\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n\n\t\"gno.land/p/demo/avl\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst dateFormat = \"2006-01-02 3:04pm MST\"\n\ntype PostID uint64\n\nfunc (id PostID) String() string {\n\treturn strconv.Itoa(int(id))\n}\n\nfunc (id PostID) Key() string {\n\treturn padZero(uint64(id), 10)\n}\n\n// A Post is a \"thread\" or a \"reply\" depending on context.\n// A thread is a Post of a Board that holds other replies.\ntype Post struct {\n\tboard         *Board\n\tid            PostID\n\tcreator       std.Address\n\ttitle         string // optional\n\tbody          string\n\tisHidden      bool\n\tisReadonly    bool\n\treplies       avl.Tree // Post.id -\u003e *Post\n\trepliesAll    avl.Tree // Post.id -\u003e *Post (all replies, for top-level posts)\n\treposts       avl.Tree // Board.id -\u003e Post.id\n\tflags         []Flag\n\tthreadID      PostID  // original Post.id\n\tparentID      PostID  // parent Post.id (if reply or repost)\n\trepostBoardID BoardID // original Board.id (if repost)\n\trepostsCount  uint64\n\tcreatedAt     time.Time\n\tupdatedAt     time.Time\n}\n\nfunc newPost(board *Board, id PostID, creator std.Address, title, body string, threadID, parentID PostID, repostBoardID BoardID) *Post {\n\treturn \u0026Post{\n\t\tboard:         board,\n\t\tid:            id,\n\t\tcreator:       creator,\n\t\ttitle:         title,\n\t\tbody:          body,\n\t\treplies:       avl.Tree{},\n\t\trepliesAll:    avl.Tree{},\n\t\treposts:       avl.Tree{},\n\t\tthreadID:      threadID,\n\t\tparentID:      parentID,\n\t\trepostBoardID: repostBoardID,\n\t\tcreatedAt:     time.Now(),\n\t}\n}\n\nfunc (post *Post) IsRepost() bool {\n\treturn post.repostBoardID != 0\n}\n\nfunc (post *Post) IsThread() bool {\n\t// repost threads also have parent ID\n\treturn post.parentID == 0 || post.IsRepost()\n}\n\nfunc (post *Post) GetBoard() *Board {\n\treturn post.board\n}\n\nfunc (post *Post) GetPostID() PostID {\n\treturn post.id\n}\n\nfunc (post *Post) GetParentID() PostID {\n\treturn post.parentID\n}\n\nfunc (post *Post) GetRepostBoardID() BoardID {\n\treturn post.repostBoardID\n}\n\nfunc (post *Post) GetCreator() std.Address {\n\treturn post.creator\n}\n\nfunc (post *Post) GetTitle() string {\n\treturn post.title\n}\n\nfunc (post *Post) GetBody() string {\n\treturn post.body\n}\n\nfunc (post *Post) GetCreatedAt() time.Time {\n\treturn post.createdAt\n}\n\nfunc (post *Post) GetUpdatedAt() time.Time {\n\treturn post.updatedAt\n}\n\nfunc (post *Post) AddFlag(flag Flag) bool {\n\t// TODO: sort flags for fast search in case of big thresholds\n\tfor _, v := range post.flags {\n\t\tif v.User == flag.User {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tpost.flags = append(post.flags, flag)\n\treturn true\n}\n\nfunc (post *Post) FlagsCount() int {\n\treturn len(post.flags)\n}\n\nfunc (post *Post) SetVisible(isVisible bool) {\n\tpost.isHidden = !isVisible\n}\n\nfunc (post *Post) IsHidden() bool {\n\treturn post.isHidden\n}\n\nfunc (post *Post) SetReadonly(isReadonly bool) {\n\tpost.isReadonly = isReadonly\n}\n\nfunc (post *Post) IsReadonly() bool {\n\treturn post.isReadonly\n}\n\nfunc (post *Post) AddReply(creator std.Address, body string) *Post {\n\tboard := post.board\n\tpid := board.incGetPostID()\n\tpKey := pid.Key()\n\treply := newPost(board, pid, creator, \"\", body, post.threadID, post.id, 0)\n\t// TODO: Figure out how to remove this redundancy of data \"replies==repliesAll\" in threads\n\tpost.replies.Set(pKey, reply)\n\tif post.threadID == post.id {\n\t\tpost.repliesAll.Set(pKey, reply)\n\t} else {\n\t\tthread, _ := board.GetThread(post.threadID)\n\t\tthread.repliesAll.Set(pKey, reply)\n\t}\n\treturn reply\n}\n\nfunc (post *Post) Update(title string, body string) {\n\tpost.title = title\n\tpost.body = body\n\tpost.updatedAt = time.Now()\n}\n\nfunc (post *Post) HasReplies() bool {\n\treturn post.replies.Size() \u003e 0\n}\n\nfunc (thread *Post) GetReply(pid PostID) (_ *Post, found bool) {\n\tv, found := thread.repliesAll.Get(pid.Key())\n\tif !found {\n\t\treturn nil, false\n\t}\n\treturn v.(*Post), true\n}\n\nfunc (post *Post) AddRepostTo(creator std.Address, repost *Post, dst *Board) {\n\tif !post.IsThread() {\n\t\tpanic(\"cannot repost non-thread post\")\n\t}\n\n\tpost.repostsCount++\n\tdst.threads.Set(repost.id.Key(), repost)\n\tpost.reposts.Set(dst.id.Key(), repost.id)\n}\n\nfunc (post *Post) DeleteReply(replyID PostID) error {\n\tif !post.IsThread() {\n\t\t// TODO: Allow removing replies from parent replies too\n\t\tpanic(\"cannot delete reply from a non-thread post\")\n\t}\n\n\tif post.id == replyID {\n\t\treturn errors.New(\"expected an ID of an inner reply\")\n\t}\n\n\tkey := replyID.Key()\n\tv, removed := post.repliesAll.Remove(key)\n\tif !removed {\n\t\treturn errors.New(\"reply not found in thread\")\n\t}\n\n\t// TODO: Shouldn't reply be hidden instead of deleted? Maybe replace reply by a deleted message.\n\treply := v.(*Post)\n\tif reply.parentID != post.id {\n\t\tparent, _ := post.GetReply(reply.parentID)\n\t\tparent.replies.Remove(key)\n\t} else {\n\t\tpost.replies.Remove(key)\n\t}\n\treturn nil\n}\n\nfunc (post *Post) GetSummary() string {\n\treturn summaryOf(post.body, 80)\n}\n\nfunc (post *Post) GetURL() string {\n\tif post.IsThread() {\n\t\treturn post.board.GetURLFromThreadID(post.id)\n\t}\n\treturn post.board.GetURLFromReplyID(post.threadID, post.id)\n}\n\nfunc (post *Post) GetReplyFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"CreateReply\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"replyID\", \"0\",\n\t\t\t\"body\", \"\",\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"CreateReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", \"\",\n\t)\n}\n\nfunc (post *Post) GetRepostFormURL() string {\n\treturn txlink.Call(\n\t\t\"CreateRepost\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.id.String(),\n\t\t\"title\", \"\",\n\t\t\"body\", \"\",\n\t\t\"destinationBoardID\", \"\",\n\t)\n}\n\nfunc (post *Post) GetDeleteFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"DeleteThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t)\n\t}\n\treturn txlink.Call(\n\t\t\"DeleteReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t)\n}\n\nfunc (post *Post) GetEditFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"EditThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"title\", post.GetTitle(),\n\t\t\t\"body\", post.GetBody(),\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"EditReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"body\", post.GetBody(),\n\t)\n}\n\nfunc (post *Post) GetFlagFormURL() string {\n\tif post.IsThread() {\n\t\treturn txlink.Call(\n\t\t\t\"FlagThread\",\n\t\t\t\"boardID\", post.board.id.String(),\n\t\t\t\"threadID\", post.threadID.String(),\n\t\t\t\"reason\", \"\",\n\t\t)\n\t}\n\n\treturn txlink.Call(\n\t\t\"FlagReply\",\n\t\t\"boardID\", post.board.id.String(),\n\t\t\"threadID\", post.threadID.String(),\n\t\t\"replyID\", post.id.String(),\n\t\t\"reason\", \"\",\n\t)\n}\n\nfunc (post *Post) RenderSummary() string {\n\tvar (\n\t\tb       strings.Builder\n\t\tpostURL = post.GetURL()\n\t\ttitle   = post.title\n\t)\n\n\tb.WriteString(\"**≡ \" + newLink(summaryOf(title, 80), postURL) + \"**  \\n\")\n\tb.WriteString(\"Created by \" + newUserLink(post.creator) + \" on \" + post.createdAt.Format(dateFormat))\n\tb.WriteString(\"  \\n**\")\n\tb.WriteString(strconv.Itoa(post.repliesAll.Size()) + \" replies • \")\n\tb.WriteString(strconv.Itoa(post.reposts.Size()) + \" reposts**\\n\")\n\treturn b.String()\n}\n\nfunc (post *Post) renderSourcePost(indent string) (string, *Post) {\n\tif !post.IsRepost() {\n\t\treturn \"\", nil\n\t}\n\n\tindent += \"\u003e \"\n\n\t// TODO: figure out a way to decouple posts from a global storage.\n\tboard, ok := getBoard(post.repostBoardID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source board has been deleted*\\n\\n\"), nil\n\t}\n\n\tsrcPost, ok := board.GetThread(post.parentID)\n\tif !ok {\n\t\treturn indentBody(indent, \"*⚠ Source post has been deleted*\\n\\n\"), nil\n\t}\n\n\tif srcPost.isHidden {\n\t\treturn indentBody(indent, \"*⚠ Source post has been flagged as inappropriate*\\n\\n\"), nil\n\t}\n\n\treturn indentBody(indent, srcPost.GetSummary()) + \"\\n\\n\", srcPost\n}\n\n// renderPostContent renders post text content (including repost body).\n// Function will dump a predefined message instead of a body if post is hidden.\nfunc (post *Post) renderPostContent(sb *strings.Builder, indent string, levels int) {\n\tif post.isHidden {\n\t\t// Flagged comment should be hidden, but replies still visible (see: #3480)\n\t\t// Flagged threads will be hidden by render function caller.\n\t\tsb.WriteString(indentBody(indent, \"_⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n\t\tsb.WriteString(\"\\n\")\n\t\treturn\n\t}\n\n\tsrcContent, srcPost := post.renderSourcePost(indent)\n\tif post.IsRepost() \u0026\u0026 srcPost != nil {\n\t\tsb.WriteString(\"  \\nThis thread is a repost of [another thread](\" + srcPost.GetURL() + \"): \\n\")\n\t}\n\n\tsb.WriteString(srcContent)\n\n\tif post.IsRepost() \u0026\u0026 srcPost == nil \u0026\u0026 len(post.body) \u003e 0 {\n\t\t// Add a newline to separate source deleted message from repost body content\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\tsb.WriteString(indentBody(indent, post.body))\n\tsb.WriteString(\"\\n\")\n\n\tif post.IsThread() {\n\t\t// Split content and controls for threads.\n\t\tsb.WriteString(\"\\n\")\n\t}\n\n\t// Buttons \u0026 counters\n\tsb.WriteString(indent)\n\tif !post.IsThread() {\n\t\tsb.WriteString(\"  \\n\")\n\t\tsb.WriteString(indent)\n\t}\n\n\tsb.WriteString(\"Created by \")\n\tsb.WriteString(newUserLink(post.creator))\n\tsb.WriteString(\" on \")\n\tsb.WriteString(post.createdAt.Format(dateFormat))\n\n\t// Add a reply view link to each top level reply\n\tif !post.IsThread() {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(newLink(\"#\"+post.id.String(), post.GetURL()))\n\t}\n\n\tif post.repostsCount \u003e 0 {\n\t\tsb.WriteString(\", \")\n\t\tsb.WriteString(strconv.FormatUint(post.repostsCount, 10))\n\t\tsb.WriteString(\" repost(s)\")\n\t}\n\n\tsb.WriteString(\"  \\n\")\n\tsb.WriteString(newLink(\"Flag\", post.GetFlagFormURL()))\n\n\tif post.IsThread() {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Repost\", post.GetRepostFormURL()))\n\t}\n\n\tisReadonly := post.IsReadonly() || post.GetBoard().IsReadonly()\n\tif !isReadonly {\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Reply\", post.GetReplyFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Edit\", post.GetEditFormURL()))\n\t\tsb.WriteString(\" • \")\n\t\tsb.WriteString(newLink(\"Delete\", post.GetDeleteFormURL()))\n\t}\n\n\tif levels == 0 {\n\t\tsb.WriteString(\" • \")\n\t\tif post.IsThread() {\n\t\t\tsb.WriteString(newLink(\"Show all Replies\", post.board.GetURLFromThreadID(post.GetPostID())))\n\t\t} else {\n\t\t\tsb.WriteString(newLink(\"View Thread\", post.board.GetURLFromThreadID(post.threadID)))\n\t\t}\n\t}\n\n\tsb.WriteString(\" \\n\")\n}\n\nfunc (post *Post) Render(path string, indent string, levels int) string {\n\tif post == nil {\n\t\treturn \"nil post\"\n\t}\n\n\t// TODO: pass a builder as arg into Render.\n\tvar sb strings.Builder\n\n\t// Thread reposts might not have a title, if so get title from source thread\n\ttitle := post.title\n\tif post.IsRepost() \u0026\u0026 title == \"\" {\n\t\tif board, ok := getBoard(post.repostBoardID); ok {\n\t\t\tif src, ok := board.GetThread(post.parentID); ok {\n\t\t\t\ttitle = src.GetTitle()\n\t\t\t}\n\t\t}\n\t}\n\n\tsb.WriteString(indent)\n\tif title != \"\" { // Replies don't have a title\n\t\tsb.WriteString(\"## \" + title + \"\\n\")\n\t}\n\tsb.WriteString(indent + \"\\n\")\n\n\tpost.renderPostContent(\u0026sb, indent, levels)\n\n\tif post.replies.Size() == 0 {\n\t\treturn sb.String()\n\t}\n\n\t// XXX: This triggers for reply views\n\tif levels == 0 {\n\t\tsb.WriteString(indent + \"\\n\")\n\t\tsb.WriteString(indent)\n\t\tsb.WriteString(\"\\n\")\n\t\treturn sb.String()\n\t}\n\n\tif path != \"\" {\n\t\tsb.WriteString(post.renderTopLevelReplies(path, indent, levels-1))\n\t} else {\n\t\tsb.WriteString(post.renderSubReplies(indent, levels-1))\n\t}\n\treturn sb.String()\n}\n\nfunc (post *Post) renderTopLevelReplies(path, indent string, levels int) string {\n\tp, err := pager.New(path, post.replies.Size(), pager.WithPageSize(pageSizeReplies))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\trender := func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t}\n\n\tb.WriteString(\"\\n\\n---\\nSort by: \")\n\tr := realmpath.Parse(path)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tb.WriteString(newLink(\"newest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tb.WriteString(newLink(\"oldest first\", r.String()))\n\t\tb.WriteString(\"\\n\")\n\t\tpost.replies.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tb.WriteString(\"\\n---\\n\")\n\t\tb.WriteString(pager.Picker(p))\n\t}\n\n\treturn b.String()\n}\n\nfunc (post *Post) renderSubReplies(indent string, levels int) string {\n\tvar (\n\t\tb              strings.Builder\n\t\tcommentsIndent = indent + \"\u003e \"\n\t)\n\n\tpost.replies.Iterate(\"\", \"\", func(_ string, v any) bool {\n\t\treply := v.(*Post)\n\n\t\tb.WriteString(indent)\n\t\tb.WriteString(\"\\n\")\n\t\tb.WriteString(reply.Render(\"\", commentsIndent, levels-1))\n\t\treturn false\n\t})\n\n\treturn b.String()\n}\n\nfunc (post *Post) RenderInner() string {\n\tif post.IsThread() {\n\t\tpanic(\"unexpected thread\")\n\t}\n\n\tvar (\n\t\ts         string\n\t\tthreadID  = post.threadID\n\t\tthread, _ = post.board.GetThread(threadID) // TODO: This seems redundant (post == thread)\n\t)\n\n\t// Fully render parent if it's not a repost.\n\tif !post.IsRepost() {\n\t\tvar (\n\t\t\tparent   *Post\n\t\t\tparentID = post.parentID\n\t\t)\n\n\t\tif thread.id == parentID {\n\t\t\tparent = thread\n\t\t} else {\n\t\t\tparent, _ = thread.GetReply(parentID)\n\t\t}\n\n\t\ts += parent.Render(\"\", \"\", 0) + \"\\n\"\n\t}\n\n\ts += post.Render(\"\", \"\u003e \", 5)\n\treturn s\n}\n"},{"name":"post_test.gno","body":"package boards2\n\nimport (\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/testutils\"\n\t\"gno.land/p/demo/uassert\"\n\t\"gno.land/p/demo/ufmt\"\n)\n\nfunc TestPostUpdate(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(addr)\n\tboard := newBoard(1, \"test123\", addr, perms)\n\tcreator := testutils.TestAddress(\"creator\")\n\tpost := newPost(board, 1, creator, \"Title\", \"Body\", 1, 0, 0)\n\ttitle := \"New Title\"\n\tbody := \"New body\"\n\n\tpost.Update(title, body)\n\n\tuassert.Equal(t, title, post.GetTitle())\n\tuassert.Equal(t, body, post.GetBody())\n\tuassert.False(t, post.GetUpdatedAt().IsZero())\n}\n\nfunc TestPostAddFlag(t *testing.T) {\n\taddr := testutils.TestAddress(\"creator\")\n\tpost := createTestThread(t)\n\n\tflag := Flag{\n\t\tUser:   addr,\n\t\tReason: \"foobar\",\n\t}\n\tuassert.True(t, post.AddFlag(flag))\n\tuassert.False(t, post.AddFlag(flag), \"should reject flag from duplicate user\")\n\tuassert.Equal(t, post.FlagsCount(), 1)\n}\n\nfunc TestPostSetVisible(t *testing.T) {\n\tpost := createTestThread(t)\n\tuassert.False(t, post.IsHidden(), \"post should be visible by default\")\n\n\tpost.SetVisible(false)\n\tuassert.True(t, post.IsHidden(), \"post should be hidden\")\n\n\tpost.SetVisible(true)\n\tuassert.False(t, post.IsHidden(), \"post should be visible\")\n}\n\nfunc TestPostAddRepostTo(t *testing.T) {\n\t// TODO: Improve this unit test\n\taddr := testutils.TestAddress(\"creatorDstBoard\")\n\tperms := createDefaultBoardPermissions(addr)\n\tcases := []struct {\n\t\tname, title, body string\n\t\tdstBoard          *Board\n\t\tthread            *Post\n\t\tsetup             func() *Post\n\t\terr               string\n\t}{\n\t\t{\n\t\t\tname:     \"repost thread\",\n\t\t\ttitle:    \"Repost Title\",\n\t\t\tbody:     \"Repost body\",\n\t\t\tdstBoard: newBoard(42, \"dst123\", addr, perms),\n\t\t\tsetup:    func() *Post { return createTestThread(t) },\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid repost from reply\",\n\t\t\tsetup: func() *Post { return createTestReply(t) },\n\t\t\terr:   \"cannot repost non-thread post\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\tvar (\n\t\t\t\trepost  *Post\n\t\t\t\tcreator = testutils.TestAddress(\"repostCreator\")\n\t\t\t\tthread  = tc.setup()\n\t\t\t)\n\n\t\t\tcreateRepost := func() {\n\t\t\t\tvar repostId PostID\n\t\t\t\tif tc.dstBoard != nil {\n\t\t\t\t\trepostId = tc.dstBoard.incGetPostID()\n\t\t\t\t}\n\n\t\t\t\trepost = newPost(tc.dstBoard, repostId, creator, tc.title, tc.body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\t\t\t\tthread.AddRepostTo(creator, repost, tc.dstBoard)\n\t\t\t}\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.PanicsWithMessage(t, tc.err, createRepost)\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tuassert.NotPanics(t, createRepost)\n\t\t\t}\n\n\t\t\tr, found := tc.dstBoard.GetThread(repost.GetPostID())\n\t\t\tuassert.True(t, found)\n\t\t\tuassert.True(t, repost == r)\n\t\t\tuassert.Equal(t, tc.title, repost.GetTitle())\n\t\t\tuassert.Equal(t, tc.body, repost.GetBody())\n\t\t\tuassert.Equal(t, uint(thread.GetBoard().GetID()), uint(repost.GetRepostBoardID()))\n\t\t})\n\t}\n}\n\nfunc TestNewThread(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\ttitle := \"Test Title\"\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=0\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\teditURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=EditThread\u0026boardID=%d\u0026body=%s\u0026threadID=%d\u0026title=%s\",\n\t\tuint(boardID),\n\t\tbody,\n\t\tuint(threadID),\n\t\tstrings.ReplaceAll(title, \" \", \"+\"),\n\t)\n\trepostURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateRepost\u0026boardID=%d\u0026body=\u0026destinationBoardID=\u0026threadID=%d\u0026title=\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteThread\u0026boardID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\tflagURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=FlagThread\u0026boardID=%d\u0026reason=\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(threadID),\n\t)\n\n\tthread := newPost(board, threadID, creator, title, body, threadID, 0, 0)\n\n\tuassert.True(t, thread.IsThread())\n\tuassert.Equal(t, uint(threadID), uint(thread.GetPostID()))\n\tuassert.False(t, thread.GetCreatedAt().IsZero())\n\tuassert.True(t, thread.GetUpdatedAt().IsZero())\n\tuassert.Equal(t, title, thread.GetTitle())\n\tuassert.Equal(t, body[:77]+\"...\", thread.GetSummary())\n\tuassert.False(t, thread.HasReplies())\n\tuassert.Equal(t, url, thread.GetURL())\n\tuassert.Equal(t, replyURL, thread.GetReplyFormURL())\n\tuassert.Equal(t, editURL, thread.GetEditFormURL())\n\tuassert.Equal(t, repostURL, thread.GetRepostFormURL())\n\tuassert.Equal(t, deleteURL, thread.GetDeleteFormURL())\n\tuassert.Equal(t, flagURL, thread.GetFlagFormURL())\n}\n\nfunc TestThreadAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tthreadID := uint(thread.GetPostID())\n\tbody := \"A reply\"\n\n\treply := thread.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, threadID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.True(t, thread.HasReplies())\n}\n\nfunc TestThreadGetReply(t *testing.T) {\n\tcases := []struct {\n\t\tname   string\n\t\tthread *Post\n\t\tsetup  func(thread *Post) (replyID PostID)\n\t\tfound  bool\n\t}{\n\t\t{\n\t\t\tname:   \"found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup: func(thread *Post) PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:   \"not found\",\n\t\t\tthread: createTestThread(t),\n\t\t\tsetup:  func(*Post) PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup(tc.thread)\n\n\t\t\treply, found := tc.thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestThreadDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\terr   string\n\t}{\n\t\t{\n\t\t\tname: \"ok\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"ok nested\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.AddReply(testutils.TestAddress(\"replier2\"), \"\").GetPostID()\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname:  \"invalid\",\n\t\t\tsetup: func() PostID { return thread.GetPostID() },\n\t\t\terr:   \"expected an ID of an inner reply\",\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t\terr:   \"reply not found in thread\",\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\terr := thread.DeleteReply(replyID)\n\n\t\t\tif tc.err != \"\" {\n\t\t\t\tuassert.ErrorContains(t, err, tc.err)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tuassert.NoError(t, err)\n\t\t\t_, found := thread.GetReply(replyID)\n\t\t\tuassert.False(t, found)\n\t\t})\n\t}\n}\n\nfunc TestThreadRenderSummary(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestThreadRenderInner(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc TestNewReply(t *testing.T) {\n\tcreator := testutils.TestAddress(\"creator\")\n\tbody := strings.Repeat(\"A\", 82)\n\tboardID := BoardID(1)\n\tthreadID := PostID(42)\n\tparentID := PostID(1)\n\treplyID := PostID(2)\n\tboardName := \"test123\"\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(boardID, boardName, creator, perms)\n\turl := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2:%s/%d/%d\",\n\t\tboardName,\n\t\tuint(threadID),\n\t\tuint(replyID),\n\t)\n\treplyURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=CreateReply\u0026boardID=%d\u0026body=\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\tdeleteURL := ufmt.Sprintf(\n\t\t\"/r/devx000/gnoland/boards2/v1rc2$help\u0026func=DeleteReply\u0026boardID=%d\u0026replyID=%d\u0026threadID=%d\",\n\t\tuint(boardID),\n\t\tuint(replyID),\n\t\tuint(threadID),\n\t)\n\n\treply := newPost(board, replyID, creator, \"\", body, threadID, parentID, 0)\n\n\tuassert.False(t, reply.IsThread())\n\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\tuassert.False(t, reply.GetCreatedAt().IsZero())\n\tuassert.True(t, reply.GetUpdatedAt().IsZero())\n\tuassert.False(t, reply.HasReplies())\n\tuassert.Equal(t, body[:77]+\"...\", reply.GetSummary())\n\tuassert.Equal(t, url, reply.GetURL())\n\tuassert.Equal(t, replyURL, reply.GetReplyFormURL())\n\tuassert.Equal(t, deleteURL, reply.GetDeleteFormURL())\n}\n\nfunc TestReplyAddReply(t *testing.T) {\n\treplier := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tparentReplyID := uint(parentReply.GetPostID())\n\tbody := \"A child reply\"\n\n\treply := parentReply.AddReply(replier, body)\n\n\tr, found := thread.GetReply(reply.GetPostID())\n\tuassert.True(t, found)\n\tuassert.True(t, reply == r)\n\tuassert.Equal(t, parentReplyID, uint(reply.GetParentID()))\n\tuassert.Equal(t, parentReplyID+1, uint(reply.GetPostID()))\n\tuassert.Equal(t, reply.GetCreator(), replier)\n\tuassert.Equal(t, reply.GetBody(), body)\n\tuassert.False(t, reply.HasReplies())\n\tuassert.True(t, parentReply.HasReplies())\n}\n\nfunc TestReplyGetReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"parentReplier\"), \"\")\n\tcases := []struct {\n\t\tname  string\n\t\tsetup func() PostID\n\t\tfound bool\n\t}{\n\t\t{\n\t\t\tname: \"found\",\n\t\t\tsetup: func() PostID {\n\t\t\t\treply := parentReply.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\t\t\t\treturn reply.GetPostID()\n\t\t\t},\n\t\t\tfound: true,\n\t\t},\n\t\t{\n\t\t\tname:  \"not found\",\n\t\t\tsetup: func() PostID { return 42 },\n\t\t},\n\t}\n\n\tfor _, tc := range cases {\n\t\tt.Run(tc.name, func(t *testing.T) {\n\t\t\treplyID := tc.setup()\n\n\t\t\treply, found := thread.GetReply(replyID)\n\n\t\t\tuassert.Equal(t, tc.found, found)\n\t\t\tif reply != nil {\n\t\t\t\tuassert.Equal(t, uint(replyID), uint(reply.GetPostID()))\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunc TestReplyDeleteReply(t *testing.T) {\n\tthread := createTestThread(t)\n\tparentReply := thread.AddReply(testutils.TestAddress(\"replier\"), \"\")\n\treply := parentReply.AddReply(testutils.TestAddress(\"replier2\"), \"\")\n\n\t// NOTE: Deleting a reply from a parent reply should eventually be suported\n\tuassert.PanicsWithMessage(t, \"cannot delete reply from a non-thread post\", func() {\n\t\tparentReply.DeleteReply(reply.GetPostID())\n\t})\n}\n\nfunc TestReplyRender(t *testing.T) {\n\tt.Skip(\"TODO: implement\")\n}\n\nfunc createTestThread(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"creator\")\n\tperms := createDefaultBoardPermissions(creator)\n\tboard := newBoard(1, \"test_board_123\", creator, perms)\n\treturn board.AddThread(creator, \"Title\", \"Body\")\n}\n\nfunc createTestReply(t *testing.T) *Post {\n\tt.Helper()\n\n\tcreator := testutils.TestAddress(\"replier\")\n\tthread := createTestThread(t)\n\treturn thread.AddReply(creator, \"Test message\")\n}\n"},{"name":"public.gno","body":"package boards2\n\nimport (\n\t\"regexp\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n)\n\nconst (\n\t// MaxBoardNameLength defines the maximum length allowed for board names.\n\tMaxBoardNameLength = 50\n\n\t// MaxThreadTitleLength defines the maximum length allowed for thread titles.\n\tMaxThreadTitleLength = 100\n\n\t// MaxReplyLength defines the maximum length allowed for replies.\n\tMaxReplyLength = 300\n)\n\nvar (\n\treBoardName = regexp.MustCompile(`(?i)^[a-z]+[a-z0-9_\\-]{2,50}$`)\n\n\t// Minimalistic Markdown line prefix checks that if allowed would\n\t// break the current UI when submitting a reply. It denies replies\n\t// with headings, blockquotes or horizontal lines.\n\treDeniedReplyLinePrefixes = regexp.MustCompile(`(?m)^\\s*(#|---|\u003e)+`)\n)\n\n// SetHelp sets or updates boards realm help content.\nfunc SetHelp(content string) {\n\tcontent = strings.TrimSpace(content)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{content}\n\tgPerms.WithPermission(caller, PermissionRealmHelp, args, func(Args) {\n\t\tgHelp = content\n\t})\n}\n\n// SetPermissions sets a permissions implementation for boards2 realm or a board.\nfunc SetPermissions(bid BoardID, p Permissions) {\n\tassertRealmIsNotLocked()\n\n\tif p == nil {\n\t\tpanic(\"permissions is required\")\n\t}\n\n\tif bid != 0 {\n\t\tassertBoardExists(bid)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid}\n\tgPerms.WithPermission(caller, PermissionPermissionsUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\t// When board ID is zero it means that realm permissions are being updated\n\t\tif bid == 0 {\n\t\t\tgPerms = p\n\n\t\t\tstd.Emit(\n\t\t\t\t\"RealmPermissionsUpdated\",\n\t\t\t\t\"caller\", caller.String(),\n\t\t\t)\n\t\t\treturn\n\t\t}\n\n\t\t// Otherwise update the permissions of a single board\n\t\tboard := mustGetBoard(bid)\n\t\tboard.perms = p\n\n\t\tstd.Emit(\n\t\t\t\"BoardPermissionsUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t)\n\t})\n}\n\n// SetRealmNotice sets a notice to be displayed globally by the realm.\n// An empty message removes the realm notice.\nfunc SetRealmNotice(message string) {\n\tmessage = strings.TrimSpace(message)\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmNotice, nil, func(Args) {\n\t\tgNotice = message\n\n\t\tstd.Emit(\n\t\t\t\"RealmNoticeChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"message\", message,\n\t\t)\n\t})\n}\n\n// GetBoardIDFromName searches a board by name and returns it's ID.\nfunc GetBoardIDFromName(name string) (_ BoardID, found bool) {\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\treturn 0, false\n\t}\n\treturn v.(*Board).id, true\n}\n\n// CreateBoard creates a new board.\nfunc CreateBoard(name string) BoardID {\n\tassertRealmIsNotLocked()\n\n\tname = strings.TrimSpace(name)\n\tassertIsValidBoardName(name)\n\tassertBoardNameNotExists(name)\n\n\tcaller := std.PreviousRealm().Address()\n\tid := incGetBoardID()\n\targs := Args{name, id}\n\tgPerms.WithPermission(caller, PermissionBoardCreate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(name)\n\n\t\tperms := createDefaultBoardPermissions(caller)\n\t\tboard := newBoard(id, name, caller, perms)\n\t\tgBoardsByID.Set(id.Key(), board)\n\t\tgBoardsByName.Set(name, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardCreated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", id.String(),\n\t\t\t\"name\", name,\n\t\t)\n\t})\n\treturn id\n}\n\n// RenameBoard changes the name of an existing board.\n//\n// A history of previous board names is kept when boards are renamed.\n// Because of that boards are also accesible using previous name(s).\nfunc RenameBoard(name, newName string) {\n\tassertRealmIsNotLocked()\n\n\tnewName = strings.TrimSpace(newName)\n\tassertIsValidBoardName(newName)\n\tassertBoardNameNotExists(newName)\n\n\tboard := mustGetBoardByName(name)\n\tassertBoardIsNotFrozen(board)\n\n\tbid := board.GetID()\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{bid, name, newName}\n\tboard.perms.WithPermission(caller, PermissionBoardRename, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardNameNotExists(newName)\n\n\t\tboard := mustGetBoard(bid)\n\t\tboard.aliases = append(board.aliases, board.name)\n\t\tboard.name = newName\n\n\t\t// Index board for the new name keeping previous indexes for older names\n\t\tgBoardsByName.Set(newName, board)\n\n\t\tstd.Emit(\n\t\t\t\"BoardRenamed\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", bid.String(),\n\t\t\t\"name\", name,\n\t\t\t\"newName\", newName,\n\t\t)\n\t})\n}\n\n// CreateThread creates a new thread within a board.\nfunc CreateThread(boardID BoardID, title, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tbody = strings.TrimSpace(body)\n\tassertBodyIsNotEmpty(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadCreate)\n\n\tthread := board.AddThread(caller, title, body)\n\n\tstd.Emit(\n\t\t\"ThreadCreated\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", thread.GetPostID().String(),\n\t\t\"title\", title,\n\t)\n\n\treturn thread.id\n}\n\n// CreateReply creates a new comment or reply within a thread.\n//\n// The value of `replyID` is only required when creating a reply of another reply.\nfunc CreateReply(boardID BoardID, threadID, replyID PostID, body string) PostID {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyCreate)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\tvar reply *Post\n\tif replyID == 0 {\n\t\t// When the parent reply is the thread just add reply to thread\n\t\treply = thread.AddReply(caller, body)\n\t} else {\n\t\t// Try to get parent reply and add a new child reply\n\t\tparent := mustGetReply(thread, replyID)\n\t\tif parent.IsHidden() || parent.IsReadonly() {\n\t\t\tpanic(\"replying to a hidden or frozen reply is not allowed\")\n\t\t}\n\n\t\treply = parent.AddReply(caller, body)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyCreate\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", reply.GetPostID().String(),\n\t)\n\n\treturn reply.id\n}\n\n// CreateRepost reposts a thread into another board.\nfunc CreateRepost(boardID BoardID, threadID PostID, title, body string, destinationBoardID BoardID) PostID {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tcaller := std.PreviousRealm().Address()\n\tdst := mustGetBoard(destinationBoardID)\n\tassertBoardIsNotFrozen(dst)\n\tassertHasBoardPermission(dst, caller, PermissionThreadRepost)\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\tif thread.IsRepost() {\n\t\tpanic(\"reposting a thread that is a repost is not allowed\")\n\t}\n\n\trepostId := dst.incGetPostID()\n\tbody = strings.TrimSpace(body)\n\trepost := newPost(dst, repostId, caller, title, body, repostId, thread.GetPostID(), thread.GetBoard().GetID())\n\tthread.AddRepostTo(caller, repost, dst)\n\n\tstd.Emit(\n\t\t\"Repost\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"destinationBoardID\", destinationBoardID.String(),\n\t\t\"title\", title,\n\t)\n\n\treturn repostId\n}\n\n// DeleteThread deletes a thread from a board.\n//\n// Threads can be deleted by the users who created them or otherwise by users with special permissions.\nfunc DeleteThread(boardID BoardID, threadID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteThread filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\n\t\tif caller != thread.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionThreadDelete)\n\t\t}\n\t}\n\n\t// Hard delete thread and all its replies\n\tboard.DeleteThread(threadID)\n\n\tstd.Emit(\n\t\t\"ThreadDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t)\n}\n\n// DeleteReply deletes a reply from a thread.\n//\n// Replies can be deleted by the users who created them or otherwise by users with special permissions.\n// Soft deletion is used when the deleted reply contains sub replies, in which case the reply content\n// is replaced by a text informing that reply has been deleted to avoid deleting sub-replies.\nfunc DeleteReply(boardID BoardID, threadID, replyID PostID) {\n\t// Council members should always be able to delete\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner) // TODO: Add DeleteReply filetest cases for realm owners\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\treply := mustGetReply(thread, replyID)\n\n\tif !isRealmOwner {\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertThreadIsNotFrozen(thread)\n\t\tassertReplyIsVisible(reply)\n\t\tassertReplyIsNotFrozen(reply)\n\n\t\tif caller != reply.GetCreator() {\n\t\t\tassertHasBoardPermission(board, caller, PermissionReplyDelete)\n\t\t}\n\t}\n\n\t// Soft delete reply by changing its body when it contains\n\t// sub-replies, otherwise hard delete it.\n\tif reply.HasReplies() {\n\t\treply.Update(reply.GetTitle(), \"This reply has been deleted\")\n\t} else {\n\t\tthread.DeleteReply(replyID)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyDeleted\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t)\n}\n\n// EditThread updates the title and body of thread.\n//\n// Threads can be updated by the users who created them or otherwise by users with special permissions.\nfunc EditThread(boardID BoardID, threadID PostID, title, body string) {\n\tassertRealmIsNotLocked()\n\n\ttitle = strings.TrimSpace(title)\n\tassertTitleIsValid(title)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\tbody = strings.TrimSpace(body)\n\tif !thread.IsRepost() {\n\t\tassertBodyIsNotEmpty(body)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != thread.GetCreator() {\n\t\tassertHasBoardPermission(board, caller, PermissionThreadEdit)\n\t}\n\n\tthread.Update(title, body)\n\n\tstd.Emit(\n\t\t\"ThreadEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"title\", title,\n\t)\n}\n\n// EditReply updates the body of comment or reply.\n//\n// Replies can be updated only by the users who created them.\nfunc EditReply(boardID BoardID, threadID, replyID PostID, body string) {\n\tassertRealmIsNotLocked()\n\n\tbody = strings.TrimSpace(body)\n\tassertReplyBodyIsValid(body)\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\tassertReplyIsNotFrozen(reply)\n\n\tcaller := std.PreviousRealm().Address()\n\tif caller != reply.GetCreator() {\n\t\tpanic(\"only the reply creator is allowed to edit it\")\n\t}\n\n\treply.Update(\"\", body)\n\n\tstd.Emit(\n\t\t\"ReplyEdited\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"body\", body,\n\t)\n}\n\n// InviteMember adds a member to the realm or to a boards.\n//\n// A role can optionally be specified to be assigned to the new member.\n// Board ID is only required when inviting a member to a board.\nfunc InviteMember(boardID BoardID, user std.Address, role Role) {\n\tassertUserAddressIsValid(user)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{user, role}\n\tperms.WithPermission(caller, PermissionMemberInvite, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.AddUser(user, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberInvited\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", user.String(),\n\t\t\t\"role\", string(role),\n\t\t)\n\t})\n}\n\n// RemoveMember removes a member from the realm or a boards.\n//\n// Board ID is only required when removing a member from board.\nfunc RemoveMember(boardID BoardID, member std.Address) {\n\tassertMembersUpdateIsEnabled(boardID)\n\tassertMemberAddressIsValid(member)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\tperms.WithPermission(caller, PermissionMemberRemove, Args{member}, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif !perms.RemoveUser(member) {\n\t\t\tpanic(\"member not found\")\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"MemberRemoved\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t)\n\t})\n}\n\n// IsMember checks if an user is a member of the realm or a board.\n//\n// Board ID is only required when checking if a user is a member of a board.\nfunc IsMember(boardID BoardID, user std.Address) bool {\n\tassertUserAddressIsValid(user)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasUser(user)\n}\n\n// HasMemberRole checks if a realm or board member has a specific role assigned.\n//\n// Board ID is only required when checking a member of a board.\nfunc HasMemberRole(boardID BoardID, member std.Address, role Role) bool {\n\tassertMemberAddressIsValid(member)\n\n\tif boardID != 0 {\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tperms := mustGetPermissions(boardID)\n\treturn perms.HasRole(member, role)\n}\n\n// ChangeMemberRole changes the role of a realm or board member.\n//\n// Board ID is only required when changing the role for a member of a board.\nfunc ChangeMemberRole(boardID BoardID, member std.Address, role Role) {\n\tassertMemberAddressIsValid(member)\n\tassertMembersUpdateIsEnabled(boardID)\n\n\tperms := mustGetPermissions(boardID)\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, member, role}\n\tperms.WithPermission(caller, PermissionRoleChange, args, func(Args) {\n\t\tassertMembersUpdateIsEnabled(boardID)\n\n\t\tif err := perms.SetUserRoles(member, role); err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tstd.Emit(\n\t\t\t\"RoleChanged\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", member.String(),\n\t\t\t\"newRole\", string(role),\n\t\t)\n\t})\n}\n\n// IterateRealmMembers iterates realm members.\n// The iteration is done only for realm members, board members are not iterated.\nfunc IterateRealmMembers(offset int, fn UsersIterFn) (halted bool) {\n\tcount := gPerms.UsersCount() - offset\n\treturn gPerms.IterateUsers(offset, count, fn)\n}\n\n// IterateBoards iterates realm boards.\nfunc IterateBoards(offset int, fn func(ReadonlyBoard) bool) (halted bool) {\n\tcount := gBoardsByID.Size() - offset\n\treturn gBoardsByID.IterateByOffset(offset, count, func(_ string, v any) bool {\n\t\tboard, _ := v.(*Board)\n\t\treturn fn(readonlyBoard{board})\n\t})\n}\n\nfunc assertMemberAddressIsValid(member std.Address) {\n\tif !member.IsValid() {\n\t\tpanic(\"invalid member address\")\n\t}\n}\n\nfunc assertUserAddressIsValid(user std.Address) {\n\tif !user.IsValid() {\n\t\tpanic(\"invalid user address\")\n\t}\n}\n\nfunc assertHasBoardPermission(b *Board, user std.Address, p Permission) {\n\tif !b.perms.HasPermission(user, p) {\n\t\tpanic(\"unauthorized\")\n\t}\n}\n\nfunc assertBoardExists(id BoardID) {\n\tif _, found := getBoard(id); !found {\n\t\tpanic(\"board not found: \" + id.String())\n\t}\n}\n\nfunc assertBoardIsNotFrozen(b *Board) {\n\tif b.IsReadonly() {\n\t\tpanic(\"board is frozen\")\n\t}\n}\n\nfunc assertIsValidBoardName(name string) {\n\tsize := len(name)\n\tif size == 0 {\n\t\tpanic(\"board name is empty\")\n\t}\n\n\tif size \u003e MaxBoardNameLength {\n\t\tn := strconv.Itoa(MaxBoardNameLength)\n\t\tpanic(\"board name is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif !reBoardName.MatchString(name) {\n\t\tpanic(\"board name contains invalid characters\")\n\t}\n}\n\nfunc assertThreadIsNotFrozen(t *Post) {\n\tif t.IsReadonly() {\n\t\tpanic(\"thread is frozen\")\n\t}\n}\n\nfunc assertReplyIsNotFrozen(r *Post) {\n\tif r.IsReadonly() {\n\t\tpanic(\"reply is frozen\")\n\t}\n}\n\nfunc assertNameIsNotEmpty(name string) {\n\tif name == \"\" {\n\t\tpanic(\"name is empty\")\n\t}\n}\n\nfunc assertTitleIsValid(title string) {\n\tif title == \"\" {\n\t\tpanic(\"title is empty\")\n\t}\n\n\tif len(title) \u003e MaxThreadTitleLength {\n\t\tn := strconv.Itoa(MaxThreadTitleLength)\n\t\tpanic(\"thread title is too long, maximum allowed is \" + n + \" characters\")\n\t}\n}\n\nfunc assertBodyIsNotEmpty(body string) {\n\tif body == \"\" {\n\t\tpanic(\"body is empty\")\n\t}\n}\n\nfunc assertBoardNameNotExists(name string) {\n\tif gBoardsByName.Has(name) {\n\t\tpanic(\"board already exists\")\n\t}\n}\n\nfunc assertThreadExists(b *Board, threadID PostID) {\n\tif _, found := b.GetThread(threadID); !found {\n\t\tpanic(\"thread not found: \" + threadID.String())\n\t}\n}\n\nfunc assertReplyExists(thread *Post, replyID PostID) {\n\tif _, found := thread.GetReply(replyID); !found {\n\t\tpanic(\"reply not found: \" + replyID.String())\n\t}\n}\n\nfunc assertThreadIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"thread is hidden\")\n\t}\n}\n\nfunc assertReplyIsVisible(thread *Post) {\n\tif thread.IsHidden() {\n\t\tpanic(\"reply is hidden\")\n\t}\n}\n\nfunc assertReplyBodyIsValid(body string) {\n\tassertBodyIsNotEmpty(body)\n\n\tif len(body) \u003e MaxReplyLength {\n\t\tn := strconv.Itoa(MaxReplyLength)\n\t\tpanic(\"reply is too long, maximum allowed is \" + n + \" characters\")\n\t}\n\n\tif reDeniedReplyLinePrefixes.MatchString(body) {\n\t\tpanic(\"using Markdown headings, blockquotes or horizontal lines is not allowed in replies\")\n\t}\n}\n\nfunc assertMembersUpdateIsEnabled(boardID BoardID) {\n\tif boardID != 0 {\n\t\tassertRealmIsNotLocked()\n\t} else {\n\t\tassertRealmMembersAreNotLocked()\n\t}\n}\n"},{"name":"public_flag.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// SetFlaggingThreshold sets the number of flags required to hide a thread or comment.\n//\n// Threshold is only applicable within the board where it's setted.\nfunc SetFlaggingThreshold(boardID BoardID, threshold int) {\n\tif threshold \u003c 1 {\n\t\tpanic(\"invalid flagging threshold\")\n\t}\n\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\targs := Args{boardID, threshold}\n\tboard.perms.WithPermission(caller, PermissionBoardFlaggingUpdate, args, func(Args) {\n\t\tassertRealmIsNotLocked()\n\n\t\tboard := mustGetBoard(boardID)\n\t\tassertBoardIsNotFrozen(board)\n\n\t\tgFlaggingThresholds.Set(boardID.String(), threshold)\n\t\tstd.Emit(\n\t\t\t\"FlaggingThresholdUpdated\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"threshold\", strconv.Itoa(threshold),\n\t\t)\n\t})\n}\n\n// GetFlaggingThreshold returns the number of flags required to hide a thread or comment within a board.\nfunc GetFlaggingThreshold(boardID BoardID) int {\n\tassertBoardExists(boardID)\n\treturn getFlaggingThreshold(boardID)\n}\n\n// FlagThread adds a new flag to a thread.\n//\n// Flagging requires special permissions and hides the thread when\n// the number of flags reaches a pre-defined flagging threshold.\nfunc FlagThread(boardID BoardID, threadID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionThreadFlag)\n\t}\n\n\tt, ok := board.GetThread(threadID)\n\tif !ok {\n\t\tpanic(\"post doesn't exist\")\n\t}\n\tassertThreadIsNotFrozen(t)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(t, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\tt.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ThreadFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n\n// FlagReply adds a new flag to a comment or reply.\n//\n// Flagging requires special permissions and hides the comment or reply\n// when the number of flags reaches a pre-defined flagging threshold.\nfunc FlagReply(boardID BoardID, threadID, replyID PostID, reason string) {\n\tboard := mustGetBoard(boardID)\n\n\t// Realm owners should be able to flag without permissions even when board is frozen\n\tcaller := std.PreviousRealm().Address()\n\tisRealmOwner := gPerms.HasRole(caller, RoleOwner)\n\tif !isRealmOwner {\n\t\tassertRealmIsNotLocked()\n\t\tassertBoardIsNotFrozen(board)\n\t\tassertHasBoardPermission(board, caller, PermissionReplyFlag)\n\t}\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsNotFrozen(thread)\n\n\tf := Flag{\n\t\tUser:   caller,\n\t\tReason: reason,\n\t}\n\n\t// Realm owners can hide with a single flag\n\thide := flagItem(reply, f, getFlaggingThreshold(boardID))\n\tif hide || isRealmOwner {\n\t\treply.SetVisible(false)\n\t}\n\n\tstd.Emit(\n\t\t\"ReplyFlagged\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"reason\", reason,\n\t)\n}\n"},{"name":"public_freeze.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// FreezeBoard freezes a board so no more threads and comments can be created or modified.\nfunc FreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, true)\n}\n\n// UnfreezeBoard removes frozen status from a board.\nfunc UnfreezeBoard(boardID BoardID) {\n\tsetBoardReadonly(boardID, false)\n}\n\n// IsBoardFrozen checks if a board has been frozen.\nfunc IsBoardFrozen(boardID BoardID) bool {\n\tboard := mustGetBoard(boardID)\n\treturn board.IsReadonly()\n}\n\n// FreezeThread freezes a thread so thread cannot be replied, modified or deleted.\n//\n// Fails if board is frozen.\nfunc FreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, true)\n}\n\n// UnfreezeThread removes frozen status from a thread.\n//\n// Fails if board is frozen.\nfunc UnfreezeThread(boardID BoardID, threadID PostID) {\n\tsetThreadReadonly(boardID, threadID, false)\n}\n\n// IsThreadFrozen checks if a thread has been frozen.\n//\n// Returns true if board is frozen.\nfunc IsThreadFrozen(boardID BoardID, threadID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treturn board.IsReadonly() || thread.IsReadonly()\n}\n\n// UnfreezeReply removes frozen status from a reply.\n//\n// Fails when parent thread or board are frozen.\nfunc UnfreezeReply(boardID BoardID, threadID, replyID PostID) {\n\t// XXX: Is there a use case for also freezing replies?\n\tsetReplyReadonly(boardID, threadID, replyID, false)\n}\n\n// FreezeReply freezes a thread reply so it cannot be modified or deleted.\n//\n// Fails when parent thread or board are frozen.\nfunc FreezeReply(boardID BoardID, threadID, replyID PostID) {\n\tsetReplyReadonly(boardID, threadID, replyID, true)\n}\n\n// IsReplyFrozen checks if a thread reply has been frozen.\n//\n// Returns true when board or a parent thread is frozen.\nfunc IsReplyFrozen(boardID BoardID, threadID, replyID PostID) bool {\n\tboard := mustGetBoard(boardID)\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\treturn board.IsReadonly() || thread.IsReadonly() || reply.IsReadonly()\n}\n\nfunc setReplyReadonly(boardID BoardID, threadID, replyID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionReplyFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tassertThreadIsVisible(thread)\n\tassertThreadIsNotFrozen(thread)\n\n\treply := mustGetReply(thread, replyID)\n\tassertReplyIsVisible(reply)\n\n\tif isReadonly {\n\t\tassertReplyIsNotFrozen(reply)\n\t}\n\n\treply.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ReplyFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"replyID\", replyID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setThreadReadonly(boardID BoardID, threadID PostID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tassertBoardIsNotFrozen(board)\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionThreadFreeze)\n\n\tthread := mustGetThread(board, threadID)\n\tif isReadonly {\n\t\tassertThreadIsNotFrozen(thread)\n\t}\n\n\tthread.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"ThreadFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"threadID\", threadID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n\nfunc setBoardReadonly(boardID BoardID, isReadonly bool) {\n\tassertRealmIsNotLocked()\n\n\tboard := mustGetBoard(boardID)\n\tif isReadonly {\n\t\tassertBoardIsNotFrozen(board)\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tassertHasBoardPermission(board, caller, PermissionBoardFreeze)\n\n\tboard.SetReadonly(isReadonly)\n\n\tstd.Emit(\n\t\t\"BoardFreeze\",\n\t\t\"caller\", caller.String(),\n\t\t\"boardID\", boardID.String(),\n\t\t\"frozen\", strconv.FormatBool(isReadonly),\n\t)\n}\n"},{"name":"public_lock.gno","body":"package boards2\n\nimport (\n\t\"std\"\n\t\"strconv\"\n)\n\n// LockRealm locks the realm making it readonly.\n//\n// WARNING: Realm can't be unlocked once locked.\n//\n// Realm can also be locked without locking realm members.\n// Realm members can be locked when locking the realm or afterwards.\n// This is relevant for two reasons, one so members can be modified after lock.\n// The other is for realm owners, which can delete threads and comments after lock.\nfunc LockRealm(lockRealmMembers bool) {\n\tassertRealmMembersAreNotLocked()\n\n\t// If realm members are not being locked assert that realm is no locked.\n\t// Members can be locked after locking the realm, in a second `LockRealm` call.\n\tif !lockRealmMembers {\n\t\tassertRealmIsNotLocked()\n\t}\n\n\tcaller := std.PreviousRealm().Address()\n\tgPerms.WithPermission(caller, PermissionRealmLock, nil, func(Args) {\n\t\tgLocked.realm = true\n\t\tgLocked.realmMembers = lockRealmMembers\n\n\t\tstd.Emit(\n\t\t\t\"RealmLocked\",\n\t\t\t\"caller\", caller.String(),\n\t\t\t\"lockRealmMembers\", strconv.FormatBool(lockRealmMembers),\n\t\t)\n\t})\n}\n\n// IsRealmLocked checks if boards realm has been locked.\nfunc IsRealmLocked() bool {\n\treturn gLocked.realm\n}\n\n// AreRealmMembersLocked checks if realm members has been locked.\nfunc AreRealmMembersLocked() bool {\n\treturn gLocked.realmMembers\n}\n\nfunc assertRealmIsNotLocked() { // TODO: Add filtests for locked realm case to all public functions\n\tif gLocked.realm {\n\t\tpanic(\"realm is locked\")\n\t}\n}\n\nfunc assertRealmMembersAreNotLocked() { // TODO: Add filtests for locked members case to all public member functions\n\tif gLocked.realmMembers {\n\t\tpanic(\"realm and members are locked\")\n\t}\n}\n"},{"name":"render.gno","body":"package boards2\n\nimport (\n\t\"net/url\"\n\t\"std\"\n\t\"strconv\"\n\t\"strings\"\n\n\t\"gno.land/p/demo/mux\"\n\t\"gno.land/p/jeronimoalbi/pager\"\n\t\"gno.land/p/moul/realmpath\"\n\t\"gno.land/p/moul/txlink\"\n)\n\nconst (\n\tpageSizeBoards  = 6\n\tpageSizeThreads = 6\n\tpageSizeReplies = 10\n)\n\nconst menuManageBoard = \"manageBoard\"\n\nfunc Render(path string) string {\n\trouter := mux.NewRouter()\n\trouter.HandleFunc(\"\", renderBoardsList)\n\trouter.HandleFunc(\"help\", renderHelp)\n\trouter.HandleFunc(\"admin-users\", renderMembers)\n\trouter.HandleFunc(\"{board}\", renderBoard)\n\trouter.HandleFunc(\"{board}/members\", renderMembers)\n\trouter.HandleFunc(\"{board}/{thread}\", renderThread)\n\trouter.HandleFunc(\"{board}/{thread}/{reply}\", renderReply)\n\n\trouter.NotFoundHandler = func(res *mux.ResponseWriter, _ *mux.Request) {\n\t\tres.Write(\"Path not found\")\n\t}\n\n\treturn router.Render(path)\n}\n\nfunc renderHelp(res *mux.ResponseWriter, _ *mux.Request) {\n\tres.Write(\"# Boards Help\\n\")\n\tif gHelp != \"\" {\n\t\tres.Write(gHelp)\n\t} else {\n\t\tres.Write(\"### Help content has not been uploaded\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(newLink(\"upload boards help\", txlink.Call(\"SetHelp\", \"content\", \"\")))\n\t\tres.Write(\" ?\")\n\t}\n}\n\nfunc renderBoardsList(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tres.Write(\"# Boards\\n\\n\")\n\trenderBoardListMenu(res, req)\n\tres.Write(\"\\n\\n---\\n\")\n\n\tif gBoardsByID.Size() == 0 {\n\t\tlink := txlink.Call(\"CreateBoard\", \"name\", \"\")\n\t\tres.Write(\"### Currently there are no boards\\n\")\n\t\tres.Write(\"Be the first to \")\n\t\tres.Write(newLink(\"create a new board\", link))\n\t\tres.Write(\" !\")\n\n\t\treturn\n\t}\n\n\tp, err := pager.New(req.RawPath, gBoardsByID.Size(), pager.WithPageSize(pageSizeBoards))\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\trender := func(_ string, v any) bool {\n\t\tboard := v.(*Board)\n\n\t\tres.Write(\"**\" + newLink(board.GetName(), board.GetURL()) + \"**  \\n\")\n\t\tres.Write(\"Created by \" + newUserLink(board.creator) + \" \")\n\t\tres.Write(\"on \" + board.createdAt.Format(dateFormat))\n\t\tres.Write(\", #\" + board.id.String() + \"  \\n\")\n\t\tres.Write(\"**\" + strconv.Itoa(board.threads.Size()) + \" threads\")\n\t\tif board.IsReadonly() {\n\t\t\tres.Write(\", read-only\")\n\t\t}\n\n\t\tres.Write(\"**\\n\\n\")\n\t\treturn false\n\t}\n\n\tres.Write(\"Sort by: \")\n\tr := realmpath.Parse(req.RawPath)\n\tif r.Query.Get(\"order\") == \"desc\" {\n\t\tr.Query.Set(\"order\", \"asc\")\n\t\tres.Write(newLink(\"newest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.ReverseIterateByOffset(p.Offset(), p.PageSize(), render)\n\t} else {\n\t\tr.Query.Set(\"order\", \"desc\")\n\t\tres.Write(newLink(\"oldest first\", r.String()))\n\t\tres.Write(\"\\n\\n\")\n\t\tgBoardsByID.IterateByOffset(p.Offset(), p.PageSize(), render)\n\t}\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n---\\n\")\n\t\tres.Write(pager.Picker(p))\n\t}\n}\n\nfunc renderBoardListMenu(res *mux.ResponseWriter, req *mux.Request) {\n\tpath := strings.TrimPrefix(std.CurrentRealm().PkgPath(), \"gno.land\")\n\n\tres.Write(newLink(\"Create Board\", txlink.Call(\"CreateBoard\", \"name\", \"\")))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"List Admin Users\", path+\":admin-users\"))\n\tres.Write(\" • \")\n\tres.Write(newLink(\"Help\", path+\":help\"))\n\tres.Write(\"\\n\\n\")\n}\n\nfunc renderBoard(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tlink := newLink(\"create a new board\", txlink.Call(\"CreateBoard\", \"name\", name))\n\t\tres.Write(\"### The board you are looking for does not exist\\n\")\n\t\tres.Write(\"Do you want to \")\n\t\tres.Write(link)\n\t\tres.Write(\" ?\")\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tmenu := renderBoardMenu(board, req)\n\n\tres.Write(board.Render(req.RawPath, menu))\n}\n\nfunc renderBoardMenu(board *Board, req *mux.Request) string {\n\tvar (\n\t\tb               strings.Builder\n\t\tboardMembersURL = board.GetPath() + \"/members\"\n\t)\n\n\tif board.IsReadonly() {\n\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\tb.WriteString(\" • \")\n\t\tb.WriteString(newLink(\"Unfreeze Board\", board.GetUnfreezeFormURL()))\n\t\tb.WriteString(\"\\n\")\n\t} else {\n\t\tb.WriteString(newLink(\"Create Thread\", board.GetPostFormURL()))\n\t\tb.WriteString(\" • \")\n\n\t\tmenu := getCurrentMenu(req.RawPath)\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"**Manage Board**\")\n\t\t} else {\n\t\t\tb.WriteString(newLink(\"Manage Board\", menuURL(menuManageBoard)))\n\t\t}\n\n\t\tb.WriteString(\"  \\n\")\n\n\t\tif menu == menuManageBoard {\n\t\t\tb.WriteString(\"↳\")\n\t\t\tb.WriteString(newLink(\"Invite Member\", board.GetInviteMemberFormURL()))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"List Members\", boardMembersURL))\n\t\t\tb.WriteString(\" • \")\n\t\t\tb.WriteString(newLink(\"Freeze Board\", board.GetFreezeFormURL()))\n\t\t\tb.WriteString(\"\\n\\n\")\n\t\t}\n\t}\n\n\treturn b.String()\n}\n\nfunc renderThread(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + rawID)\n\t} else if thread.IsHidden() {\n\t\tres.Write(\"Thread with ID: \" + rawID + \" has been flagged as inappropriate\")\n\t} else {\n\t\tres.Write(thread.Render(req.RawPath, \"\", 5))\n\t}\n}\n\nfunc renderReply(res *mux.ResponseWriter, req *mux.Request) {\n\trenderNotice(res)\n\n\tname := req.GetVar(\"board\")\n\tv, found := gBoardsByName.Get(name)\n\tif !found {\n\t\tres.Write(\"Board does not exist: \" + name)\n\t\treturn\n\t}\n\n\trawID := req.GetVar(\"thread\")\n\ttID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid thread ID: \" + rawID)\n\t\treturn\n\t}\n\n\trawID = req.GetVar(\"reply\")\n\trID, err := strconv.Atoi(rawID)\n\tif err != nil {\n\t\tres.Write(\"Invalid reply ID: \" + rawID)\n\t\treturn\n\t}\n\n\tboard := v.(*Board)\n\tthread, found := board.GetThread(PostID(tID))\n\tif !found {\n\t\tres.Write(\"Thread does not exist with ID: \" + req.GetVar(\"thread\"))\n\t\treturn\n\t}\n\n\treply, found := thread.GetReply(PostID(rID))\n\tif !found {\n\t\tres.Write(\"Reply does not exist with ID: \" + rawID)\n\t\treturn\n\t}\n\n\t// Call render even for hidden replies to display children.\n\t// Original comment content will be hidden under the hood.\n\t// See: #3480\n\tres.Write(reply.RenderInner())\n}\n\nfunc renderMembers(res *mux.ResponseWriter, req *mux.Request) {\n\tboardID := BoardID(0)\n\tperms := gPerms\n\tname := req.GetVar(\"board\")\n\tif name != \"\" {\n\t\tv, found := gBoardsByName.Get(name)\n\t\tif !found {\n\t\t\tres.Write(\"### Board not found\")\n\t\t\treturn\n\t\t}\n\n\t\tboard := v.(*Board)\n\t\tboardID = board.GetID()\n\t\tperms = board.perms\n\n\t\tres.Write(\"# \" + board.GetName() + \" Members\\n\")\n\t\tres.Write(\"### These are the board members\\n\\n\")\n\t} else {\n\t\tres.Write(\"# Admin Users\\n\")\n\t\tres.Write(\"### These are the admin users of the realm\\n\\n\")\n\t}\n\n\t// Create a pager with a small page size to reduce\n\t// the number of username lookups per page.\n\tp, err := pager.New(req.RawPath, perms.UsersCount(), pager.WithPageSize(5))\n\tif err != nil {\n\t\tres.Write(err.Error())\n\t\treturn\n\t}\n\n\tres.Write(\"| Member | Role | Actions |\\n| --- | --- | --- |\\n\")\n\tperms.IterateUsers(p.Offset(), p.PageSize(), func(u User) bool {\n\t\tres.Write(\"| \")\n\t\tres.Write(newUserLink(u.Address))\n\t\tres.Write(\" | \")\n\t\tres.Write(rolesToString(u.Roles))\n\t\tres.Write(\" | \")\n\t\tres.Write(newLink(\"remove\", txlink.Call(\n\t\t\t\"RemoveMember\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t)))\n\t\tres.Write(\" • \")\n\t\tres.Write(newLink(\"change role\", txlink.Call(\n\t\t\t\"ChangeMemberRole\",\n\t\t\t\"boardID\", boardID.String(),\n\t\t\t\"member\", u.Address.String(),\n\t\t\t\"role\", \"\",\n\t\t)))\n\t\tres.Write(\" |\\n\")\n\t\treturn false\n\t})\n\n\tif p.HasPages() {\n\t\tres.Write(\"\\n\\n\" + pager.Picker(p))\n\t}\n}\n\nfunc renderNotice(res *mux.ResponseWriter) {\n\tif gNotice == \"\" {\n\t\treturn\n\t}\n\n\tres.Write(\"\u003e \")\n\tres.Write(gNotice)\n\tres.Write(\"\\n\\n\")\n}\n\nfunc rolesToString(roles []Role) string {\n\tif len(roles) == 0 {\n\t\treturn \"\"\n\t}\n\n\tnames := make([]string, len(roles))\n\tfor i, r := range roles {\n\t\tnames[i] = string(r)\n\t}\n\treturn strings.Join(names, \", \")\n}\n\nfunc menuURL(name string) string {\n\t// TODO: Menu URL works because no other GET arguments are being used\n\treturn \"?menu=\" + name\n}\n\nfunc getCurrentMenu(rawURL string) string {\n\t_, rawQuery, found := strings.Cut(rawURL, \"?\")\n\tif !found {\n\t\treturn \"\"\n\t}\n\n\tquery, _ := url.ParseQuery(rawQuery)\n\treturn query.Get(\"menu\")\n}\n"},{"name":"z_0_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(\"test123\")\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_0_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tboardName = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(boardName)\n}\n\nfunc main() {\n\tboards2.CreateBoard(boardName)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_0_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_0_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"gnoland\")\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_0_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar name = strings.Repeat(\"X\", boards2.MaxBoardNameLength+1)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(name)\n}\n\n// Error:\n// board name is too long, maximum allowed is 50 characters\n"},{"name":"z_0_h_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname   = \"test123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\tboards2.InviteMember(0, member, boards2.RoleOwner) // Operate on realm DAO members instead of individual boards\n\ttesting.SetOriginCaller(member)\n\tusers.Register(name)\n}\n\nfunc main() {\n\tbid := boards2.CreateBoard(name)\n\tprintln(\"ID =\", bid)\n}\n\n// Output:\n// ID = 1\n"},{"name":"z_0_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateBoard(\"test123\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread as a moderator\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagThread(404, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_10_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Make the next call as an uninvited user\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_10_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, 404, \"\")\n}\n\n// Error:\n// post doesn't exist\n"},{"name":"z_10_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_10_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to flag threads\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_10_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with a specific flagging threshold\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Invite a moderator to the new board\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\n\t// Create a new thread and flag it as a moderator\n\ttesting.SetOriginCaller(moderator)\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n}\n\n// Error:\n// item has been already flagged by a current user\n"},{"name":"z_10_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a thread so the realm owner can flag and hide it with a single flag\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\t// Also freeze board to make sure that realm owner can still flag the thread\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagThread(bid, pid, \"\")\n\n\t// Ensure that original thread content not visible\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread with ID: 1 has been flagged as inappropriate\n"},{"name":"z_11_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_11_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditThread(404, 1, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_11_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_11_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_11_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to edit threads\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, body)\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_11_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid   boards2.BoardID\n\tpid   boards2.PostID\n\ttitle = strings.Repeat(\"X\", boards2.MaxThreadTitleLength+1)\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditThread(bid, pid, title, \"bar\")\n}\n\n// Error:\n// thread title is too long, maximum allowed is 100 characters\n"},{"name":"z_12_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbody  = \"Test reply\"\n\tpath  = \"test-board/1/2\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Create a reply and a sub reply\n\tparentRID := boards2.CreateReply(bid, tid, 0, \"Parent\")\n\trid = boards2.CreateReply(bid, tid, parentRID, \"Child\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, body)\n\n\t// Render content must contain the modified reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+body+\"\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_12_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.EditReply(404, 1, 0, \"body\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_12_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, 404, 0, \"body\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_12_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, 404, \"body\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_12_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"new body\")\n}\n\n// Error:\n// only the reply creator is allowed to edit it\n"},{"name":"z_12_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Flag the reply so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"body\")\n}\n\n// Error:\n// reply is hidden\n"},{"name":"z_12_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.EditReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_13_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.FlagReply(404, 1, 1, \"\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_13_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, 404, 1, \"\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_13_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, 404, \"\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_13_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// item flag count threshold exceeded: 1\n"},{"name":"z_13_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_13_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to flag replies\n\tboards2.InviteMember(bid, moderator, boards2.RoleModerator)\n\ttesting.SetOriginCaller(moderator)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_13_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner     = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmoderator = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\trid, tid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Created a board with flagging threshold greater than 1\n\tbid = boards2.CreateBoard(\"test-board\")\n\tboards2.SetFlaggingThreshold(bid, 2)\n\n\t// Create a reply so the realm owner can flag and hide it with a single flag\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\t// Also freeze board to make sure that realm owner can still flag the reply\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FlagReply(bid, tid, rid, \"\")\n\n\t// Render content must contain a message about the hidden reply\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\u003e _⚠ Reply is hidden as it has been flagged as inappropriate_\"))\n}\n\n// Output:\n// true\n"},{"name":"z_14_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_14_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteReply(404, 1, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_14_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, 404, 1)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_14_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, 404)\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_14_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent\")\n\tboards2.CreateReply(bid, tid, rid, \"Child reply\")\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Render content must contain the releted message instead of reply's body\n\tcontent := boards2.Render(\"test-board/1/2\")\n\tprintln(strings.Contains(content, \"\\n\u003e This reply has been deleted\\n\"))\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e Child reply\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_14_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Call using a user that has not permission to delete replies\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_14_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"body\")\n\n\t// Invite a member using a role with permission to delete replies\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteReply(bid, tid, rid)\n\n\t// Ensure reply doesn't exist\n\tprintln(boards2.Render(\"test-board/1/2\"))\n}\n\n// Output:\n// Reply does not exist with ID: 2\n"},{"name":"z_15_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\tboards2.FlagThread(srcBID, srcTID, \"idk\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread is flagged\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_15_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID = 1024\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n}\n\nfunc main() {\n\t// Repost should fail if source thread doesn't exist\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// thread does not exist with ID: 1024\n"},{"name":"z_15_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"Foo\", \"bar\")\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"foo\", \"bar\", dstBID)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_15_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\t\"gno.land/p/demo/ufmt\"\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tsrcBID = boards2.CreateBoard(\"src-board\")\n\tdstBID = boards2.CreateBoard(\"dst-board\")\n\n\tsrcTID = boards2.CreateThread(srcBID, \"original title\", \"original text\")\n}\n\nfunc main() {\n\t// Success case\n\ttID := boards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n\tp := ufmt.Sprintf(\"dst-board/%s\", tID)\n\tout := boards2.Render(p)\n\n\tprintln(strings.Contains(out, \"original text\"))\n\tprintln(strings.Contains(out, \"repost title\"))\n\tprintln(strings.Contains(out, \"repost text\"))\n}\n\n// Output:\n// true\n// true\n// true\n"},{"name":"z_15_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tsrcBID boards2.BoardID\n\tdstBID boards2.BoardID\n\tsrcTID boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Create a board with a thread\n\torigBID := boards2.CreateBoard(\"origin-board\")\n\torigTID := boards2.CreateThread(origBID, \"title\", \"text\")\n\n\t// Create a second board and repost a thread using an empty title\n\tsrcBID = boards2.CreateBoard(\"source-board\")\n\tsrcTID = boards2.CreateRepost(origBID, origTID, \"original title\", \"original text\", srcBID)\n\n\t// Create a third board to try reposting the repost\n\tdstBID = boards2.CreateBoard(\"destination-board\")\n}\n\nfunc main() {\n\tboards2.CreateRepost(srcBID, srcTID, \"repost title\", \"repost text\", dstBID)\n}\n\n// Error:\n// reposting a thread that is a repost is not allowed\n"},{"name":"z_16_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 4)\n\n\t// Ensure that flagging threshold changed\n\tprintln(boards2.GetFlaggingThreshold(bid))\n}\n\n// Output:\n// 4\n"},{"name":"z_16_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nconst bid boards2.BoardID = 404\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(bid, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_16_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetFlaggingThreshold(1, 0)\n}\n\n// Error:\n// invalid flagging threshold\n"},{"name":"z_17_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsBoardFrozen(bid))\n}\n\n// Output:\n// true\n"},{"name":"z_17_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\tboards2.FreezeBoard(bid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_18_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_18_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\tuser = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid  = boards2.BoardID(0)                                      // Operate on realm instead of individual boards\n)\n\nvar perms boards2.Permissions\n\nfunc init() {\n\t// Create a new permissions instance\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_18_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tcommondao \"gno.land/p/devx000/gnoland/commondao/v1rc1\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tperms boards2.Permissions\n\tbid   boards2.BoardID\n)\n\nfunc init() {\n\t// Create a new permissions instance without users\n\tperms = boards2.NewDefaultPermissions(commondao.New())\n\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foobar\")\n}\n\nfunc main() {\n\tboards2.SetPermissions(bid, perms)\n\n\t// Owner that setted new board permissions is not a member of the new permissions\n\tprintln(boards2.IsMember(bid, owner))\n}\n\n// Output:\n// false\n"},{"name":"z_19_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeBoard(bid)\n}\n\nfunc main() {\n\t// Attempt to freeze a thread on frozen board\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// board is frozen\n"},{"name":"z_19_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a frozen thread\n\tboards2.FreezeThread(bid, tid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_19_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n}\n\n// Output:\n// true\n"},{"name":"z_1_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, boards2.RoleOwner)\n}\n\n// Error:\n// only owners are allowed to invite other owners\n"},{"name":"z_1_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tuser  = std.Address(\"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\")\n\trole  = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\t// Add an admin member\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\t// Next call will be done by the admin member\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// true\n"},{"name":"z_1_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, user, boards2.Role(\"foobar\")) // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// invalid role: foobar\n"},{"name":"z_1_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole  = boards2.RoleOwner\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\") // Operate on board DAO members\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n\n\t// Check that user is invited\n\tprintln(boards2.HasMemberRole(0, user, role)) // Operate on realm DAO\n\tprintln(boards2.HasMemberRole(bid, user, role))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_1_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, user, role)\n}\n\nfunc main() {\n\tboards2.InviteMember(bid, user, role)\n}\n\n// Error:\n// user already exists\n"},{"name":"z_1_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.InviteMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_20_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// Attempt to freeze a reply on frozen thread\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_20_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\nfunc main() {\n\t// Attempt to freeze already frozen reply\n\tboards2.FreezeReply(bid, tid, rid)\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_20_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// reply frozen\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.FreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeReply(bid, tid, rid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// thread frozen\n\tboards2.FreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeThread(bid, tid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\n\t// board frozen\n\tboards2.FreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n\tboards2.UnfreezeBoard(bid)\n\tprintln(boards2.IsReplyFrozen(bid, tid, rid))\n}\n\n// Output:\n// false\n// true\n// false\n// true\n// false\n// true\n// false\n"},{"name":"z_20_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n\trid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply\")\n}\n\nfunc main() {\n\t// unfrozen thread - should work\n\tr2 := boards2.CreateReply(bid, tid, rid, \"child 1\")\n\n\t// frozen thread - can't reply\n\tboards2.FreezeReply(bid, tid, rid)\n\tboards2.CreateReply(bid, tid, r2, \"child 2\")\n}\n\n// Error:\n// reply is frozen\n"},{"name":"z_21_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n}\n\n// Output:\n// true\n"},{"name":"z_21_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Set an initial message so it can be cleared\n\tboards2.SetRealmNotice(\"This is a test realm message\")\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"\")\n\n\t// Render content must contain the message\n\tcontent := boards2.Render(\"\")\n\tprintln(strings.HasPrefix(content, \"\u003e This is a test realm message\\n\\n\"))\n\tprintln(strings.HasPrefix(content, \"# Boards\"))\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_21_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to set realm notice\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.SetRealmNotice(\"Foo\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// false\n"},{"name":"z_22_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// realm is locked\n"},{"name":"z_22_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\t// Call realm with a user that has not permission to lock the realm\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(false)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_22_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_22_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.LockRealm(true)\n}\n\nfunc main() {\n\t// Should fail because realm is already locked\n\tboards2.LockRealm(true)\n}\n\n// Error:\n// realm and members are locked\n"},{"name":"z_22_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\t// Lock the realm without locking realm members\n\tboards2.LockRealm(false)\n}\n\nfunc main() {\n\tboards2.LockRealm(true)\n\tprintln(boards2.IsRealmLocked())\n\tprintln(boards2.AreRealmMembersLocked())\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_23_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateRealmMembers(0, func(u boards2.User) bool {\n\t\tprintln(u.Address, string(u.Roles[0]))\n\t\treturn false\n\t})\n}\n\n// Output:\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_24_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid := boards2.CreateBoard(\"test123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleAdmin)\n\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleOwner)\n\tboards2.InviteMember(bid, \"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\", boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.IterateBoards(0, func(b boards2.ReadonlyBoard) bool {\n\t\tprintln(b.ID().String())\n\t\tprintln(b.Name())\n\n\t\tb.IterateMembers(0, b.MembersCount(), func(u boards2.User) bool {\n\t\t\tprintln(u.Address, string(u.Roles[0]))\n\t\t\treturn false\n\t\t})\n\t})\n}\n\n// Output:\n// 1\n// test123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj admin\n// 2\n// foo123\n// g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5 owner\n// g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj owner\n// g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5 admin\n"},{"name":"z_2_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Test comment\"\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\trid := boards2.CreateReply(bid, tid, 0, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid == 2)\n\n\t// Render content must contain the reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateReply(404, 1, 0, \"comment\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_2_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, 404, 0, \"comment\")\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_2_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 404, \"comment\")\n}\n\n// Error:\n// reply does not exist with ID: 404\n"},{"name":"z_2_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Hide thread by flagging it so reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide thread by flagging it so reply of a reply can't be submitted\n\tboards2.FlagThread(bid, tid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// thread is hidden\n"},{"name":"z_2_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"thread\", \"thread\")\n\trid = boards2.CreateReply(bid, tid, 0, \"reply1\")\n\n\t// Hide reply by flagging it so sub reply can't be submitted\n\tboards2.FlagReply(bid, tid, rid, \"reason\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"reply1.1\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"Test reply\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_2_i_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_2_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tpath    = \"test-board/1/2\"\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"First comment\")\n}\n\nfunc main() {\n\trid2 := boards2.CreateReply(bid, tid, rid, comment)\n\n\t// Ensure that returned ID is right\n\tprintln(rid2 == 3)\n\n\t// Render content must contain the sub-reply\n\tcontent := boards2.Render(path)\n\tprintln(strings.Contains(content, \"\\n\u003e \u003e \"+comment+\"\\n\"))\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_2_k_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tcomment = \"Second comment\"\n)\n\nvar (\n\tbid      boards2.BoardID\n\ttid, rid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\trid = boards2.CreateReply(bid, tid, 0, \"Parent comment\")\n\n\t// Flag parent post so it's hidden\n\tboards2.FlagReply(bid, tid, rid, \"\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, rid, \"Sub comment\")\n}\n\n// Error:\n// replying to a hidden or frozen reply is not allowed\n"},{"name":"z_2_l_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\ttid = boards2.CreateThread(bid, \"foo\", \"bar\")\n\tboards2.FreezeThread(bid, tid)\n}\n\nfunc main() {\n\t// cannot reply to a frozen thread\n\tboards2.CreateReply(bid, tid, 0, \"foobar\")\n}\n\n// Error:\n// thread is frozen\n"},{"name":"z_2_m_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, strings.Repeat(\"x\", boards2.MaxReplyLength+1))\n}\n\n// Error:\n// reply is too long, maximum allowed is 300 characters\n"},{"name":"z_2_n_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar (\n\tbid boards2.BoardID\n\ttid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\ttid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\nfunc main() {\n\tboards2.CreateReply(bid, tid, 0, \"\u003e Markdown blockquote\")\n}\n\n// Error:\n// using Markdown headings, blockquotes or horizontal lines is not allowed in replies\n"},{"name":"z_3_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname    = \"foo123\"\n\tnewName = \"bar123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by the default board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"\")\n}\n\n// Error:\n// board name is empty\n"},{"name":"z_3_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, name)\n}\n\n// Error:\n// board already exists\n"},{"name":"z_3_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RenameBoard(\"unexisting\", \"foo\")\n}\n\n// Error:\n// board does not exist with name: unexisting\n"},{"name":"z_3_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\")\n}\n\n// Error:\n// addresses are not allowed as board name\n"},{"name":"z_3_f_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n\n\t// Ensure board is renamed by another board owner\n\tbid2, _ := boards2.GetBoardIDFromName(newName)\n\tprintln(\"IDs match =\", bid == bid2)\n}\n\n// Output:\n// IDs match = true\n"},{"name":"z_3_g_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"short\")\n}\n\n// Error:\n// the minimum allowed board name length is 6 characters\n"},{"name":"z_3_i_filetest.gno","body":"package main\n\n// SEND: 1000000ugnot\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n\tusers \"gno.land/r/gnoland/users/v1\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tmember2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n\tname    = \"foo123\"\n\tnewName = \"barbaz123\"\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\n\tbid = boards2.CreateBoard(name)\n\tboards2.InviteMember(bid, member, boards2.RoleOwner)\n\n\t// Test1 is the boards owner and its address has a user already registered\n\t// so a new member must register a user with the new board name.\n\ttesting.SetOriginCaller(member)\n\tusers.Register(newName)\n\n\t// Invite a new member that doesn't own the user that matches the new board name\n\tboards2.InviteMember(bid, member2, boards2.RoleOwner)\n\ttesting.SetOriginCaller(member2)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, newName)\n}\n\n// Error:\n// board name is a user name registered to a different user\n"},{"name":"z_3_j_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tname  = \"foo123\"\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.CreateBoard(name)\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.RenameBoard(name, \"barbaz\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_4_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleOwner\n\tbid     = boards2.BoardID(0) // Operate on realm DAO instead of individual boards\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tnewRole = boards2.RoleAdmin\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"foo123\")\n\tboards2.InviteMember(bid, member, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole)\n\n\t// Ensure that new role has been changed\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\towner2 = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin  = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, owner2, boards2.RoleOwner)\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, owner2, boards2.RoleAdmin)\n}\n\n// Error:\n// admins are not allowed to remove the Owner role\n"},{"name":"z_4_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tadmin2 = std.Address(\"g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5\")\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleAdmin)\n\tboards2.InviteMember(bid, admin2, boards2.RoleAdmin)\n\n\ttesting.SetOriginCaller(admin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin2, boards2.RoleOwner)\n}\n\n// Error:\n// admins are not allowed to promote members to Owner\n"},{"name":"z_4_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner   = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid     = boards2.BoardID(0)                                      // Operate on realm DAO members instead of individual boards\n\tnewRole = boards2.RoleOwner\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, member, newRole) // Owner can promote other members to Owner\n\n\t// Ensure that new role has been changed to owner\n\tprintln(boards2.HasMemberRole(bid, member, newRole))\n}\n\n// Output:\n// true\n"},{"name":"z_4_f_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, admin, boards2.Role(\"foo\"))\n}\n\n// Error:\n// invalid role: foo\n"},{"name":"z_4_g_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tadmin = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, admin, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(bid, \"invalid address\", boards2.RoleModerator)\n}\n\n// Error:\n// invalid member address\n"},{"name":"z_4_h_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.ChangeMemberRole(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\", boards2.RoleGuest)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, user, boards2.RoleGuest)\n}\n\nfunc main() {\n\tboards2.RemoveMember(bid, user)\n\n\t// Check that user is not a member\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n"},{"name":"z_5_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1w4ek2u33ta047h6lta047h6lta047h6ldvdwpn\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_5_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.RemoveMember(0, \"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // Operate on realm DAO instead of individual boards\n}\n\n// Error:\n// member not found\n"},{"name":"z_6_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\trole   = boards2.RoleGuest\n)\n\nvar bid boards2.BoardID // Operate on board DAO\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\tboards2.InviteMember(bid, member, role)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, member, role))\n\tprintln(boards2.HasMemberRole(bid, member, \"invalid\"))\n\tprintln(boards2.IsMember(bid, member))\n}\n\n// Output:\n// true\n// false\n// true\n"},{"name":"z_6_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n\tbid   = boards2.BoardID(0)                                      // Operate on realm DAO instead of individual boards\n\trole  = boards2.RoleGuest\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tprintln(boards2.HasMemberRole(bid, user, role))\n\tprintln(boards2.IsMember(bid, user))\n}\n\n// Output:\n// false\n// false\n"},{"name":"z_7_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tname  = \"test123\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(name)\n}\n\nfunc main() {\n\tbid2, found := boards2.GetBoardIDFromName(name)\n\tprintln(found)\n\tprintln(bid2 == bid)\n}\n\n// Output:\n// true\n// true\n"},{"name":"z_7_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tbid, found := boards2.GetBoardIDFromName(\"foobar\")\n\tprintln(found)\n\tprintln(bid == 0)\n}\n\n// Output:\n// false\n// true\n"},{"name":"z_8_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"strings\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n\tpath  = \"test-board/1\"\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\ttid := boards2.CreateThread(bid, title, body)\n\n\t// Ensure that returned ID is right\n\tprintln(tid == 1)\n\n\t// Thread should not be frozen by default\n\tprintln(boards2.IsThreadFrozen(bid, tid))\n\n\t// Render content must contains thread's title and body\n\tcontent := boards2.Render(path)\n\tprintln(strings.HasPrefix(content, \"## \"+title))\n\tprintln(strings.Contains(content, body))\n}\n\n// Output:\n// true\n// false\n// true\n// true\n"},{"name":"z_8_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.CreateThread(404, \"Foo\", \"bar\")\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_8_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"bar\")\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_8_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"\", \"bar\")\n}\n\n// Error:\n// title is empty\n"},{"name":"z_8_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test123\")\n}\n\nfunc main() {\n\tboards2.CreateThread(bid, \"Foo\", \"\")\n}\n\n// Error:\n// body is empty\n"},{"name":"z_9_a_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\ttitle = \"Test Thread\"\n\tbody  = \"Test body\"\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, title, body)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"},{"name":"z_9_b_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n}\n\nfunc main() {\n\tboards2.DeleteThread(404, 1)\n}\n\n// Error:\n// board does not exist with ID: 404\n"},{"name":"z_9_c_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst owner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\nvar bid boards2.BoardID\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, 404)\n}\n\n// Error:\n// thread does not exist with ID: 404\n"},{"name":"z_9_d_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tuser  = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Call using a user that has not permission to delete threads\n\ttesting.SetOriginCaller(user)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n}\n\n// Error:\n// unauthorized\n"},{"name":"z_9_e_filetest.gno","body":"package main\n\nimport (\n\t\"std\"\n\t\"testing\"\n\n\tboards2 \"gno.land/r/devx000/gnoland/boards2/v1rc2\"\n)\n\nconst (\n\towner  = std.Address(\"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5\") // @test1\n\tmember = std.Address(\"g1us8428u2a5satrlxzagqqa5m6vmuze025anjlj\") // @test2\n)\n\nvar (\n\tbid boards2.BoardID\n\tpid boards2.PostID\n)\n\nfunc init() {\n\ttesting.SetOriginCaller(owner)\n\tbid = boards2.CreateBoard(\"test-board\")\n\tpid = boards2.CreateThread(bid, \"Foo\", \"bar\")\n\n\t// Invite a member using a role with permission to delete threads\n\tboards2.InviteMember(bid, member, boards2.RoleAdmin)\n\ttesting.SetOriginCaller(member)\n}\n\nfunc main() {\n\tboards2.DeleteThread(bid, pid)\n\n\t// Ensure thread doesn't exist\n\tprintln(boards2.Render(\"test-board/1\"))\n}\n\n// Output:\n// Thread does not exist with ID: 1\n"}]},"deposit":""}],"fee":{"gas_wanted":"90000000","gas_fee":"900000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"bgq2mHaqO+ClZqcBvMmMWga7izsxHfWWkLvVdUj/SREIux9mkLcHZopajDlzRU4k8U9+p/SzvdPV1ClD8QJjDQ=="}],"memo":""},"metadata":{"timestamp":"1743761702"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"RemoveMember","args":["0","g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zFD00e0aO8S4XCcGKK+hYFll9syWCwDLU552HISFFY136K4KdR7O3SYzcay0KJio6THBkoPzfjlp0pdrrSZaCw=="}],"memo":""},"metadata":{"timestamp":"1743761807"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["EmptyWithManyMembers"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"vNXG8vCPc5ta7xG0/BQCSnUVa38VwrZOtdy8pUPKITzPoiAuOf+ocKYSZ8eNNkh7IIeqjFYADPgOZeV4HvxhCw=="}],"memo":""},"metadata":{"timestamp":"1743761888"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1hy6zry03hg5d8le9s2w4fxme6236hkgd928dun","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ue4B6yp55w8jKpN2/TFsJrGhwsL0FQfrbFY59a0iYKLeVICAB5gIrsCf98/6Ct1/V6fU2vLJh0vpPekTtwc1Bw=="}],"memo":""},"metadata":{"timestamp":"1743761893"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1e5hud66rs7ye4zgeqmqvwfhurs2mnf408hdqcl","owner"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"a6sqt1qst2TFlGCZoP5DLlOrC+145dUBL9Reb5duDYRGb8aWsRu1nlRurPbtCcig+kp7Nk1MyuMdUBL/lK7yCA=="}],"memo":""},"metadata":{"timestamp":"1743761898"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1vh7krmmzfua5xjmkatvmx09z37w34lsvd2mxa5","admin"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"AnS6SJIzlb3Z5lwMYoeR2KWH8TcOpbi/jH7Vsh9CIEn3KVSckMxDTaYk90fsCYHP2cPMbZfGQwENXQb+9a9bBg=="}],"memo":""},"metadata":{"timestamp":"1743761903"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g12chzmwxw8sezcxe9h2csp0tck76r4ptwdlyyqk","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lLmNQCvV7+oOKZucSXT90nYlTACWN6YEbkZKfccChBh/wUjeqLGS0YyszPxk7YOsj0K2/OGsrYOC0gukKjlMCw=="}],"memo":""},"metadata":{"timestamp":"1743761908"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"InviteMember","args":["1","g1ym6zxff3xq7wfldcs3uyu7x7z40gstggcx8zdj","moderator"]}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"zgzCQlf7PydhnCAGvd8Qx5PotGs1oRONk3nN95k2LIuFEEAVoHxGj+2PtMBQ1f91iTnBsJ1uKUuOJQ0OCsjTAA=="}],"memo":""},"metadata":{"timestamp":"1743761913"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["TheNumber42"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"GJWNOcDkPKGY7PLPSuk2sMiLeBHeDfVKTSCR5ONQGp6pqI9iwCxj1H3cD+bfkCk1+p/UpfubXzU9Ya3q859gBw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761918"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["2","What's your take on it\\?","Seen in many places, unknown to many"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"hA+wCreZUeme6OpRmNOJjo4Xwsz0he5X8mQ4g4MKVkeGqUwlIsG005FxDN/7RssNNFWH8EzGP4MGIozCwEA7AA=="}],"memo":""},"metadata":{"timestamp":"1743761923"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","What do you mean\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"EIVelUPSStgGjqWLsj+NdD0fSHeZvm8Z7RnQvDQSpFuv7mHOGKV52jDZxWwH4lOHL2/e0vJKin2fWyXPF1ClCA=="}],"memo":""},"metadata":{"timestamp":"1743761928"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","0","よんじゅうに\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"rQ64TW3VyqAx0miELawdw5gR6g2lpNemxzXYq/kxToUNU8GYoXn4qWMO6otVdF+nsvQvkJfBBMHg9uIvDALSCw=="}],"memo":""},"metadata":{"timestamp":"1743761933"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["2","1","2","Cuarenta y dos\\?"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"y7zCrmgadsgAQCV6OiINH1LJmQ78gDYUTZ+ny0F1fNCL9nQPvbFTOwr7SX2kuaPe8iKbztZCe6N/1B//EEtpAw=="}],"memo":""},"metadata":{"timestamp":"1743761938"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ThreadsExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"lH+1XZ2fVmGI2PXKfYUxKBFXKw3db+JjwAjECmsH4VXo+ppDtf79dEux0SdRltNdbx4zEW9O/3WENwu3hg5SBA=="}],"memo":""},"metadata":{"timestamp":"1743761943"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Seventh","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"6NX0nRYSSn12bZ78/dmmYxWXM4IK9yQjLAomZn7edZ8Ri5BAtqZOSwvXbhZ0BFcUTgosLAgyrX30LteqkNnxBQ=="}],"memo":""},"metadata":{"timestamp":"1743761948"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Sixth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"sIPoU9jO89zc4y1GAYITh3PU9zJVGY3ugfSMsoBBxc93lOXDLAFUE+2AMQa/7Kwfyo1af4FXXFfygYCCICYSAg=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743761953"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fifth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"KdKslB6f6JkEB3boj5CZ1cIAOdAdF3bJ6cX6dsrT4XBK3u41XzmAK96gilAtVcVpCqNpnLul6wbbL+0exHd4AA=="}],"memo":""},"metadata":{"timestamp":"1743761958"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Fourth","Let's discuss something"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"D1fMGgWqqsxK7vF0ojPp36NpP6eU+1LsEUdbC2NL/xjhlsZfgU7Vu2XmXjFhFM9B2VGCwUBnEaMVufr3rW1HCQ=="}],"memo":""},"metadata":{"timestamp":"1743761963"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Third","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"h4uy78ABsfnWCUqmuzoU8ZUdJ7jpJrZa7J/cv/kvFT3peJhE2Rv7VrkTYcaZHKKjzWG14JmND4ZaaJnNr907Ag=="}],"memo":""},"metadata":{"timestamp":"1743761968"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","Second","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"5dDdgrVSfFfD9kYaBD369pxn1g7l6jDOaNANwcuxGwhUaT9j5pcroAqHHTu5UJf4sekSNb/nSNEp37ucimaCCQ=="}],"memo":""},"metadata":{"timestamp":"1743761973"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["3","First with many Replies","Let's discuss"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"OmSespthAIe99nCg3NNVqwdogdID85sViEarnls5JCXhygv/lzl79T4CFQIa42T13gOLMkPX9fm7OwT8mU1RAQ=="}],"memo":""},"metadata":{"timestamp":"1743761978"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"ZDniAUL1tJpPm4oBs4ExDExl8MJMedEzUBdezq600CaJEYvBznvd3vueZ5siRp7tHdaV0DgNmcXzZ+OxpqcQCg=="}],"memo":""},"metadata":{"timestamp":"1743761983"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","8","Sub First"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F8ifXbTQbXb5RSL61RUb9S0tBzok3uo8RTDhh0501znHUYKYILNSitQg9Ak6XmwcV0UQcgO9zzLx316DBB7YBg=="}],"memo":""},"metadata":{"timestamp":"1743761988"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Second"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"CkwjnV+bUGNb/AghoAxE8xc8/BZwAp5Qdhy4xkfZrtUpxGDRt1ji9DaM2ZzUQnDBQeXiev5RiZyA7I4gwva7Dw=="}],"memo":""},"metadata":{"timestamp":"1743761993"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Third"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3sNgEYAAHfXxWFQdYzafqv5vsFDEBMdCE3RRaKyQEQxpX92yNavn05wq7EtOeiIymOD1B7LWBUCDIGMxO27iBw=="}],"memo":""},"metadata":{"timestamp":"1743761998"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fourth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yVMsA1dVS5o2dpm1EoxH55Ybm8sBwbmeCFhyboRoWjp9qnZhLXLvzu73jo0nZa8xJialU0upoHcWrr76K5rPBw=="}],"memo":""},"metadata":{"timestamp":"1743762003"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Fifth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"UEHh1VeBqkL3lCultuOyGU0LDvVTlrhg6wTJqAn+5gF2QUKWZi3Gn4CBbkoY0byq1OCDXr6R/K+SP3aB8QObAw=="}],"memo":""},"metadata":{"timestamp":"1743762008"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Sixth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"3kby94L/InKntqzU+T3NRDno58jFcx87O0/FldOxJDlcT56+WaKthft6n+Wp0Jl1lz8Xv3LmgwGWQ3Pc52+oBg=="}],"memo":""},"metadata":{"timestamp":"1743762013"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Seventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"L/zuxl0k3DoZFKNs/kGgaEh1ROr/YafHDEmXlJw9aD/jH2Mbm/PhvU3La/o0PchdGC0A42xuwZ+SeMQIyUVdCA=="}],"memo":""},"metadata":{"timestamp":"1743762018"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eigth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VpVi4ICdRdDP3sT2HJNj5Vl5gFKZxgy+58rqpnkR8l1QBLPZDjP+hklXzsmhDouMdI+ssFCTU4mD1/W7sGUQAw=="}],"memo":""},"metadata":{"timestamp":"1743762023"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Ninth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"u/zQSKIjPHAPocj4hEnEw441VWRByccTtenD12X8cBnYxBDHNV87PR+JBWUjNXN7GLZfPcjK5igMD2l5IqhwDA=="}],"memo":""},"metadata":{"timestamp":"1743762028"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Tenth"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tnUlmhe3JjOtRxnpCDbYcpaeF3rNa8N0F5EYwJU8ba8zDX9St1hiBp66tScfyYbTeLE2aTRmUa8E+zh730++BA=="}],"memo":""},"metadata":{"timestamp":"1743762033"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateReply","args":["3","7","0","Eleventh"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"q43M1mc9mbW7TJWgTyT1L37ePTd7N1hkAWbUUfMztPKCblhBrECCKrzMwiE5iL+afNgiWGZcCpFc5KwtwPSyCQ=="}],"memo":""},"metadata":{"timestamp":"1743762039"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["ReadOnlyExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"STdbtDRKw327m8lDyp9W1Fnr2A3iC2uws1pBNHuL9xya2JE6IYbU0Fe12FThHOLWK80Yp+L43bgVNOSOamrWAg=="}],"memo":""},"metadata":{"timestamp":"1743762044"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["4","Example Thread","This thread shouldn't be writable"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HaJ2B8/gC/qRQxVQVYF4TUIkqDZiwqa1sqfTP+eIV8Q7gkx1sTOSqcWqvg5mOWw6wBTH9LhUi9lSXVYAUw7eCA=="}],"memo":""},"metadata":{"timestamp":"1743762049"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"FreezeBoard","args":["4"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"SmNrbgokoxiJTXtSIymwGMBphqmB1J06gs/jdVJ1XKUuRO3CMmaJ5ytxvmVvwBlAja4QqA1T7bcgto5T8tv/Cg=="}],"memo":""},"metadata":{"timestamp":"1743762054"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["RepostExample"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jPxomuyfqs6yS9mJ1zXaTs9FWXwgPHaVJcH6/ADQ67I3vPXMxoKqJstfrbxMrvuuqtUPxU+pTgv3Im2lBV+qCA=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Y7gaH5npczgmvSvogQhjRTfOUwuAx7zHASIu/8qg/9ktutVUWnaKojLUFcV4dJg9yXNgEwqqWeidh7RJjGs9Bw=="}],"memo":""},"metadata":{"timestamp":"1743762059"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateRepost","args":["2","1","Custom repost title","Custom repost body","5"]}],"fee":{"gas_wanted":"20000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"VLCyyn5BwJZr8c7LJIX/9fiycuO7cfuq8Ulq6uCa7ZTmaUvPe7Mb2K54gI+4hDxEC+TBNLCTAr4W0YDi7uuaCQ=="}],"memo":""},"metadata":{"timestamp":"1743762064"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HUsxXJsbLLE7eqalnFbxs6QLrCECri8DfkKxQ7I0jDcoAuqpdwFv0TO1Y0WqpYAp1otB2t+BUQoG9VXhmYk3Dw=="}],"memo":""},"metadata":{"timestamp":"1743762325"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"XQlmGs92NlV8UrVFWCivs35isbsW6JNzJB0nmE3vvHZCqpozufS9D9wGALa3Hu0Q9Kpd3d5x2WZ+q2iTmnOxAA=="}],"memo":""},"metadata":{"timestamp":"1743762441"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g16jpf0puufcpcjkph5nxueec8etpcldz7zwgydq","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"SetRealmNotice","args":["A new boards [version](https://gno.land/r/devx000/gnoland/boards2/v1rc2) is available which fixes a couple of issues and explores a UI which is more in line with classic Reddit"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Ua3nwMeerrzI17poTLZrtcvFkUSI0DU94fhwdpAZ0sj3oX+Zdy58QCBr99lqnJK884I7Qv3lORzBynXG5jbwDQ=="}],"memo":""},"metadata":{"timestamp":"1743762466"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g15dz69sch7fkhc9gk57hpe4qea77thmy20apu9x","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jOm/Ey5Yet0YbRBWvunCUZ2NOL5xnAbhuAjNCtgpVt9LvDvgnVhHzhknUrsR7hQwSjqCn98e2+kaSLlxpRoqCg=="}],"memo":""},"metadata":{"timestamp":"1743762511"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762858"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743762953"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1aykqe5ddemku5mwd3elmwtpj8jgss47xrqpag4","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"chG844+xbriyl9WGrlc6xkHm736dDMmfgMfPREBqaiPEII5TfCVIbQ8q6DSR7LSm2+Hja93gLN28dYpl/In2Dw=="}],"memo":""},"metadata":{"timestamp":"1743767985"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g18l9us6trqaljw39j94wzf5ftxmd9qqkvrxghd2","to_address":"g1dtuj65mgja87gh0c45pd3rt4cah0kkw9lzld4y","amount":"10000000ugnot"}],"fee":{"gas_wanted":"10000000","gas_fee":"10000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"HKCPLxCVbpHst0ip432MlUIpiFmurceZOAjNZOCjq3aXAfsNREbyej3mLe240/+w4d7OeGD4LFB/ninsfphACA=="}],"memo":""},"metadata":{"timestamp":"1743768151"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743769312"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["test-manfred"]}],"fee":{"gas_wanted":"50000000","gas_fee":"10000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"4xO97j7lj2RX9s6xjyqRDNGa8qs6kEShqhOJIObF+nH9iKCbmHagUmAJgVbgdauLbAzMMLlx6e05HgwXESc3Cw=="}],"memo":""},"metadata":{"timestamp":"1743774399"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1manfred47kzduec920z88wfr64ylksmdcedlf5","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["6","testing testing","👋"]}],"fee":{"gas_wanted":"50000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"G1ZtT0NfPPwkk8JYdIJD/IEwmoveEfqV53nerV1Jt4K4AKhIHKr//2rMglFermH9UI7JPWIhf8sADVOONCPvCA=="}],"memo":""},"metadata":{"timestamp":"1743774450"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1etcvlu8zyuwnd7w0x0lcu4g2r7yzllyy62gpa5","send":"1000000ugnot","pkg_path":"gno.land/r/demo/wugnot","func":"Deposit","args":null}],"fee":{"gas_wanted":"9104212","gas_fee":"4742446ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"o+0plDtw6ntbQncO7v5Y1GqAV5NE21j8bDyIcKkKMqGO5qYPrutx4yl5WPJAoGz5pg8Howi/Aq/wJzxWHPXjCw=="}],"memo":""},"metadata":{"timestamp":"1743775038"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743775997"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776002"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776017"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"UpdateStatus","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"abVD8zghTuhurQtvCizQ+m2Lh72r0t0AJHh2dt3e+kSQOqjFfZtJ0xO5eNlHm8Kj7nRvTjeVoqmzWdYE3b/sAg=="}],"memo":""},"metadata":{"timestamp":"1743776022"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","send":"","pkg_path":"gno.land/r/moul/home","func":"AddTodo","args":null}],"fee":{"gas_wanted":"2000000000","gas_fee":"6250880ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"QVPKSyUMBAegpEQOOJaR3b5AJ/6/JOYnho5RGXOwljLKICvUVBL/VWULL3UZxdVIE9iu5Azi8KifyivEvhKmDg=="}],"memo":""},"metadata":{"timestamp":"1743776027"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g1672qjrndnpe5gcef3s889lp6fdpeft3ym3pg9w","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"jMs4P0S+0CRrmyxH57/+zoNJSK+fiUMeF+cfos9cX7AkzyZ4DhyqF4Sf4VwVmXbTxcaL+PknQsqrSAaGDHvtBA=="}],"memo":""},"metadata":{"timestamp":"1743776083"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hello","path":"gno.land/r/test12/hello","files":[{"name":"package.gno","body":"package hello\n\nfunc Render(path string) string {\n\treturn \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/demo/eco","func":"Render","args":["Deployed through play.gno.land"]}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"NXiO4V07kWqpEPpSYKqmTsQlZO06J6v5OUF72Mr79nhgleTapAVcCHDnsIx0TxnRZzMNbauF/eXro5zujLUKDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743788578"}}
{"tx":{"msg":[{"@type":"/vm.m_addpkg","creator":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","package":{"name":"hworld","path":"gno.land/r/g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5/hworld","files":[{"name":"package.gno","body":"package hworld\n\nfunc Render(path string) string {\n  return \"Hello World!\"\n}\n"}]},"deposit":""},{"@type":"/vm.m_call","caller":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","send":"","pkg_path":"gno.land/r/sys/users","func":"ResolveName","args":["abc"]}],"fee":{"gas_wanted":"3428737","gas_fee":"7144ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"F0m9qBwjIzAghFc0JygVxaAsdQhQqnpQQw/gaC740ZTHBJL4/TrpaqxPBTdmrtKNIoQsTsQXkC1LZ+fk9BKeDQ=="}],"memo":"Deployed through play.gno.land"},"metadata":{"timestamp":"1743793364"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g150gdvn780ws7a3s9qpdvv7h4d9hq6vh672ely0","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yZMsHEcc7RI4t9HxQZKQikdr8da5aREuDgdhlUOTZXd5xpQXiWU1C2XeFG2pMAMp3CW2jUbaoQe4IJ0PisblAQ=="}],"memo":""},"metadata":{"timestamp":"1743859813"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1qhuef2450xh7g7na8s865nreu2xw8j84kgkvt5","to_address":"g150gdvn780ws7a3s9qpdvv7h4d9hq6vh672ely0","amount":"10000000ugnot"}],"fee":{"gas_wanted":"100000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"yZMsHEcc7RI4t9HxQZKQikdr8da5aREuDgdhlUOTZXd5xpQXiWU1C2XeFG2pMAMp3CW2jUbaoQe4IJ0PisblAQ=="}],"memo":""},"metadata":{"timestamp":"1743937361"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateBoard","args":["FirstCatPost"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"tPVLnUetx7hCfdd5j8R2FiLe3q/I366w2fZvYsdwSqtmOy534t58ykbsw5gRdE0cfWZsROW5a/qB2VWkSCpBCA=="}],"memo":""},"metadata":{"timestamp":"1744009485"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc1","func":"CreateThread","args":["8","First cat post on boards2!","Katt Williams is an American stand-up comedian and actor. https://en.wikipedia.org/wiki/Katt_Williams"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"J09/6ygdvvm58J3jRqMSxafvYfmvs/NzXsmoCjNt4mAkdsJ/W6jJ9rdTd4EJWwIr08M39Drl+1G+kA0UydKaAg=="}],"memo":""},"metadata":{"timestamp":"1744009736"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateBoard","args":["FirstCatPost"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"IOIyEHh8R0fPS4Z/y39Ly5T6h0QMrzeOtIauFapluMfR/TuOKD77EVc679KY08ZzsN15SCrdVa4XGUXcmn2XCQ=="}],"memo":""},"metadata":{"timestamp":"1744009852"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g1juz2yxmdsa6audkp6ep9vfv80c8p5u76e03vvh","send":"","pkg_path":"gno.land/r/devx000/gnoland/boards2/v1rc2","func":"CreateThread","args":["7","First cat post on boards2!","Katt Williams is an American stand-up comedian and actor. https://en.wikipedia.org/wiki/Katt_Williams"]}],"fee":{"gas_wanted":"100000000","gas_fee":"1000000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"N7L0GQbNWXkRA8o6HWji853DzaZPgNEB7MVQ//QMvGqxb0LxlSh+dCHDOljgmB4f/lLC76c4lSAaM2E528FrAA=="}],"memo":""},"metadata":{"timestamp":"1744009907"}}
{"tx":{"msg":[{"@type":"/vm.m_call","caller":"g15nw3tn7623tr48j0awzhg2757lf5yf4mxf9htg","send":"","pkg_path":"gno.land/r/gnoland/users/v1","func":"Register","args":null}],"fee":{"gas_wanted":"12000000","gas_fee":"25000ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"Kxcb8SUyt1qwEVPGwH+QjfhnIU/Vetg8rEX5maDUXteaCI0+dk9UJLuUYCQPyZ3h9Az1q5pHiuO7aZPtKrX0DQ=="}],"memo":""},"metadata":{"timestamp":"1744016099"}}
{"tx":{"msg":[{"@type":"/bank.MsgSend","from_address":"g1jg8mtutu9khhfwc4nxmuhcpftf0pajdhfvsqf5","to_address":"g1u72w5pflnegza4akd2dpqmrmtf76xkp9q5gkkv","amount":"1000000ugnot"}],"fee":{"gas_wanted":"65330","gas_fee":"137ugnot"},"signatures":[{"pub_key":{"@type":"/tm.PubKeyEd25519","value":"uhwPrHKunQXEcnPBQIpYS4+Jlkh9HuBhnMpSCwKI9X4="},"signature":"P4Cm9v4iUId1lkRU80AUxwaw0PZ8i9R9/sz13QhX3FEPFwE97X1xinoL/j9wBYeN0aidrBNtEypeIqyXA8txDw=="}],"memo":""},"metadata":{"timestamp":"1744017391"}}
